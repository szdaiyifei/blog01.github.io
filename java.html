<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="css/prism.min.css"/><link rel="stylesheet" type="text/css" href="css/katex.min.css"/><link rel="stylesheet" type="text/css" href="css/wolai.css"/><title>笔记 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="笔记" class="main-title"></div></div></header><article><h1 id="9zEgQys2bQVZpi3rrXu3xX" class="wolai-block"><span class="inline-wrap">Java 核心笔记</span></h1><div id="gheRcQJi6Eaenng2CDSCVs" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>Java 核心笔记 0.导论</b></span><span class="inline-wrap">
标柱注释
学习方法
</span><span class="inline-wrap"><b>1 java 概述</b></span><span class="inline-wrap">
1.1 转义字符
1.2 注释
1.3 代码规范</span></div></div><h4 id="b1omvki9TFJJWmEKT5EX7b" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="fT3Le4VSmXMoWQTumZNwC4" class="wolai-block"><span class="inline-wrap">1.4 JDK JRE</span></h4><h4 id="pqEZnSMygFUxvmdb1FmDaU" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="c8Ap1CKthhBGC4ok6uW2NJ" class="wolai-block"><span class="inline-wrap">2 变量</span></h4><h4 id="r7XMDwbP1uoRAe8u6DtpYM" class="wolai-block"><span class="inline-wrap">2.1 变量</span></h4><h4 id="q6AnurmSzpmQ7c3MhJfhi1" class="wolai-block"><span class="inline-wrap">2.2 基本数据类型</span></h4><h4 id="23gdHLLoVzT6NVtdn4bfSh" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="dqEAvfzdjBDnxMYS3NDGDc" class="wolai-block"><span class="inline-wrap">2.3 基本数据类型转化</span></h4><h4 id="ombvQKHFXYXB3vwS12VPf4" class="wolai-block"><span class="inline-wrap">2.3.1 自动类型转换</span></h4><h4 id="4xf9aJUM6iAAYoq6RshgnE" class="wolai-block"><span class="inline-wrap">2.3.2 强制类型转换</span></h4><div id="jW9vMeB873amiE5m4z7J5W" class="wolai-block wolai-text"><div><span class="inline-wrap">2.4 基本数据类型和 String 类型转换
</span><span class="inline-wrap"><b>3 运算符</b></span><span class="inline-wrap">
3.1 算数运算符
3.1.1+<span class="jill"></span>号使用
3.1.2 ++<span class="jill"></span>号使用
3.1.3 %<span class="jill"></span>号使用
3.2 关系运算符
3.3 逻辑运算符
3.3.1 &amp;&amp;和&amp;基本规则
3.3.2 ||<span class="jill"></span>和<span class="jill"></span>|<span class="jill"></span>基本规则
3.3.3 ^逻辑异或
3.4 赋值运算符
3.5 三元运算符
3.5 运算符优先级
3.6 标识符的命名规则和规范
3.7 关键字、保留字
3.8 键盘输入
3.9 进制</span></div></div><h4 id="wywwEoz9VkLRDBZsmGRo14" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="c7r62KGKPYjmn3L89B3ZWx" class="wolai-block"><span class="inline-wrap">3.9.1 其他转十进制</span></h4><h4 id="baSZyTH6XXGFek1xGyiSDi" class="wolai-block"><span class="inline-wrap">3.9.2 十进制转其他</span></h4><h4 id="ce4Uwge9Vgjuz95Lh7wWVJ" class="wolai-block"><span class="inline-wrap">3.9.3 二进制转八/十六</span></h4><h4 id="dv3PGCjym8EXmWNtUygiNH" class="wolai-block"><span class="inline-wrap">3.9.4 八/十六进制转二</span></h4><h4 id="krgDV7G8qbEqwykjUk2rEJ" class="wolai-block"><span class="inline-wrap">3.10 原码 反码 补码</span></h4><h4 id="9P8ga19mu9WwdbSigf8JAe" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="gUwRnzC1hPaGsraYbmgGt9" class="wolai-block"><span class="inline-wrap">3.11 位运算符</span></h4><h4 id="bFd9N8K9JPYGooEC5SnafU" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="942dN634ZuWnDsqxDToTme" class="wolai-block"><span class="inline-wrap">4 控制结构</span></h4><h4 id="7fNbNfdbHU7w3hraq786iz" class="wolai-block"><span class="inline-wrap">4.1 顺序</span></h4><code-block id="8DV3hWbjy9NS1t89eh7BKA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">4.2</span> <span class="token function">分支控制</span><span class="token punctuation">(</span><span class="token keyword control-flow">if</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">switch</span><span class="token punctuation">)</span></pre></div></code-block><h4 id="5WoSsm1yrcRXN7PocupijQ" class="wolai-block"><span class="inline-wrap">4.2.1 单分支</span></h4><h4 id="ewUrzTHBHX2UzKB9ZuveCz" class="wolai-block"><span class="inline-wrap">4.2.2 双分支</span></h4><h4 id="bQiySKzgskizBKpeiUqzwE" class="wolai-block"><span class="inline-wrap">4.2.3 多分支</span></h4><h4 id="wwZuAFtep6MemW2C564ELY" class="wolai-block"><span class="inline-wrap">4.2.4 嵌套分支</span></h4><code-block id="oTwE1LY89TDzPJnDgho45i" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">4.2</span><span class="token number">.5</span> <span class="token keyword control-flow">switch</span>分支结构
<span class="token number">4.3</span> <span class="token function">循环控制</span><span class="token punctuation">(</span><span class="token keyword control-flow">for</span> <span class="token keyword control-flow">while</span> <span class="token keyword control-flow">do</span> <span class="token keyword control-flow">while</span><span class="token punctuation">)</span></pre></div></code-block><h4 id="eR7BdNtgQTc9mDdBPvgnCV" class="wolai-block"><span class="inline-wrap">⭐</span></h4><div id="i8b2AjjsNkFfYyyQvMFFwv" class="wolai-block wolai-text"><div><span class="inline-wrap">4.3.1 for 循环控制
4.3.2 while 循环控制
4.3.3 do while 循环控制
4.3.4 多重循环控制
4.4 跳转控制 break
4.5 跳转控制 continue
4.6 跳转控制 return
</span><span class="inline-wrap"><b>5 数组、排序、查找</b></span><span class="inline-wrap">
5.1 数组</span></div></div><h4 id="1CjpsSL9RpKRWDyT4P4Q96" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="vhCmj2hxrp1ycdpUMAuADr" class="wolai-block"><span class="inline-wrap">5.1.1 使用方式</span></h4><h4 id="msKNGbhJyKFsdSpxdX5mPY" class="wolai-block"><span class="inline-wrap">1-动态初始化</span></h4><h4 id="jKStcvBZvg9dccShqHaTrt" class="wolai-block"><span class="inline-wrap">2-动态初始化</span></h4><h4 id="dAcUUdpqA47sFiNBu1LvJz" class="wolai-block"><span class="inline-wrap">3-静态初始化</span></h4><h4 id="6DFqydFC65VMoC5dRMxYPe" class="wolai-block"><span class="inline-wrap">5.1.2 数组赋值机制</span></h4><h4 id="p2Ptvts6m2gFsKp2ak6gs8" class="wolai-block"><span class="inline-wrap">5.1.3 数组拷⻉</span></h4><h4 id="bCufHRjwvt2VjseYcSSHfe" class="wolai-block"><span class="inline-wrap">5.1.4 数组反转</span></h4><h4 id="kosCWUhNeTuKGddKFY29i9" class="wolai-block"><span class="inline-wrap">5.1.6 数组添加</span></h4><h4 id="gRda42eEumZCtjZ8zQ7Vqx" class="wolai-block"><span class="inline-wrap">5.2 二维数组</span></h4><h4 id="cmPhKa5wfcwkD78j2ggRmS" class="wolai-block"><span class="inline-wrap">5.2.1 使用方式</span></h4><h4 id="vjGQYnQas5UJMbLUuU8Qjn" class="wolai-block"><span class="inline-wrap">1-动态初始化</span></h4><h4 id="sGEeqtLhq4cSSaTkTLVLdt" class="wolai-block"><span class="inline-wrap">2-动态初始化 2</span></h4><h4 id="oWWxLxNs3RxqzJLUhsXfvV" class="wolai-block"><span class="inline-wrap">3-动态初始化-列数不确定</span></h4><h4 id="hS9ZzsBva7RkaZJvzL9sBa" class="wolai-block"><span class="inline-wrap">4-静态初始化</span></h4><h4 id="3ZS9N5CfEZ9LJ1GdMU1bAT" class="wolai-block"><span class="inline-wrap">5.3 排序(基础)</span></h4><h4 id="xxK31rfcNTPs1BvKHiJqr1" class="wolai-block"><span class="inline-wrap">5.3.1 排序分类</span></h4><h4 id="9VKJyMuLAd186Mc8tV7y7q" class="wolai-block"><span class="inline-wrap">5.3.2 冒泡排序</span></h4><h4 id="mpA9z5kisy7CX9HxGWPGX5" class="wolai-block"><span class="inline-wrap">5.4 查找(基础)</span></h4><h4 id="uee2Pu84nyWUqFKixqtu6M" class="wolai-block"><span class="inline-wrap">5.4.1 顺序查找</span></h4><h4 id="iWwNGFzqcniy5GNzgRSWv3" class="wolai-block"><span class="inline-wrap">5.4.2 二分查找</span></h4><h4 id="qJkmB1CZJZDuWAMbH1Ehot" class="wolai-block"><span class="inline-wrap">6 面向对象(基础)</span></h4><h4 id="ifgzYUAnkVPANkn7Y6N6A3" class="wolai-block"><span class="inline-wrap">6.1 类与对象</span></h4><h4 id="fEaPo7WJdujxbmsGjN6LhW" class="wolai-block"><span class="inline-wrap">6.1.1 属性/成员变量</span></h4><h4 id="cz7Ux6SfBmQbFsSvhbP8qT" class="wolai-block"><span class="inline-wrap">6.1.2 如何创建对象</span></h4><h4 id="mJSvGCwsYuXjrWkof3sqDu" class="wolai-block"><span class="inline-wrap">6.1.3 对象分配机制</span></h4><h4 id="ba97btrurjamyxEV9LJQDd" class="wolai-block"><span class="inline-wrap">6.2 成员方法</span></h4><h4 id="bQL61DgcBhNXAmJa31CckR" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="9zwLiKik6FSzpnLq4k5sNR" class="wolai-block"><span class="inline-wrap">6.2.1 调用方法：</span></h4><h4 id="f9AqtoYhw2MLpFqpk7BiNc" class="wolai-block"><span class="inline-wrap">6.2.2 调用的内存机制：</span></h4><h4 id="briiH3SBrmadTgfn3tw5bE" class="wolai-block"><span class="inline-wrap">6.2.3 注意事项和细节</span></h4><h4 id="uBj8uKoqHnKwnKcj1pr5EB" class="wolai-block"><span class="inline-wrap">6.3 成员方传法参机制</span></h4><h4 id="wycwKYnAKoquiVHhhsnGnq" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="iA46dLB5VEBM4XUTgJNqxs" class="wolai-block"><span class="inline-wrap">6.3.1 基本数据类型的传参数机制</span></h4><h4 id="1kubhMYnVYJ58qkrw4LxPM" class="wolai-block"><span class="inline-wrap">6.3.2 引用数据类型的传参数机制</span></h4><h4 id="9pjghg1X4WZ5zJDx4USeXp" class="wolai-block"><span class="inline-wrap">6.4 递归</span></h4><code-block id="6qiaQuHwqg6YzRTN5h6kAK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">6.5</span> <span class="token function">方法重载</span> <span class="token punctuation">(</span>overload<span class="token punctuation">)</span></pre></div></code-block><h4 id="pvhrktERVedPntrYxHUAaa" class="wolai-block"><span class="inline-wrap">6.6 可变参数</span></h4><h4 id="3PyzvQBsymowj125ftpu95" class="wolai-block"><span class="inline-wrap">6.7 变量作用域</span></h4><h4 id="8ws8Hb4R3fFRrxNYNuuz44" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="hLhNuSaFSrAGacGua8WCCV" class="wolai-block"><span class="inline-wrap">6.8 构造器</span></h4><h4 id="s5ybAi6F37yuNd9LqUgR2p" class="wolai-block"><span class="inline-wrap">⭐</span></h4><div id="1UFBRKtcKhrjdRrux3G5Cu" class="wolai-block wolai-text"><div><span class="inline-wrap">6.9 this
</span><span class="inline-wrap"><b>7 面向对象(中级)</b></span><span class="inline-wrap">
7.0 IDEA
7.1 包
7.2 访问修饰符
7.3 封装</span></div></div><h4 id="3YxLjvKgeXbuYc9zisKetR" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="uYqmoihmyDkpUjLGsUzQnS" class="wolai-block"><span class="inline-wrap">7.4 继承</span></h4><h4 id="heaiXwj3Fda9faDJpd61N4" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="1D6ADkqGbhQJVYRs33uJVZ" class="wolai-block"><span class="inline-wrap">7.5 多态</span></h4><h4 id="nNnYG83sdyZFgdRFEKSFVC" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="e28oncB7K9obLp2iWz7Vhg" class="wolai-block"><span class="inline-wrap">7.5.1 多态</span></h4><h4 id="4EPYetiyRptSn83Dahr18x" class="wolai-block"><span class="inline-wrap">7.5.2 动态绑定机制</span></h4><h4 id="gg8z53xEa5K1QpKF53Xhmp" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="29oSGs4kvTz9APAcuTrgRf" class="wolai-block"><span class="inline-wrap">7.5.3 多态的应用</span></h4><div id="aN1fiydxh9F53Eb5xCjMLW" class="wolai-block wolai-text"><div><span class="inline-wrap">7.6 Super
7.7 方法重写(overwrite)
7.8 Object 类
7.9 断点调试
</span><span class="inline-wrap"><b>8 面向对象(高级)</b></span><span class="inline-wrap">
8.1 类变量和类方法</span></div></div><h4 id="6hakcuNts82ETHwVfB7gqo" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="uStDoDuvuWeM3EeuqdKuv2" class="wolai-block"><span class="inline-wrap">8.1.1 类变量</span></h4><h4 id="q9wbg8JSfNTAa6SpMQ7vcA" class="wolai-block"><span class="inline-wrap">8.1.2 类方法</span></h4><code-block id="toNPszKag7i2WbXHxn6nm5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">8.2</span> main方法
<span class="token number">8.3</span> 代码块
<span class="token number">8.4</span> 单例设计模式
<span class="token number">8.5</span> final
<span class="token number">8.6</span> 抽象类
<span class="token number">8.7</span> 接口</pre></div></code-block><h4 id="hFjzv4hRm1r4NE7SxrmkxY" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="wwKsmTSpwNUp4PnFkcQUNm" class="wolai-block"><span class="inline-wrap">8.8 内部类</span></h4><h4 id="g5YDTchG7WRfd6jS8LTf9K" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="eS1x3nu4i7SNj6DpCTokC5" class="wolai-block"><span class="inline-wrap">8.8.1 局部内部类</span></h4><h4 id="hwxuPs1ZzyKgknd5t19Bmu" class="wolai-block"><span class="inline-wrap">8.8.2 匿名内部类</span></h4><h4 id="hBdmUmCTzPTsosYBJTnUSk" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="qfditzCM9WsKM8sMehz5ZP" class="wolai-block"><span class="inline-wrap">8.8.3 成员内部类</span></h4><h4 id="3bHGSLAAyBg133trFNx8iN" class="wolai-block"><span class="inline-wrap">8.8.4 静态内部类</span></h4><h4 id="tThVatWLVnX8Jeg1wuTnzk" class="wolai-block"><span class="inline-wrap">8.9 类加载顺序</span></h4><h4 id="kwm4c1W8gFLCexHPyCbrZk" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="1QRLEMT49rZgcXMQYv1neq" class="wolai-block"><span class="inline-wrap">9 枚举和注解</span></h4><h4 id="bzPwYrJUehMmLfRBng8Zs3" class="wolai-block"><span class="inline-wrap">9.1 自定义类实现枚举</span></h4><div id="tA8N9ceBSbsxf1nU472cm6" class="wolai-block wolai-text"><div><span class="inline-wrap">9.2 enum 关键字实现枚举
9.3 JDk 内置的基本注解类型
9.3.1 @Override
9.3.2 @Deprecated
9.3.3 @SuppressWarnings
9.4 元注解：对注解进行注解
</span><span class="inline-wrap"><b>10 异常</b></span><span class="inline-wrap">
10.1 异常体系图</span></div></div><h4 id="99fMkr8raM3Vz8oCvQCwRB" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="m9mVKRGqgvbWBKXTwhZVet" class="wolai-block"><span class="inline-wrap">10.2 常⻅的异常</span></h4><h4 id="tv3qfcHetCXBvgDhX48wb2" class="wolai-block"><span class="inline-wrap">10.3 异常处理</span></h4><h4 id="7CEeqs8sgYZznoPcpkB2Gc" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="naf2R3NN9fpCayP4VJ2fqs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">10.3</span><span class="token number">.1</span> <span class="token keyword control-flow">try</span><span class="token operator">-</span><span class="token keyword control-flow">catch</span><span class="token operator">-</span><span class="token keyword control-flow">finally</span>
<span class="token number">10.3</span><span class="token number">.2</span> throws
<span class="token number">10.4</span> 自定义异常</pre></div></code-block><div id="9qfKvnjaAuu37PeDbnGQfw" class="wolai-block wolai-text"><div><span class="inline-wrap">10.5 throw 和 throws
</span><span class="inline-wrap"><b>11 包装类</b></span><span class="inline-wrap">
11.0 包装类(Integer 例)
11.1 String</span></div></div><h4 id="1kih9FVYyTGJHuvWXUQZhc" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="kZDcWNpmvs3wugcBEyA9JQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">11.2</span> <span class="token maybe-class-name">StringBuffer</span></pre></div></code-block><h4 id="b5oDC1xK9d9CyZHPH3azCz" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="jAqpkXidd7yW5PoaAjM1gJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">11.3</span> <span class="token maybe-class-name">StringBulider</span></pre></div></code-block><h4 id="5F4TQk5TxLf2BjW8cZnga3" class="wolai-block"><span class="inline-wrap">⭐</span></h4><div id="nWouymHJvLAbhdKdqTES62" class="wolai-block wolai-text"><div><span class="inline-wrap">11.4 Math
11.5 Date、Calenda、LocalDate
11.5.1 Date
11.5.2 Calenda
11.5.3 LocalDate
11.6 System
11.7 Arrays
11.8 BigInteger BigDecimal
</span><span class="inline-wrap"><b>12 集合</b></span><span class="inline-wrap">
12.1 集合框架体系</span></div></div><h4 id="5v7hmSt5wjdMjf3fbinvqc" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="bNkgtkvPQaNoxAU3HogGw7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">12.2</span> <span class="token maybe-class-name">Collection</span>
<span class="token number">12.2</span><span class="token number">.1</span> <span class="token maybe-class-name">List</span>
<span class="token number">12.2</span><span class="token number">.1</span><span class="token number">.1</span> 迭代器
<span class="token number">12.2</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token keyword control-flow">for</span>增强循环
<span class="token number">12.2</span><span class="token number">.1</span><span class="token number">.3</span> 普通遍历循环
<span class="token number">12.2</span><span class="token number">.1</span><span class="token number">.4</span> <span class="token maybe-class-name">ArrayList</span></pre></div></code-block><h4 id="u7K7WpYvapSw5n5Hx51gJS" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="aLXsvMqUiNmUZwsbSaXQgT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">12.2</span><span class="token number">.1</span><span class="token number">.5</span> <span class="token maybe-class-name">Vector</span></pre></div></code-block><h4 id="2sXKzMbUBFVC2sQztt1EMv" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="vXmJb5qJMF2c4BXyaA5egK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">12.2</span><span class="token number">.1</span><span class="token number">.6</span> <span class="token maybe-class-name">LinkedList</span>
<span class="token number">12.2</span><span class="token number">.2</span> <span class="token known-class-name class-name">Set</span>
<span class="token number">12.2</span><span class="token number">.2</span><span class="token number">.1</span> <span class="token maybe-class-name">HashSet</span></pre></div></code-block><h4 id="qymJfJYhKkm876NZGmuy3P" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="8pAiUhrfMUPrFzh7Sw7ugH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">12.2</span><span class="token number">.2</span><span class="token number">.2</span> <span class="token maybe-class-name">LinkedHashSet</span>
<span class="token number">12.2</span><span class="token number">.2</span><span class="token number">.3</span> <span class="token maybe-class-name">TreeSet</span>
<span class="token number">12.3</span> <span class="token known-class-name class-name">Map</span>
<span class="token number">12.3</span><span class="token number">.1</span> <span class="token maybe-class-name">HashMap</span></pre></div></code-block><h4 id="f2qT6BLg5Fxg28GLQvjxtr" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="wGXyu6b2Rhcr8iBxoPXuru" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">12.3</span><span class="token number">.2</span> <span class="token maybe-class-name">Hashtable</span>
<span class="token number">12.3</span><span class="token number">.3</span> <span class="token maybe-class-name">LinkedHashMap</span>
<span class="token number">12.3</span><span class="token number">.4</span><span class="token punctuation">.</span> <span class="token property-access"><span class="token maybe-class-name">TreeMap</span></span>
<span class="token number">12.3</span><span class="token number">.5</span><span class="token punctuation">.</span> <span class="token property-access"><span class="token maybe-class-name">Properties</span></span>
<span class="token number">12.4</span> <span class="token maybe-class-name">Collections</span>
<span class="token number">12.5</span> 总结</pre></div></code-block><h4 id="9BdDZBoRXkPsG6HbuSDVBL" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="1a6AJ36T5vd8T6kEvK2UzJ" class="wolai-block"><span class="inline-wrap">13 泛型</span></h4><h4 id="rvbwtURKnnfCvXu5PARwC7" class="wolai-block"><span class="inline-wrap">13.1 泛型</span></h4><h4 id="xzFkQtMPbVvtQBpKyuNMPx" class="wolai-block"><span class="inline-wrap">13.2 自定义泛型</span></h4><h4 id="oL3KkXzXcg8aEMPGzshyun" class="wolai-block"><span class="inline-wrap">13.2.1 泛型类</span></h4><h4 id="oUyBoW35MKev2DrDbXqsDz" class="wolai-block"><span class="inline-wrap">13.2.2 泛型接口</span></h4><h4 id="fM2TY5Kdq2fdDj5KfZQ1EQ" class="wolai-block"><span class="inline-wrap">13.2.3 泛型方法</span></h4><h4 id="eGvPAavo7KJ78A7B2Bc1Jx" class="wolai-block"><span class="inline-wrap">13.3 泛型继承和通配符</span></h4><h4 id="t7oD98JLQETNWBAQYodMam" class="wolai-block"><span class="inline-wrap">14 GUI</span></h4><h4 id="vZhMzEQPEb2weL3vCJus8q" class="wolai-block"><span class="inline-wrap">14.1 绘图</span></h4><h4 id="2Lw6Dx7iXKVei71RPwajCX" class="wolai-block"><span class="inline-wrap">14.2 事件控制</span></h4><h4 id="3nyTv98upCMKbwNJd22fKZ" class="wolai-block"><span class="inline-wrap">15 线程(基础)</span></h4><h4 id="pdyQSthKTcedF2SBswFHaz" class="wolai-block"><span class="inline-wrap">16.1 线程使用</span></h4><code-block id="5T51HLqkDNxmSuUM3EDWgc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">16.1</span><span class="token number">.1</span> 继承Thread</pre></div></code-block><code-block id="15hzzQDC8Cz9T3MKY4A4Bg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">16.1</span><span class="token number">.2</span> 实现Runnable
<span class="token number">16.2</span> 线程方法
<span class="token number">16.3</span> 线程生命周期
<span class="token number">16.4</span> <span class="token maybe-class-name">Synchronized</span></pre></div></code-block><h4 id="szCk6h2EyBxfLyQXTMHG28" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="ic5hJP77Vtj5g5gvFFYRLc" class="wolai-block"><span class="inline-wrap">16.5 互斥锁</span></h4><h4 id="jNWFk4Y1H5G254L3tVQVGo" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="bCV5gjVWxGH11gzVU56dTH" class="wolai-block"><span class="inline-wrap">16.6 死锁</span></h4><h4 id="hgyiWrdKLDgF9iQvDLSZae" class="wolai-block"><span class="inline-wrap">16 IO 流</span></h4><h4 id="aCW8do1y5cpwjUtTAFuCC3" class="wolai-block"><span class="inline-wrap">16.0 文件</span></h4><h4 id="8UkGbGy3gMDGohbCRt8u9b" class="wolai-block"><span class="inline-wrap">16.1 IO 流原理及分类</span></h4><h4 id="gJH8iCkMHQdPxpX6G3XLRx" class="wolai-block"><span class="inline-wrap">16.2 节点流和处理流</span></h4><h4 id="guWCP81SpiVmqnwsSsiUF8" class="wolai-block"><span class="inline-wrap">16.3 输入流</span></h4><h4 id="dG9FvHtXc59gBhnBtKwonQ" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="9F7PezLGWLnZXPFqCiHKgE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">16.3</span><span class="token number">.1</span> <span class="token maybe-class-name">InputStream</span>
<span class="token number">16.3</span><span class="token number">.1</span><span class="token number">.1</span> <span class="token maybe-class-name">FileInputStream</span>
<span class="token number">16.3</span><span class="token number">.1</span><span class="token number">.2</span> <span class="token maybe-class-name">BufferedInputStream</span>
<span class="token number">16.3</span><span class="token number">.1</span><span class="token number">.3</span> <span class="token maybe-class-name">ObjectInputStream</span>
<span class="token number">16.3</span><span class="token number">.2</span> <span class="token maybe-class-name">Reader</span>
<span class="token number">16.3</span><span class="token number">.2</span><span class="token number">.1</span> <span class="token maybe-class-name">FileReader</span>
<span class="token number">16.3</span><span class="token number">.2</span><span class="token number">.2</span> <span class="token maybe-class-name">BufferedReader</span>
<span class="token number">16.3</span><span class="token number">.2</span><span class="token number">.3</span> <span class="token maybe-class-name">InputStreamReader</span>
<span class="token number">16.4</span> 输出流</pre></div></code-block><h4 id="v7WSbBmK9AGtnN1a5SNbfh" class="wolai-block"><span class="inline-wrap">⭐</span></h4><div id="uEpsvbwjoxB3TAWLpDJuWU" class="wolai-block wolai-text"><div><span class="inline-wrap">16.4.1 OutputStream
16.4.1.1 FileOutputStream
16.4.1.2 BufferedOutputStream
16.4.1.3 ObjectOutputStream
16.4.1.4 PrintStream
16.4.2 Writer
16.4.2.1 FileWriter
16.4.2.2 BufferedWriter
16.4.2.3 OutputStreamWriter
16.4.2.4 PrintWrite
16.5 Properties
</span><span class="inline-wrap"><b>17 网络编程</b></span><span class="inline-wrap">
17.1 网络基础
17.2 InetAddress
17.3 Socket
17.4 TCP 编程</span></div></div><h4 id="gPzYJ2afozoJUvVnSd7pUD" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="rHvZ1JMM1tBEX1fuXXyoQ7" class="wolai-block"><span class="inline-wrap">17.5 UDP 编程</span></h4><h4 id="rKhYRe3YB185sWCRCrJa7Q" class="wolai-block"><span class="inline-wrap">18 反射</span></h4><h4 id="jw2wWbHSfTUEGrNZCZo3hD" class="wolai-block"><span class="inline-wrap">18.1 反射机制</span></h4><h4 id="nXxaGygA5BNnu5AbxEsThs" class="wolai-block"><span class="inline-wrap">18.2 反射相关类</span></h4><code-block id="5KuXBFYa7JM7KjAhwPRyDD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">18.3</span> <span class="token maybe-class-name">Class类</span>
<span class="token number">18.4</span> 类加载
<span class="token number">1</span> 加载阶段
<span class="token number">2.1</span> 连接阶段——验证
<span class="token number">2.2</span> 连接阶段——准备
<span class="token number">2.3</span> 连接阶段——解析
<span class="token number">3</span> 初始化：
<span class="token number">18.5</span> 反射获取类的结构信息
<span class="token number">18.6</span> 通过反射创建对象</pre></div></code-block><h4 id="ayYaZPxqhw4YPKAGy9c5d6" class="wolai-block"><span class="inline-wrap">18.7 通过反射访问类</span></h4><h4 id="9mVY97NMKApDopyWTj1ngi" class="wolai-block"><span class="inline-wrap">18.8 反射性能优化</span></h4><div id="hQrwPXZgTWjuamnUNHU12Q" class="wolai-block wolai-text"><div><span class="inline-wrap"><b>19 MySQL 数据库</b></span><span class="inline-wrap">
19.0 数据库
19.1 表
19.2 数据类型</span></div></div><h4 id="sPgAwUrR9SAm9NDP7w5WUu" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="9RwyvtG1tv5UQZJ7PBgtzZ" class="wolai-block"><span class="inline-wrap">19.2.1 数值型</span></h4><h4 id="3wsf7QSAzLYkkumHSFU4BS" class="wolai-block"><span class="inline-wrap">19.2.2 字符串型</span></h4><h4 id="d1iLKeqh1qiLN3R6tUKi9t" class="wolai-block"><span class="inline-wrap">19.2.3 日期型</span></h4><h4 id="u49q4ffuc3ffxachbzdVDE" class="wolai-block"><span class="inline-wrap">19.3 CRUD</span></h4><h4 id="wzE6QxAZp3uyzFaRrPKy4F" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="3WTuc7tzgLJGr3kxKm8d1e" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">19.3</span><span class="token number">.1</span> <span class="token maybe-class-name">Insert</span>
<span class="token number">19.3</span><span class="token number">.2</span> <span class="token maybe-class-name">Update</span>
<span class="token number">19.3</span><span class="token number">.3</span> <span class="token maybe-class-name">Delete</span>
<span class="token number">19.3</span><span class="token number">.4</span> <span class="token maybe-class-name">Select</span>
<span class="token number">19.3</span><span class="token number">.5</span> <span class="token maybe-class-name">Select增强查询</span>
<span class="token number">19.3</span><span class="token number">.6</span> <span class="token maybe-class-name">Select多表查询</span>
<span class="token number">19.4</span> 函数</pre></div></code-block><h4 id="pFNUzNTBSSdzrVE5oJUXTg" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="gX2Qjp5CbPiCHAWvt1iGUw" class="wolai-block"><span class="inline-wrap">19.5 内连接</span></h4><h4 id="33EeTpVGFuYsdST19o128e" class="wolai-block"><span class="inline-wrap">19.6 外连接</span></h4><h4 id="jw884NtvnrvwgPMq48Nba8" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="gB2DkZNSWgDnEjAsoxZJ8i" class="wolai-block"><span class="inline-wrap">19.7 约束</span></h4><code-block id="omL3FYJwL1KChUJ8Su6uQS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">19.7</span><span class="token number">.1</span> primary key
<span class="token number">19.7</span><span class="token number">.2</span> not <span class="token keyword null nil">null</span>
<span class="token number">19.7</span><span class="token number">.3</span> unique
<span class="token number">19.7</span><span class="token number">.3</span> foreign key
<span class="token number">19.7</span><span class="token number">.4</span> check
<span class="token number">19.8</span> 自增⻓
<span class="token number">19.9</span> 索引</pre></div></code-block><h4 id="qiDNtaqgj7exYdxuzW6g65" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="vS8T8uSJUc3PyVdWg47n5z" class="wolai-block"><span class="inline-wrap">19.9.1 主键索引</span></h4><h4 id="5SkiUmfthLWfeFw5H3iXMy" class="wolai-block"><span class="inline-wrap">19.9.2 唯一索引</span></h4><h4 id="fgMU37qfsjgyqSeo6ge3jk" class="wolai-block"><span class="inline-wrap">19.9.3 普通索引</span></h4><h4 id="dXucgnJxzPhNkUvEbTEgHd" class="wolai-block"><span class="inline-wrap">19.9.4 全文索引</span></h4><h4 id="1ocZnvbcEt9Ek77ES7jkxh" class="wolai-block"><span class="inline-wrap">19.9.5 总结</span></h4><h4 id="1yYwr665zvp2egQFupfpVq" class="wolai-block"><span class="inline-wrap">19.10 事物</span></h4><h4 id="pq99XhvaKkb7mrqK2X4dC9" class="wolai-block"><span class="inline-wrap">19.10.1 事物</span></h4><h4 id="fYHbbWu6Efk5YXdUvNcbiP" class="wolai-block"><span class="inline-wrap">19.10.2 事物隔离</span></h4><h4 id="1yY6X1AARgpbPk25nvrH9p" class="wolai-block"><span class="inline-wrap">19.11 表类型和存储引擎</span></h4><h4 id="p3rrXKEkVHDuPs7YWaw72V" class="wolai-block"><span class="inline-wrap">19.12 视图</span></h4><h4 id="sx16K8bLreFjVDFJhdjdBo" class="wolai-block"><span class="inline-wrap">19.13 用户管理</span></h4><h4 id="gdPZNJxY7RsNrBdq3QcVz9" class="wolai-block"><span class="inline-wrap">20 JDBC 和连接池</span></h4><h4 id="qQFvPeFXB9GDiJS1zY31Ek" class="wolai-block"><span class="inline-wrap">20.1 JDBC API</span></h4><h4 id="18zTMqD6sdVL6U2GZoxBma" class="wolai-block"><span class="inline-wrap">⭐</span></h4><code-block id="uV1r4uoXerA8qv1XBrFabF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">20.1</span><span class="token number">.1</span> <span class="token maybe-class-name">ResultSet</span>
<span class="token number">20.1</span><span class="token number">.2</span> <span class="token maybe-class-name">Statement</span>
<span class="token number">20.1</span><span class="token number">.3</span> <span class="token maybe-class-name">PrepareStatement</span>
<span class="token number">20.2</span> <span class="token maybe-class-name">JDBCUtils</span>
<span class="token number">20.3</span> 事务</pre></div></code-block><h4 id="4F7f8UdRF8riVvuUdaDHhy" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="5M55TAmWPqtykjChmffYaD" class="wolai-block"><span class="inline-wrap">20.4 批处理</span></h4><h4 id="dCKRqBWq6iMbfjvazy2eg5" class="wolai-block"><span class="inline-wrap">20.5 连接池</span></h4><code-block id="jENssBb3vYC21MPJBbtg87" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">20.6</span> <span class="token maybe-class-name">Apache—DBUtils</span>
<span class="token number">20.7</span> <span class="token constant">DAO</span>—BasicDao</pre></div></code-block><h4 id="pJdhUmzgdTAHoXdD2TD5z3" class="wolai-block"><span class="inline-wrap">21 正则表达式</span></h4><h4 id="eAy369WPyKhokoZVJmDNPE" class="wolai-block"><span class="inline-wrap">21.1 基本语法</span></h4><h4 id="6dd3ScdZbaSUfE2CFjbuoU" class="wolai-block"><span class="inline-wrap">21.2 分组、捕获、反向引用</span></h4><h4 id="kercj4mMmMuLNpVBdCv7Yf" class="wolai-block"><span class="inline-wrap">21.3 常用类</span></h4><code-block id="gEVRServduQgAce1r1GBZd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">21.3</span><span class="token number">.1</span> <span class="token maybe-class-name">Pattern</span>
<span class="token number">21.3</span><span class="token number">.2</span> <span class="token maybe-class-name">Matcher</span>
<span class="token number">21.3</span><span class="token number">.3</span> <span class="token maybe-class-name">PatternSyntaxException</span></pre></div></code-block><h1 id="87ii55fpNxdVPY4Jzkzbwh" class="wolai-block"><span class="inline-wrap">0.导论</span></h1><h2 id="seNzjUeky3k42C4sYpL2Rc" class="wolai-block"><span class="inline-wrap">标柱注释</span></h2><h4 id="9cdjE1otNFKacMugxvpSbw" class="wolai-block"><span class="inline-wrap">单独重点加粗</span></h4><h4 id="d3R2NRcFJd4YY18C2EbrCb" class="wolai-block"><span class="inline-wrap">单独背诵下划线</span></h4><h4 id="3Q4yEVX35YaVLVJomP5rKM" class="wolai-block"><span class="inline-wrap">⭐</span></h4><h4 id="mQhcixYWToqgXBTANBaa8x" class="wolai-block"><span class="inline-wrap">重点</span></h4><h4 id="dRp3fnvJ5jxM1tS9WakSaF" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h4><h4 id="3PXCxowSj1VWL9Wuts2Nd9" class="wolai-block"><span class="inline-wrap">重点的重点</span></h4><h2 id="quCmLFB4Ra7K3PGUJ7bjLw" class="wolai-block"><span class="inline-wrap">学习方法</span></h2><h4 id="s41YSrwDUqrW42xbHHeXdX" class="wolai-block"><span class="inline-wrap">需求——&gt;知识点——&gt;基本原理语法——&gt;快速入⻔(基本程序)——&gt;技术细节</span></h4><h1 id="urYejoenfRSbu7mLfidYht" class="wolai-block"><span class="inline-wrap">1 java 概述</span></h1><h2 id="opdDgKMv5bkWy3DdUcxqti" class="wolai-block"><span class="inline-wrap">1.1 转义字符</span></h2><code-block id="1rLkHtWFhM1uomeDjqQJMc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>\t 一个制表位，实现对⻬功能
\n 换行
\\ 一个\
\<span class="token string">" 一个"</span>
\r 回⻋</pre></div></code-block><h2 id="7u6yB5KZ6foo8rHLLx3fHj" class="wolai-block"><span class="inline-wrap">1.2 注释</span></h2><h4 id="wzvALVk4dMoqLMHsBoaaGt" class="wolai-block"><span class="inline-wrap">单行注释: //注释文字</span></h4><h4 id="5vWyZVsipKG6uSASTokNcK" class="wolai-block"><span class="inline-wrap">多行注释: /</span><span class="inline-wrap"><i>注释文字</i></span><span class="inline-wrap">/</span></h4><h4 id="exYRHV6EHPhSNw6im7UMNw" class="wolai-block"><span class="inline-wrap">文档注释:</span></h4><h2 id="gRq5wduqziAk5CpvZXuaX9" class="wolai-block"><span class="inline-wrap">1.3 代码规范</span></h2><h2 id="cy4hg7K2osX7wqJFSgX7Rd" class="wolai-block"><span class="inline-wrap">⭐</span></h2><code-block id="8MvkcJsBiwCQQxUYJKBtmm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>类、方法的注释，要以 javadoc 的方式来写</pre></div></code-block><h4 id="2cd5Cd57XjX27YP6jisnAn" class="wolai-block"><span class="inline-wrap">/**</span></h4><code-block id="nw5YgLcVTFVtcBKv2dbVKb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token operator">*</span> @author
<span class="token operator">*</span> @version
<span class="token operator">*</span><span class="token operator">/</span></pre></div></code-block><h4 id="tRnWWNWspE5YTUKCNDDCXr" class="wolai-block"><span class="inline-wrap">注释详细，着重告述读者为什么这样写，如何修改，注意什么问题等</span></h4><code-block id="a6icG8mjKRru2Go23bwLcW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>使用tab、shift <span class="token operator">+</span> tab
运算符和 <span class="token operator">=</span> 两边习惯性各加一个空格
源文件使用utf<span class="token operator">-</span><span class="token number">8</span>编码
行宽度不要超过 <span class="token number">80</span> 字符
代码编写次行⻛格和行尾⻛格</pre></div></code-block><h2 id="id4AWUpsmAkFTQUB15hKBj" class="wolai-block"><span class="inline-wrap">1.4 JDK JRE</span></h2><h2 id="7BYJQXBg261pkPGD7oLbs6" class="wolai-block"><span class="inline-wrap">⭐</span></h2><code-block id="hqUQ7yBmjtuNLbKjBwnnxM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">JDK</span><span class="token punctuation">(</span>java开发工具包<span class="token punctuation">)</span>
<span class="token constant">JDK</span> <span class="token operator">=</span> <span class="token constant">JRE</span> <span class="token operator">+</span> java开发工具
<span class="token constant">JRE</span> <span class="token operator">=</span> <span class="token constant">JVM</span> <span class="token operator">+</span> <span class="token maybe-class-name">Java的核心类库</span>
<span class="token constant">JVM</span><span class="token punctuation">(</span>java虚拟机<span class="token punctuation">)</span></pre></div></code-block><h1 id="3MgfGtUKHdQEXkWYy2ndEV" class="wolai-block"><span class="inline-wrap">2 变量</span></h1><h2 id="cs8kWvE2ZXiHHAyTfaqPw2" class="wolai-block"><span class="inline-wrap">2.1 变量</span></h2><h4 id="8FjdohfV8eSogJeZ5iarYu" class="wolai-block"><span class="inline-wrap">基本介绍</span></h4><h4 id="fbbhRiW5sne7tZ9o3SqmJM" class="wolai-block"><span class="inline-wrap">变量相当于内存中一个数据存储空间的表示，你可以把变量看做是一个房间的⻔牌号，通过⻔牌号我们可以找</span></h4><h4 id="wtqmqvZHbQRKNYE2hkrrVm" class="wolai-block"><span class="inline-wrap">到房间，而通过变量名可以访问到变量(值)</span></h4><h4 id="8Vt1cjg1HRMDUdt3FFqPgx" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="wuRcLwY6hBUqDdjMjVrkCU" class="wolai-block"><span class="inline-wrap">1. 变量表示内存中的一个存储区域[不同的变量，类型不同，占用的空间大小不同]</span></h4><h4 id="vFxE7HhUK7xNF9f2QuxDNW" class="wolai-block"><span class="inline-wrap">2. 该区域有自己的名称[变量名]和类型[数据类型]</span></h4><h4 id="dvt21BcJYhCMERQ3boFAqp" class="wolai-block"><span class="inline-wrap">3. 变量必须先声明，后使用，即有顺序</span></h4><h4 id="3MS1hAhQher3jyhWJ4chbk" class="wolai-block"><span class="inline-wrap">4. 该区域的数据可以在同一类型范围内不断变化</span></h4><h4 id="g89tiLDJijUGgcmhXyG4iU" class="wolai-block"><span class="inline-wrap">5. 变量在同一个作用域内不能重名</span></h4><h4 id="vEAj7p63c1B4zxmtdfvsxX" class="wolai-block"><span class="inline-wrap">6. 变量=变量名＋值<span class="jill"></span>+<span class="jill"></span>数据类型</span></h4><h2 id="nAcPBMxCZ8ph63cpTagmpE" class="wolai-block"><span class="inline-wrap">2.2 基本数据类型</span></h2><h2 id="offa6s6LXYY3N9tq2bUfVG" class="wolai-block"><span class="inline-wrap">⭐</span></h2><code-block id="2DMEwj7Z44UPezP5Qv6vBK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int age <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">;</span>
double score <span class="token operator">=</span> <span class="token number">88</span> <span class="token punctuation">;</span>
char gender <span class="token operator">=</span> <span class="token string">'男'</span>；
<span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> <span class="token string">"jack"</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="dD7DVLJCSr7WbLJk5A4mh7" class="wolai-block"><span class="inline-wrap">整数类型 (byte [1] short[2] int[4] long [8])</span></h4><ol class="wolai-block"><li id="oszV7eehqNVDNGbum7BgA4"><div class="marker"></div><span class="inline-wrap">Java 的整型常量(具体值) </span><span class="inline-wrap"><b>默认为 int 型</b></span><span class="inline-wrap"> ，声明 long 型常量须后加‘l’或‘L’</span></li><li id="utjdHyCF6dNKRnfbsSAusE"><div class="marker"></div><span class="inline-wrap">java 程序中变量常声明为 int 型，除非不足以表示大数，才使用 long</span></li><li id="xcCMG8jYPqGbLbFY3h83S2"><div class="marker"></div><span class="inline-wrap">bit: 计算机中的最小存储单位，byte：算机中基本存储单元，1byte = 8 bit</span></li></ol><h4 id="7No53iP42xsDGWFz5D4tWc" class="wolai-block"><span class="inline-wrap">浮点(小数)类型 (float [4] double [8])</span></h4><h4 id="hdr4nHLXYXGTNiEuAZo91U" class="wolai-block"><span class="inline-wrap">1. 浮点数=符号位<span class="jill"></span>+<span class="jill"></span>指数位<span class="jill"></span>+<span class="jill"></span>尾数位</span></h4><h4 id="enS74nqFM2MYs55KcaJ3gW" class="wolai-block"><span class="inline-wrap">2. 尾部可能丢失，造成精度损失</span></h4><ol class="wolai-block"><li id="3pyMZFVFabzLvK9tk5wSKU"><div class="marker"></div><span class="inline-wrap">Java 的浮点型常量(具体值)默认为 double 型，声明 float 型常量，须后加&#39;f&#39;或&#39;F&#39;</span></li><li id="dBGKHbz5hFZ3bFze8qcopo"><div class="marker"></div><span class="inline-wrap">十进制数形式：5.12 512.0f .512(必须有小数点)
科学计数法形式：5.12e2 5.12E-</span></li><li id="tFuidzeib4CDhdJBHRb5XG"><div class="marker"></div><span class="inline-wrap"><b>通常情况默认使用 double</b></span></li></ol><h4 id="8eX6dJ3p8HHUYuFAXbuVLb" class="wolai-block"><span class="inline-wrap">字符型(Char[2])</span></h4><h4 id="i5Eht7X5ZcfsWQxmRctAWV" class="wolai-block"><span class="inline-wrap">1. 使用单引号表示</span></h4><ol class="wolai-block"><li id="noEDWEas1vePRorW5kauR6"><div class="marker"></div><span class="inline-wrap">Java 中还允许使用转义字符来将其后的字符转变为特殊字符型常量</span></li><li id="87GQBCURw45nCCUvAsPwks"><div class="marker"></div><span class="inline-wrap">char 的 </span><span class="inline-wrap"><b>本质是一个整数</b></span><span class="inline-wrap"> ，输出时是 unicode 码对应字符</span></li><li id="pbe5VeaosdkDSr4xhETMLt"><div class="marker"></div><span class="inline-wrap">char 类可以进行运算</span></li></ol><h4 id="qb6Jodjodbq5itvU4RhyZw" class="wolai-block"><span class="inline-wrap">布尔型(boolean[1])</span></h4><ol class="wolai-block"><li id="oyLzcQLfZoerH1rcudsma2"><div class="marker"></div><span class="inline-wrap">boolean 类型数据只允许取值 true 和 false，无 null</span></li><li id="7v22yERY7MzbBDyYcMYx5A"><div class="marker"></div><span class="inline-wrap">boolean 类型占 1 个字节</span></li><li id="8gujX547BZAcrZLpNVDYro"><div class="marker"></div><span class="inline-wrap"><b>不可以用 0 或非 0 的整数代替 false 和 true，与 C 语言不同</b></span></li></ol><h2 id="cAHdf1k7xW3QnDCCEyuxZm" class="wolai-block"><span class="inline-wrap">2.3 基本数据类型转化</span></h2><h3 id="vBQ82BouqJPw6KgStUnwzH" class="wolai-block"><span class="inline-wrap">2.3.1 自动类型转换</span></h3><h4 id="hRWm3tZDNEpTC7X2yGa4Tp" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="tiQprzj4yGnWrZsCpgN6dr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>java程序在进行赋值或者运算时，精度小的类型自动转换为精度大的数据类型</pre></div></code-block><h4 id="f8JHFqonRaTxuHJdbBJdZ4" class="wolai-block"><span class="inline-wrap">转换规则：</span></h4><code-block id="1bCtZehLMm4HeXZ3Rkvb4s" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>char<span class="token operator">&lt;</span>int<span class="token operator">&lt;</span>long<span class="token operator">&lt;</span>float<span class="token operator">&lt;</span>double
byte<span class="token operator">&lt;</span>short<span class="token operator">&lt;</span>int<span class="token operator">&lt;</span>long<span class="token operator">&lt;</span>float<span class="token operator">&lt;</span>double</pre></div></code-block><h4 id="78uiSALf2CZ9dbFPcFDC9x" class="wolai-block"><span class="inline-wrap">注意事项和细节</span></h4><h4 id="87YcW5FokR65swTPddf4AM" class="wolai-block"><span class="inline-wrap">1. 有多种类型的数据混合运算时，系统首先自动将所有数据转换成容量最大的那种数据类型，再进行计算</span></h4><h4 id="3t8ZMRrL774ha6y5JFxMNu" class="wolai-block"><span class="inline-wrap">2. 我们把精度(容量)大的数据类型赋值给精度(容量)小 的数据类型时，就会报错，反之就会进行自动类型转换。</span></h4><ol class="wolai-block"><li id="gTDdFGBP4uhLjA21KKw9yC"><div class="marker"></div><span class="inline-wrap"><b>byte short char 之间不会相互转换</b></span></li><li id="astRvSNB6Ze2Aw4dNmdNeW"><div class="marker"></div><span class="inline-wrap"><b>byte short char 计算是首先转换为 int 类型</b></span></li><li id="wqgNuVswUN34RVqgP9kZr4"><div class="marker"></div><span class="inline-wrap">boolean 不参与转换</span></li><li id="snBM5WYFbbptuHpbWtTdf5"><div class="marker"></div><span class="inline-wrap">自动提升原则：表达式结果的类型自动提升为操作数中最大的类型</span></li></ol><h3 id="ghHSoTGvtt6bPpQ1XqGUyz" class="wolai-block"><span class="inline-wrap">2.3.2 强制类型转换</span></h3><h4 id="kGve3NAjMipPnwHZe8krv9" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="pb71mFTxzaunRsd4dopRYe" class="wolai-block"><span class="inline-wrap">自动类型转换的逆过程，将容量大的数据类型转换为容量小的数据类型。使用时要加上强制转换符()，但可能</span></h4><h4 id="pcuPkJ2nQwMbypdhbkUyNe" class="wolai-block"><span class="inline-wrap">造成精度降低或溢出，格外要注意</span></h4><h4 id="fgoe6x315NxUoG9BeHyhb1" class="wolai-block"><span class="inline-wrap">注意事项和细节</span></h4><h4 id="1fDcetXxDFKGxQ5xJ34vTg" class="wolai-block"><span class="inline-wrap">1. 当数据从精度 大——＞小，就需要使用到强制转换</span></h4><h4 id="mC58KASgmPv9MpzPKNXAyd" class="wolai-block"><span class="inline-wrap">2. 强转符号只针对于最近的操作数有效，往往会使用小括号提升优先级</span></h4><code-block id="dJZMGkTAu7pQFaUW4ijPzz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int <span class="token operator">=</span> <span class="token string">'c'</span><span class="token punctuation">;</span>
double d <span class="token operator">=</span> <span class="token number">80</span></pre></div></code-block><code-block id="1UmQTyNPferNrdddgZ1Pn1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int i <span class="token operator">=</span> <span class="token punctuation">(</span>int<span class="token punctuation">)</span><span class="token number">8.8</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="dUcp7dNC7ZG2K5d82h2eRK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int y <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token operator">*</span><span class="token number">3.5</span><span class="token operator">+</span> <span class="token number">6</span> <span class="token operator">*</span><span class="token number">1.5</span><span class="token punctuation">)</span></pre></div></code-block><ol class="wolai-block"><li id="jxYZRQyK38AbKZ45meCrCU"><div class="marker"></div><span class="inline-wrap">char 类型可以保存 int 的常量值，但不能保存 int 的变量值，需要强转</span></li><li id="bBZgR7LBZEDKWjsUCPrR92"><div class="marker"></div><span class="inline-wrap"><b>byte short char 类型在进行运算时，当做 int 类型处理</b></span></li></ol><h2 id="tWYNLYZbe1TSWAN9wmMapu" class="wolai-block"><span class="inline-wrap">2.4 基本数据类型和 String 类型转换</span></h2><h4 id="xt6fDoiXopfb8G3iw6DmBz" class="wolai-block"><span class="inline-wrap">基本类型转 String 类型</span></h4><h4 id="hey2xFjJjtoY8MB6nk2BsM" class="wolai-block"><span class="inline-wrap">语法：将基本类型的值 +” “</span></h4><h4 id="rDUox3BDbCq2JsESAN1RD3" class="wolai-block"><span class="inline-wrap">String 类型转基本数据类型</span></h4><code-block id="suYSiU1k3R69DuE6ERD2jA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>语法：通过基本类型的包装类调用parseXX方法</pre></div></code-block><h1 id="xizbjtUAbBLHGQk76raAso" class="wolai-block"><span class="inline-wrap">3 运算符</span></h1><h2 id="gQzUucMKZyLKPbkvaDVByG" class="wolai-block"><span class="inline-wrap">3.1 算数运算符</span></h2><h4 id="xgidXYXaMLau32ZaoGgLhV" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="6YZjJrCAYTguVH2d3cQSvd" class="wolai-block"><span class="inline-wrap">算术运算符是对数值类型的变量进行运算的</span></h4><code-block id="iiRD2S7Me9mcGJ8x3Hbvmq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int m <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">;</span>
char c2 <span class="token operator">=</span> m<span class="token punctuation">;</span><span class="token comment">//false</span>
char c3 <span class="token operator">=</span> <span class="token punctuation">(</span>char<span class="token punctuation">)</span>m<span class="token punctuation">;</span><span class="token comment">//ture</span></pre></div></code-block><code-block id="piFP45xnWJYoWPbkubPEBf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int n1 <span class="token operator">=</span> <span class="token number">1</span>
float n2 <span class="token operator">=</span> <span class="token number">1.1</span>f<span class="token punctuation">;</span>
double n3 <span class="token operator">=</span> <span class="token number">3.4</span><span class="token punctuation">;</span>
boolean b1 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s1 <span class="token operator">=</span> n1 <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s2 <span class="token operator">=</span> n2 <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s3 <span class="token operator">=</span> n3 <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s4 <span class="token operator">=</span> b1 <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="vLdr2gWjP1Vsu8x2fnWNjU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> s5 <span class="token operator">=</span> <span class="token string">"123"</span><span class="token punctuation">;</span>
int num1 <span class="token operator">=</span> <span class="token maybe-class-name">InterInt</span><span class="token punctuation">.</span><span class="token method function property-access">parseInt</span><span class="token punctuation">(</span>s5<span class="token punctuation">)</span><span class="token punctuation">;</span>
int num2 <span class="token operator">=</span> <span class="token maybe-class-name">InterInt</span><span class="token punctuation">.</span><span class="token method function property-access">parseDouble</span><span class="token punctuation">(</span>s5<span class="token punctuation">)</span><span class="token punctuation">;</span>
int num3 <span class="token operator">=</span> <span class="token maybe-class-name">InterInt</span><span class="token punctuation">.</span><span class="token method function property-access">parseFloat</span><span class="token punctuation">(</span>s5<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h3 id="irskeMeoQfzwcyW7Dv2EMj" class="wolai-block"><span class="inline-wrap">3.1.1+<span class="jill"></span>号使用</span></h3><h4 id="tW7M1QdV5Cj3jofQrrNGVt" class="wolai-block"><span class="inline-wrap">1. 当左右两边都是数值型时，则做加法运算</span></h4><h4 id="6FA1VcMmnEr841SzxGoBmQ" class="wolai-block"><span class="inline-wrap">2. 当左右两边有一方为 字符串，则做拼接运算</span></h4><h3 id="awrwBwzpwV68jjsj8F2WQy" class="wolai-block"><span class="inline-wrap">3.1.2 ++<span class="jill"></span>号使用</span></h3><code-block id="4aeNAFktQpvewZF4QWNLDN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>前＋＋和后＋<span class="token operator">+</span>都完全等价子 i<span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>作为表达式使用
前<span class="token operator">++</span>：<span class="token operator">++</span>先自增后赋值
后<span class="token operator">++</span>：i<span class="token operator">++</span>先赋值后自增</pre></div></code-block><h3 id="joeoavYLuNMq64FSrRzkAN" class="wolai-block"><span class="inline-wrap">3.1.3 %<span class="jill"></span>号使用</span></h3><code-block id="6YbBvecvuGyfzc4iqE66JE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>a <span class="token operator">%</span> b 当a是小数时，公式 <span class="token operator">=</span> a <span class="token operator">-</span> <span class="token punctuation">(</span>int<span class="token punctuation">)</span>a <span class="token operator">/</span> b <span class="token operator">*</span> b</pre></div></code-block><h2 id="9mmvjseVVofegCmRbBudNY" class="wolai-block"><span class="inline-wrap">3.2 关系运算符</span></h2><code-block id="xtZbSnCV5daCEUicFqY2sR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>关系运算符的结果都是 boolean 型</pre></div></code-block><code-block id="iQTk4KLaAikF8AvSJYPtr4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">out，println</span><span class="token punctuation">(</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">98</span> <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token comment">//</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"100"</span> <span class="token operator">+</span> <span class="token number">98</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//103hello</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hello</span></pre></div></code-block><h2 id="9FPoYYGXijSyBAjyqQ5ZJM" class="wolai-block"><span class="inline-wrap">3.3 逻辑运算符</span></h2><h4 id="7oKWfC3GGCBNoFFGsSy7ar" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="kjMiofFztnzX2x8zYGoKto" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">用于连接多个条件</span><span class="token punctuation">(</span>多个关系表达式<span class="token punctuation">)</span>，结果是boolean</pre></div></code-block><h3 id="dZ2W5qLmLJA7hrey6SGvPp" class="wolai-block"><span class="inline-wrap">3.3.1 &amp;&amp;和&amp;基本规则</span></h3><h4 id="dtokz5UHJ1gBWXgp9DgQVX" class="wolai-block"><span class="inline-wrap">&amp;&amp; 短路与:</span></h4><code-block id="8RhFuGbeK5kgCiexPaSUkZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>如果第一个条件为 <span class="token boolean">false</span> ，后面的条件不再判断</pre></div></code-block><h4 id="wtKeGrfLEWhDZjHhLLp2iN" class="wolai-block"><span class="inline-wrap">&amp; 逻辑与:</span></h4><code-block id="aCy6SA3sPEnF2QGycG7Mty" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>如果第一个条件为 <span class="token boolean">false</span> ，后面的条件仍然判断</pre></div></code-block><h3 id="jDvamcg4s1pJLGHSQYSzyY" class="wolai-block"><span class="inline-wrap">3.3.2 ||<span class="jill"></span>和<span class="jill"></span>|<span class="jill"></span>基本规则</span></h3><h4 id="sKLuUZGxG71JfNVc2WhDqA" class="wolai-block"><span class="inline-wrap">|| 短路或:</span></h4><code-block id="vwcedcfwnJq9Y23Z3CZibU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>如果第一个条件为 <span class="token boolean">true</span>，则第二个条件不会判断，结果为<span class="token boolean">true</span></pre></div></code-block><h4 id="3rJU5NT1sqxX3z6LkW4eEj" class="wolai-block"><span class="inline-wrap">| 逻辑或:</span></h4><code-block id="dVGHdJkb7sGXBHB1Wn5cwL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>不管第一个条件是否为<span class="token boolean">true</span>，第二个条件都要判断</pre></div></code-block><h3 id="3syqDPtntmzgN1bY79nNKg" class="wolai-block"><span class="inline-wrap">3.3.3 ^逻辑异或</span></h3><code-block id="uNX9GjHZbRGQ2YYApDdMjz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>当a和b不同时，则结果为<span class="token boolean">true</span>，否则为<span class="token boolean">false</span></pre></div></code-block><h2 id="brK3R4wuAv5WznTDXbTWhf" class="wolai-block"><span class="inline-wrap">3.4 赋值运算符</span></h2><h4 id="pxnFfjtrbAaRJs5if4hjjG" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="jaNhwbjdZqSjCvbF5UaDP1" class="wolai-block"><span class="inline-wrap">赋值运算符就是将某个运算后的值，赋给指定的变量</span></h4><h4 id="pRMFNC2F8uG7RwWDtxpDgB" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="rgigvkY1Ln8rySzLEmKxDs" class="wolai-block"><span class="inline-wrap">1. 运算顺序从右往左</span></h4><h4 id="3AUHFMussRxfUkjh9S5TAN" class="wolai-block"><span class="inline-wrap">2. 赋值运算符的左边只能是变量，右边可以是变量、表达式、常量值</span></h4><ol class="wolai-block"><li id="wNH1QSvm9Yv6CQe9tDkzHr"><div class="marker"></div><span class="inline-wrap">复合赋值： a x= b 等于 a = a x b</span></li><li id="q1xZoGn7kSq4uobH8jB97B"><div class="marker"></div><span class="inline-wrap"><b>复合赋值运算符会进行类型转换</b></span></li></ol><h2 id="hKdcY5j9jhSZrNbdmgGqKH" class="wolai-block"><span class="inline-wrap">3.5 三元运算符</span></h2><h4 id="dZM6Fy4RfkCruBDjD1LLXk" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="pj2MzMmUbwMUih6LdCsDTX" class="wolai-block"><span class="inline-wrap">运算规则：</span></h4><ol class="wolai-block"><li id="hWTzjmYWvHuiAzkku72iQp"><div class="marker"></div><span class="inline-wrap">如果条件表达式为 true，运算后的结果是表达式 1;</span></li><li id="agUveMsJMUs2REWEWYkc69"><div class="marker"></div><span class="inline-wrap">如果条件表达式为 false，运算后的结果是表达式 2;</span></li></ol><code-block id="sSEV2NUYVUtouPbJisp4L8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>byte b <span class="token operator">=</span> <span class="token number">3</span> <span class="token punctuation">;</span>
b <span class="token operator">+=</span> <span class="token number">2</span> <span class="token punctuation">;</span> <span class="token comment">//等价于 b = (byte)(b + 2)</span>
b<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">//等价于 b = (byte)(b + 1)</span></pre></div></code-block><h4 id="veZA1D7MAZQU8yycHu3Lui" class="wolai-block"><span class="inline-wrap">条件表达式？表达式 1 ：表达式 2 ;</span></h4><code-block id="ttNpG6sEU2c58TxGtFWLan" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int a <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
int b <span class="token operator">=</span> <span class="token number">99</span> <span class="token punctuation">;</span>
int result <span class="token operator">=</span> a<span class="token operator">></span>b<span class="token operator">?</span> a<span class="token operator">++</span><span class="token operator">:</span>b<span class="token operator">--</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="wDtSPFg4fh5m7AhWbHYLUP" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="qtZgYUsi6LfeCrTn9oNYjM" class="wolai-block"><span class="inline-wrap">1. 表达式 1 和表达式 2 要为可以赋给接收变量的类型(或可以自动转换)</span></h4><ol class="wolai-block"><li id="kVNzGrUJCsK323NF8417dL"><div class="marker"></div><span class="inline-wrap">三元运算符可以转成 if--else 语句</span></li></ol><h2 id="pYqRz8LHqp6iSiVtztT5o2" class="wolai-block"><span class="inline-wrap">3.5 运算符优先级</span></h2><h4 id="5Hr4sixSkbMbUukeZdXpxn" class="wolai-block"><span class="inline-wrap">优先级：</span></h4><h4 id="jPKFywDPVLbf2WWq4X7dee" class="wolai-block"><span class="inline-wrap">1. () {} , 等</span></h4><h4 id="w7nri3MWvTAjF2q7sbvfwf" class="wolai-block"><span class="inline-wrap">2. 单目运算符 ++ --</span></h4><h4 id="vAdTga4mnQjEntUuDpZ4vJ" class="wolai-block"><span class="inline-wrap">3. 算术运算符</span></h4><h4 id="5VFx74nSrgErM1k4Gd2354" class="wolai-block"><span class="inline-wrap">4. 位移运算符</span></h4><h4 id="3imf34F9xumuQx2buq1cY2" class="wolai-block"><span class="inline-wrap">5. 比较运算符</span></h4><h4 id="rk1T11t51ABFs8Z2F5zZ9n" class="wolai-block"><span class="inline-wrap">6. 逻辑运算符</span></h4><h4 id="1yKtyXUePCQkfKpdrRwMhN" class="wolai-block"><span class="inline-wrap">7. 三元运算符</span></h4><h4 id="hz6oUXutuSLRjTiNYM9EAv" class="wolai-block"><span class="inline-wrap">8. 赋值运算符</span></h4><code-block id="9yasu2KyzkXQQPFDBi5FxX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int c <span class="token operator">=</span> a <span class="token operator">></span> b<span class="token operator">?</span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">int</span><span class="token punctuation">(</span><span class="token number">3.4</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="bmuHZHwELSHG9i7HQ99uNs" class="wolai-block"><span class="inline-wrap">3.6 标识符的命名规则和规范</span></h2><h4 id="skr9NXRuCPRgBwSgXb3JFc" class="wolai-block"><span class="inline-wrap">规则：</span></h4><h4 id="nbXHVqKE8WBsCioMzbFiPv" class="wolai-block"><span class="inline-wrap">1. 由 26 个英文字母大小写，0~9，或＄组成</span></h4><h4 id="xwZfsjSaXYocY1a59sz4Pq" class="wolai-block"><span class="inline-wrap">2. 数字不可开头</span></h4><h4 id="tbFnYJRusmvT8WCqGm26fP" class="wolai-block"><span class="inline-wrap">3. 不司以使用关键字和保留宇，但能包含关键字和保留字</span></h4><ol class="wolai-block"><li id="7nodsJFFXs4Sk35NaRo1TS"><div class="marker"></div><span class="inline-wrap">Java 中严格区分大小写，⻓度无限制</span></li><li id="6PhsZNVR3vPmr7Fp4LgEsr"><div class="marker"></div><span class="inline-wrap">标识符不能包含空格</span></li></ol><h4 id="f8oF5zdygW2FzThnBAdiRC" class="wolai-block"><span class="inline-wrap">规范：</span></h4><ol class="wolai-block"><li id="hJxjoyrag6j4d5MnUL5GJx"><div class="marker"></div><span class="inline-wrap">包名：多单词组成时所有字母都小写：aaa.bbb.ccc</span></li><li id="giCv8NDeeBKQoomz7z7hEf"><div class="marker"></div><span class="inline-wrap">类名、接口名：多单词组成时，所有单词的首字母大写：XxxYyyZzz</span></li><li id="o2tz2TXS1xTcGEFfcDpSuM"><div class="marker"></div><span class="inline-wrap">变量名、方法名：多单词组成时，第一个单词首字母小写，第二个单河开始每个单词首字母大写：
xxxYyyzzz</span></li><li id="cj3EzCVAZdy8HV9wKwfGhc"><div class="marker"></div><span class="inline-wrap">常量名：所有字母都大写，多单词时每个单词用下划线连接：XXX_YYY_ZZZ</span></li></ol><h2 id="hmkZVS3MbKkuHtHhdGuSx5" class="wolai-block"><span class="inline-wrap">3.7 关键字、保留字</span></h2><h4 id="5oBX43FDrYYwcn8RiCS9y7" class="wolai-block"><span class="inline-wrap">关键字基本介绍：</span></h4><code-block id="fFkWtz5EuQTVwhcKQVZANZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">被Java语言赋子了特殊含义，用做专⻔用途的字符串</span><span class="token punctuation">(</span>单词<span class="token punctuation">)</span>
特点：关键字中所有字母都为小写</pre></div></code-block><h4 id="p9hn8RJe1bfVAFLUgf1VYZ" class="wolai-block"><span class="inline-wrap">保留字基本介绍：</span></h4><code-block id="vypZXs3McEvoYCD1V1ziaQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>现有Java版本尚未使用，但以后版本可能会作为关键字使用。自己命名标识符时要避免使用这些保留宇
byValue、cast、future、 generic、 inner、 operator、outer、rest、<span class="token keyword">var</span>、goto、<span class="token keyword">const</span></pre></div></code-block><h2 id="cv6uRaDxeormPqpnTUVk8B" class="wolai-block"><span class="inline-wrap">3.8 键盘输入</span></h2><h4 id="rVMBDBS2GXfZh1Rr9uSvKc" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="gqwwXFV2UJkxHrSuvXhy7F" class="wolai-block"><span class="inline-wrap">在编程中，需要接收用户输入的数据，就可以使用键盘输入语句来获取</span></h4><code-block id="rj8av3XjrfbCfaLPm5va5K" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>lnput<span class="token punctuation">.</span><span class="token method function property-access">java，需要一个扫描器</span><span class="token punctuation">(</span>对象<span class="token punctuation">)</span>，就是 <span class="token maybe-class-name">Scanner</span></pre></div></code-block><h4 id="w357wDYG4yWg2Ra1sQcE7k" class="wolai-block"><span class="inline-wrap">步骤：</span></h4><ol class="wolai-block"><li id="k2BdtAvbm376FMnawxVE2j"><div class="marker"></div><span class="inline-wrap">导入该类的包，java.util.*</span></li><li id="v92Rw4mvytrufE7BkDGTxX"><div class="marker"></div><span class="inline-wrap">创建该类的对象(声明变量)</span></li><li id="63sLtYgoXzffpbPxhahWud"><div class="marker"></div><span class="inline-wrap">调用里面的功能</span></li></ol><h2 id="fhpS1XEh7UG8xjTat65YVX" class="wolai-block"><span class="inline-wrap">3.9 进制</span></h2><h2 id="uFe12ntvtd1b5M77MTvBZ9" class="wolai-block"><span class="inline-wrap">⭐</span></h2><code-block id="xdFKEu1tkVbqSMYDvnBVKr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>二进制：<span class="token number">0.1</span>，满 <span class="token number">2</span> 进 <span class="token number">1</span> ，以<span class="token number">0</span>b或<span class="token number">0</span><span class="token maybe-class-name">B开头</span>
十进制：<span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span>，满 <span class="token number">10</span> 进 <span class="token number">1</span>
八进制：<span class="token number">0</span><span class="token operator">-</span><span class="token number">7</span>，满 <span class="token number">8</span> 进 <span class="token number">1</span> ，以数字 <span class="token number">0</span> 开头表示
十六进制：<span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span>及<span class="token constant">A</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token constant">F</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>，满 <span class="token number">16</span> 进<span class="token number">1.</span>以Ox或<span class="token number">0</span>x开头表示，此处的<span class="token constant">A</span><span class="token operator">-</span><span class="token constant">F</span>不区分大小写</pre></div></code-block><h3 id="bjDiksVN6BM5kHR4XuHGec" class="wolai-block"><span class="inline-wrap">3.9.1 其他转十进制</span></h3><h4 id="9YdsRmSyXnLE13NWEYPTRd" class="wolai-block"><span class="inline-wrap">从最低位开始，将每个位上的数提取出来，乘以(几进制)的(位数-1)次方</span></h4><code-block id="i9N9iZ2nXz5UhQ67pWbWjy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>例：<span class="token number">0b01011</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">8</span> <span class="token operator">=</span></pre></div></code-block><h3 id="wtM1pmCM2SrupmTXMHdmLm" class="wolai-block"><span class="inline-wrap">3.9.2 十进制转其他</span></h3><h4 id="qHYmEkJhf2KbFnXCvoJvsm" class="wolai-block"><span class="inline-wrap">将该数不断除(几进制)，直到商为 0 ，每步余数倒写</span></h4><h3 id="wQeu6NsYTkNxT3svU5DuWe" class="wolai-block"><span class="inline-wrap">3.9.3 二进制转八/十六</span></h3><h4 id="4AeucrySbyFKUt1yYuVfSy" class="wolai-block"><span class="inline-wrap">从低位开始，每三位一组，转成对应八进制</span></h4><h4 id="2At5EiFa63gD1V4RNqaj3j" class="wolai-block"><span class="inline-wrap">从低位开始，每四位一组，转成对应十六进制</span></h4><h3 id="qzJRejkuw6BW1A8Lw6Ba1Y" class="wolai-block"><span class="inline-wrap">3.9.4 八/十六进制转二</span></h3><h4 id="3s2garD1VozG1QRKAv8M8T" class="wolai-block"><span class="inline-wrap">将八进制的每一位，转成对应的一个三位的二进制数</span></h4><h4 id="mTf7KqDP7DXdHx2ud6qFQn" class="wolai-block"><span class="inline-wrap">将十六进制的每一位，转成对应的一个四位的二进制数</span></h4><h2 id="1t83tm4FbYnn8Z6tapq7dF" class="wolai-block"><span class="inline-wrap">3.10 原码 反码 补码</span></h2><h2 id="aU8sqPKwfBtagjmKT2dupr" class="wolai-block"><span class="inline-wrap">⭐⭐</span></h2><h4 id="moSAwtxMc9hyknWdebFUxb" class="wolai-block"><span class="inline-wrap">运算规则：</span></h4><h4 id="fw6vhDZ4YigUjfBppm3s5C" class="wolai-block"><span class="inline-wrap">1. 二进制的最高位是符号位： 0 表示正数， 1 表示负数</span></h4><h4 id="uPJeShtNr1gp1LnpiiJBH3" class="wolai-block"><span class="inline-wrap">2. 正数的原码、反码、补码都一样(三码合一)</span></h4><h4 id="rTDa8EhkBVgBuPoQJ8cYF9" class="wolai-block"><span class="inline-wrap">3. 负数的反码 = 它的原码符号位不变，其它位取反</span></h4><h4 id="6dGY69nSfz22DTMYoh8cBD" class="wolai-block"><span class="inline-wrap">4. 负数的补码 = 它的反码<span class="jill"></span>+1，负数的反码 = 负数的补码 - 1</span></h4><h4 id="pt3YteEz6YPQKN33cb27dU" class="wolai-block"><span class="inline-wrap">5. 0 的反码，补码都是 0</span></h4><ol class="wolai-block"><li id="vu16KhfxT6vcQsFQUVkaya"><div class="marker"></div><span class="inline-wrap">java 中的数都是有符号的</span></li></ol><code-block id="fyQeZKt1jX16NF82NMpohr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword module">import</span> java<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Scanner</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">hello</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Scanner</span> myScanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">in</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//System.in 代表使用键盘输入</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"请输入名字"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> myScanner<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"请输入年龄"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
int age <span class="token operator">=</span> myScanner<span class="token punctuation">.</span><span class="token method function property-access">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"名字="</span><span class="token operator">+</span>name<span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span><span class="token string">"年龄="</span><span class="token operator">+</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="aKirYiuPc53fEE8VK7iS1V" class="wolai-block"><span class="inline-wrap">7. 计算机运算的时候，都是以补码的方式来运算的</span></h4><h4 id="chc9FtNprkP22yvSNUZyuS" class="wolai-block"><span class="inline-wrap">8. 看运算结果的时候，要看他的原码</span></h4><h2 id="4XnVd5TAYJVkyxSWTAQXwc" class="wolai-block"><span class="inline-wrap">3.11 位运算符</span></h2><h2 id="j9TD45MQgnw9Dv3CRy1Us5" class="wolai-block"><span class="inline-wrap">⭐</span></h2><h4 id="uHwFpKyPijZi5EUhNKyjMg" class="wolai-block"><span class="inline-wrap">位运算符</span></h4><h4 id="iKBU66ncF9BgsMDrc3nqNN" class="wolai-block"><span class="inline-wrap">按位与 &amp;</span></h4><h4 id="gMjACCCEwuea2DE2fwr9n9" class="wolai-block"><span class="inline-wrap">按位或 |</span></h4><h4 id="8k6aCqR5DNQpUGs7njdjva" class="wolai-block"><span class="inline-wrap">按位异或 ^</span></h4><h4 id="ca2k11rkBLsJ3QN3PNkADo" class="wolai-block"><span class="inline-wrap">按位取反 ~</span></h4><h4 id="u6dLtxa6uQDZij9FxqufoM" class="wolai-block"><span class="inline-wrap">算数右移 &lt;&lt; 低位溢出，符号位不变，并用符号位补溢出的高位(本质/2)</span></h4><h4 id="oDZJ9ZjFHceyiywbh5muwP" class="wolai-block"><span class="inline-wrap">算数左移 &gt;&gt; 符号位不变，低位补 0(本质*2)</span></h4><h4 id="9QMpoAxns3iN18yKPShFm1" class="wolai-block"><span class="inline-wrap">逻辑右移 &gt;&gt;&gt; 低位溢出，高位补 0</span></h4><h4 id="kU5iQAhMh1bwKomjDeEHp4" class="wolai-block"><span class="inline-wrap">位运算过程：</span></h4><h4 id="nfVSTWJjM3wHmgPdLKsvrN" class="wolai-block"><span class="inline-wrap">1. 用原码得到补码</span></h4><h4 id="b4uQaicDkj3iYJhwKf772Q" class="wolai-block"><span class="inline-wrap">2. 用补码进行相关逻辑运算</span></h4><h4 id="s6zwDo2CZiQhRNFHcZ6LzU" class="wolai-block"><span class="inline-wrap">3. 运算完毕将补码转换成原码</span></h4><h1 id="bHifyVWB8awtiVksQXhaYG" class="wolai-block"><span class="inline-wrap">4 控制结构</span></h1><h2 id="x7uwoT8wYHFvSBa6iLtWGE" class="wolai-block"><span class="inline-wrap">4.1 顺序</span></h2><h4 id="oXfknvH2xUk37MmrnCa7E3" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="iotgEfdrfRctXiCRLKi6Zs" class="wolai-block"><span class="inline-wrap">程序从上到下逐行地执行，中间没有任何判断和跳转</span></h4><h4 id="8LbfKKzQqzZRYUKL1Gw3Ty" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><code-block id="8jd16Ba8LiCL8Hx9o3kavV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function"><span class="token maybe-class-name">Java中定义成员变量时采用合法的前向引用</span></span><span class="token punctuation">(</span>先定义再引用<span class="token punctuation">)</span></pre></div></code-block><h2 id="eYML3Ez2revXA7BSjQYYp8" class="wolai-block"><span class="inline-wrap">4.2 分支控制(if else switch)</span></h2><h2 id="bFzgCxJoveM8tup3znyYnt" class="wolai-block"><span class="inline-wrap">4.2.1 单分支</span></h2><h4 id="28Q2XSMa9Sda5yKU57S3XZ" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><code-block id="xfmTFdbvDrB3jgThVxEzSp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int num1 <span class="token operator">=</span> <span class="token number">12</span> <span class="token punctuation">;</span>
int num2 <span class="token operator">=</span> num1 <span class="token operator">+</span> <span class="token number">2</span> <span class="token punctuation">;</span></pre></div></code-block><code-block id="3ckufXDSvuBTo4tqn5ybg4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>条件表达式<span class="token punctuation">)</span><span class="token punctuation">{</span>
执行代码块<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="rXbY6ZU81JBJsw93pTjerf" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="hUqEjmxNehafYX1AZ3WF8E"><div class="marker"></div><span class="inline-wrap">当条件表达式为 ture 时，就会执行<span class="jill"></span>{}<span class="jill"></span>的代码。如果为 false，就不执行</span></li><li id="vcHJqeKdcFxo1bzSUgcMk1"><div class="marker"></div><span class="inline-wrap">如果<span class="jill"></span>{}<span class="jill"></span>中只有一条语句，则可以不用<span class="jill"></span>{}，建议写上<span class="jill"></span>{}</span></li></ol><h3 id="cSvVvcoRy3js5nsr915nQG" class="wolai-block"><span class="inline-wrap">4.2.2 双分支</span></h3><h4 id="ivJaL35TiCLih8VNm9MpEq" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="3fDMkN5LQhRtxYNaaGGG1m" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="wf3qjqAzircm2oTfh2CWow" class="wolai-block"><span class="inline-wrap">1. 当条件表达式成立，即执行代码块 1 ，否则执行代码块 2</span></h4><h4 id="rs1RKDeZkj7rjAMwWmpbEp" class="wolai-block"><span class="inline-wrap">2. 如果执行代码块有一条语句，则<span class="jill"></span>{}<span class="jill"></span>可以省略，否则，不能省略</span></h4><h3 id="8Z29KaRudMW5gXptAK3vY8" class="wolai-block"><span class="inline-wrap">4.2.3 多分支</span></h3><h4 id="1pCazVP4AWXinAqi6yi3GJ" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="s1FafXoWjG1LksGagz8pG9" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="hnVh5L7RdJvHvx69dLpGrN" class="wolai-block"><span class="inline-wrap">1. 当条件表达式 1 成立时，即执行代码块 1</span></h4><h4 id="mZLToUNoeNEHoiTP6FWZtV" class="wolai-block"><span class="inline-wrap">2. 如果表达式 1 不成立，才去判断表达式 2 是否成立</span></h4><h4 id="gfVprzUMwb99zukesrudf4" class="wolai-block"><span class="inline-wrap">3. 如果表达式 2 成立，就执行代码块 2</span></h4><ol class="wolai-block"><li id="3jLkmRu6JaSdx7t5JUTgfd"><div class="marker"></div><span class="inline-wrap">以此类推，如果所有的表达式都不成立则执行 else 的代码块</span></li><li id="5Za1JQAUxPj82d7Gwbqf9H"><div class="marker"></div><span class="inline-wrap">多分支可以没有 else</span></li></ol><h3 id="mxyib5eiz5s1CN8zYrW9mk" class="wolai-block"><span class="inline-wrap">4.2.4 嵌套分支</span></h3><code-block id="rpFMJEvy9duCU9eMb9RFfy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>条件表达式<span class="token punctuation">)</span><span class="token punctuation">{</span>
执行代码块<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword control-flow">else</span><span class="token punctuation">{</span>
执行代码块 <span class="token number">2</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="hFMcWTE4asw5T1z7MTWEFM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span><span class="token punctuation">(</span>条件表达式<span class="token punctuation">)</span><span class="token punctuation">{</span>
执行代码块<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>条件表达式 <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
执行代码块 <span class="token number">2</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token spread operator">...</span>
<span class="token keyword control-flow">else</span><span class="token punctuation">{</span>
执行代码块n<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="9MqQbHeYUYf9QLK6c2ta5M" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="kU9rVejjHm467FtV114zXe" class="wolai-block"><span class="inline-wrap">在一个分支结构中又完整的嵌套了另个完整的分支结构，里面的分支的结构称为内层分支外面的分支结构称为</span></h4><h4 id="pGU8PTy16pBGse9S233Rhf" class="wolai-block"><span class="inline-wrap">外层分支</span></h4><h4 id="euEkYYgnQgbz8e2QvJ8iDT" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h3 id="gJVpVuEUQ4z1m7oRK75Uym" class="wolai-block"><span class="inline-wrap">4.2.5 switch 分支结构</span></h3><h4 id="6hysU3M5K81evE1GhaLcsN" class="wolai-block"><span class="inline-wrap">基本语法</span></h4><h4 id="7Esjc4V3raQbpBKJfc9WrD" class="wolai-block"><span class="inline-wrap">说明：</span></h4><ol class="wolai-block"><li id="uvmqXPGsAF17Mo88ZnRZ8g"><div class="marker"></div><span class="inline-wrap">switch 关键字，表示 swtich 分支</span></li><li id="uKEk8DXK8iVdJZgxpDNoa8"><div class="marker"></div><span class="inline-wrap">表达式对应一个值</span></li><li id="xnZcy5uARXJjavSBWXT8eW"><div class="marker"></div><span class="inline-wrap">case 常量 1:当表达式的值等于常量 1 ，就执行语句块 1</span></li><li id="sa7oThuY5UzUjktApQFqWJ"><div class="marker"></div><span class="inline-wrap">break ：表示退出 swtich</span></li><li id="181cZL9UkVQGeqsJAN4bGU"><div class="marker"></div><span class="inline-wrap">如果和 case 常量 1 匹配，就执行语句块 1 ，如果没有匹配，就继续匹配 case 常量 2</span></li><li id="xdMhSHQNFKBnzwXiQEDTkv"><div class="marker"></div><span class="inline-wrap"><b>如果一个都没有匹配上，执行 default</b></span></li></ol><h4 id="tiPzcqHjf29DQdfYrwGn1Z" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="s6n2fZmY8gvxubdeRvbbNH"><div class="marker"></div><span class="inline-wrap">表达式数据类型，应和 case 后的常量类型一致，或者是可以自动转成可以相互比较的类型，比如输入的
是字符，而常量是 int</span></li><li id="iKCaCC9KB4AjgjVWBqEEuP"><div class="marker"></div><span class="inline-wrap"><b>switch(表达式)中表达式的返回值必须是：(byte,short.int,char,enum,String)</b></span></li><li id="q1TcXWNs3MQ7LynA6hUxTn"><div class="marker"></div><span class="inline-wrap">case 子句中的值必须是常量,而不能是变量</span></li><li id="ixYq6RY9svRrCvVKuFwZ1L"><div class="marker"></div><span class="inline-wrap"><b>default 子句是可选的，当没有匹配的 case 时，执行 default</b></span></li></ol><code-block id="38AsMZierBsRMpi8JEKsZD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//if-else</span>
<span class="token punctuation">}</span><span class="token keyword control-flow">else</span><span class="token punctuation">{</span>
<span class="token comment">//if-else</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="pVHBZUziMg4m6UoreNkFgv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">switch</span><span class="token punctuation">(</span>表达式<span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">case</span> 常量 <span class="token number">1</span> <span class="token operator">:</span>
语句块 <span class="token number">1</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="612vrorBmte2FCXXY6BhJJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">case</span> 常量 <span class="token number">2</span> <span class="token operator">:</span>
语句块 <span class="token number">2</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="cbNK77twWQxL5Lr4Uv4W9f" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword module">default</span><span class="token operator">:</span>
语句块<span class="token punctuation">;</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><ol class="wolai-block"><li id="6RAWecLcmKE6pBRa6tSQNF"><div class="marker"></div><span class="inline-wrap">break 语句跳出 switch 语句块，如果没有 break，程序会执行到结尾</span></li></ol><h2 id="17KfnNiGKYVNX7Jb2jLhSL" class="wolai-block"><span class="inline-wrap">4.3 循环控制(for while do while)</span></h2><h2 id="m2pmaW9R64KWC4GjNNnZWJ" class="wolai-block"><span class="inline-wrap">⭐</span></h2><h3 id="5jupcZDEDaReYYvpZMwr8F" class="wolai-block"><span class="inline-wrap">4.3.1 for 循环控制</span></h3><h4 id="gLhAF5nqKdACHSTYSb1Nkz" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="rdPQd8Tq49Fy8yFnf1DsVX" class="wolai-block"><span class="inline-wrap">说明：</span></h4><h4 id="wStCJ57pq11cgjzQefWueP" class="wolai-block"><span class="inline-wrap">1. 四要素：(1)循环变量初始化(2)循环条件(3)循环操作(4)循环变量迭代</span></h4><h4 id="3JRfNXxPyp8Bdg9j3iVVmA" class="wolai-block"><span class="inline-wrap">2. 循环操作，这里可以有多条语句，也就是我们要循环执行的代码</span></h4><h4 id="gjpcU7FAznXxm6VzzWNBMg" class="wolai-block"><span class="inline-wrap">3. 如果 循环操作(语句) 只有一条语句，可以省路<span class="jill"></span>{}，建议不要省略</span></h4><h4 id="gcQkM7Pgjb3xDFntwkCHBc" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="1iHbcjdSMsHEQaCJtEMCPv" class="wolai-block"><span class="inline-wrap">1. 循环条件是返回一个布尔值的表达式</span></h4><ol class="wolai-block"><li id="imvi82zfkGWnWtbyf4u1GV"><div class="marker"></div><span class="inline-wrap"><b>for(;循环判断条件;)中的初始化和变量迭代可以写到其它地方，但是两边的分号不能省略</b></span></li><li id="arizDgn3TpLJhUZNSSdRDS"><div class="marker"></div><span class="inline-wrap">循环初始值可以有多条初始化语句，但要求类型一样，井且中间用逗号隔开</span></li><li id="3JeWu2REHMncjkzBu5syFg"><div class="marker"></div><span class="inline-wrap">循环变量迭代也司以有名条变量迭代语句，中间用逗号隔开</span></li></ol><h3 id="3xBGiEvWe174K41TY4nJ3D" class="wolai-block"><span class="inline-wrap">4.3.2 while 循环控制</span></h3><h4 id="4sDgC5pNbKwR4FxuaWN8Fb" class="wolai-block"><span class="inline-wrap">基本语法</span></h4><h4 id="rRd7vcS6a9XRfzfvSQ8p1P" class="wolai-block"><span class="inline-wrap">说明：</span></h4><h4 id="hWhsT62ThsbnKP2bVv4XAx" class="wolai-block"><span class="inline-wrap">1. 四要素：(1)循环变量初始化(2)循环条件(3)循环操作(4)循环变量迭代</span></h4><h4 id="q5AyW1XcqE8G52J9KB23iG" class="wolai-block"><span class="inline-wrap">2. 四要素位置不同</span></h4><h4 id="7dfMAX8wJxiktaj1YUAUyT" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="48S58fhMtPbqrNxBy6GSKz" class="wolai-block"><span class="inline-wrap">1. 循环条件是返回一个布尔值的表达式</span></h4><ol class="wolai-block"><li id="jcreDKNzWDHv8S9FKtyRRU"><div class="marker"></div><span class="inline-wrap">while 循环是先判断在执行语句</span></li></ol><code-block id="x4R6z5tkyGTPPCucTUkATJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">for</span><span class="token punctuation">(</span>循环变量初始化<span class="token punctuation">;</span>循环条件<span class="token punctuation">;</span>循环变量迭代<span class="token punctuation">)</span><span class="token punctuation">{</span>
循环操作语句<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="9MDwXbi76RwYpYpvTe5QZj" class="wolai-block"><span class="inline-wrap">循环变量初始化;</span></h4><code-block id="dkh5rcJVpj4m9aPGk8bTXn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">while</span><span class="token punctuation">(</span>循环条件<span class="token punctuation">)</span><span class="token punctuation">{</span>
循环体<span class="token punctuation">;</span>
循环变量迭代<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h3 id="vRWeCEDFER6qzVvuuSjQm7" class="wolai-block"><span class="inline-wrap">4.3.3 do while 循环控制</span></h3><h4 id="nJKmai4DYAEQjCPXjV2qbf" class="wolai-block"><span class="inline-wrap">基本语法</span></h4><h4 id="kS2deeZAzHzP72yDhRGBYp" class="wolai-block"><span class="inline-wrap">说明：</span></h4><h4 id="t8yiM961soiftu71apF9Mf" class="wolai-block"><span class="inline-wrap">1. 四要素：(1)循环变量初始化(2)循环条件(3)循环操作(4)循环变量迭代</span></h4><h4 id="v9K6dNPmwnQFR3FE7EeGdj" class="wolai-block"><span class="inline-wrap">2. 四要素位置不同</span></h4><h4 id="ozeyB5NJ53C2wfX2dVPUqv" class="wolai-block"><span class="inline-wrap">3. 先执行在判断，至少执行一次</span></h4><h4 id="skzGSbbpugAv2K7wNvxXHt" class="wolai-block"><span class="inline-wrap">4. 最后有一个;</span></h4><h4 id="duZgFCBbyLy9h1fUaswYoN" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="6PEu6Z46V2ap7RHEyRW386" class="wolai-block"><span class="inline-wrap">1. 循环条件是返回一个布尔值的表达式</span></h4><h4 id="6bRvS3hsfw59F1KFwyxJvd" class="wolai-block"><span class="inline-wrap">2. 先执行在判断，至少执行一次</span></h4><h3 id="8ZncKV1xinZMH2kSDgMJF7" class="wolai-block"><span class="inline-wrap">4.3.4 多重循环控制</span></h3><h4 id="vQUHeDNnKcYtcz6o6FDdx7" class="wolai-block"><span class="inline-wrap">介绍：</span></h4><ol class="wolai-block"><li id="skDVQGMorNafJwMdVGZ5Ej"><div class="marker"></div><span class="inline-wrap">将一个循环放在另一个循环体内，就形成了嵌套循环。其中，for,while,do.while 均可以作为外层循环和
内层循环</span></li><li id="eZ7qAqsH8pi4PSLbCKv8ch"><div class="marker"></div><span class="inline-wrap">嵌套循环就是把内层循环当成外层循环的循环体。当只有内层循环的循环条件为 false 时，才会完全跳出
内层盾环，才可结束外层的当次循环，开始下一次的循环</span></li><li id="bUh2XD6pLYnKJv7ZipofBM"><div class="marker"></div><span class="inline-wrap">设外层循环次数为 m 次，内层为 n 次，则内层循环体实际上需要执行 m*n 次</span></li></ol><h2 id="6vd2gtAGtQevvuVTgPx4CN" class="wolai-block"><span class="inline-wrap">4.4 跳转控制 break</span></h2><h4 id="4EPS99eTdv3MT46boyPkk3" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="3ENgk3KEBPUEryP8LvqUYu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">break</span>语句用于终止某个语句块的执行，一般使用在<span class="token keyword control-flow">switch</span>或者循环<span class="token punctuation">[</span><span class="token keyword control-flow">for</span><span class="token punctuation">,</span><span class="token keyword control-flow">while</span><span class="token punctuation">,</span><span class="token keyword control-flow">do</span> <span class="token keyword control-flow">while</span><span class="token punctuation">]</span></pre></div></code-block><h4 id="pc2nwdQWGXaDRS1Qj1A3su" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="jwKGqJ9f7WqVAXimQbzruu"><div class="marker"></div><span class="inline-wrap">break 语句出现在多层嵌套的语句块中时，可以通过标签指明要终止的是哪一层语句块</span></li><li id="rHNV3DEtMH4Bo98j9FSEuH"><div class="marker"></div><span class="inline-wrap">标签的基本使用</span></li></ol><h2 id="2ocA4djhWFCBzLau8RnPjm" class="wolai-block"><span class="inline-wrap">4.5 跳转控制 continue</span></h2><h4 id="pAopeqxbpKoSFxKrYZdrKn" class="wolai-block"><span class="inline-wrap">循环变量初始化;</span></h4><code-block id="94g6XXYf5Tnon5TAoivz2o" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">do</span><span class="token punctuation">{</span>
循环体<span class="token punctuation">;</span>
循环变量迭代<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword control-flow">while</span><span class="token punctuation">(</span>循环条件<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7nUUdRb2Q5PMCq3YihyXSN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>label1<span class="token operator">:</span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token spread operator">...</span>
label2<span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">break</span> label1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="99Fq6RH9ULPBUXJbQiQS66" class="wolai-block"><span class="inline-wrap">4.5 跳转控制 continue</span></h2><h4 id="jbR1JZcGDL4NDEWZvaeuPs" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="2Yndde2Q8CRQCxgwsRWnhb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">continue</span>语句用于结束本次循环，继续执行下一次循环
<span class="token keyword control-flow">continue</span>语句出现在多层嵌套的福环语句体中时，可以通过标签指明要跳过的是哪一层循环</pre></div></code-block><h4 id="7KdoXAVPN9spLX5WmMMUi2" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="42Tib58msd8aFaP9MwyE5o"><div class="marker"></div><span class="inline-wrap">continue 语句出现在多层嵌套的语句块中时，可以通过标签指明要终止的是哪一层语句块</span></li><li id="b7HrUnFFJR8BzheqiK5dos"><div class="marker"></div><span class="inline-wrap">标签的基本使用</span></li></ol><h2 id="bn4KMg72Bd9VwBzDAavsCB" class="wolai-block"><span class="inline-wrap">4.6 跳转控制 return</span></h2><h4 id="7UjeMLp398XZaRhBRsAReL" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="icGLqbg4krVfUpgohMiXYu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">return</span>使用在方法，表示跳出所在的方法</pre></div></code-block><h1 id="1o8dGZCw9DVzjiErUJBjkW" class="wolai-block"><span class="inline-wrap">5 数组、排序、查找</span></h1><h2 id="nMbhy1rEvcSN1Cz2QEuVzY" class="wolai-block"><span class="inline-wrap">5.1 数组</span></h2><h2 id="mZzcaC2U2uQESjG7cnTBQK" class="wolai-block"><span class="inline-wrap">⭐</span></h2><h2 id="m7joc4rc8pkTfqeQMv6Eyd" class="wolai-block"><span class="inline-wrap">5.1.1 使用方式</span></h2><h4 id="cMXMkAXS2euyPKLgQbbicV" class="wolai-block"><span class="inline-wrap">1-动态初始化</span></h4><h4 id="uvtBYRtN6RZkJhEiZFaj8v" class="wolai-block"><span class="inline-wrap">语法：</span></h4><code-block id="vbvPg9PC3vA3vtwXcGjL35" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>数据类型 数组名 <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> 数据类型<span class="token punctuation">[</span>大小<span class="token punctuation">]</span></pre></div></code-block><h4 id="mV8yF1rCkcBfmmSChf3uuw" class="wolai-block"><span class="inline-wrap">数组的引用：</span></h4><h4 id="bLYgyyAfxxdpbWBkryuHH9" class="wolai-block"><span class="inline-wrap">数组名[下标/索引]，下标从 0 开始</span></h4><h4 id="15tX7wXcpwZPcw2bNSLVAa" class="wolai-block"><span class="inline-wrap">2-动态初始化</span></h4><code-block id="qooubM9U4rTQ7i6nVvEEzh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>label1<span class="token operator">:</span><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token spread operator">...</span>
label2<span class="token operator">:</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">continue</span> label1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="g4ywNEsJHupnMFjsCaRdnH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int<span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//创建一个数字名字为a，存放了五个int</span></pre></div></code-block><h4 id="wPY1X9Qrz9wo4ZnNGdE7GL" class="wolai-block"><span class="inline-wrap">先声明数组：</span></h4><h4 id="4yxhk9PgGRg7B1xa6avbwq" class="wolai-block"><span class="inline-wrap">数据类型 数组名[]；也可以 数据类型[] 数组名；</span></h4><code-block id="s8qWMjWxD8Q5CU4R4xuo6U" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>例：int a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>或者int<span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">;</span></pre></div></code-block><h4 id="fxnSfShXsjYWyLo9atnPsx" class="wolai-block"><span class="inline-wrap">再创建数组：</span></h4><code-block id="5Qc95YLDA2KSVRMTLUipLr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>数组名 <span class="token operator">=</span> <span class="token keyword">new</span> 数据类型<span class="token punctuation">[</span>大小<span class="token punctuation">]</span><span class="token punctuation">;</span>
例：a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="dCmbjxuu7jdDhuMbE2rFiW" class="wolai-block"><span class="inline-wrap">3-静态初始化</span></h4><h4 id="2HZAw7R2tEPJxmjC91pgCk" class="wolai-block"><span class="inline-wrap">语法：</span></h4><h4 id="udVw444egsRycwTaRTac9M" class="wolai-block"><span class="inline-wrap">数据类型 数组名[] = {<span class="jill"></span>元素值，元素值......}</span></h4><h4 id="cLUBjqaMuuEN1rQA8EMQf5" class="wolai-block"><span class="inline-wrap">注意事项和细节</span></h4><h4 id="7v3rhQsYYDAeUijUgaY6Gu" class="wolai-block"><span class="inline-wrap">1. 数组是多个相同类型数据的组合</span></h4><h4 id="9JBz1JJZn8h7DD6Qqnx1e5" class="wolai-block"><span class="inline-wrap">2. 数组中的元素可以是任何数据类型，包括基本类型和引用类型，但是不能混用</span></h4><h4 id="oU5WqoHaLTU2N65T7r5VnK" class="wolai-block"><span class="inline-wrap">3. 数组创建后如果没有赋值，有默认值:</span></h4><code-block id="pMw5nEdxT3A4rpwuCza5Th" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int0<span class="token punctuation">,</span>short <span class="token number">0</span><span class="token punctuation">,</span> byte <span class="token number">0</span><span class="token punctuation">,</span> long <span class="token number">0</span><span class="token punctuation">,</span> float <span class="token number">0.0</span><span class="token punctuation">,</span>double <span class="token number">0.0</span>
char \u0000<span class="token punctuation">,</span>boolean <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> <span class="token keyword null nil">null</span></pre></div></code-block><ol class="wolai-block"><li id="x8Au8fvbgTZoNpw2CA2jL1"><div class="marker"></div><span class="inline-wrap">使用数组的步骤 1. 声明数组并开辟空间 2 给数组各个元素赋值 3 使用数组</span></li><li id="cFPfnKRYkYkGDUKmysYpjE"><div class="marker"></div><span class="inline-wrap">数组的下标是从 0 开始的</span></li><li id="fyj43nxwMh7owwT6FZp38c"><div class="marker"></div><span class="inline-wrap">数组下标必须在指定范围内使用，否则报：下标越界异常</span></li><li id="wGHMr2xkghZbp3px4SbhJs"><div class="marker"></div><span class="inline-wrap">数组属引用类型，数组型数据是对象(object)</span></li></ol><h3 id="5nLPwhVRrxCTVmn7kKSdgK" class="wolai-block"><span class="inline-wrap">5.1.2 数组赋值机制</span></h3><h4 id="jFD4ofvePaGNyVFWn1MzTL" class="wolai-block"><span class="inline-wrap">数组在默认情況下是引用传递，赋的值是地址</span></h4><code-block id="kh2stQKjiXLfapM37zG1Fz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int arr1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
int arr2 <span class="token operator">=</span> arr1<span class="token punctuation">;</span>
arr2<span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span> <span class="token comment">//arr1[0]=10</span></pre></div></code-block><h3 id="qyTUiMFK8zDHWrhRoG4yJv" class="wolai-block"><span class="inline-wrap">5.1.3 数组拷⻉</span></h3><h3 id="jcfJEgcmDZv1V2YqZjtjmj" class="wolai-block"><span class="inline-wrap">5.1.4 数组反转</span></h3><h4 id="obnahLuKAQrdcqNzBXTzbu" class="wolai-block"><span class="inline-wrap">规律反转</span></h4><code-block id="skU8zk2rPgZZ2arZfnGRgb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>arr1<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="sNH5oChTRs4Q89TUEEX7f2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayReverse01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">11</span> <span class="token punctuation">,</span> <span class="token number">22</span> <span class="token punctuation">,</span> <span class="token number">33</span> <span class="token punctuation">,</span> <span class="token number">44</span> <span class="token punctuation">,</span> <span class="token number">55</span> <span class="token punctuation">,</span> <span class="token number">66</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
int temp <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">,</span>len <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> len<span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>len<span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span>len<span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="w4FGnSJ2asAFRasGU6iHGy" class="wolai-block"><span class="inline-wrap">逆序赋值</span></h4><h3 id="wGzmT5LR8vrnpbUPLgdDZv" class="wolai-block"><span class="inline-wrap">5.1.6 数组添加</span></h3><h4 id="x2fwptcUdDTYCHTT8XSzRe" class="wolai-block"><span class="inline-wrap">静态添加</span></h4><h4 id="7E4JcYAoLXn6FAMKrKUVw1" class="wolai-block"><span class="inline-wrap">动态添加</span></h4><code-block id="uhfD8ywSbYEqpXYYsLZVjs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayReverse02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">11</span> <span class="token punctuation">,</span> <span class="token number">22</span> <span class="token punctuation">,</span> <span class="token number">33</span> <span class="token punctuation">,</span> <span class="token number">44</span> <span class="token punctuation">,</span> <span class="token number">55</span> <span class="token punctuation">,</span> <span class="token number">66</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>arr1<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
int len <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> len<span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">;</span>i <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
arr2<span class="token punctuation">[</span>len<span class="token operator">-</span>i<span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
arr1 <span class="token operator">=</span> arr2<span class="token punctuation">;</span><span class="token comment">//arr1指向arr2数据空间，此时arr原来的数据空间没有变量引用，会被当作垃圾销</span>
毁
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr1<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="i6fuygWKfDVWZvEEKejTAC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayAdd01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
arr2<span class="token punctuation">[</span>arr2<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token punctuation">;</span>
arr <span class="token operator">=</span> arr2<span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="78BtD2VxLG22FspW3Lv6Vj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword module">import</span> java<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Scanner</span></span><span class="token punctuation">;</span></pre></div></code-block><code-block id="3KCsEw9jfMu7DyQ9yeQKd5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayAdd02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Scanner</span> myScanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">in</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
double<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">do</span><span class="token punctuation">{</span>
double<span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">double</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><h4 id="u5P4xUqCJad5Wb8uH3t9Ji" class="wolai-block"><span class="inline-wrap">动态删减</span></h4><h2 id="hzLUg2Mon8C9tfWwyxwaG2" class="wolai-block"><span class="inline-wrap">5.2 二维数组</span></h2><code-block id="bipFGS3T5cqnj5Ngv8zKCC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"请输入添加的元素"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
double addNum <span class="token operator">=</span> myScanner<span class="token punctuation">.</span><span class="token method function property-access">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
arr2<span class="token punctuation">[</span>arr2<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> addNum<span class="token punctuation">;</span>
arr <span class="token operator">=</span> arr2<span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"是否继续添加 y/n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
char key <span class="token operator">=</span> myScanner<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">charAt</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token string">'n'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="eCiXYWqSE1DCnBvu2mc5SJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword module">import</span> java<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Scanner</span></span><span class="token punctuation">;</span></pre></div></code-block><code-block id="m8FGb45YMS6Q2zh5vnLnfm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayReduce01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Scanner</span> myScanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">in</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr2<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
arr <span class="token operator">=</span> arr2<span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"请输入是否删除最后一个数字 yes/no"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
char key <span class="token operator">=</span> myScanner<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">charAt</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token string">'n'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="8UrV6dnVziQk6wP2rkyk4Z" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="sGi6iSP2xi6Eagf1LBMAXB" class="wolai-block"><span class="inline-wrap">一维数组构成了二维数组</span></h4><h4 id="bNDynsmsinKqndjJGLfzjE" class="wolai-block"><span class="inline-wrap">二维数组遍历</span></h4><h4 id="uNTgar43S7pASkFXcYpaYx" class="wolai-block"><span class="inline-wrap">二维数组内存图</span></h4><h4 id="tEiqPHbXqQeihuthJhVD4u" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="xfZuNS9nkpHPkWg4eXdDp8"><div class="marker"></div><span class="inline-wrap">二维数组元素个数：arr.length</span></li><li id="mefsddYhfvBi5diEBxr9xG"><div class="marker"></div><span class="inline-wrap">取出一维元素需要遍历两次</span></li><li id="5p4qTVfF8H5WiAMmZVuvVe"><div class="marker"></div><span class="inline-wrap">访问第(i+1)个一维数组的第(j+1)个值 arr [i] [j]</span></li></ol><h3 id="gN1KBA37ie1udUGbKFXYVn" class="wolai-block"><span class="inline-wrap">5.2.1 使用方式</span></h3><h4 id="kpkAgfj3gk9QVUsBuvzMqA" class="wolai-block"><span class="inline-wrap">1-动态初始化</span></h4><h4 id="4oWbUmdbUGxjXDgc4XsYQY" class="wolai-block"><span class="inline-wrap">语法：</span></h4><code-block id="3F4SNka5N9Bt6hStoUAZWG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>类型 数组名<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> 类型 <span class="token punctuation">[</span>大小<span class="token punctuation">]</span> <span class="token punctuation">[</span>大小<span class="token punctuation">]</span></pre></div></code-block><code-block id="uPrF1vTaw5KAV9wDtoEBaD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TwoDimensionalArrary</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token number">4</span> <span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token number">7</span> <span class="token punctuation">,</span> <span class="token number">8</span> <span class="token punctuation">,</span> <span class="token number">9</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int j <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>j <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="pEaNPoBccau4Q1BoTYq6hY" class="wolai-block"><span class="inline-wrap">2-动态初始化 2</span></h4><h4 id="vzqQjWekncPTtM5EK5ozUf" class="wolai-block"><span class="inline-wrap">先声明数组：</span></h4><h4 id="5rogsKe3oRiAgGuGFMt8Rd" class="wolai-block"><span class="inline-wrap">数据类型 数组名[] [];</span></h4><code-block id="4yU6FVkM9utFwTTvsCcNVz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>例：int a<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="5ZZqE2K3jyYPmh19zvRF1k" class="wolai-block"><span class="inline-wrap">再创建数组：</span></h4><code-block id="chuksw3UDh3onXMy3PL8dF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>数组名 <span class="token operator">=</span> <span class="token keyword">new</span> 数据类型<span class="token punctuation">[</span>大小<span class="token punctuation">]</span> <span class="token punctuation">[</span>大小<span class="token punctuation">]</span><span class="token punctuation">;</span>
例：a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="dxRqFKeRVVYZGCC7rShunq" class="wolai-block"><span class="inline-wrap">3-动态初始化-列数不确定</span></h4><code-block id="8mfvtjYt26v6sFvBJxqgcj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TwoDimensionalArrary02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
arr<span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int j <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>j <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="q3CC3jHX4ZSwvFeFZUXb6v" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TwoDimensionalArrary03</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//创建二维数组，只确定一维数组的个数，一维数组开没有开数据</span>
空间
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>i<span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//给一维数组开空间</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int j <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">;</span><span class="token comment">//给每一个一维数组元素赋值</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int j <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出结果：1 22 333</span></pre></div></code-block><h4 id="7SqSBEUbrB46qxUvW52jUm" class="wolai-block"><span class="inline-wrap">4-静态初始化</span></h4><h4 id="iuQd919WHciXyPV7pWCuTY" class="wolai-block"><span class="inline-wrap">语法：</span></h4><h4 id="dW72iAGGEbNnnHSTX6dj7X" class="wolai-block"><span class="inline-wrap">类型 数组名[] [] = {{<span class="jill"></span>值<span class="jill"></span>1,值<span class="jill"></span>2},{<span class="jill"></span>值<span class="jill"></span>1,值<span class="jill"></span>2},{<span class="jill"></span>值<span class="jill"></span>1,值<span class="jill"></span>2}}</span></h4><h4 id="ov73zfYEcWkH819VCURsRe" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="gSgAxqtANU7p3zm8ZNLSN3"><div class="marker"></div><span class="inline-wrap">一维数组声明方式：int [] x 或者 int x []</span></li><li id="6Amd2xDjkAuz6VWSCYCixG"><div class="marker"></div><span class="inline-wrap">二维数组声明方式：int [] [] y 或者 int[] y [] 或者 int y [] []</span></li><li id="iQyMd572MBixkpWgkb7Zw4"><div class="marker"></div><span class="inline-wrap">二维数组实际上是由多个一维数组组成的， </span><span class="inline-wrap"><b>它的各个一维数组的⻓度可以相同，也可以不相同</b></span></li></ol><h2 id="j3g2pkpDD97T2s7pgHojnX" class="wolai-block"><span class="inline-wrap">5.3 排序(基础)</span></h2><h3 id="oksGjPvKN2rQToodtZxBpG" class="wolai-block"><span class="inline-wrap">5.3.1 排序分类</span></h3><h4 id="jKnVHU2ESNqydNy82G7ywt" class="wolai-block"><span class="inline-wrap">1. 想需要处理的所有数据都加载到内部存储器中进行排序。包括(交换式排序法、选择式排序法和插入式排序法)</span></h4><h4 id="rKtseebegQRLeWvYH8fhHT" class="wolai-block"><span class="inline-wrap">2. 数据量过大，无法全部加载到内存中，需要借助外部存储进行排序。包括(合并排序法和直接合并排序法)</span></h4><h3 id="s4FcPADd7zwNuUHtHTak4o" class="wolai-block"><span class="inline-wrap">5.3.2 冒泡排序</span></h3><h4 id="nck9eb7VcZjU4nB5zdG3pj" class="wolai-block"><span class="inline-wrap">定义：</span></h4><code-block id="jBU29n3Wk7n1FRxYNALw6X" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">冒泡排序</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Bubble</span> <span class="token maybe-class-name">Sorting</span><span class="token punctuation">)</span><span class="token function">的基本思想是：通过对待排序序列从后向前</span><span class="token punctuation">(</span>从下标较大的元素开始<span class="token punctuation">)</span>，依次比较相
邻元素的值，若发现逆序则交换，使值较大的元素逐渐从前移向后部，就象水底下的气泡一样逐渐向上冒</pre></div></code-block><h4 id="3pLRUtVXLHmjYRKkp9bsfT" class="wolai-block"><span class="inline-wrap">冒泡排序特点</span></h4><ol class="wolai-block"><li id="rveeJWLZvM1ND8PzxtsozG"><div class="marker"></div><span class="inline-wrap">一共有 n 个元素</span></li><li id="uMJcYZZ3CQqQsvps3JrUBx"><div class="marker"></div><span class="inline-wrap">一共进行了 n-1 轮排序，可以看成是外层循</span></li><li id="v7wzZsqDqKtkySvrHsDb4f"><div class="marker"></div><span class="inline-wrap">每 1 轮排序可以确定一个数的位置，比如第 1 轮排序确定最大数,第 2 轮排序，确定第 2 大的数位置，依次类
推</span></li><li id="3SNTfXm9c6ZvonLWMfZJrQ"><div class="marker"></div><span class="inline-wrap">当进行比较时，如果前面的数大于后面的数，就交换
public class BubbleSort {
public static void main(String[] args) {
int temp = 0 ;
int[] arr = { 24 , 69 , 80 , 57 , 13 , 321 , 34 , 56 , 7 ,- 4 };
for (int i = 0 ;i &lt; arr.length- 1 ;i++){
for(int j = 0 ;j &lt; arr.length- 1 - i;j++){
if(arr[j] &gt; arr[j + 1 ]){
temp = arr[j];
arr[j] = arr[j+ 1 ];
arr[j+ 1 ] = temp;
}
}
}
System.out.println(&quot;==排序结果==&quot;);
for(int i = 0 ;i &lt; arr.length;i++) {
System.out.print(arr[i] + &quot;\t&quot;);
}</span></li></ol><h2 id="mV2XzERKwLa9Fpitb1F74c" class="wolai-block"><span class="inline-wrap">5.4 查找(基础)</span></h2><h2 id="sXfb6nkRfQ2Kfe3TsxoBEe" class="wolai-block"><span class="inline-wrap">5.4.1 顺序查找</span></h2><h2 id="uoNkzMTQd4x6ikgasozZyM" class="wolai-block"><span class="inline-wrap">5.4.2 二分查找</span></h2><h1 id="1cVLgrnTBFZYgiMdDXbYGn" class="wolai-block"><span class="inline-wrap">6 面向对象(基础)</span></h1><h2 id="148JSgS9izsDwJbq5w86yQ" class="wolai-block"><span class="inline-wrap">6.1 类与对象</span></h2><h4 id="jFnjy2Ps3415c1oUEZF5Cr" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="qQ14fsr12rm5UphfDrfKNH" class="wolai-block"><span class="inline-wrap">类是抽象的，概念的，代表一类事物,比如人类, 猫类...即它是数据类型</span></h4><h4 id="nsD8MYVxMMCT4M8geRvtaS" class="wolai-block"><span class="inline-wrap">对象是具体的，实际的，代表一个具体事物，即是实例</span></h4><h4 id="aGuDXRJgL9cVTxnnFLSe3x" class="wolai-block"><span class="inline-wrap">类是对象的模板，对象是类的一个个体，对应一个实例</span></h4><h4 id="jNwBYJBDWv7MrxU97JkvJJ" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="s2pydGQXFfFeYAUXeoxG5Q" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="otGWdN7ZQsD9fHNYyYgyKR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword module">import</span> java<span class="token punctuation">.</span><span class="token property-access">util</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Scanner</span></span><span class="token punctuation">;</span></pre></div></code-block><code-block id="77Q5CFXGcvKzb93HCCkbKq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeqSearch</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"白眉鹰王"</span><span class="token punctuation">,</span><span class="token string">"金毛狮王"</span><span class="token punctuation">,</span><span class="token string">"紫衫⻰王"</span><span class="token punctuation">,</span><span class="token string">"⻘翼蝠王"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Scanner</span> myScanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">in</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"请输入名字"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> findName <span class="token operator">=</span> myScanner<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="pB3aJWnXhLxDiBX9kxhbzm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int index <span class="token operator">=</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;</span> names<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>findName<span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>names<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"恭喜找到"</span><span class="token operator">+</span>findName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"序号为"</span><span class="token operator">+</span><span class="token punctuation">(</span>i<span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
index <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"sorry,没有找到"</span><span class="token operator">+</span>findName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="1MA8CuahKpmwCoGsVXsDC3" class="wolai-block"><span class="inline-wrap">对象存在形式 ⭐</span></h4><h3 id="eD8ZYWKA7HskQx2s8K9aNi" class="wolai-block"><span class="inline-wrap">6.1.1 属性/成员变量</span></h3><h4 id="gC1ue7Df8fGbXUzyBtnfpS" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="hfHTaZA2G5Evr3miH2jQyC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>从概念或叫法上看： 成员变量 <span class="token operator">=</span> 属性 <span class="token operator">=</span><span class="token function">field</span><span class="token punctuation">(</span>字段<span class="token punctuation">)</span>
属性是类的一个组成部分，一般是基本数据类型<span class="token punctuation">,</span><span class="token function">也可是引用类型</span><span class="token punctuation">(</span>对象，数组<span class="token punctuation">)</span>，比如定义猫类 的 int age
就是属性</pre></div></code-block><h4 id="bBNFynWa6u2RT6oRD4CgWu" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="nYwK38UF4WN58FcVitFJ9y" class="wolai-block"><span class="inline-wrap">1. 属性的定义语法同变量，示例：访问修饰符 属性类型 属性名</span></h4><ol class="wolai-block"><li id="vdAG1Si24ZSxDkhEx9uvdo"><div class="marker"></div><span class="inline-wrap">访问修饰符：控制属性和访问范围，有四种访问修饰符 public,proctected,defaul,private</span></li><li id="g6mKkF6kpBLHMMvqVL6XGk"><div class="marker"></div><span class="inline-wrap">属性的定义类型可以为任意类型，包含基本类型或引用类型</span></li><li id="uyCgetuafQUh1hEPzd5NMy"><div class="marker"></div><span class="inline-wrap"><b>属性如果不赋值，有默认值，规则和数组一致:</b></span><span class="inline-wrap">
int0,short 0, byte 0, long 0, float 0.0,double 0.0
char \u0000,boolean false, String null</span></li></ol><h3 id="u6an3Mmy4xaT1Tm6xk4pXy" class="wolai-block"><span class="inline-wrap">6.1.2 如何创建对象</span></h3><h4 id="tA4BDhasbs6V6RcWZZUHkx" class="wolai-block"><span class="inline-wrap">先声明在创建</span></h4><h4 id="6vvswvAtdJWwGjKoGLoYxg" class="wolai-block"><span class="inline-wrap">直接创建</span></h4><code-block id="tcHfz9i8kFWEm2BMGqKoUd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Cat</span> cat<span class="token punctuation">;</span>
cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="a9sqGe7S7DoMpxaQgdfb3D" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Cat</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="qT6YPwoEWf3BbanFDtrUsx" class="wolai-block"><span class="inline-wrap">对象创建流程分析 ⭐⭐</span></h4><ol class="wolai-block"><li id="4DX78pj5mWShxdryjgeo8N"><div class="marker"></div><span class="inline-wrap">加载 Person 类信息(就是 Person.class 且只加载一次)</span></li><li id="keqognwKRYGMqo8XFUzHgQ"><div class="marker"></div><span class="inline-wrap">在堆中分配空间(地址)</span></li><li id="9nt76wGTt5oCS9VphczV8J"><div class="marker"></div><span class="inline-wrap"><b>完成对象初始化</b></span><span class="inline-wrap">
</span><span class="inline-wrap"><b>(3.1 默认初始化 age = 0 name =null</b></span><span class="inline-wrap">
</span><span class="inline-wrap"><b>3.2 显示初始化 age = 90 name = null</b></span><span class="inline-wrap">
</span><span class="inline-wrap"><b>3.3 构造器初始化 age = 20 name = 小倩)</b></span></li><li id="h9mR9JA4VDU3w9PFPQWdqs"><div class="marker"></div><span class="inline-wrap">在对象在堆中的地址返回给 P(P 是对象名，是对象的引用)</span></li></ol><h3 id="qZ14YKbs9L7mMCAzujFF2S" class="wolai-block"><span class="inline-wrap">6.1.3 对象分配机制</span></h3><code-block id="dvRVzaZ1Vqp4jscywdXKuo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
p1<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">"小明"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Person</span> p2 <span class="token operator">=</span> p1<span class="token comment">//把p1赋给了p2，或让p2指向p1</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="4GrJ6rzLPRPVD4RC6db7Wo" class="wolai-block"><span class="inline-wrap">Java 内存结构分析：</span></h4><h4 id="iH1ogp6BTpCQcdLVFaaSbN" class="wolai-block"><span class="inline-wrap">1. 栈：一般存放基本数据类型(局部变量)</span></h4><ol class="wolai-block"><li id="wPU6uVTw8btHe7GXSonz87"><div class="marker"></div><span class="inline-wrap">堆：存放对象(Cat cat，数组等)</span></li><li id="hZhjgPXdgnr458HNdkezJN"><div class="marker"></div><span class="inline-wrap">方法区：常量池(常量，比如字符串)，类加载信息</span></li></ol><h4 id="4EVvgvM7jS5UZFs86YbRK1" class="wolai-block"><span class="inline-wrap">Java 创建对象流程</span></h4><ol class="wolai-block"><li id="ex7otCFEEnA9UyG1UjU3U5"><div class="marker"></div><span class="inline-wrap">先加载 Person 类信息(属性和方法信息，只会加载一次)</span></li><li id="ofndJiPjTNYGmDCD7JuZh7"><div class="marker"></div><span class="inline-wrap">在堆中分配空间，进行默认初始化(看规则)</span></li><li id="msuhJCRLsHceyJwkXhJiVG"><div class="marker"></div><span class="inline-wrap">把地址赋给 p，p 就指向对象</span></li><li id="t9NfYwQVomv6JcLudYFx8v"><div class="marker"></div><span class="inline-wrap">行指定初始化，比如 p.name =&quot; jack&quot; p.age = 10</span></li></ol><h2 id="3EtgQGhF9omfZyvbgkpQBr" class="wolai-block"><span class="inline-wrap">6.2 成员方法 ⭐</span></h2><h4 id="3qG4SunJhzF6fQjtd65yNN" class="wolai-block"><span class="inline-wrap">方法定义：</span></h4><h4 id="fiUg9Af8pzGpJK1HusuRat" class="wolai-block"><span class="inline-wrap">1. 访问修饰符 返回数据类型 方法名(形参列表) {//方法体</span></h4><h4 id="41GEXTS1s2AyurnzoygfrW" class="wolai-block"><span class="inline-wrap">语句;</span></h4><code-block id="iCdcGtiTSrU5j9oCN93LHf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">return</span> 返回值<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><ol class="wolai-block"><li id="3zLv8HB5azuTjeQ6JvQUdm"><div class="marker"></div><span class="inline-wrap">形参列表：表示成员方法输入 callint n)</span></li><li id="3X7W96dcT7vHUbMBXhkmT9"><div class="marker"></div><span class="inline-wrap">数据类型(返回类型)：表示成员方法输出，void 表示没有返回值</span></li></ol><code-block id="efFCuDSFqtUqS7D3WSKY4f" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Person</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">"jack"</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span></pre></div></code-block><h4 id="9kokF7ahpr8pzUg994jeMN" class="wolai-block"><span class="inline-wrap">3. 方法主体：表示为了实现某一功能代码块</span></h4><ol class="wolai-block"><li id="aoDrCcq1A7bViiej5Ex4Xm"><div class="marker"></div><span class="inline-wrap">return 语句不是必须的</span></li></ol><h3 id="stMiN1V2dinWR1Zm7T3myd" class="wolai-block"><span class="inline-wrap">6.2.1 调用方法：</span></h3><ol class="wolai-block"><li id="ufLws6tSSx4m2Lq5Twxthw"><div class="marker"></div><span class="inline-wrap">public 表示方法是公开</span></li><li id="wawcx7Lc4fAszs3f6c4PMF"><div class="marker"></div><span class="inline-wrap">void：表示方法没有返回值</span></li><li id="uWc4VnhAdXZ6s2gTKbG3E8"><div class="marker"></div><span class="inline-wrap">speak() ：speak 是方法名，()形参列表</span></li><li id="wKJAZ4unEM9MpornpNkrBM"><div class="marker"></div><span class="inline-wrap">{}<span class="jill"></span>方法体，可以写我们要执行的代码</span></li><li id="8zRr887ZqougdrAcVKox8g"><div class="marker"></div><span class="inline-wrap">System.out.println(”我是一个好人”)；表示我们的方法就是输出一句话</span></li><li id="vLk37xXDEzDZTWsUk7Eq3J"><div class="marker"></div><span class="inline-wrap">p1.speak()为调用</span></li></ol><code-block id="bjBx62cmeYRAM8fcAPjjPe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Method01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span><span class="token method function property-access">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span><span class="token method function property-access">cal01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span><span class="token method function property-access">cal02</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
int returnRes <span class="token operator">=</span> p1<span class="token punctuation">.</span><span class="token method function property-access">getSum</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>returnRes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="4d9U9TvNcXE4LmENfwSr9f" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
int age<span class="token punctuation">;</span></pre></div></code-block><code-block id="s8fJGCKzKnWEQVs4AVPtDk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">speak</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"你是一个呆猪"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cal01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
int res <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> <span class="token number">1000</span> <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
res <span class="token operator">+=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cal02</span><span class="token punctuation">(</span><span class="token parameter">int n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
int res <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
res <span class="token operator">+=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> int <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token parameter">int num1<span class="token punctuation">,</span>int num2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
int res <span class="token operator">=</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token keyword control-flow">return</span> res<span class="token punctuation">;</span></pre></div></code-block><h3 id="dvrTaefSazbSk2ZuLhqZCK" class="wolai-block"><span class="inline-wrap">6.2.2 调用的内存机制：</span></h3><h4 id="qDDUSQoEnXe4gpcZY8wAKt" class="wolai-block"><span class="inline-wrap">调用的内存机制：</span></h4><ol class="wolai-block"><li id="3F41o6EtJYmimjcpn7zwcE"><div class="marker"></div><span class="inline-wrap">public 表示方法是公开的</span></li><li id="2hX7xQknG4C6rR1qCRgrmd"><div class="marker"></div><span class="inline-wrap">int :表示方法执行后，返回一个 int 值</span></li><li id="fpRSLGCFoHhYNXHZoBkUTV"><div class="marker"></div><span class="inline-wrap">getsum 方法名</span></li><li id="nHpbchnw1yQxx5JMjywQ8a"><div class="marker"></div><span class="inline-wrap">(int num1， int num2) 形参列表，^2 个形参，可以接收用户传入的两个数</span></li><li id="wA2WEDYv1WoSkGZcin8YTa"><div class="marker"></div><span class="inline-wrap">return res；表示把 res 的值，返回</span></li></ol><h3 id="5soswfCkPKwNWKRGc4s82e" class="wolai-block"><span class="inline-wrap">6.2.3 注意事项和细节</span></h3><h4 id="fwGHArF7YBdowKqVjgQ9id" class="wolai-block"><span class="inline-wrap">访问修饰符：</span></h4><h4 id="wNodVRocsGENxiVaKbwrrY" class="wolai-block"><span class="inline-wrap">1. 作用是控制方法使用的适用范围，若果不写则默认访问</span></h4><h4 id="fU6LJDjfeckTj37iM1nVA6" class="wolai-block"><span class="inline-wrap">返回类型：</span></h4><h4 id="9WuthbYV63nXgAfmKMc5Lr" class="wolai-block"><span class="inline-wrap">1. 一个方法最多有一个返回值</span></h4><h4 id="bnTDS7kV9qKyHVLhdWQjsW" class="wolai-block"><span class="inline-wrap">2. 返回类型可以为任意类型，包含基本类型或引用类型(数组，对象)</span></h4><ol class="wolai-block"><li id="tNhdE2Xxe8eyz4t6tsrGqE"><div class="marker"></div><span class="inline-wrap"><b>方法要求有返回数据类型，则方法体中最后的执行语句必须为 return 值;要求返回值类型必须和 return</b></span><span class="inline-wrap">
</span><span class="inline-wrap"><b>的值类型一致或兼容</b></span></li><li id="91s9bF4FbDq3TY1bQu7WZz"><div class="marker"></div><span class="inline-wrap">如果方法是 void，则方法体中可以没有 return 语句，或者 只写 return</span></li></ol><h4 id="kD2vpgs9AhowJTTFguB4fK" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="or1H1UyTXEc826pEU8mbVj" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="6a774oCrxC6hSoKANfLLGV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token parameter">int num1<span class="token punctuation">,</span>int num2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
int res <span class="token operator">=</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token keyword control-flow">return</span> res<span class="token punctuation">;</span></pre></div></code-block><h4 id="hTkTSDqRDZqWEE1DmdfpVb" class="wolai-block"><span class="inline-wrap">方法名：</span></h4><h4 id="oJH4nztepmU96zFFQokZre" class="wolai-block"><span class="inline-wrap">1. 方法名遵循驼峰法则</span></h4><h4 id="mPiig8NgwUj1ow9V8FWLyB" class="wolai-block"><span class="inline-wrap">参数列表：</span></h4><ol class="wolai-block"><li id="ksJyF1t4K6wUnhQaEChEc3"><div class="marker"></div><span class="inline-wrap">一个方法可以有 0 个参数，也可以有多个参数，中间用逗号隔开，比如 getSum(int n1,int n2)</span></li><li id="3DJPrccx1ik68mNyQ7kYSL"><div class="marker"></div><span class="inline-wrap">参数类型可以为任意类型，包含基本类型或引用类型，比如 printArr(intlIl map)</span></li><li id="iVHA9MqhyLwarntoPE9EzJ"><div class="marker"></div><span class="inline-wrap">调用参数的方法时，一定对应着参数列表传入相同类型或莱容类型 的参数</span></li><li id="kJXfkW7qrAaeKqGpmBx2Sp"><div class="marker"></div><span class="inline-wrap">方法定义时的参数称为形式参数，简称形参；方法调用时的参数称为实际参数，简称实参，实参和形参
的类型要一致或兼容、个数、顺序必须一致</span></li></ol><h4 id="pHdGmRgjD8RctfBueSJXQG" class="wolai-block"><span class="inline-wrap">方法体：</span></h4><h4 id="8jRen3xtz4VC6VrPpyUdAQ" class="wolai-block"><span class="inline-wrap">1. 里面写完成功能的具体的语句，可以为输入、输出、变量、运算、分支、循环、方法调用</span></h4><h4 id="pD2JRu38srHAzjbXEDkHe6" class="wolai-block"><span class="inline-wrap">2. 里面不能再定义方法！即： 方法不能嵌套定义</span></h4><h4 id="6ifsicNsjL3eFWVQdBAzbg" class="wolai-block"><span class="inline-wrap">方法调用细节：</span></h4><h4 id="uvJtgyNZwYqnVdXnMjnp7o" class="wolai-block"><span class="inline-wrap">1. 同一个类中的方法调用：直接调用即可</span></h4><h4 id="85KnbZh5TPzT1Urb1H9VBS" class="wolai-block"><span class="inline-wrap">2. 跨类中的方法 A 类调用 B 类方法：需要通过对象名调用</span></h4><h4 id="27ciyUmgtdJd3sLrPPC974" class="wolai-block"><span class="inline-wrap">3. 跨类的方法调用和方法的访问修饰符相关</span></h4><h2 id="kumP4dJXmt4fmhHisxM3VG" class="wolai-block"><span class="inline-wrap">6.3 成员方传法参机制 ⭐⭐</span></h2><h3 id="qGndGn8xZmNHWkXbMCXJjE" class="wolai-block"><span class="inline-wrap">6.3.1 基本数据类型的传参数机制</span></h3><h4 id="dU9GiKdPbs7465yFADH8Aq" class="wolai-block"><span class="inline-wrap">传递的是值(拷⻉)，形参的认何改变不影响实参</span></h4><h3 id="gxUDegFtYCbVrGBZvvjVLc" class="wolai-block"><span class="inline-wrap">6.3.2 引用数据类型的传参数机制</span></h3><h4 id="vJ8298vgNCKu297RduZm8z" class="wolai-block"><span class="inline-wrap">引用类型传递的是地址(传递也是值，但是值是地址)，可以通过形参影响实参</span></h4><h2 id="5ANzbXpWVgooAUXd9Xt81P" class="wolai-block"><span class="inline-wrap">6.4 递归</span></h2><h4 id="krnXm3vGhYfKzKSSnAQk4J" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="fMCdShTvbhpBs6tSZcQipD" class="wolai-block"><span class="inline-wrap">递归就是方法自己调用自己,每次调用时传入不同的变量</span></h4><h4 id="argGF4ChEhbZnLnNbDW8Wz" class="wolai-block"><span class="inline-wrap">递归调用内存机制</span></h4><code-block id="vMreyzhuEqgh41VszC6GeH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Recursion01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">T</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t1<span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
int res <span class="token operator">=</span> t1<span class="token punctuation">.</span><span class="token method function property-access">factorial</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="an66XJcVg7FxHW1UuxGVNr" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="mYjBNDsHoFG5xZpZNPp6Pj" class="wolai-block"><span class="inline-wrap">1. 执行一个方法时，就创建一个新的受保护的独立空间(栈空间)</span></h4><ol class="wolai-block"><li id="uaqYqTvVPW7HziF1PV4eLM"><div class="marker"></div><span class="inline-wrap"><b>方法的局部变量是独立的，不会相互影响，比如 n 变量</b></span></li><li id="4hNigMfxC9AzE1gevtKcTv"><div class="marker"></div><span class="inline-wrap"><b>如果方法中使用的是引用类型变量(比如数组、对象)，就会共享该引用类型的数据</b></span></li><li id="8Q8SSvAv4RXZ95xxDvoinp"><div class="marker"></div><span class="inline-wrap">递归必须向退出递归的条件逼近，否则就是无限递归</span></li><li id="oQ411Xv7otAJFGdkES74V3"><div class="marker"></div><span class="inline-wrap">当一个方法执行完毕，或者遇到 return，就会返回，遵守谁调用，将结果返回给谁，同时当方法执行完
毕或者返回时，该方法也就执行完毕，栈空间回收</span></li></ol><h2 id="f5pLQDXdZTzP6m7hSNFY5c" class="wolai-block"><span class="inline-wrap">6.5 方法重载 (overload)</span></h2><code-block id="mAyC9NTZMTz2vfeeQsLCXM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"res = "</span><span class="token operator">+</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="1mXRqC6skddeeFhZS1Gymz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="wjVmoywE7hRfdmh6dF6yud" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">int n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token function">test</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vApAnqHu3SgnLwJKZx2Arf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">int n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token number">1</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="ameLwGNGddMshgQTsSmbw1" class="wolai-block"><span class="inline-wrap">6.5 方法重载 (overload)</span></h2><h4 id="oMEXoJj3GdMSmHPLi1pFaC" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="drUqcdRW3HpxPqBvYkCvJM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>java中允许同一个类中，多个同名方法的存在，但要求 形参列表不一致</pre></div></code-block><h4 id="nuTQGSPASqfALbeDgJcmo7" class="wolai-block"><span class="inline-wrap">注意事项和细节</span></h4><h4 id="u3zhRFSN1XHq6515UxeBZz" class="wolai-block"><span class="inline-wrap">1. 方法名：必须相同</span></h4><h4 id="hVswDV1z52v58GX94PiAic" class="wolai-block"><span class="inline-wrap">2. 形参列表：必须不同(参数类型、个数、顺序)</span></h4><h4 id="71Zpsx2oL1FaD1iSouj27a" class="wolai-block"><span class="inline-wrap">3. 返回类型：无要求</span></h4><h2 id="iLLNTDNHPf36H8jDGoqWaw" class="wolai-block"><span class="inline-wrap">6.6 可变参数</span></h2><h4 id="kouUUbeAR4Mnxc41rNb7tJ" class="wolai-block"><span class="inline-wrap">基本概念：</span></h4><code-block id="g1zDNa3XnSk1uscsMoNTXZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>java允许将同一个类中多个同名同功能 但参数个数不同 的方法，封装成一个方法，通过可变参数实现</pre></div></code-block><h4 id="ca8CtNpCZ8jDB5cujZvQSr" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="61EthD4mDSDVZ4Y99d3aaF" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="4fbxbcK6VgDe94d7EDUHZt" class="wolai-block"><span class="inline-wrap">1. 可变参数的实参可以为 0 个或任意多个</span></h4><h4 id="7EXDMXhiWtJP1RHBFUivyx" class="wolai-block"><span class="inline-wrap">2. 可变参数的实参可以为数组</span></h4><h4 id="x5NgWEWJSeAJbYQQ23qP5a" class="wolai-block"><span class="inline-wrap">3. 可变参数的本质就是数组</span></h4><h4 id="9Uc2hW48Ee1h333qnHSXU3" class="wolai-block"><span class="inline-wrap">4. 可变参数可以和普通类型的参数一起放在形参列表，但必须保证可变参数在最后</span></h4><h4 id="pbBdsjNqhiwFmfemPsXxTz" class="wolai-block"><span class="inline-wrap">5. 一个形参列表中只能出现一个可变参数</span></h4><h2 id="henhkY1QuY6QVUydhuvhwo" class="wolai-block"><span class="inline-wrap">6.7 变量作用域 ⭐</span></h2><h4 id="sPorJbJe7MPr5Q4m32jqSN" class="wolai-block"><span class="inline-wrap">全局变量和局部变量：</span></h4><h4 id="xqbKXujNqst4hJbEXqHSdH" class="wolai-block"><span class="inline-wrap">1. 主要的变量就是属性(成员变量)和局部变量</span></h4><h4 id="83SXdvpThSTATK43jvHmNy" class="wolai-block"><span class="inline-wrap">2. 局部变量一般是指在成员方法中定义的变量</span></h4><h4 id="oatXj2bRBkamCgmTmMwJEA" class="wolai-block"><span class="inline-wrap">3. 全局变量：也就是属性，作用域为整个类体</span></h4><h4 id="mPwBkManGQnBrUXxmrXwi5" class="wolai-block"><span class="inline-wrap">4. 局部变量：也就是除了属性之外的其他变量，作用域为定义它的代码块中</span></h4><h4 id="avP67bAMVt8C8PMwYFHqwd" class="wolai-block"><span class="inline-wrap">5. 全局变量(属性)可以不赋值，直接使用，因为有默认值，局部变量必须赋值后，才能使用，因为没有默认</span></h4><h4 id="1t7jNvfQsmKki3saeAv2wq" class="wolai-block"><span class="inline-wrap">值</span></h4><h4 id="cMdMj28FR91hcNxeAUGaFr" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="jHWzCeuoGLukJ7RjXd4E3U" class="wolai-block"><span class="inline-wrap">1. 全局变量和局部变量可以重名，访问时遵循就近原则</span></h4><h4 id="g2nLAQMwxk7vDFh2KMyLKw" class="wolai-block"><span class="inline-wrap">2. 在同一个作用域中，两个局部变量，不能重名</span></h4><h4 id="c95S9CgG8GgcwEGAFxWnt5" class="wolai-block"><span class="inline-wrap">3. 全局变量生命周期⻓，伴随着对象的创建而创建，伴随着对象的销毁而销毁</span></h4><h4 id="t3Q8wRtmbT3nsyjWPfKMAF" class="wolai-block"><span class="inline-wrap">4. 局部变量生命周期短，伴随着它的代码块的执行而创建，伴随着代码块的结束而结束：即在一次方法调</span></h4><h4 id="kfowm4FFPeZUK8GSYLwkSt" class="wolai-block"><span class="inline-wrap">用过程中</span></h4><h4 id="n3qzqaHZVv58f1WQB65iGy" class="wolai-block"><span class="inline-wrap">5. 作用域范围不同</span></h4><h4 id="qRK32czCJyAeskhKjDDDhp" class="wolai-block"><span class="inline-wrap">全局变量/属性：可以被本类使用，或其他类使用(通过对象调用)</span></h4><h4 id="7Yk5Xivu11KZnYogEwt9zo" class="wolai-block"><span class="inline-wrap">局部变量：只能在本类中对应的方法中使用</span></h4><h4 id="rSncw93vtRF4YchEdepNwY" class="wolai-block"><span class="inline-wrap">访问修饰符 返回类型 方法名(</span><span class="inline-wrap"><b>数据类型...</b></span><span class="inline-wrap"> 形参名){}</span></h4><h4 id="aACevcn83fEvV7rxe4qrp7" class="wolai-block"><span class="inline-wrap">6. 修饰符不同</span></h4><h4 id="fyaddeWmd6CYfyKe2U1B3v" class="wolai-block"><span class="inline-wrap">全局变量/属性可以加修饰符</span></h4><h4 id="tYZ1HbusgEtxV1ayeyEPu7" class="wolai-block"><span class="inline-wrap">局部变量不可以加修饰符</span></h4><h4 id="kuLoeUaUtoMziaKvP59wF3" class="wolai-block"><span class="inline-wrap">两种调用方式</span></h4><h2 id="eYWJzH1HpD9QhXBUHuHrvY" class="wolai-block"><span class="inline-wrap">6.8 构造器 ⭐</span></h2><h4 id="935bARCg1X571NSBkEJJT3" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="joyukkabSPUL7NqWZCkMK6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">构造方法又叫构造器</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span>，是类的一种特殊的方法，它的主要作用是完成对 新对象的初始化</pre></div></code-block><h4 id="brB3kJVtx5n51BdkVAYSn4" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="qekitecGvSEW9BttvxYbPK" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="hG1gqegptbC9kQEC6MFfYs" class="wolai-block"><span class="inline-wrap">1. 修饰符可以默认</span></h4><h4 id="q4GKC6FP7tgHQHyFrn8hAn" class="wolai-block"><span class="inline-wrap">2. 一个类可以定义多个不同的构造器，即构造器重载</span></h4><h4 id="pcu7UapXp9842yBKpQeTQb" class="wolai-block"><span class="inline-wrap">3. 构造器名和类名要相同</span></h4><h4 id="5vSneWY3iGTixnwykefg3c" class="wolai-block"><span class="inline-wrap">4. 构造器没有返回值</span></h4><code-block id="9iywSQgLYXKFGorRCCnFkx" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VarScopeDetail</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">E</span> e1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">E</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
e1<span class="token punctuation">.</span><span class="token method function property-access">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="gWUEjnRnRPjb1mvccoqH2Y" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Per</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Per</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
e1<span class="token punctuation">.</span><span class="token method function property-access">test2</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="rGW66KJzW3w1kUXpSi1YDb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">E</span><span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">Per</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Per</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Per</span> p</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//接收一个类</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="ewEjP6XtoVFgZjgTKsDKDR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Per</span><span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> <span class="token string">"jack"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="6jHHwVUe2VZXNUmGfYFCaq" class="wolai-block"><span class="inline-wrap">[修饰符] 方法名 (行参列表){</span></h4><h4 id="jJdJtAYV3e5741GW1FkTmf" class="wolai-block"><span class="inline-wrap">方法体;</span></h4><h4 id="r4X19rFWuPmvRZkFwBejHF" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="91ZURE6r6V3DpWKMfDYzGQ" class="wolai-block"><span class="inline-wrap">5. 构造器是完成对象的初始化，井不是创建对象</span></h4><h4 id="uKmb1PprCYpVYS37BejVFV" class="wolai-block"><span class="inline-wrap">6. 在创建对象时,系统自动的调用该类的构造方法</span></h4><h4 id="kdadjJsZeuBTozFh6SrxqT" class="wolai-block"><span class="inline-wrap">7. 如果没有定义构造器，系统会自动给类生成一个默认无参构造器(默认构造器)</span></h4><h4 id="jfGcVKnpysWCPFRKcZzyuj" class="wolai-block"><span class="inline-wrap">8. 定义了自己的构造器,默认的构造器就覆盖了，就不能再使用默认的无参构造器，除非显式的定义一下</span></h4><h2 id="jncEv2rG83kNYkzoyJjzC4" class="wolai-block"><span class="inline-wrap">6.9 this</span></h2><h4 id="29f7VDXTM6i2PB1grfs4ED" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="o8hmmsU4c9rbfHbWCt6ePN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>java虚拟机会给每个对象分配<span class="token keyword">this</span>，代表当前对象</pre></div></code-block><h4 id="qxCzWvZjMiYUgWS2AHiNPf" class="wolai-block"><span class="inline-wrap">内存分析：</span></h4><code-block id="nyEhjPjKsa198yhN9wVHri" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Constructor01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Pers</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Pers</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pers</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">,</span> <span class="token number">80</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token operator">+</span>p1<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token operator">+</span>p2<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="gEdt7XvdoURBwafE4dMYgE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Pers</span><span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
int age<span class="token punctuation">;</span></pre></div></code-block><code-block id="bpZzwQfNJGBkAsTPaVVF4e" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Pers</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"构造器 1 被调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
age <span class="token operator">=</span> <span class="token number">18</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Pers</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> pName<span class="token punctuation">,</span>int pAge</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"构造器 2 被调用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
name <span class="token operator">=</span> pName<span class="token punctuation">;</span>
age <span class="token operator">=</span> pAge<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="uEbKqoF8ax6GPbVGTzRZ95" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="tpr3vDYJgpAiEFNB2Dx2LQ"><div class="marker"></div><span class="inline-wrap">this 关键字可以用来访问本类的属性、方法、构造器</span></li><li id="9AhujG6eeeNCag2TRGKmjj"><div class="marker"></div><span class="inline-wrap">this 用于区分当前类的属性和局部变量</span></li><li id="63Ny9fXpenUXNgeaWQ6okJ"><div class="marker"></div><span class="inline-wrap">访问成员方法的语法：this.方法名(参数列表);</span></li><li id="46LBChfUNQjfomMZDvwnxC"><div class="marker"></div><span class="inline-wrap"><b>访问构造器语法：this(参数列表)：注意只能在构造器中使用(在构造器中访问另外一个构造器，必须放</b></span><span class="inline-wrap">
</span><span class="inline-wrap"><b>在第一条语句)</b></span></li><li id="peZBmAxTCkAGfqKKGFEAmp"><div class="marker"></div><span class="inline-wrap">this 不能在类定义的外部使用，只能在类定义的方法中使用</span></li></ol><h1 id="4xUbMhJ9dwSMKYoinNqcah" class="wolai-block"><span class="inline-wrap">7 面向对象(中级)</span></h1><h2 id="hb2S661hDqcbZAEDY8hAQY" class="wolai-block"><span class="inline-wrap">7.0 IDEA</span></h2><code-block id="98XaxRksaLg3K6Wq9eXFhW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThisExercise01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
person p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person</span><span class="token punctuation">(</span><span class="token string">"marry"</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
person p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">person</span><span class="token punctuation">(</span><span class="token string">"marry"</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token method function property-access">compareTo</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="5zGDmnJRRTmVtWyAY2V5LF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">person</span><span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
int age<span class="token punctuation">;</span></pre></div></code-block><code-block id="nPbQ9VGHXo6EVrVEffNSPm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span>int age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="8a1dmiaKfQVgnHY3nxVX4m" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> boolean <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token parameter">person p</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">==</span> p<span class="token punctuation">.</span><span class="token property-access">age</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="uZBhcgaAmfr8SGo8tmJunL" class="wolai-block"><span class="inline-wrap">7.0 IDEA</span></h2><h4 id="wV2vA9wLAuYDgBdPsLCZp3" class="wolai-block"><span class="inline-wrap">常用快捷键：</span></h4><ol class="wolai-block"><li id="6LowLuGJ2G9bMzWHkL7Y1J"><div class="marker"></div><span class="inline-wrap">command + d 删除当前行</span></li><li id="fx9KuWSWt4CQMomqPJswpn"><div class="marker"></div><span class="inline-wrap">command + option + 向下光标 向下复制当前行</span></li><li id="9nf7fsSX2e79KLHEVDkYb8"><div class="marker"></div><span class="inline-wrap">option + / 补全代码</span></li><li id="cYWSenUBrZTN4NAwkmfkZf"><div class="marker"></div><span class="inline-wrap">command + / 注释</span></li><li id="a8Ufkx4Ni1uEMoaKfc4QvK"><div class="marker"></div><span class="inline-wrap">option + enter 导入该行的类</span></li><li id="6DwcYpox1sBqviv9rBzLW5"><div class="marker"></div><span class="inline-wrap">command + option + L 格式化代码</span></li><li id="1FnKWy2QrbNnR9TAM8kNy8"><div class="marker"></div><span class="inline-wrap">control + R 运行</span></li><li id="cqr4MFYB3PrKcW9KBFGuXD"><div class="marker"></div><span class="inline-wrap">optio + A 构造器</span></li><li id="6WCuxFa3MJNs2WWTzLJcqH"><div class="marker"></div><span class="inline-wrap">control + H 查看继承关系</span></li><li id="7pLRBVEAm8GjJdB1k23Hh2"><div class="marker"></div><span class="inline-wrap">command + B 定位方法</span></li><li id="rizputCHA8xmQmkmrf5UVe"><div class="marker"></div><span class="inline-wrap">.var 自动变量名</span></li><li id="eRSx3kE9WQxTveCwr8RNAB"><div class="marker"></div><span class="inline-wrap">Command + option + T 环绕方式</span></li></ol><h4 id="o88anFQbJwTXUAnsL61kLT" class="wolai-block"><span class="inline-wrap">常用模版快捷键</span></h4><ol class="wolai-block"><li id="cXAzJ4dVD1gqykck5VggBm"><div class="marker"></div><span class="inline-wrap">fori 遍历</span></li><li id="djwkA5fzNnfqvwa6pdq9W7"><div class="marker"></div><span class="inline-wrap">itar 遍历数组</span></li><li id="3Xz3xmiue9SzPsJyZw7g9X"><div class="marker"></div><span class="inline-wrap">iter 增强遍历</span></li><li id="ua7dwcyMbykTfvvAN7zZrT"><div class="marker"></div><span class="inline-wrap">sout 打印换行</span></li></ol><h2 id="wr9UKb667RcrWieNSLNq9E" class="wolai-block"><span class="inline-wrap">7.1 包</span></h2><h4 id="osHwk3sMULY6BhoVxiXBx2" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><code-block id="cV7K1C5BX7qEfoz2dFBQSu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Package</span> 包名</pre></div></code-block><h4 id="gN5RuYgfLRq2xVhYQtLCeE" class="wolai-block"><span class="inline-wrap">包的命名：</span></h4><h4 id="jTMrMbNNjnGyDm8k1aiCbo" class="wolai-block"><span class="inline-wrap">只能包含数字、字母、下划线、小圆点，但不能用数字开头，不能是关键字或保留字</span></h4><h4 id="f8aDRi7dryyQTUbZhVfJXb" class="wolai-block"><span class="inline-wrap">命名规范：</span></h4><code-block id="q3Md4fGndr9xVtWjBD7Qxv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>小写字母＋小圆点一般是 com<span class="token punctuation">.</span><span class="token property-access">公司名</span><span class="token punctuation">.</span><span class="token property-access">项目名</span><span class="token punctuation">.</span><span class="token property-access">业务模块名</span></pre></div></code-block><h4 id="n9TjkKwkwJZX2Wqwy3Vhkw" class="wolai-block"><span class="inline-wrap">引入包：</span></h4><ol class="wolai-block"><li id="hEhk7m4hjAgUBUUACYE9Zf"><div class="marker"></div><span class="inline-wrap">import java.uti Scanner；就只是引入一个类 Scanner</span></li><li id="ioEfhENG43M8PkaotfgTqQ"><div class="marker"></div><span class="inline-wrap">import java.util *：1/ 表示将 java.util 包所有都引入</span></li></ol><h4 id="hamuA2J7r7uLE6EHCKchAY" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="p2zoKrrZ7sxZ9fdAou8Nxg"><div class="marker"></div><span class="inline-wrap">package 的作用是声明当前类所在的包，需要放在类的最上面，一个类中最多只有一个 package</span></li><li id="d876Q8DM3vS68HHa7KecTz"><div class="marker"></div><span class="inline-wrap">import 指令 位置放在 package 的下面，在类定义前面,可以有多句目没有顺序要求</span></li></ol><h2 id="sJ5ycNnGYXkoXvvVNfSzHt" class="wolai-block"><span class="inline-wrap">7.2 访问修饰符</span></h2><h4 id="88hKBoQjYTvze568JGeDyz" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="6zKHmXezSnHPiWWqhm9pS4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">java提供四种访问控制修饰符号，用于控制方法和属性</span><span class="token punctuation">(</span>成员变量<span class="token punctuation">)</span><span class="token function">的访问权限</span><span class="token punctuation">(</span>范围<span class="token punctuation">)</span></pre></div></code-block><h4 id="71q3jk7ThZpqefWtcaWz8B" class="wolai-block"><span class="inline-wrap">访问权限 ⭐⭐ ：</span></h4><ol class="wolai-block"><li id="hiufqwUzrwJjfxTcs4qkJP"><div class="marker"></div><span class="inline-wrap">公开级别：用 public 修饰,对外公开</span></li><li id="cR8H4J1RUXCKpBLTDP2JHT"><div class="marker"></div><span class="inline-wrap">受保护级别：用 protected 修饰，对子类和同一个包中的类公开</span></li><li id="uYnJhw4jPk7SJj8SLe3hLD"><div class="marker"></div><span class="inline-wrap">默认级别：没有修饰符号，向同一个包的类公开</span></li></ol><h4 id="eyEnaXf13qvBWDdzLTSn38" class="wolai-block"><span class="inline-wrap">访问级别 访问修饰符 同类 同包 子类 不同包</span></h4><code-block id="2Qd5RrUpd93YaucJ5sCqGq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>公开 <span class="token keyword">public</span> ✅ ✅ ✅ ✅</pre></div></code-block><code-block id="2ggX9ZepsQgPmsy4M3eih2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>受保护 <span class="token keyword">protected</span> ✅ ✅ ✅ ❌</pre></div></code-block><code-block id="vhWk4PzMfVAQQN25WXLK9Z" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>默认 无 ✅ ✅ ❌ ❌</pre></div></code-block><code-block id="2ZR61Nna9hcVmGeuZ9Ab8V" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>私有 <span class="token keyword">private</span> ✅ ❌ ❌ ❌</pre></div></code-block><ol class="wolai-block"><li id="hjxP2akTsXcjuYk45K8Bd9"><div class="marker"></div><span class="inline-wrap">私有级别：用 private 修饰,只有类本身可以访问，不对外公开</span></li></ol><h4 id="aCXHfTGGGk3eprntvaubs4" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="2qwBNvkuyw39jsVpEpg3dH" class="wolai-block"><span class="inline-wrap">1. 修饰符可以用来修饰类中的属性，成员方法以及类</span></h4><ol class="wolai-block"><li id="mqQm6CaFwgj8idKVJ6hCxq"><div class="marker"></div><span class="inline-wrap"><b>只有默认的和 public 才能修饰类</b></span><span class="inline-wrap"> ，并目遵循上述访问权限的特点</span></li><li id="dupU2XrtFVBAeNu16SK39B"><div class="marker"></div><span class="inline-wrap">子类待定</span></li><li id="c3nr7DMa3NkL4zBuPW68jk"><div class="marker"></div><span class="inline-wrap">成员方法的访问规则和属性完全样</span></li></ol><h2 id="idzopneYFPxatDh117koK3" class="wolai-block"><span class="inline-wrap">7.3 封装 ⭐</span></h2><h4 id="wviFN3v2Tz1iSw7hBZd2Pm" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="98CPaSmxjTox7baTTpC1kF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">封装</span><span class="token punctuation">(</span>encapsulation<span class="token punctuation">)</span>就是把抽象出的数据<span class="token punctuation">[</span>属性<span class="token punctuation">]</span>和对数据的操作方法封装在一起数据被保护在内部，程序的其
它部分只有通过被授权的操作（方法），才能对数据进行操作</pre></div></code-block><h4 id="2p5ehKJZgstgZJZjZjY88a" class="wolai-block"><span class="inline-wrap">封装步骤：</span></h4><ol class="wolai-block"><li id="tpb8hzuSNjKcis878FeKxU"><div class="marker"></div><span class="inline-wrap">将属性进行私有化 private【不能直接修改属性】</span></li><li id="x9v1donQ7YwQ72DWtjjvC2"><div class="marker"></div><span class="inline-wrap">提供一个公共的(public)set 方法，用于对属性判断井赋值
public void setxxx(类型 参数名){
加入数据验证的业务逻辑;
属性 = 参数名;}</span></li><li id="9XPdP7oJa72SXhHNugHYwp"><div class="marker"></div><span class="inline-wrap">提供个公共的(public)get 方法，用于获取属性的值
public 数据类型 getXxxx0{
return XX;}</span></li></ol><h2 id="exhQPSfirHrLZfBLUney45" class="wolai-block"><span class="inline-wrap">7.4 继承 ⭐</span></h2><h4 id="ndtFQBXqTS7MJgcpm7PVGe" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="wxVXdrUo1zpf6oA8F3ktu4" class="wolai-block"><span class="inline-wrap">继承可以解决代码复用，当多个类存在相同的属性(变量)和方法时,可以以这些类中抽象出交类，在父类中定义</span></h4><div id="rKcTmP6VpzzPJ4JuogJ4tG" class="wolai-block wolai-text"><div><span class="inline-wrap">这些相同的属性和方法，所有的子类不需要重新定义这些属性和方法，只需要通过 extends 来声明继承父类即
可</span></div></div><h4 id="mwws17JTLoYwTZUUQ9d8RJ" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="7nYAQWYezL8DWdwqxs9FP3" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="cb6zgzmCXzGCPPhcnXSL4s" class="wolai-block"><span class="inline-wrap">1. 子类继承了所有的属性和方法，非私有的属性和方法可以在子类直接访问，但是私有属性和方法不能在</span></h4><h4 id="iDGaL2VL43GBSapDwWDzBz" class="wolai-block"><span class="inline-wrap">子类直接访问，要通过父类提供公共的方法去访问</span></h4><h4 id="9p7Vd5R5gmt7KB2xrmxyUk" class="wolai-block"><span class="inline-wrap">2. 子类必须调用父类的构造器，完成父类的初始化</span></h4><h4 id="xm92i6xtGjaMhXYaqZkzTZ" class="wolai-block"><span class="inline-wrap">3. 当创建子类对象时，不管使用子类的哪个构造器，默认情况下总会去调用父类的无参构造器，如果父类</span></h4><code-block id="pb9JDnzrtanK3mJu38kyup" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>没有提供无参构造器，则必须在子类的构造器中用 <span class="token keyword">super</span> 去指定使用父类的哪个构造器完成对父类的初
始化工作，否则，编译不会通过</pre></div></code-block><ol class="wolai-block"><li id="rpya7gy8EFFmS3UEqUk7gz"><div class="marker"></div><span class="inline-wrap">指定去调用父类的某个构造器，则显式的调用一下：super(参数列表)</span></li><li id="vawvmrbRUoMPyzTDNxopoc"><div class="marker"></div><span class="inline-wrap">super 在使用时，必须放在构造器第一行(super 只能在构造器中使用)</span></li><li id="rJutgp942wCENoKGQUuWqL"><div class="marker"></div><span class="inline-wrap">super()和 this()都只能放在构造器第一行，因此这两个方法不能共存在一个构造器</span></li><li id="fPiKzyt8UcjwncTJiEEDhH"><div class="marker"></div><span class="inline-wrap">java 所有类都是 Object 类的子类</span></li><li id="p8pEEGVjG53VcYmQ3iaWBM"><div class="marker"></div><span class="inline-wrap">父类构造器的调用不限于直接父类！将一直往上追潮直到 Object 类</span></li><li id="1CSQCQ3xj7CZSB3hmBiEdq"><div class="marker"></div><span class="inline-wrap">子类最多只能继承一个父类(指直接继承)，即 java 中是单继承机制</span></li><li id="caKgrXZxhSDM4tPMoGNeUb"><div class="marker"></div><span class="inline-wrap">不能滥用继承，子类和父类之间必须满足 is-a 的逻辑关系</span></li></ol><code-block id="iXDrJwwtMijeQHJNHQWAtd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> 子类 <span class="token keyword">extends</span> 父类<span class="token punctuation">{</span><span class="token punctuation">}</span></pre></div></code-block><div id="iNREe3W4hzLEmgaWAMuk5r" class="wolai-block wolai-text"><div><span class="inline-wrap">public class TopBase { //父类是 Object</span></div></div><div id="6v85RhnJVPX8khppBxhz6S" class="wolai-block wolai-text"><div><span class="inline-wrap">public TopBase() {
//super(); Object 的无参构造器
System.out.println(&quot;构造器 TopBase() 被调用...&quot;);//1
}
}</span></div></div><div id="kCmobSABrzPLyhqxwPYa8Y" class="wolai-block wolai-text"><div><span class="inline-wrap">public class Base extends TopBase { //父类
//4 个属性
public int n1 = 100 ;
protected int n2 = 200 ;
int n3 = 300 ;
private int n4 = 400 ;</span></div></div><div id="b1KKYbvjJdJ2UALp7NWnGw" class="wolai-block wolai-text"><div><span class="inline-wrap">public Base() { //无参构造器
System.out.println(&quot;父类 Base()构造器被调用....&quot;);
}
public Base(String name, int age) {//有参构造器
//默认 super()
System.out.println(&quot;父类 Base(String name, int age)构造器被调用....&quot;);
}
public Base(String name) {//有参构造器
System.out.println(&quot;父类 Base(String name)构造器被调用....&quot;);
}
//父类提供一个 public 的方法,返回了 n4
public int getN4() {
return n4;
}
public void test100() {
System.out.println(&quot;test100&quot;);
}
protected void test200() {
System.out.println(&quot;test200&quot;);
}
void test300() {
System.out.println(&quot;test300&quot;);
}
private void test400() {
System.out.println(&quot;test400&quot;);
}
//call
public void callTest400() {
test400();
}
}</span></div></div><div id="opBEkSVbULvDpYBwdDxTWx" class="wolai-block wolai-text"><div><span class="inline-wrap">/输入 ctrl + H 可以看到类的继承关系
public class Sub extends Base { //子类</span></div></div><div id="5zpdLeVAgivewooPvbXo7j" class="wolai-block wolai-text"><div><span class="inline-wrap">public Sub(String name, int age) {
//1. 调用父类的无参构造器, 如下或者 什么都不写,默认就是调用 super()
//super();//父类的无参构造器
//2. 调用父类的 Base(String name) 构造器
//super(&quot;hsp&quot;);
//3. 调用父类的 Base(String name, int age) 构造器
super(&quot;king&quot;, 20 );</span></div></div><div id="hK4tJvZMrpcvmDVxHcRCao" class="wolai-block wolai-text"><div><span class="inline-wrap">//细节：super 在使用时，必须放在构造器第一行
//细节: super() 和 this() 都只能放在构造器第一行，因此这两个方法不能共存在一个构
造器
//this() 不能再使用了
System.out.println(&quot;子类 Sub(String name, int age)构造器被调用....&quot;);
}</span></div></div><div id="aGxRwTVsNXxSDvqgeVQFEh" class="wolai-block wolai-text"><div><span class="inline-wrap">public Sub() {//无参构造器
//super(); //默认调用父类的无参构造器
super(&quot;smith&quot;, 10 );
System.out.println(&quot;子类 Sub()构造器被调用....&quot;);
}
//当创建子类对象时，不管使用子类的哪个构造器，默认情况下总会去调用父类的无参构造器
public Sub(String name) {
super(&quot;tom&quot;, 30 );
//do nothing...
System.out.println(&quot;子类 Sub(String name)构造器被调用....&quot;);
}</span></div></div><div id="ggUx7Wkph8yEwfiyDj1qKT" class="wolai-block wolai-text"><div><span class="inline-wrap">public void sayOk() {//子类方法
//非私有的属性和方法可以在子类直接访问
//但是私有属性和方法不能在子类直接访问
System.out.println(n1 + &quot; &quot; + n2 + &quot; &quot; + n3);
test100();
test200();
test300();
//test400();错误
//要通过父类提供公共的方法去访问
System.out.println(&quot;n4=&quot; + getN4());
callTest400();//
}
}</span></div></div><h4 id="8NDCrK3LA817nLL3tGYnY3" class="wolai-block"><span class="inline-wrap">继承本质：</span></h4><h4 id="4MrKWafqPiauCop2hdpmVX" class="wolai-block"><span class="inline-wrap">子对象创建完成，建立查找关系</span></h4><h4 id="i9wBfUMbyrBRoqEMxKt9Xy" class="wolai-block"><span class="inline-wrap">继承内存图：</span></h4><h2 id="xbZxJRWKkA2GaQdgU45PQu" class="wolai-block"><span class="inline-wrap">7.5 多态 ⭐⭐</span></h2><h3 id="tr1D6kF8soTGSQkYQJLV3k" class="wolai-block"><span class="inline-wrap">7.5.1 多态</span></h3><h4 id="fYAFgdmFU5zMnaBSWoug7D" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="9LS8gqbjyyfaXi21JC1Dtz" class="wolai-block"><span class="inline-wrap">方法或对象具有多种形态，是面向对象的第三大特征，多态是建立在封装和继承基础之上的</span></h4><h4 id="5uf2pdicckEuSQ9vZkc6hK" class="wolai-block"><span class="inline-wrap">多态具体体现</span></h4><h4 id="vkVRbxgh5ZaUrYnPCuQMLC" class="wolai-block"><span class="inline-wrap">方法的多态</span></h4><h4 id="x2mL6gM6VS1dGdxqcpVNRW" class="wolai-block"><span class="inline-wrap">1. 重写和重载就是体现多态</span></h4><h4 id="69ZRLeyZkvSr2NXb8iPWHu" class="wolai-block"><span class="inline-wrap">对象的多态</span></h4><h4 id="opsXYXqBtmT7xJY2G9onpx" class="wolai-block"><span class="inline-wrap">1. 一个对象的编译类型和运行类型可以不一致</span></h4><h4 id="pMeCYfzYvPcjo3MBbQFhnn" class="wolai-block"><span class="inline-wrap">2. 编译类型在定义对象时，就确定了，不能改变</span></h4><h4 id="j6cQGQLaNmuoxfy2faDiaq" class="wolai-block"><span class="inline-wrap">3. 运行类型是可以变化的</span></h4><h4 id="8ykBX6Dxa6ScJ5vAZGdT3S" class="wolai-block"><span class="inline-wrap">4. 编译类型看定义时 = 号 的左边，运行类型看 = 号的 右边</span></h4><h4 id="kceZm88BrPCJqxR3Dc6Aox" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="unWoHwKi2jjm6BYP9jo9Gk" class="wolai-block"><span class="inline-wrap">向上转型</span></h4><h4 id="6DRVsQ4T8bfB9Dp6EFMyhU" class="wolai-block"><span class="inline-wrap">1. 本质：父类的引用指向了子类的对象</span></h4><ol class="wolai-block"><li id="19qnE6TD8JPPsNKQ38Q9HW"><div class="marker"></div><span class="inline-wrap">语法：父类类型 引用名 = new 子类类型();</span></li><li id="wDprN82T1FXfDVVZsdRqmh"><div class="marker"></div><span class="inline-wrap">特点：编译类型看左边，运行类型看右边</span></li><li id="v3z1GoxiqnGuzouAr2peVc"><div class="marker"></div><span class="inline-wrap">可以调用父类中的所有成员(需遵守访问权限)</span></li><li id="cxJpQioMXLt2uzBtVeTa7p"><div class="marker"></div><span class="inline-wrap">不能调用子类特有成员</span></li><li id="9CAsGf8Zf9yfvx51UBgrJU"><div class="marker"></div><span class="inline-wrap">最终运行效果看子类的具体实现
向下转型</span></li><li id="ovPkwBy4bBBBu5zwyz36CZ"><div class="marker"></div><span class="inline-wrap">本质：把指向子类对象的父类引用，转成子类对象的子类引用</span></li><li id="3vei2UmvL1aHpuZz5oiRmR"><div class="marker"></div><span class="inline-wrap">语法：子类类型 引用名 = (子类类型) 父类引用;</span></li></ol><h4 id="n8dpXWrVMs1oaUXZMAJLye" class="wolai-block"><span class="inline-wrap">3. 只能强转父类引用，不能强转父类对象</span></h4><h4 id="qFh2H7TCUuzKnqsuCjjj1r" class="wolai-block"><span class="inline-wrap">4. 父类的引用必须指向的是当前目标类型的对象</span></h4><h4 id="k9TU1h3Wpbvym7hEavyH7a" class="wolai-block"><span class="inline-wrap">5. 当向下转型后，可以调用子类类型中所有的成员</span></h4><h4 id="vdY6cmYxKvU9vCAR8ybfBS" class="wolai-block"><span class="inline-wrap">属性</span></h4><h4 id="8tTR87Lzxg1uSLPJqQdKXh" class="wolai-block"><span class="inline-wrap">1. 属性没有重写，属性的值看编译类型</span></h4><ol class="wolai-block"><li id="qKeWE7RQZAVzFRwpgjDdWv"><div class="marker"></div><span class="inline-wrap"><b>instance of 比较较操作符，用于判断对象的运行类型是否为 XX 类型或 XX 类型的子类型</b></span></li></ol><code-block id="34oj4Zebf64Sn5x7YV6Y6z" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PolyDetail</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="er2yjZ4uFwdhmhEkNkpUU5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//向上转型: 父类的引用指向了子类的对象</span>
<span class="token comment">//语法：父类类型引用名 = new 子类类型();</span>
<span class="token maybe-class-name">Animal</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//可以吗? 可以 Object 也是 Cat的父类</span></pre></div></code-block><code-block id="pkHcWs2Zf2Cij2sk5aFrxP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//向上转型调用方法的规则如下:</span>
<span class="token comment">//(1)可以调用父类中的所有成员(需遵守访问权限)</span>
<span class="token comment">//(2)但是不能调用子类的特有的成员</span>
<span class="token comment">//(#)因为在编译阶段，能调用哪些成员,是由编译类型来决定的</span>
<span class="token comment">//animal.catchMouse();错误</span>
<span class="token comment">//(4)最终运行效果看子类(运行类型)的具体实现, 即调用方法时，按照从子类(运行类</span>
型<span class="token punctuation">)</span>开始查找方法
<span class="token comment">//，然后调用，规则我前面我们讲的方法调用规则一致。</span>
animal<span class="token punctuation">.</span><span class="token method function property-access">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//猫吃⻥..</span>
animal<span class="token punctuation">.</span><span class="token method function property-access">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//跑</span>
animal<span class="token punctuation">.</span><span class="token method function property-access">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hello,你好</span>
animal<span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//睡</span></pre></div></code-block><code-block id="2qXhryThzsA7dim5o6NWiD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//老师希望，可以调用Cat的 catchMouse方法</span>
<span class="token comment">//多态的向下转型</span>
<span class="token comment">//(1)语法：子类类型 引用名 =（子类类型）父类引用;</span>
<span class="token comment">//问一个问题? cat 的编译类型 Cat,运行类型是 Cat</span>
<span class="token maybe-class-name">Cat</span> cat <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Cat</span><span class="token punctuation">)</span> animal<span class="token punctuation">;</span>
cat<span class="token punctuation">.</span><span class="token method function property-access">catchMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//猫抓老鼠</span>
<span class="token comment">//(2)要求父类的引用必须指向的是当前目标类型的对象</span>
<span class="token maybe-class-name">Dog</span> dog <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Dog</span><span class="token punctuation">)</span> animal<span class="token punctuation">;</span> <span class="token comment">//可以吗？</span></pre></div></code-block><code-block id="ftgaFLMxCqFnXWJcN2Pe9w" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"ok~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="qn8cJ35bckemd6YBRzTSk3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PolyDetail02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//属性没有重写之说！属性的值看编译类型</span>
<span class="token maybe-class-name">Base</span> base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//向上转型</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>base<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// ？ 看编译类型 10</span>
<span class="token maybe-class-name">Sub</span> sub <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h3 id="vJTE8DC7mhQ3exiUozFMUa" class="wolai-block"><span class="inline-wrap">7.5.2 动态绑定机制 ⭐⭐</span></h3><h4 id="1hgtd7j8pLxUcfGWp2rouW" class="wolai-block"><span class="inline-wrap">当调用对象方法的时候，该方法会和该对象的内存地址/ 运行类型 绑定</span></h4><h4 id="2gkdg4fLQFHkqEDRQs4eSR" class="wolai-block"><span class="inline-wrap">当调用对象属性时，没有动态綁定机制，哪里声明，哪里使用()</span></h4><code-block id="udfV7YGP3NsTgFgDBj8a1b" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>sub<span class="token punctuation">.</span><span class="token property-access">count</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//? 20</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1p5RGXkVWTonhCCCfaFGDq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span> <span class="token comment">//父类</span>
int count <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span><span class="token comment">//属性</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Sub</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span><span class="token comment">//子类</span>
int count <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">;</span><span class="token comment">//属性</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="inyAKvfg3poJAuifJH7oSQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PolyDetail03</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">BB</span> bb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>bb <span class="token keyword">instanceof</span> <span class="token class-name">BB</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// true</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>bb <span class="token keyword">instanceof</span> <span class="token class-name">AA</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// true</span></pre></div></code-block><code-block id="7JrhmYbPLM4UVaZW2PgvGo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//aa 编译类型 AA, 运行类型是BB</span>
<span class="token comment">//BB是AA子类</span>
<span class="token constant">AA</span> aa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>aa <span class="token keyword">instanceof</span> <span class="token class-name">AA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>aa <span class="token keyword">instanceof</span> <span class="token class-name">BB</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="bvgn5NEPzaXbzbDGpsmGry" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">AA</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
<span class="token known-class-name class-name">String</span> str <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
<span class="token comment">//System.out.println(str instanceof AA);</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>str <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="qYA24haBA2sQpD1EFdoLBK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">AA</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//父类</span>
<span class="token keyword">class</span> <span class="token class-name">BB</span> <span class="token keyword">extends</span> <span class="token class-name">AA</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">//子类</span></pre></div></code-block><code-block id="wYeyHWQtYZnT2YVhLBnkxs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DynamicBinding</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token method function property-access">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token method function property-access">sum1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="bJHiKbSjMyxRkC3WYcr58v" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span></pre></div></code-block><h3 id="jacc9RGdSxe2oGJPErfTVa" class="wolai-block"><span class="inline-wrap">7.5.3 多态的应用</span></h3><h4 id="hx3AW9qXce2E8zvmeg6M47" class="wolai-block"><span class="inline-wrap">多态数组</span></h4><h4 id="iAD17KoeuEhL5NTfLujUM9" class="wolai-block"><span class="inline-wrap">1. 多态数组：定义类型为父类类型，里面保存的实际元素类型为子类类型</span></h4><h4 id="7sNKuDiUA8JbG6Stui4rhH" class="wolai-block"><span class="inline-wrap">2. 多态参数：方法定义的形参类型为父类类型，实参类型允许为子类类型</span></h4><h2 id="gB7VEgtMbkpRSJamXU1GLT" class="wolai-block"><span class="inline-wrap">7.6 Super</span></h2><h4 id="2JLiGpmG8Jez6bycznjM97" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="rr5Vc5kDCmFsnztwfxfKyq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">super</span>代表父类的引用，用于访问父类的属性、方法、构造器</pre></div></code-block><code-block id="7MdbDBDbArxfpuPgnLCeps" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int i <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span></pre></div></code-block><code-block id="q9992QLtaKNydprifREZSv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token function">getI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token punctuation">;</span><span class="token comment">//当子类不存在sum方法时，会从父类找到sum方法，但动态绑定机制会找到</span>
子类的getI返回i值
<span class="token punctuation">}</span></pre></div></code-block><code-block id="mGJR8HMeyGePvfTksc74ie" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> i <span class="token operator">+</span> <span class="token number">10</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="wZGMnoSkDzBejeeeizfYux" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">getI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="9RYVg8BJREnWUS5oeEzz6P" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> int i <span class="token operator">=</span> <span class="token number">20</span> <span class="token punctuation">;</span></pre></div></code-block><code-block id="gSCFHmjKcfw8sDm5LYm9eH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> i <span class="token operator">+</span> <span class="token number">20</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vUAhTLu1z9avp6twqhqbtm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> i <span class="token operator">+</span> <span class="token number">10</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="qPfTzWwPvYuQM8yePY2imN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">getI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="gXvB9K8AMxgpxoyVyEbiPv" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><ol class="wolai-block"><li id="nyyg9GXTWeKxMULkoXm7UU"><div class="marker"></div><span class="inline-wrap">访问父类的属性，但不能访问父类的 private 属性
super.属性名;</span></li><li id="neGqaTvocBAB6AgjkwtpRy"><div class="marker"></div><span class="inline-wrap">访问父类的方法，不能访问父类的 private 方法
super.方法名(参数列表);</span></li><li id="jiJhYaiAvKkbUkNQTQDoHf"><div class="marker"></div><span class="inline-wrap">访问父类的构造器(只能放在构造器的第一句，只能出现一句)
super(参数列表);</span></li></ol><h4 id="8aMcHHVzfRmBz23ZGg9HRc" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="wxSktbiZ5T4wfeTRExdBjx" class="wolai-block"><span class="inline-wrap">1. 调用父类的构造器的好处 (分工明确，父类属性由父类初始化，子类的属性由子类初始化)</span></h4><ol class="wolai-block"><li id="kGfM9eieepNEuYW2nM8FBY"><div class="marker"></div><span class="inline-wrap">当子类中有和父类中的成员(属性和方法) 重名时，为了访问父类的成员，必须通过 super，如果没有重
名，使用 super、this、 直接访问效果相同</span></li><li id="vnE5VTrxm1ZaKBeGaQx6RS"><div class="marker"></div><span class="inline-wrap">super 的访问不限于直接父类，如果爷爷类和本类中有同名的成员，也可以使用 super 去访问爷爷类的成
员；如果多个基类(上级类)中都有同名的成员，使用 super 访问遵循就近原则</span></li></ol><h4 id="vMwXH1fPkRhesy7GEoJQii" class="wolai-block"><span class="inline-wrap">super 和 this</span></h4><h4 id="6APCeyLwodsYG7TfHXKFWJ" class="wolai-block"><span class="inline-wrap">实例：</span></h4><code-block id="qRSyifKBmmXRkzurK2iyU1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span> <span class="token comment">//父类是Object</span></pre></div></code-block><code-block id="sJubNPw3QqkphPV1TAajuu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int n1 <span class="token operator">=</span> <span class="token number">999</span> <span class="token punctuation">;</span>
<span class="token keyword">public</span> int age <span class="token operator">=</span> <span class="token number">111</span> <span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"Base类的cal() 方法..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"Base类的eat()....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="tsQaurmsBCsC3vDVkhv6ea" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span><span class="token punctuation">{</span>
<span class="token comment">//4个属性</span>
<span class="token comment">//public int n1 = 100;</span></pre></div></code-block><div id="vw6upzYRsuTPkCvArwfqQh" class="wolai-block wolai-text"><div><span class="inline-wrap">protected int n2 = 200 ;
int n3 = 300 ;
private int n4 = 400 ;</span></div></div><div id="mkwmKPVuunL2kaj44MEPRY" class="wolai-block wolai-text"><div><span class="inline-wrap">public A() {}
public A(String name) {}
public A(String name, int age) {}</span></div></div><div id="rPsBpDwYoYtmtmCyoi7QcK" class="wolai-block wolai-text"><div><span class="inline-wrap">// public void cal() {
// System.out.println(&quot;A 类的 cal() 方法...&quot;);
// }</span></div></div><div id="kEaows9adZxJExKoJypLjo" class="wolai-block wolai-text"><div><span class="inline-wrap">public void test100() {
}</span></div></div><div id="e9AkG8eRc22SMFfZxmuZQX" class="wolai-block wolai-text"><div><span class="inline-wrap">protected void test200() {
}</span></div></div><div id="5gGB6JS5MzXJhMCtVU4Ju7" class="wolai-block wolai-text"><div><span class="inline-wrap">void test300() {
}</span></div></div><div id="xxqsk7ZKhnimXA4FCGLrRe" class="wolai-block wolai-text"><div><span class="inline-wrap">private void test400() {
}
}</span></div></div><div id="rxKDULTN9i4X7vPHHEYhAm" class="wolai-block wolai-text"><div><span class="inline-wrap">public class B extends A {</span></div></div><div id="ohvb3VfEZrhiGFPE7gNeMk" class="wolai-block wolai-text"><div><span class="inline-wrap">public int n1 = 888 ;</span></div></div><div id="5Y1kUmyFjiXN4U1uUtVzot" class="wolai-block wolai-text"><div><span class="inline-wrap">//编写测试方法
public void test() {
//super 的访问不限于直接父类，如果爷爷类和本类中有同名的成员，也可以使用 super 去访问爷爷类
的成员；
// 如果多个基类(上级类)中都有同名的成员，使用 super 访问遵循就近原则。A-&gt;B-&gt;C</span></div></div><div id="hZmvEX9gQ4NVX8K6JjrC2j" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(&quot;super.n1=&quot; + super.n1);
super.cal();
}</span></div></div><div id="ngVLCJ8874Vt1pT4SVEutP" class="wolai-block wolai-text"><div><span class="inline-wrap">//访问父类的属性 , 但不能访问父类的 private 属性 [案例]super.属性名
public void hi() {
System.out.println(super.n1 + &quot; &quot; + super.n2 + &quot; &quot; + super.n3 );
}
public void cal() {
System.out.println(&quot;B 类的 cal() 方法...&quot;);
}
public void sum() {
System.out.println(&quot;B 类的 sum()&quot;);
//希望调用父类-A 的 cal 方法</span></div></div><h2 id="x1NvTbpuhXbk2yU4P9KLRN" class="wolai-block"><span class="inline-wrap">7.7 方法重写(overwrite)</span></h2><code-block id="74jt5hgEZHPUykhTXtSCwy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//这时，因为子类B没有cal方法，因此我可以使用下面三种方式</span></pre></div></code-block><code-block id="ttRpVF4ycZm8B2yYr3XHBQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//找cal方法时(cal() 和 this.cal())，顺序是:</span>
<span class="token comment">// (1)先找本类，如果有，则调用</span>
<span class="token comment">// (2)如果没有，则找父类(如果有，并可以调用，则调用)</span>
<span class="token comment">// (3)如果父类没有，则继续找父类的父类,整个规则，就是一样的,直到 Object类</span>
<span class="token comment">// 提示：如果查找方法的过程中，找到了，但是不能访问， 则报错, cannot access</span>
<span class="token comment">// 如果查找方法的过程中，没有找到，则提示方法不存在</span>
<span class="token comment">//cal();</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">cal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//等价 cal</span></pre></div></code-block><code-block id="fbiL48vcZFtyj78dtw2gCL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//找cal方法(super.call()) 的顺序是直接查找父类，其他的规则一样</span>
<span class="token comment">//super.cal();</span></pre></div></code-block><code-block id="czZa47bgnHSkK1cyd3X3i8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//演示访问属性的规则</span>
<span class="token comment">//n1 和 this.n1 查找的规则是</span>
<span class="token comment">//(1) 先找本类，如果有，则调用</span>
<span class="token comment">//(2) 如果没有，则找父类(如果有，并可以调用，则调用)</span>
<span class="token comment">//(3) 如果父类没有，则继续找父类的父类,整个规则，就是一样的,直到 Object类</span>
<span class="token comment">// 提示：如果查找属性的过程中，找到了，但是不能访问， 则报错, cannot access</span>
<span class="token comment">// 如果查找属性的过程中，没有找到，则提示属性不存在</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">n1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="bEaoDMcKgoouvTTUNH8r7C" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//找n1 (super.n1) 的顺序是直接查找父类属性，其他的规则一样</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token keyword">super</span><span class="token punctuation">.</span><span class="token property-access">n1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="xfENJPoVha86ujFDhkmk1q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token comment">//访问父类的方法，不能访问父类的private方法 super.方法名(参数列表);</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token method function property-access">test100</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token method function property-access">test200</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token method function property-access">test300</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//super.test400();//不能访问父类private方法</span>
<span class="token punctuation">}</span>
<span class="token comment">//访问父类的构造器(这点前面用过)：super(参数列表);只能放在构造器的第一句，只能出现一句！</span>
<span class="token keyword">public</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//super();</span>
<span class="token comment">//super("jack", 10);</span>
<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="euAsXvdAF5YqJwfNFK3JiF" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="cb1psBZpf1LfNLjkNesgJT" class="wolai-block"><span class="inline-wrap">子类的方法和父类方法一致，那么子类的方法覆盖了父类的方法</span></h4><h4 id="u1Upbak6k79xxMxtqwaoUE" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="j97cr9BZB4gq76aqjM4uwg" class="wolai-block"><span class="inline-wrap">1. 子类的方法的形参列表,方法名称，要和父类方法的形参列表,方法名称完全一样</span></h4><h4 id="p5fqk7CE6PsWze5JfK2Rqz" class="wolai-block"><span class="inline-wrap">2. 子类方法的返回类型和父类方法返回类型一样，或者是父类返回类型的子类</span></h4><h4 id="jmv3TdJYShEwZGN1bQoJW3" class="wolai-block"><span class="inline-wrap">3. 子类方法大于等于父类方法的访问权限</span></h4><h2 id="5QmfWXuaGerxLpHdU4zmoS" class="wolai-block"><span class="inline-wrap">7.8 Object 类</span></h2><h4 id="immNSg7gTRCQ63mz9yQVdR" class="wolai-block"><span class="inline-wrap">==</span></h4><h4 id="4yUApzBaMrx5cUeKbxXGWK" class="wolai-block"><span class="inline-wrap">1. 既可以判断基本类型，又可以判断引用类型</span></h4><h4 id="qDDaKy9qciCM6D4hLz6bPJ" class="wolai-block"><span class="inline-wrap">2. 如果判断基本类型，判断的是值是否相等</span></h4><h4 id="ix1duqp7Y1GkmdecqYfpNu" class="wolai-block"><span class="inline-wrap">3. 如果判断引用类型，判断的是地址是否相等，即判定是不是同一个对象</span></h4><h4 id="8AS4tqs2mEXYSgnM9Z4MNR" class="wolai-block"><span class="inline-wrap">equals</span></h4><ol class="wolai-block"><li id="qxLxWn5w4UkuVkGxoTuBUA"><div class="marker"></div><span class="inline-wrap">equals:是 Object 类中的方法，只能判断引用类型</span></li><li id="aeEPdpeBJqy7av7f3SF9aa"><div class="marker"></div><span class="inline-wrap">默认判断的是地址是否相等，子类中往往重写该方法，用于判断 </span><span class="inline-wrap"><b>内容</b></span><span class="inline-wrap"> 是否相等</span></li></ol><h4 id="gQfm1pHT79XsLHrwwReS9A" class="wolai-block"><span class="inline-wrap">hashCode</span></h4><h4 id="fyt8z8nkPrMAxcD6TUjL8V" class="wolai-block"><span class="inline-wrap">1. 提高具有哈希结构的容器的效率</span></h4><h4 id="5seZ1A8ZWMFCUN36LJvEjY" class="wolai-block"><span class="inline-wrap">2. 两个引用，如果指向的是同一个对象，则哈希值肯定是一样的</span></h4><h4 id="8qzF1weNFtmAmajnmjJGin" class="wolai-block"><span class="inline-wrap">3. 两个引用，如果指向的是不同对象，则哈希值是不一样的</span></h4><h4 id="o8tDd4ZEFPeQg2nVmg3qoX" class="wolai-block"><span class="inline-wrap">4. 哈希值主要根据地址号来的，不能完全将哈希值等价子地址</span></h4><ol class="wolai-block"><li id="5bSnKtVCrTnWh3xUKngzLH"><div class="marker"></div><span class="inline-wrap">后面在集合中 hashCode 如果需要的话，也会重写</span></li></ol><h4 id="s9dgCswjvNacmxDcr2G9gr" class="wolai-block"><span class="inline-wrap">toString</span></h4><h4 id="ogsH2sFkTnMErAoyMYmt6q" class="wolai-block"><span class="inline-wrap">1. 默认返回：全类名＋@+<span class="jill"></span>哈希值的十六进制</span></h4><ol class="wolai-block"><li id="pvH7VoWkzXsVDqCWCzQUNd"><div class="marker"></div><span class="inline-wrap">子类往往重写 to String 方法，用于返回对象的属性信息</span></li><li id="aWfm3e2wbqNoCqZDfKck3C"><div class="marker"></div><span class="inline-wrap">重写 toString 方法，打印对象或拼接对象时，都会自动调用该对象的 toString 形式</span></li><li id="1fV8kD4i84ZzgCtZAZ3Ayn"><div class="marker"></div><span class="inline-wrap">当直接输出一个对象时，toString 方法会被默认的调用</span></li></ol><code-block id="wxewnuRpUGV3mHEdvX6n5P" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Equals01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">A</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
<span class="token constant">A</span> c <span class="token operator">=</span> b<span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>a <span class="token operator">==</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">B</span> bObj <span class="token operator">=</span> a<span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>bObj <span class="token operator">==</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="3nDcSyyrUqSgKrWdUqj8P8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">B</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">{</span><span class="token punctuation">}</span></pre></div></code-block><h4 id="6vFJQvSY26MCLLia9rSsC4" class="wolai-block"><span class="inline-wrap">finalize</span></h4><ol class="wolai-block"><li id="tEJAogH1QsfF4BQD9KtyWK"><div class="marker"></div><span class="inline-wrap">当对象被回收时，系统自动调用该对象的 finalize 方法。子类可以重写该方法，做一些释放资源的操作</span></li><li id="x8587LSXfE59zMHb89YMs8"><div class="marker"></div><span class="inline-wrap">什么时候被回收：当某个对象没有任何引用时，则 jvm 就认为这个对象是一个垃圾对象，就会使用垃圾回
收机制来销毁该对象，在销毁该对象前，会先调用 finalize 方法</span></li><li id="qB25JEAmKcMqWxVsPUQ5pA"><div class="marker"></div><span class="inline-wrap">垃圾回收机制的调用，是由系统来決定(即有自己的 GC 算法)，也可以通过 System.gc() 主动触发垃圾回收
机制</span></li></ol><h2 id="t8hGYub3HYv5ZPgNaU8bQF" class="wolai-block"><span class="inline-wrap">7.9 断点调试</span></h2><h4 id="rF1LuNkHLSnZNWrRZ5UW8S" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="qRDXrEPB3PxGQ2EFi71K69" class="wolai-block"><span class="inline-wrap">断点调试是指在程序的某一行设置一个断点，调试时，程序运行到这一行就会停住，然后你可以一步一步往下</span></h4><h4 id="mjj9R7fKbKAQz7Tfs6iDkY" class="wolai-block"><span class="inline-wrap">调试，调试过程中可以看各个变量当前的值，出错的话，调试到出错的代码行即显示错误，停下。进行分析从</span></h4><code-block id="45pyVxSiyq9tzqb6VKcfbG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>而找到这个Bug</pre></div></code-block><h4 id="eH6mJTC6UQhw9HagSEj7Eq" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="qFDgiSodr5Acm6KPEpSHkW" class="wolai-block"><span class="inline-wrap">1. 在断点调试 过程中，是运行状态，是以对象的运行类型来执行的</span></h4><h4 id="x6mTDT49npWL4WwCNGgLZu" class="wolai-block"><span class="inline-wrap">2. F7：跳入方法内</span></h4><h4 id="dPz5FoXveFFFawMEHHpzuD" class="wolai-block"><span class="inline-wrap">3. F8：逐行执行代码</span></h4><code-block id="ss759n4Bo2HLSgE7WeLMnP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>shift<span class="token operator">+</span><span class="token constant">F8</span><span class="token operator">:</span>跳出方法</pre></div></code-block><ol class="wolai-block"><li id="39w9C5LadCY1HhdLDNSAVp"><div class="marker"></div><span class="inline-wrap">F9：resume，执行到下一个断点</span></li></ol><h1 id="mcn668pmkqC8gLz2XVReoS" class="wolai-block"><span class="inline-wrap">8 面向对象(高级)</span></h1><h2 id="3vAcLS8G8mTmcXm21M5JYW" class="wolai-block"><span class="inline-wrap">8.1 类变量和类方法 ⭐</span></h2><h2 id="3K4pxptRsGqQQctMpHgC1s" class="wolai-block"><span class="inline-wrap">8.1.1 类变量</span></h2><h4 id="ttgVNZMHjavn4c2AkzJ5ar" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="tAYGxBPR19YFnnpLym1oqz" class="wolai-block"><span class="inline-wrap">类变量也叫静态变量/静态属性，是该类的所有对象共享的变量,任何一个该类的对象去访问它时,取到的都是相</span></h4><h4 id="hsnqPY5kj6s4Ux5rRF9vxb" class="wolai-block"><span class="inline-wrap">同的值,同样任何一个该类的对象去修改它时,修改的也是同一个变量</span></h4><h4 id="cHiXSdGMMGTzZdmPvWamQD" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="jy5WheQCJWXwDVKBjd9BgG" class="wolai-block"><span class="inline-wrap">如何访问类变量：</span></h4><h4 id="2Wxyij4BLbYR3yrau9nera" class="wolai-block"><span class="inline-wrap">1. 类名.类变量名</span></h4><h4 id="32WTevQpQ5F7uTrAgjDTTr" class="wolai-block"><span class="inline-wrap">2. 对象名.类变量名</span></h4><h4 id="7ruqp8V1Z5WkzuwAZcnHDD" class="wolai-block"><span class="inline-wrap">3. 静态变量的访问修饰符的访问权限和范围和普通属性是一样的</span></h4><code-block id="fcc2SJjGcYQBgGhmHpseJ5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>访问修饰符 <span class="token keyword">static</span> 数据类型 变量名<span class="token punctuation">;</span>
<span class="token keyword">static</span> 访问修饰符 数据类型 变量名<span class="token punctuation">;</span></pre></div></code-block><h4 id="smwRXBaZAJWS64AS2YCo33" class="wolai-block"><span class="inline-wrap">内存布局：</span></h4><h4 id="vi8B3gQ7GmVCkNdxBhYoXM" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="1xYDHmL3EndzYUem371fYm" class="wolai-block"><span class="inline-wrap">1. 类变量是该类的所有对象共享的，而实例变量是每个对象独享的</span></h4><ol class="wolai-block"><li id="so3bmzcYKAxmHsmSiBJM1J"><div class="marker"></div><span class="inline-wrap">加上 static 称为类变量或静态变量，否则称为实例变量/普通变量/非静态变量</span></li><li id="cx5CEBtBs5zU1KM1SUmAv2"><div class="marker"></div><span class="inline-wrap">类变量可以通过 类名.类变量名 或者 对象名.类变量名来访问</span></li><li id="fEUf5naUBbAaMUWiffvp1J"><div class="marker"></div><span class="inline-wrap">实例变量不能通过类名.类变量名方式访问</span></li><li id="5v77TAKjdnmfCiqhwGZgxU"><div class="marker"></div><span class="inline-wrap"><b>类变量是在类加载时就初始化</b></span></li><li id="kvZE2yBUnQbYpesmWHH67j"><div class="marker"></div><span class="inline-wrap"><b>类变量的生命周期是随类的加载开始，随着类消亡而销毁</b></span></li></ol><h3 id="753Awd4zaoKAq3iw6UhAmb" class="wolai-block"><span class="inline-wrap">8.1.2 类方法</span></h3><h4 id="dacpAyPanb1FBMiCUFegt7" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="9TLzJVnzxiVasC7ZArbSgd" class="wolai-block"><span class="inline-wrap">类方法也叫静态方法</span></h4><h4 id="bCEm3JBnvAqQ4UbC4tWruF" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><code-block id="xdPdg8SPT8K3PCiT8jj1ae" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>访问修饰符 <span class="token keyword">static</span> 数据返回类型 <span class="token function">方法名</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> 访问修饰符 数据返回类型 <span class="token function">方法名</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="28rBbR8EcWZyFGKbv7oS7v" class="wolai-block"><span class="inline-wrap">类方法调用：</span></h4><h4 id="8ap6JSY3ApBh1XSqUTP1rd" class="wolai-block"><span class="inline-wrap">1. 类名.类方法名</span></h4><h4 id="kHEN6AP4CegZ5xh8EtaZ2i" class="wolai-block"><span class="inline-wrap">2. 对象名.类方法名</span></h4><h4 id="rUagnyrHwg1CAA3krBEXX5" class="wolai-block"><span class="inline-wrap">3. 满足访问修饰符的访向权限和范围</span></h4><h4 id="dFVXqcbFDbtywusLgAn4vu" class="wolai-block"><span class="inline-wrap">使用场景：</span></h4><h4 id="qw4gKafdvUMr5YcMmTceVH" class="wolai-block"><span class="inline-wrap">1. 当方法中不涉及到任何和对象相关的成员，则可以将方法设计成静态方法,提高开发效率</span></h4><h4 id="9LnZB5uYy8ic2jBw1FLbZb" class="wolai-block"><span class="inline-wrap">2. 程序员实际开发，往往会将一些通用的方法，设计成静态方法，这样我们不需要创建对象就可以使用</span></h4><h4 id="5u9hsfbvvfNyM2TR2UHnpq" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="g4xQ2pe5BR24SQuMEWgH73" class="wolai-block"><span class="inline-wrap">1. 类方法和普通方法都是随着类的加载而加载，将结构信息存储在方法区：</span></h4><code-block id="ibpV34ib7dC5oHfmUofVis" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>类方法中无<span class="token keyword">this</span>的参数，普通方法中隐含着<span class="token keyword">this</span>的参数</pre></div></code-block><ol class="wolai-block"><li id="w6gPhgb4L18R7R63yMUhZn"><div class="marker"></div><span class="inline-wrap">类方法可以通过类名调用，也可以通过对象名调用</span></li><li id="q4xJwYsiuvQoCXJSdVgcRM"><div class="marker"></div><span class="inline-wrap">音通方法和对象有关，需要通过对象名调用，比如对象名.方法名(参数)，不能通过类名调用</span></li><li id="nTucpcmSNVpRVrWS5Mh8RQ"><div class="marker"></div><span class="inline-wrap">类方法中不允许使用和对象有关的关键字，比如 this 和 super</span></li><li id="wFCwKcCLa6zykGLFAJp7Do"><div class="marker"></div><span class="inline-wrap"><b>静态方法，只能访问静态的成员，非静态的方法，可以访问静态成员和非静态成员</b></span></li></ol><h2 id="tast2tqunXpRd4Bgj9BL9v" class="wolai-block"><span class="inline-wrap">8.2 main 方法</span></h2><h4 id="iaDwX8tP5Vpqym7oHdvMUW" class="wolai-block"><span class="inline-wrap">深入理解 main 方法：</span></h4><ol class="wolai-block"><li id="ciu8K8qRN7UUdfcFvut7dq"><div class="marker"></div><span class="inline-wrap">java 虛拟机需要调用类的 main0 方法，所以该方法的访问权限化须是 public</span></li><li id="dF7h5NF6kM4Wqiy8zz99EJ"><div class="marker"></div><span class="inline-wrap">java 虚拟机在执行 main0 方法时不必创建对象，所以该方法心须是 static</span></li><li id="dfWzxvea6u7F2fxAGzENGL"><div class="marker"></div><span class="inline-wrap">该方法接收 String 类型的数组参数，该数组中保存执行 java 命令时传递给所运行的类的参数</span></li><li id="8UD46hzXrZikw5FuhZ2ryS"><div class="marker"></div><span class="inline-wrap">java 执行的程序 参数 1 参数 2 参数 3</span></li></ol><h4 id="juycca8RjwaNZpBFeSNZe9" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="86hGRXgHcnpqNC25t5VR2Y"><div class="marker"></div><span class="inline-wrap">在 main()方法中，我们可以直接调用 main 方法所在类的静态方法或静态属性</span></li><li id="2U6V9dtCZLCDYKu9V7idCu"><div class="marker"></div><span class="inline-wrap">但是，不能直接访问该类中的非静态成员，必须创建该类的一个实例对象后，才能通过这个对象去访问
类中的目静态成员</span></li></ol><h2 id="9s1R6rDvXjBhG5rs26X84N" class="wolai-block"><span class="inline-wrap">8.3 代码块</span></h2><h4 id="f7DwSRYYwXDm2bu7pGtkiZ" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="sXPvxV5Wk4pXfi58WTCCiq" class="wolai-block"><span class="inline-wrap">代码化块又称为初始化块,属于类中的成员，类似于方法，将逻辑语句封装在方法体中，通过们包围起来。但</span></h4><h4 id="cq4ykZ8RDepvpRnb1FMnPT" class="wolai-block"><span class="inline-wrap">和方法不同，没有方法名，没有返回，没有参数，只有方法体，而且不用通过对象或类显式调用，而是加载类</span></h4><h4 id="u9jLCKayw4cz5SjWuP9mCc" class="wolai-block"><span class="inline-wrap">时，或创建对象时隐式调用</span></h4><h4 id="c2n2tPYEH9b2Z8dFsKJJE2" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="ktZ6NGuzV1fu3fchnBtRRd" class="wolai-block"><span class="inline-wrap">注释：</span></h4><ol class="wolai-block"><li id="ciejsQq369YWZ2d6Qyte5U"><div class="marker"></div><span class="inline-wrap">修饰符 可选，要写的话，也只能写 static</span></li><li id="4EikX5RboEzfDVU6nigP5K"><div class="marker"></div><span class="inline-wrap">代码块分为两类，使用 static 修饰的叫静态代码块，没有 static 修饰的，叫普通代码块</span></li><li id="86AY5FVZDFvuYB9JSAaGSC"><div class="marker"></div><span class="inline-wrap">逻辑语句可以为任何逻辑语句</span></li><li id="qb2EkxVpTJHxRTSB1BjbuZ"><div class="marker"></div><span class="inline-wrap">：号可以写上，也可以省略</span></li></ol><h4 id="8irNCE9LadPCsK6yvzjFji" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="j6x5Rqiuxy9WVj949kuyDR"><div class="marker"></div><span class="inline-wrap">static 代码块是类加载时执行，且只会执行一次</span></li><li id="51vj8mEP4wgiQXVssjXet7"><div class="marker"></div><span class="inline-wrap">普通代码块是在创建对象的调用的，创建一次，调用一次</span></li><li id="7MCp8Ubyw1eMiBi6LBKEpv"><div class="marker"></div><span class="inline-wrap">类什么时候被加载 ⭐⭐：
创建对象实例时
创建子类对象实例时，父类也会被加载
使用类的静态成员时</span></li><li id="bNBJ4Qwby6S2AChtwFCFSV"><div class="marker"></div><span class="inline-wrap">创建一个 </span><span class="inline-wrap"><b>对象</b></span><span class="inline-wrap"> 时，在一个类的调用 </span><span class="inline-wrap"><b>顺序</b></span><span class="inline-wrap"> ：
调用静态代码块和静态属性初始化(注意：静态代码块和静态属性初始化调用的优先级样，如果有多
个静态代码块和多个静
态变量初始化，则按他们定义的顺序调
调用普通代码块和普通属性的初始化(注意：普通代码块和普通属性初始化调用的优先级一样，若果
有多个普通代码块和 stat 多个普通属性初始化，则按定义顺序调用)
调用构造器</span></li><li id="uZ9fxteXuDPP9HNP4y2H9v"><div class="marker"></div><span class="inline-wrap">构造方法(构造器)的最前面其实隐含了 super()和调用普通代码块</span></li><li id="cTftcfVVrJXNGqFgAxMQnv"><div class="marker"></div><span class="inline-wrap"><b>创建子类时顺序</b></span><span class="inline-wrap"> ⭐⭐：
父类的静态代码块和静态属性(优先级一样，按定义顺序执行)
子类的静态代码块和静态属性(优先级一样，按定义顺序执行)
父类的普通代码块和普通属性初始化(优先级一样，按定义顺序执行)
父类构造方法
子类的普通代码块和普通属性初始化(优先级一样，按定义顺序执行)
子类构造方法</span></li><li id="rMavyjb8KtSek7dWfGksNQ"><div class="marker"></div><span class="inline-wrap">静态代码块只能直接调用静态成员(静态属性和静态方法)，普通代码块可以调用任意成员</span></li></ol><h2 id="bFAViZAAzhrCNko5jhLPsr" class="wolai-block"><span class="inline-wrap">8.4 单例设计模式</span></h2><h4 id="ht798kh4Y2e9gnKYkPiq5i" class="wolai-block"><span class="inline-wrap">[修饰符]{</span></h4><h4 id="tDACH28BdNiVaJTPVCAo6k" class="wolai-block"><span class="inline-wrap">代码;</span></h4><h4 id="6PCkyS4xrRYWn88xPrTEWj" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="k8oPSSEh1qunLxh48k1hSf" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="psre6FR8Du6rWf6UiKSskS" class="wolai-block"><span class="inline-wrap">就是采取一定的方法保证在整个的软件系统中，对某个类只能存在一个对象实例，并且该类只提供一个取得其</span></h4><h4 id="4xMHo2fA1441sBh3WvZ48G" class="wolai-block"><span class="inline-wrap">对象实例的方法</span></h4><h4 id="9kxxbDXEbNzDzhseHsQTt3" class="wolai-block"><span class="inline-wrap">单例模式有两种方式：1. 饿汉式 2.懒汉式</span></h4><h4 id="h8yRW3XpWfE86sapRKjrV6" class="wolai-block"><span class="inline-wrap">饿汉式：</span></h4><h4 id="mrSDYthaarDyDMtHiJ9r7g" class="wolai-block"><span class="inline-wrap">1. 构造器私有化</span></h4><h4 id="pm54UuFNfMY71n5LbUMmtX" class="wolai-block"><span class="inline-wrap">2. 类的内部创建静态对象</span></h4><h4 id="k567e8xFcqNiksXHCC64yx" class="wolai-block"><span class="inline-wrap">3. 向外暴露一个静态公共方法</span></h4><h4 id="tFrd3BCUsAavaaMFAzV2H5" class="wolai-block"><span class="inline-wrap">4. 特点：在类加载的时候就创建对象实例，可能存在资源浪费</span></h4><h4 id="sLrttTPMLHJij4JjX3t6Kx" class="wolai-block"><span class="inline-wrap">懒汉式：</span></h4><h4 id="qy6Rqcobr8abKPw9uVEh9s" class="wolai-block"><span class="inline-wrap">1. 构造器私有化</span></h4><ol class="wolai-block"><li id="n9MwDLASYoPVAJADCg6j79"><div class="marker"></div><span class="inline-wrap">定义一个 static 静态属性对象</span></li><li id="7NZKcAZWJPUEHzkELc9Qh4"><div class="marker"></div><span class="inline-wrap">提供一个 public 的 static 方法，返回一个对象</span></li><li id="9seFKAm5dNRnkji9zFTihx"><div class="marker"></div><span class="inline-wrap">只有当使用(3)的方法时，才返回对象，再次调用时，返回上次创建的对象</span></li><li id="kn1SuMiPACZBDX8YWtcFi9"><div class="marker"></div><span class="inline-wrap">特点：线程安全问题</span></li></ol><code-block id="wQwDv7hV7d5qWcLzKQZZdf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">GirlFriend</span><span class="token punctuation">{</span>
<span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span></pre></div></code-block><code-block id="tHPyHvodYHY1cGw21K766u" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token maybe-class-name">GirlFriend</span> gf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GirlFriend</span><span class="token punctuation">(</span><span class="token string">"小花"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="ojdwcBQf1ddqnnU7qTraUi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token function"><span class="token maybe-class-name">GirlFriend</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="mL6uyp1rLPtpnwMTfWDXob" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token maybe-class-name">GirlFriend</span> <span class="token function"><span class="token maybe-class-name">Instance</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> gf<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="a8Nv779Cx8nzNvsoEB4xwP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Cat</span><span class="token punctuation">{</span>
<span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token maybe-class-name">Cat</span> cat<span class="token punctuation">;</span></pre></div></code-block><code-block id="3saXjgShk8rjd47QHCLrBA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token function"><span class="token maybe-class-name">Cat</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="pTGs4evrH4SuSFA6LBDzTB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token maybe-class-name">Cat</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>cat <span class="token operator">==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">"小花"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="fXnsRC9kde8DBncDavduJd" class="wolai-block"><span class="inline-wrap">对比：</span></h4><h4 id="3XEwfoxY9fbPeMcbcbhgDJ" class="wolai-block"><span class="inline-wrap">1. 最主要的区别在于创建对象的时机不同：饿汉式是在类加载就创建了对象实例，而懒汉式是在使用时才</span></h4><h4 id="wQwWBMtkLhtYozev9qtK3x" class="wolai-block"><span class="inline-wrap">创建</span></h4><h4 id="syoJVqsgtu8Udv36WveBd9" class="wolai-block"><span class="inline-wrap">2. 饿汉式不存在线程安全问题，徽汉式存在线程安全问题</span></h4><h4 id="xpcYGYp2XUAuGNP77wJxU9" class="wolai-block"><span class="inline-wrap">3. 饿汉式存在浪费姿源的可能，对象实例都没有使用，那么饿汉式创建的对象就浪费，懒汉式是使用时才</span></h4><h4 id="1v1zHpVYVax29iw8XaEXGU" class="wolai-block"><span class="inline-wrap">创建，就不存在这个问题</span></h4><h2 id="vwWZZ8ieB711j6qAqyMGrB" class="wolai-block"><span class="inline-wrap">8.5 final</span></h2><h4 id="5puDCv3zKCSecKsMsQCBun" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="vzJGwPf3F8oLRJaRzJ4mqM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>final可以修饰类、属性、方法、局部变量
final 类，类不能被继承
final 方法，子类无法重写方法
final 属性，属性无法被修改
final 局部变量，局部变量无法被修改</pre></div></code-block><h4 id="b7sWpecFsLeKWTmZN3MDuk" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="p3TQDn4AeHyYtFDys4BLjq"><div class="marker"></div><span class="inline-wrap">final 修饰的属性又叫常量，一般用 XX_XX_XX 来命名</span></li><li id="n4eYUV2baUP7qLKtrVG1Uv"><div class="marker"></div><span class="inline-wrap">final </span><span class="inline-wrap"><b>修饰的属性在定义时</b></span><span class="inline-wrap"> ,必须赋初值,并且以后不能再修改，赋值可以在如下位置：
</span><span class="inline-wrap"><b>定义时、构造器、代码块</b></span></li><li id="jt9D5jQYPo6PCvz1ZMkVb5"><div class="marker"></div><span class="inline-wrap">final 修饰的属性是静态的，则初始化的位置只能是 定义时、静态代码块</span></li><li id="6EpTQFh7rd2txJQJRRZgey"><div class="marker"></div><span class="inline-wrap">final 类不能继承，但可以实例化对象</span></li><li id="sMAbtj6fUU8CUuEceV5QpC"><div class="marker"></div><span class="inline-wrap">如果类不是 final 类，但是含有 final 方法，则该方法虽然不能重写，但是可以被继承</span></li><li id="oFzBtyAekcCbH7vf8zr5f1"><div class="marker"></div><span class="inline-wrap">如果一个类已经是 final 类了，就没有必要再将方法修饰成 final 方法</span></li><li id="so2zXdUtbpaSDZRwa3VD8G"><div class="marker"></div><span class="inline-wrap">final 不能修饰构造器本身</span></li><li id="uMwwQbcK3sipWb3XBBiyfv"><div class="marker"></div><span class="inline-wrap">final 和 static 往往搭配使用，效率更高，不会导致类加载-底层编译器做了优化处理</span></li><li id="ocQgpCSWEHVw17sgMqTDod"><div class="marker"></div><span class="inline-wrap">包装类(Integer, Double,Float,Boolean 等都是 final)，String 也是 final 类</span></li></ol><h2 id="aYCKSHhiKtMFUrr5k39AbX" class="wolai-block"><span class="inline-wrap">8.6 抽象类</span></h2><h4 id="r5sXzFSYU3sncu9MjoLVNp" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="hTZ8tvcriQ8yh9TRCeDaPt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>用abstract 关键字来修饰一个类时<span class="token punctuation">,</span>这个类就叫抽象类
用abstract 关键字来修饰一个方法时<span class="token punctuation">,</span>这个方法就是抽象方法，没有方法体
抽象类的价值更多作用是在于设计，是设计者设计好后，让子类继承并实现抽象类</pre></div></code-block><h4 id="4YQpzjWAeKqV85dxXGhbac" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="5FTMUsJ8R6aWJWwNDujtjR" class="wolai-block"><span class="inline-wrap">1. 抽象类不能被实例化</span></h4><ol class="wolai-block"><li id="8LzLkFMy9bGM862ejQCyzu"><div class="marker"></div><span class="inline-wrap">抽象类不一定要包含 abstract 方法。也就是说,抽象类可以没有 abstract 方法</span></li><li id="5jZ9sC5YRTTgnvE4Vc3xtk"><div class="marker"></div><span class="inline-wrap">一旦类包含了 abstract 方法,则这个类必须声明为 abstract</span></li><li id="kSU5eMvowGTNdPQAkvkDkz"><div class="marker"></div><span class="inline-wrap">abstract 只能修饰类和方法</span></li><li id="5ka3FjwHRgtL2LLhoUBa44"><div class="marker"></div><span class="inline-wrap">抽象类可以有任意成员，抽象类本质还是类</span></li></ol><h4 id="4AYtFbzHkfzGpeuPpZQcEY" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="tVC4kpZQKsthXwPvJhtwDR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">return</span> cat<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="k5n1moyj7NJf7kJXJZq6gh" class="wolai-block"><span class="inline-wrap">6. 抽象方法不能有主体</span></h4><ol class="wolai-block"><li id="47a7t7Lgx51Fehxp9FsYud"><div class="marker"></div><span class="inline-wrap">如果一个类继承了抽象类，则它必须实现抽象类的所有的抽象方法，除非它自己也声明为 abstract 类</span></li><li id="mZn7FC5QdNCrbZiEjew2CD"><div class="marker"></div><span class="inline-wrap">抽象方法不能使用 private、final 和 static 来修饰，因为这些关键字都是和重写相违背的</span></li></ol><h4 id="84WWcNzLn2tSfRTZ4QckPM" class="wolai-block"><span class="inline-wrap">抽象类模版设计模式</span></h4><ol class="wolai-block"><li id="2NbSHPYKwExiHnzP87GrzY"><div class="marker"></div><span class="inline-wrap">编写方法 cal()，可以计算某段代码的耗时时间</span></li><li id="6PqZDtzLjnzzYGqxmFvZSj"><div class="marker"></div><span class="inline-wrap">编写抽象方法 job()</span></li><li id="kYnojBaU91crFpcrARprkA"><div class="marker"></div><span class="inline-wrap">编写一个子类 A,继承抽象类 Template，井实现 job 方法</span></li><li id="7F5nfGNbeYEQKe2YJMWReR"><div class="marker"></div><span class="inline-wrap">编写一个测试类 TestTemplate,看看是否好用</span></li></ol><code-block id="4fiAtuVcoYmCZbzes7s31H" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TextTemplate</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">A</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token method function property-access">cal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7P1Q7r3meh8WQA9pVSTjaA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">B</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token method function property-access">cal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1wFn4ieUB9pehywqGRSMBp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>abstract <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Template</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="9BNE3LRZrkRiS51DZm2oLU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> abstract <span class="token keyword">void</span> <span class="token function">job</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="tpP8jPScXTGpdGVyMH8oCg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
long start <span class="token operator">=</span> <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">job</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
long end <span class="token operator">=</span> <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"时间"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="xwepuw8MHk9anw4VVrLAsn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Template</span><span class="token punctuation">{</span></pre></div></code-block><code-block id="1HoX8B2M75t5zVLmykzePS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">job</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
long num <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>long i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10000000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
num <span class="token operator">+=</span> i<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vkSdKhkxW8X5QiCo99P4qb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">Template</span><span class="token punctuation">{</span></pre></div></code-block><code-block id="bbz7rHHUjE3x1tHdgrytXF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">job</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
long num <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>long i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10000000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
num <span class="token operator">*=</span> i<span class="token punctuation">;</span></pre></div></code-block><h2 id="n8GcSv5jAYrq1rCNTDYQsg" class="wolai-block"><span class="inline-wrap">8.7 接口 ⭐</span></h2><h4 id="1jFAf5QKqDV5xtNAFUGezu" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="u2VipXeArujoymYT8pjWXe" class="wolai-block"><span class="inline-wrap">接口就是给出一些没有实现的方法,封装到一起,到某个类要使用的时候,再根据具体情况把这些方法写出来</span></h4><h4 id="tEz6KKCAyqS4YyAZY7iUkr" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><ol class="wolai-block"><li id="ix3fjEkF2PDKSfsZHT1XPT"><div class="marker"></div><span class="inline-wrap">Jdk7.0 前 接口里的所有方法都没有方法体(只能 </span><span class="inline-wrap"><b>抽象方法</b></span><span class="inline-wrap"> )</span></li><li id="fpVaV8bhf6FuXCPEbU3K6D"><div class="marker"></div><span class="inline-wrap">Jdk8.0 后接口类可以有 </span><span class="inline-wrap"><b>静态方法，defaut 实现方法</b></span><span class="inline-wrap"> ，也就是说接口中可以有方法的具体实现</span></li></ol><h4 id="65Y75nomfswve9qFk9hu8d" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="hXERCM3vy53HLFybrtYEGW" class="wolai-block"><span class="inline-wrap">1. 接口不能被实例化</span></h4><ol class="wolai-block"><li id="4KsmsW87oPVR7jdwwXkZTd"><div class="marker"></div><span class="inline-wrap">接口中所有的方法是 public 和 abstrac 方法，接口中抽象方法，可以不用 abstract 修饰</span></li><li id="c6QMkcfsVz2KATasdEykSH"><div class="marker"></div><span class="inline-wrap">普通类实现接口，就必须将该接口的所有方法实现</span></li><li id="wXS69qeC6V93Qox361v6CD"><div class="marker"></div><span class="inline-wrap"><b>抽象类实现接口，可以不用实现接口的方法</b></span></li><li id="8BVc3Z2oJpt691bskSyiST"><div class="marker"></div><span class="inline-wrap">一个类同时可以实现多个接口</span></li><li id="sbQmK8esKpo7cvH1YKjVX6"><div class="marker"></div><span class="inline-wrap">接口中的属性,只能是 final 的，而且是 public static final 修饰符</span></li><li id="eDkias59hn5MSVZPUCZ2Lw"><div class="marker"></div><span class="inline-wrap">接口中属性的访问形式：接口名.属性名</span></li><li id="hxYNDTpGqYVXY36HoUjqtP"><div class="marker"></div><span class="inline-wrap">一个接口不能继承其它的类,但是可以继承多个别的接口</span></li><li id="q9T2xPcUuyJcRgJU2yedZe"><div class="marker"></div><span class="inline-wrap">接口的修饰符 只能是 public 和默认，这点和类的修饰符是一样的</span></li></ol><h4 id="3vxcQftSSt9KDnzCG2wgdi" class="wolai-block"><span class="inline-wrap">实现接口 VS 继承类：</span></h4><h4 id="2n1LBUR4Pa1VxAWZskAkyf" class="wolai-block"><span class="inline-wrap">1. 继承的价值主要在于：解决代码的复用性和可维护性</span></h4><h4 id="k8jihgcCsk1zEnEXD2EJuB" class="wolai-block"><span class="inline-wrap">2. 接口的价值主要在于：设计，设计好各种规范(方法)，让其它类去实现这些方法</span></h4><ol class="wolai-block"><li id="bcqD5K3RPJ31GinAiHFCRh"><div class="marker"></div><span class="inline-wrap">接口比继承更加灵活，继承是满足 is -a 的关系，而接口只需满足 like-a 的关系</span></li><li id="4v16JiXNWsy67hyYLK7byp"><div class="marker"></div><span class="inline-wrap">接口在一定程度上实现代码解耦</span></li></ol><h4 id="4sJxA5BgERch9jRpekTod6" class="wolai-block"><span class="inline-wrap">接口类型数组：</span></h4><h4 id="qAVLTkqKpA9LUqUSEsEJRm" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="1tRYK1Fpwamg3Tc52n34Uy" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="ajYqhjMDPKKdN2naryVmMy" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="qxNK2BpMTK6x5fhXcyH5tG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">interface</span> 接口名<span class="token punctuation">{</span>
<span class="token comment">//属性</span>
<span class="token comment">//方法</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="ry7YQNXmZ8V7FfZmLNkv54" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> 类名 <span class="token keyword">implements</span> 接口 <span class="token punctuation">{</span>
自己属性<span class="token punctuation">;</span>
自己方法<span class="token punctuation">;</span>
<span class="token comment">//必须实现接口的抽象方法</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="9sdaR423usQ43xKqa4XdX3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterfacePolyArr</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="e5kWnxCJkUP9BD7cjcdLVr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//多态数组 -> 接口类型数组</span></pre></div></code-block><h2 id="eWeJMcFomidx5iosNdD5o6" class="wolai-block"><span class="inline-wrap">8.8 内部类 ⭐</span></h2><h4 id="gT7v3LQ91YqPWxRdPxU2s5" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="tTM5YjADRGERJJbceA5ExK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">一个类的内部又完整的嵌套了另一个类结构，被嵌套的类称为内部类</span><span class="token punctuation">(</span>inner <span class="token keyword">class</span><span class="token punctuation">)</span>，嵌套其他类的类称为
<span class="token function">外部类</span><span class="token punctuation">(</span>outer <span class="token keyword">class</span><span class="token punctuation">)</span>
内部类最大的特点就是可以直接访问私有属性，井且可以体现类与类之间的包含关系</pre></div></code-block><code-block id="cVqrbanyJe58pM3DRusbFZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Usb</span><span class="token punctuation">[</span><span class="token punctuation">]</span> usbs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Usb</span><span class="token punctuation">[</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
usbs<span class="token punctuation">[</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
usbs<span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Camera_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
给Usb数组中，存放 Phone 和 相机对象，Phone类还有一个特有的方法call（），
请遍历Usb数组，如果是Phone对象，除了调用Usb 接口定义的方法外，
还需要调用Phone 特有方法 call
*/</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> usbs<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
usbs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//动态绑定..</span>
<span class="token comment">//和前面一样，我们仍然需要进行类型的向下转型</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>usbs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Phone_</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//判断他的运行类型是 Phone_</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token maybe-class-name">Phone_</span><span class="token punctuation">)</span> usbs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2j28AyyXNju2C9bfuWerPN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">interface</span> <span class="token class-name">Usb</span><span class="token punctuation">{</span>
<span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Phone_</span> <span class="token keyword">implements</span> <span class="token class-name">Usb</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"手机可以打电话..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="m9L6cnydtX8gKJWF8kdUKG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"手机工作中..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Camera_</span> <span class="token keyword">implements</span> <span class="token class-name">Usb</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="sR7sQPRNh5oyuU2hGix1WH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"相机工作中..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="u6bgtZtaSevvyRAkPScb3z" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="8EyysZWD4ereY6bX3ZDrsa" class="wolai-block"><span class="inline-wrap">内部类分类：</span></h4><h4 id="4HZ64nNyAxEx6rbiPVLEJp" class="wolai-block"><span class="inline-wrap">1. 定义在外部类局部位置上： 1 局部类内部(有类名) 2.匿名局部类(没有类名 ⭐)</span></h4><ol class="wolai-block"><li id="guyyyWGV9g9awyGuX6nxmd"><div class="marker"></div><span class="inline-wrap">定义在外部类的成员位置上：1.成员内部类(无 static 修饰) 2.静态内部类(static 修饰)</span></li></ol><h3 id="mw2AxtXqFKyzEM5cCjvFtT" class="wolai-block"><span class="inline-wrap">8.8.1 局部内部类</span></h3><h4 id="63WKr7Sahj6tXEBHhzFkz3" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="n3oJX3viG7K9fAj4gKF1yZ" class="wolai-block"><span class="inline-wrap">局部内部类是定义在外部类的局部位置，在方法中、代码块中，并且有类名</span></h4><h4 id="kFiV5G6RzwY78PHSFPuiPB" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="7C7hzhkviDw1KCV4HevnmZ" class="wolai-block"><span class="inline-wrap">1. 可以直接访问外部类的所有成员，包含私有的</span></h4><ol class="wolai-block"><li id="4ucEmPsExJit3EPiKgtotD"><div class="marker"></div><span class="inline-wrap">不能添加访问修饰符,但是可以使用 final 修饰</span></li><li id="uW91PJjw2dJbb7Hv7r9Vgo"><div class="marker"></div><span class="inline-wrap">作用域：仅仅在定义它的方法或代码块中</span></li><li id="3xrJmYp5SwhAgM1WckYVao"><div class="marker"></div><span class="inline-wrap">内部类访问外部类：直接访问</span></li><li id="neRUk7SULcRnZwMPiuXzCA"><div class="marker"></div><span class="inline-wrap">外部类访问内部类：创建对象再访问</span></li><li id="eevo5pbGptynefGLwbxRUC"><div class="marker"></div><span class="inline-wrap">外部其他类访问局部内部类：不能访问</span></li><li id="4mesDLiE1gBaS62CRHZvev"><div class="marker"></div><span class="inline-wrap">如果外部类和局部内部类的成员重名时，默认遵循就近原则，如果访问外部类的成员使用&quot;外部类名.this.
成员&quot;去访问</span></li></ol><code-block id="kd25XE4fo6t3WxgGWwTgg7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Outer</span><span class="token punctuation">{</span><span class="token comment">//外部类</span>
<span class="token keyword">class</span> <span class="token class-name">Inner</span><span class="token punctuation">{</span><span class="token comment">//内部类</span></pre></div></code-block><code-block id="bBaqDjkPps21ixhnWdH7Dd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Other</span><span class="token punctuation">{</span><span class="token comment">//外部其他类</span></pre></div></code-block><code-block id="3CXeWdDkDT11QP4vN3bsrE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="9fUvMe3xiJ65L4pN2wdb6c" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalInnerClass</span> <span class="token punctuation">{</span><span class="token comment">//</span></pre></div></code-block><code-block id="2BQHCNKfv4M1AK7jS2F6zj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//演示一遍</span>
<span class="token maybe-class-name">Outer02</span> outer02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
outer02<span class="token punctuation">.</span><span class="token method function property-access">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"outer02的hashcode="</span> <span class="token operator">+</span> outer02<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6aCvr8cN4qenwjxsPJrYRV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Outer02</span> <span class="token punctuation">{</span><span class="token comment">//外部类</span>
<span class="token keyword">private</span> int n1 <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">;</span></pre></div></code-block><h3 id="iEu2ezSybEDQ8nfUrEvWSP" class="wolai-block"><span class="inline-wrap">8.8.2 匿名内部类 ⭐⭐</span></h3><h4 id="nXUNkwkqM2wra6AiKA6r6P" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="acszJ9rrJUTnrDASPzKk65" class="wolai-block"><span class="inline-wrap">匿名内部类是定义在外部类的局部位置，比如方法中，并目没有类名，同时还是一个对象</span></h4><h4 id="k6DxZo35TS3kESbcrTAwg5" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="2FbHjphkdcRN5vo26djKAK" class="wolai-block"><span class="inline-wrap">底层：</span></h4><ol class="wolai-block"><li id="cZE9ejpBVLfPPJdrPgecCQ"><div class="marker"></div><span class="inline-wrap">本质： </span><span class="inline-wrap"><b>IA tiger</b></span><span class="inline-wrap"> = class Xxxx</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>X</mi><mi>x</mi><mi>x</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">1 class Xxxx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">1</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">ss</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord mathnormal">xxx</span></span></span></span></span><span class="inline-wrap">1 = </span><span class="inline-wrap"><b>new IA</b></span></li><li id="dfHhQjrbaaZ1miKptsoMmf"><div class="marker"></div><span class="inline-wrap">接口的底层：class Xxxx$1 </span><span class="inline-wrap"><b>implement</b></span><span class="inline-wrap"> IA{@Overide}</span></li><li id="eZTKf9aZuEDvfJhB9FRZ4v"><div class="marker"></div><span class="inline-wrap">本质： </span><span class="inline-wrap"><b>Father father</b></span><span class="inline-wrap"> = class Xxxx</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>X</mi><mi>x</mi><mi>x</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">2 class Xxxx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">2</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">ss</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord mathnormal">xxx</span></span></span></span></span><span class="inline-wrap">2 = </span><span class="inline-wrap"><b>new Father</b></span></li><li id="iK2hN4KCDHAWmqgmYD2WAi"><div class="marker"></div><span class="inline-wrap">类的底层：class Xxxx$2 </span><span class="inline-wrap"><b>extends</b></span><span class="inline-wrap"> Father{@Overide}</span></li></ol><code-block id="vZfA1ovVm1bh8jWMz3HT6g" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"Outer02 m2()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token comment">//私有方法</span></pre></div></code-block><code-block id="5vUnNmYigKPyobuVXzuejQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//方法</span>
<span class="token comment">//1.局部内部类是定义在外部类的局部位置,通常在方法</span>
<span class="token comment">//3.不能添加访问修饰符,但是可以使用final 修饰</span>
<span class="token comment">//4.作用域 : 仅仅在定义它的方法或代码块中</span>
final <span class="token keyword">class</span> <span class="token class-name">Inner02</span> <span class="token punctuation">{</span><span class="token comment">//局部内部类(本质仍然是一个类)</span>
<span class="token comment">//2.可以直接访问外部类的所有成员，包含私有的</span>
<span class="token keyword">private</span> int n1 <span class="token operator">=</span> <span class="token number">800</span> <span class="token punctuation">;</span></pre></div></code-block><code-block id="6ErgpaTaoPT1J8E6NnKwhN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//5. 局部内部类可以直接访问外部类的成员，比如下面 外部类n1 和 m2()</span>
<span class="token comment">//7. 如果外部类和局部内部类的成员重名时，默认遵循就近原则，如果想访问外部类</span>
的成员，
<span class="token comment">// 使用 外部类名.this.成员)去访问</span>
<span class="token comment">// Outer02.this 本质就是外部类的对象, 即哪个对象调用了m1,</span>
<span class="token maybe-class-name">Outer02</span><span class="token punctuation">.</span><span class="token property-access">this就是哪个对象</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"n1="</span> <span class="token operator">+</span> n1 <span class="token operator">+</span> <span class="token string">" 外部类的n1="</span> <span class="token operator">+</span>
<span class="token maybe-class-name">Outer02</span><span class="token punctuation">.</span><span class="token property-access">this</span><span class="token punctuation">.</span><span class="token property-access">n1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"Outer02.this hashcode="</span> <span class="token operator">+</span> <span class="token maybe-class-name">Outer02</span><span class="token punctuation">.</span><span class="token property-access">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//6. 外部类在方法中，可以创建Inner02对象，然后调用方法即可</span>
<span class="token maybe-class-name">Inner02</span> inner02 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Inner02</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner02<span class="token punctuation">.</span><span class="token method function property-access">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="jDmbwPD3up5gEfYtv7J1uu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">new</span> <span class="token function">类或接口</span><span class="token punctuation">(</span><span class="token parameter">参数列表</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
类体<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="cD9GrM4qa6QjbZyfjSseTu" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="dgK52SuHNN3S9wGahwdCiB" class="wolai-block"><span class="inline-wrap">1. 匿名内部类既是一个类的定义同时本身也是一个对象,因此从语法上看，它既有定义类的特征，也有创建</span></h4><h4 id="heRwMPAUmJMJPF2zxow9nm" class="wolai-block"><span class="inline-wrap">对象的特征</span></h4><h4 id="kd5b6T8GfHG6RcWqKde2AL" class="wolai-block"><span class="inline-wrap">2. 可以直接访问外部类的所有成员，包含私有的</span></h4><h4 id="3uPhTszWXeKgZeebsHcgbs" class="wolai-block"><span class="inline-wrap">3. 不能添加访问修饰符,因为它的地位就是一个局部变量</span></h4><h4 id="vVNqmCf8JJ7J4c3X7WUDd8" class="wolai-block"><span class="inline-wrap">4. 作用域：仅仅在定义它的方法或代码块中</span></h4><h4 id="rJMnKqycAUqEmywrn9fBAt" class="wolai-block"><span class="inline-wrap">5. 匿名内部类方位外部类成员：直接访问</span></h4><h4 id="sCbWTuS4wPxfoRbH74FKa9" class="wolai-block"><span class="inline-wrap">6. 外部其他类访问匿名内部类：不能访问</span></h4><h4 id="bEeoYPoSp1jurdVrKxUw9F" class="wolai-block"><span class="inline-wrap">7. 如果外部类和匿名内部类的成员重名时，匿名内部类访问的话，默认遵循就近原则，如果想访问外部类</span></h4><code-block id="4RCXrjH37m2D3HrTzjvqg1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">的成员，则可以使用</span> <span class="token punctuation">(</span>外部类名<span class="token punctuation">.</span><span class="token property-access">this</span><span class="token punctuation">.</span><span class="token property-access">成员</span><span class="token punctuation">)</span>去访问</pre></div></code-block><code-block id="jRnmTgJ4kgsRxwQYgoB4m8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnonymousInnerClass</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Outer04</span> outer04 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
outer04<span class="token punctuation">.</span><span class="token method function property-access">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="sPAcjkUDJC6GWb9vs9NrJ3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Outer04</span> <span class="token punctuation">{</span> <span class="token comment">//外部类</span>
<span class="token keyword">private</span> int n1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span><span class="token comment">//属性</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//方法</span>
<span class="token comment">//基于接口的匿名内部类</span>
<span class="token comment">//</span>
<span class="token comment">//1.需求： 想使用IA接口,并创建对象</span>
<span class="token comment">//2.传统方式，是写一个类，实现该接口，并创建对象</span>
<span class="token comment">//3.需求是 Tiger/Dog 类只是使用一次，后面再不使用</span>
<span class="token comment">//4. 可以使用匿名内部类来简化开发</span>
<span class="token comment">//5. tiger的编译类型? IA</span>
<span class="token comment">//6. tiger的运行类型? 就是匿名内部类 Outer04$1</span>
<span class="token comment">/*
我们看底层 会分配 类名 Outer04$1
class Outer04$1 implements IA {
@Override
public void cry() {
System.out.println("老⻁叫唤...");
}
}
*/</span>
<span class="token comment">//7. jdk底层在创建匿名内部类 Outer04$1,立即⻢上就创建了 Outer04$1实例，并且把地</span>
址
<span class="token comment">// 返回给 tiger</span>
<span class="token comment">//8. 匿名内部类使用一次，就不能再使用</span>
<span class="token constant">IA</span> tiger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"老⻁叫唤..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="oQnqViS48vQoT3E418czms" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="iSk433x7G7qdiXek1afSVe" class="wolai-block"><span class="inline-wrap">};</span></h4><div id="d9LUN33vFjPibdR6293uFy" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(&quot;tiger 的运行类型=&quot; + tiger.getClass());
tiger.cry();</span></div></div><div id="jbDxNRaHyEpyBSdQuQiGTm" class="wolai-block wolai-text"><div><span class="inline-wrap">// IA tiger = new Tiger();
// tiger.cry();</span></div></div><div id="qJaGch4SH4wWsScMwszGRL" class="wolai-block wolai-text"><div><span class="inline-wrap">//演示基于类的匿名内部类
//分析
//1. father 编译类型 Father
//2. father 运行类型 Outer04</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi mathvariant="normal">/</mi><mi mathvariant="normal">/</mi><mn>3.</mn><mtext>底层会创建匿名内部类</mtext><msub><mi mathvariant="normal">/</mi><mi>c</mi></msub><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>O</mi><mi>u</mi><mi>t</mi><mi>e</mi><mi>r</mi><mn>04</mn></mrow><annotation encoding="application/x-tex">2
//3. 底层会创建匿名内部类
/_
class Outer04</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2//3.</span><span class="mord cjk_fallback">底层会创建匿名内部类</span><span class="mord"><span class="mord">/</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">ss</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord">04</span></span></span></span></span><span class="inline-wrap">2 extends Father{
@Override
public void test() {
System.out.println(&quot;匿名内部类重写了 test 方法&quot;);
}
}
_/
//4. 同时也直接返回了 匿名内部类 Outer04$2 的对象
//5. 注意(&quot;jack&quot;) 参数列表会传递给 构造器
Father father = new Father(&quot;jack&quot;){</span></div></div><div id="umVBQGDQgAPR4BQVwD6EDW" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public void test() {
System.out.println(&quot;匿名内部类重写了 test 方法&quot;);
}
};
System.out.println(&quot;father 对象的运行类型=&quot; +
father.getClass());//Outer04$2
father.test();</span></div></div><div id="7X92TtagFtkBSavRKeY6F5" class="wolai-block wolai-text"><div><span class="inline-wrap">//基于抽象类的匿名内部类
Animal animal = new Animal(){
@Override
void eat() {
System.out.println(&quot;小狗吃⻣头...&quot;);
}
};
animal.eat();
}
}</span></div></div><div id="ntHRFHfBEABSz5XYSwmhn2" class="wolai-block wolai-text"><div><span class="inline-wrap">interface IA {//接口
public void cry();
}
//class Tiger implements IA {</span></div></div><h4 id="jty1yVaA7A5iDyvqJgL3dS" class="wolai-block"><span class="inline-wrap">//</span></h4><div id="rAPHSX5BuYKzY3ePUcW2tf" class="wolai-block wolai-text"><div><span class="inline-wrap">// @Override
// public void cry() {
// System.out.println(&quot;老⻁叫唤...&quot;);
// }
//}
//class Dog implements IA{
// @Override
// public void cry() {
// System.out.println(&quot;小狗汪汪...&quot;);
// }
//}</span></div></div><div id="vxfYx9VsDr1DpgMcRkb8jb" class="wolai-block wolai-text"><div><span class="inline-wrap">class Father {//类
public Father(String name) {//构造器
System.out.println(&quot;接收到 name=&quot; + name);
}
public void test() {//方法
}
}</span></div></div><div id="rS5M3AMCEaVxZAPcacfPN3" class="wolai-block wolai-text"><div><span class="inline-wrap">abstract class Animal { //抽象类
abstract void eat();
}</span></div></div><div id="vXPq9eFxUvjHre3hc8vHKa" class="wolai-block wolai-text"><div><span class="inline-wrap">public class LocalInnerClassDetail {
public static void main(String[] args) {
Outer03 outer03 = new Outer03();
outer03.f1();
}
}</span></div></div><div id="7fwK9iRJWjnZuDRENRXNRW" class="wolai-block wolai-text"><div><span class="inline-wrap">class Outer03{
private int n1 = 99 ;
public void f1(){
Person person = new Person(){
@Override
public void hi() {
System.out.println(&quot;匿名内部类重写 hi 方法&quot;);
}
};
person.hi();</span></div></div><div id="eZBdsJkbkFWANvhgVPoCwo" class="wolai-block wolai-text"><div><span class="inline-wrap">new Person(){
@Override
public void hi() {
System.out.println(&quot;匿名内部类重写 ok 方法&quot;);
}</span></div></div><h3 id="mjqq8wejh847reRGJ3JkKz" class="wolai-block"><span class="inline-wrap">8.8.3 成员内部类</span></h3><h4 id="7QbvFPtvpRKo4eEE6StwA8" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="8LeXqgZXz9rFUnZbDRk2d7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>成员内部类是定义在外部类的成员位置，并且没有<span class="token keyword">static</span>修饰</pre></div></code-block><code-block id="9svPByU4CzVLHcLcvQAs3k" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token method function property-access">ok</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token method function property-access">ok</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="286wTbVk6JrNNFCGYhJiXi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"Person hi()"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="7v4Mh6u4yQRPVHQ2g3DzFT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> str</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"Person ok()"</span><span class="token operator">+</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1pehjmycs87LNBrawAsD7P" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InnerClassExercise02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">CellPhone</span> cellPhone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CellPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cellPhone<span class="token punctuation">.</span><span class="token method function property-access">alarmclock</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Bell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
@<span class="token maybe-class-name">Override</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"懒猪起床"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="xiMbEU1inhDHWDcfF4uuvX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">interface</span> <span class="token class-name">Bell</span><span class="token punctuation">{</span>
<span class="token keyword">void</span> <span class="token function">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="wQfvtPSLFzKNvE7twXf9EC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">CellPhone</span><span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">alarmClock</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Bell</span> bell</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
bell<span class="token punctuation">.</span><span class="token method function property-access">ring</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="6cLqHUZzKWVkKw9WkQKt3Q" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="utCpvE8qd6DmHcThr5Xetz" class="wolai-block"><span class="inline-wrap">1. 可以直接访问外部类的所有成员，包含私有的</span></h4><h4 id="nYEupZn9NcLhaoFVF8uXnD" class="wolai-block"><span class="inline-wrap">2. 可以添加任意访问修饰符</span></h4><h4 id="3nbPtzybjDGvsVWAzx3s1o" class="wolai-block"><span class="inline-wrap">3. 作用域：为整个外部类类体</span></h4><h4 id="f4eiMbADPd9fpdNvxHFXCW" class="wolai-block"><span class="inline-wrap">4. 成员内部类访问外部类：直接访问</span></h4><h4 id="qASViihmZdXUs4XLsYu4zo" class="wolai-block"><span class="inline-wrap">5. 外部类访问成员内部类；创建对象，再访问</span></h4><h4 id="3pKnp5BWs6EDMoY9CwWU3N" class="wolai-block"><span class="inline-wrap">6. 外部其他类访问成员内部类：</span></h4><code-block id="fUdJGWeZLm8Q9BQWfxuXHW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>外部类<span class="token punctuation">.</span><span class="token property-access">内部类</span> 引用名 <span class="token operator">=</span> 外部对象<span class="token punctuation">.</span><span class="token property-access">new</span> <span class="token function">内部类</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
外部类<span class="token punctuation">.</span><span class="token property-access">内部类</span> 引用名 <span class="token operator">=</span> 外部对象 <span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><ol class="wolai-block"><li id="whSj493nby5pJi3EW9JaQ2"><div class="marker"></div><span class="inline-wrap">如果外部类和成员内部类的成员重名时，成员内部类访问的话，默认遵循就近原则，如果想访问外部类
的成员，则可以使用 (外部类名.this.成员)去访问</span></li></ol><code-block id="6R93VAKfb9m53Ra1KdGyKS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MemberInnerClass01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Outer08</span> outer08 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Outer08</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
outer08<span class="token punctuation">.</span><span class="token method function property-access">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="2dcwxFKA5285hAjCkDANhw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//外部其他类，使用成员内部类的三种方式</span>
<span class="token comment">//</span>
<span class="token comment">// 第一种方式</span>
<span class="token comment">// outer08.new Inner08(); 相当于把 new Inner08()当做是outer08成员</span>
<span class="token comment">// 这就是一个语法，不要特别的纠结.</span>
<span class="token maybe-class-name">Outer08</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Inner08</span></span> inner08 <span class="token operator">=</span> outer08<span class="token punctuation">.</span><span class="token property-access">new</span> <span class="token class-name">Inner08</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner08<span class="token punctuation">.</span><span class="token method function property-access">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 第二方式 在外部类中，编写一个方法，可以返回 Inner08对象</span>
<span class="token maybe-class-name">Outer08</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Inner08</span></span> inner08Instance <span class="token operator">=</span> outer08<span class="token punctuation">.</span><span class="token method function property-access">getInner08Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner08Instance<span class="token punctuation">.</span><span class="token method function property-access">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="uyqvsVbj7GAHa7ixguhrkG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Outer08</span> <span class="token punctuation">{</span> <span class="token comment">//外部类</span>
<span class="token keyword">private</span> int n1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> <span class="token string">"张三"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="knp9hdZBAovRES5JHsMG1m" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"hi()方法..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="3KQvgM598utDVgfUXob3PW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1.注意: 成员内部类，是定义在外部内的成员位置上</span>
<span class="token comment">//2.可以添加任意访问修饰符(public、protected 、默认、private),因为它的地位就是一个成</span>
员
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Inner08</span> <span class="token punctuation">{</span><span class="token comment">//成员内部类</span>
<span class="token keyword">private</span> double sal <span class="token operator">=</span> <span class="token number">99.8</span><span class="token punctuation">;</span>
<span class="token keyword">private</span> int n1 <span class="token operator">=</span> <span class="token number">66</span> <span class="token punctuation">;</span></pre></div></code-block><h3 id="8V3ik5mowbYz6651S2tKB2" class="wolai-block"><span class="inline-wrap">8.8.4 静态内部类</span></h3><h4 id="t2NfyL1EuqmrMoqRHQXzJ1" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="wXvF6pZYdSf7rgaSqshzRR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>静态内部类是定义在外部类的成员位置，并且有<span class="token keyword">static</span>修饰</pre></div></code-block><h4 id="q9p75gJHY33rdffz7BECaJ" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="qFB7b8wAup9jxuJQL8k9EE" class="wolai-block"><span class="inline-wrap">1. 可以直接访问外部类的所有静态成员，包含私有的，但不能直接访问非静态成员</span></h4><h4 id="g7ukwRLw6Kqg8bHMPD8VKf" class="wolai-block"><span class="inline-wrap">2. 可以添加任意访问修饰符</span></h4><h4 id="xjRci9KykTRr2SKh3bzm6k" class="wolai-block"><span class="inline-wrap">3. 作用域：整个外部类类体</span></h4><h4 id="v2HxUiCDvAWDB2sDjmRv6p" class="wolai-block"><span class="inline-wrap">4. 静态内部类访问外部类：直接访问</span></h4><h4 id="9NyoqxPHGPLvPyqqHbgdby" class="wolai-block"><span class="inline-wrap">5. 外部类访问静态内部类：创建对象，再访问</span></h4><h4 id="7RsbzURh1qyP2SD2oxjbXW" class="wolai-block"><span class="inline-wrap">6. 外部其他类访问静态内部类：</span></h4><code-block id="aEPon491kJq7DT47tuebj3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>外部类<span class="token punctuation">.</span><span class="token property-access">内部类</span> 引用名 <span class="token operator">=</span> <span class="token keyword">new</span> 外部类<span class="token punctuation">.</span><span class="token method function property-access">内部类</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
外部类<span class="token punctuation">.</span><span class="token property-access">内部类</span> 引用名 <span class="token operator">=</span> 外部对象 <span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
外部类<span class="token punctuation">.</span><span class="token property-access">内部类</span> 引用名 <span class="token operator">=</span> 外部类 <span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><ol class="wolai-block"><li id="tskAP6Un8JPBEXdMPJisAC"><div class="marker"></div><span class="inline-wrap">如果外部类和静态内部类的成员重名时，静态内部类访问的话，默认遵循就近原则，如果想访问外部类
的成员，则可以使用 (外部类名.this.成员)去访问</span></li></ol><code-block id="3kCaVkhAp3TR7rX6FD6uKL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//可以直接访问外部类的所有成员，包含私有的</span>
<span class="token comment">//如果成员内部类的成员和外部类的成员重名，会遵守就近原则.</span>
<span class="token comment">//，可以通过 外部类名.this.属性 来访问外部类的成员</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"n1 = "</span> <span class="token operator">+</span> n1 <span class="token operator">+</span> <span class="token string">" name = "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">" 外部类的n1="</span>
<span class="token operator">+</span> <span class="token maybe-class-name">Outer08</span><span class="token punctuation">.</span><span class="token property-access">this</span><span class="token punctuation">.</span><span class="token property-access">n1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="hfmQ4GmFX2uoTzSwMAyi6R" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方法，返回一个Inner08实例</span>
<span class="token keyword">public</span> <span class="token maybe-class-name">Inner08</span> <span class="token function">getInner08Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Inner08</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vUwUqA8WUr4iZd9XPdEc4D" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//写方法</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">t1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//使用成员内部类</span>
<span class="token comment">//创建成员内部类的对象，然后使用相关的方法</span>
<span class="token maybe-class-name">Inner08</span> inner08 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Inner08</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inner08<span class="token punctuation">.</span><span class="token method function property-access">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>inner08<span class="token punctuation">.</span><span class="token property-access">sal</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="gfBeeMBe2tV7n9eQtqcbXF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StaticInnerClass01</span> <span class="token punctuation">{</span></pre></div></code-block><div id="7ZNXfiLfnzcuUQNxUG1ukG" class="wolai-block wolai-text"><div><span class="inline-wrap">public static void main(String[] args) {
Outer10 outer10 = new Outer10();
outer10.m1();</span></div></div><div id="7Xy6KrNYCPWFD2AFCF7HvZ" class="wolai-block wolai-text"><div><span class="inline-wrap">//外部其他类 使用静态内部类
//方式 1
//因为静态内部类，是可以通过类名直接访问(前提是满足访问权限)
Outer10.Inner10 inner10 = new Outer10.Inner10();
inner10.say();
//方式 2
//编写一个方法，可以返回静态内部类的对象实例.
Outer10.Inner10 inner101 = outer10.getInner10();
System.out.println(&quot;============&quot;);
inner101.say();</span></div></div><div id="dfjj84cFyhvwgbE4ZQL5Ak" class="wolai-block wolai-text"><div><span class="inline-wrap">Outer10.Inner10 inner10* = Outer10.getInner10*();
System.out.println(&quot;</span><span class="inline-wrap"><b>​</b></span><span class="inline-wrap">&quot;);
inner10 _.say();
}
}</span></div></div><div id="8aePSqieozrjY3PcjusQVP" class="wolai-block wolai-text"><div><span class="inline-wrap">class Outer10 { //外部类
private int n1 = 10 ;
private static String name = &quot;张三&quot;;
private static void cry() {}
//Inner10 就是静态内部类
//1. 放在外部类的成员位置
//2. 使用 static 修饰
//3. 可以直接访问外部类的所有静态成员，包含私有的，但不能直接访问非静态成员
//4. 可以添加任意访问修饰符(public、protected 、默认、private),因为它的地位就是一个
成员
//5. 作用域 ：同其他的成员，为整个类体
static class Inner10 {
private static String name = &quot;韩顺平教育&quot;;
public void say() {
//如果外部类和静态内部类的成员重名时，静态内部类访问的时，
//默认遵循就近原则，如果想访问外部类的成员，则可以使用 (外部类名.成员)
System.out.println(name + &quot; 外部类 name= &quot; + Outer10.name);
cry();
}
}</span></div></div><div id="9cQzArvJ5rRSvQcHxQ1CGF" class="wolai-block wolai-text"><div><span class="inline-wrap">public void m1() { //外部类---访问------&gt;静态内部类 访问方式：创建对象，再访问
Inner10 inner10 = new Inner10();
inner10.say();
}</span></div></div><div id="o8boZeK5PCeJ5fvTSu8fmy" class="wolai-block wolai-text"><div><span class="inline-wrap">public Inner10 getInner10() {
return new Inner10();</span></div></div><h2 id="3uiQjXvcc1Vp6MjdVNyRWb" class="wolai-block"><span class="inline-wrap">8.9 类加载顺序 ⭐⭐</span></h2><h4 id="mQd57ev3avWoHJiZxVHsQE" class="wolai-block"><span class="inline-wrap">类什么时候被加载：</span></h4><h4 id="kBdENSr5rh6ciQL8rn6U3p" class="wolai-block"><span class="inline-wrap">创建对象实例时</span></h4><h4 id="imrFUaCUwppismLyLKeka3" class="wolai-block"><span class="inline-wrap">创建子类对象实例时，父类也会被加载</span></h4><h4 id="fXG364FgQYTWp2tXhDuLSd" class="wolai-block"><span class="inline-wrap">使用类的静态成员时</span></h4><h4 id="jKP4tCptKrkZ4WkGcMKPas" class="wolai-block"><span class="inline-wrap">创建一个对象时，在一个类的调用顺序：</span></h4><h4 id="sj73rSAtbSrcoNxa5Fho3N" class="wolai-block"><span class="inline-wrap">1. 调用静态代码块和静态属性初始化(注意：静态代码块和静态属性初始化调用的优先级样，如果有多个静</span></h4><h4 id="bgr4zCv7H6E4b7xYV6c4vb" class="wolai-block"><span class="inline-wrap">态代码块和多个静</span></h4><h4 id="6rBGt7zvg7dvGQ9JwUUcGh" class="wolai-block"><span class="inline-wrap">态变量初始化，则按他们定义的顺序调</span></h4><h4 id="joUNCWPewXtWq4eTZtfdpQ" class="wolai-block"><span class="inline-wrap">2. 调用普通代码块和普通属性的初始化(注意：普通代码块和普通属性初始化调用的优先级一样，若果有多</span></h4><h4 id="ruFFWiyMHkZhEokvH5dcYu" class="wolai-block"><span class="inline-wrap">个普通代码块和多个普通属性初始化，则按定义顺序调用)</span></h4><h4 id="28acZ9i2K7zs7rUGr2fJ51" class="wolai-block"><span class="inline-wrap">3. 调用构造方法</span></h4><h4 id="2SMuM7vaAxYNFDamaeB4iV" class="wolai-block"><span class="inline-wrap">创建子类时顺序：</span></h4><h4 id="d5TouQKGeRBX7bqaYKpkwy" class="wolai-block"><span class="inline-wrap">1. 父类的静态代码块和静态属性(优先级一样，按定义顺序执行)</span></h4><h4 id="2psSbjNzphqm45ry62mLGk" class="wolai-block"><span class="inline-wrap">2. 子类的静态代码块和静态属性(优先级一样，按定义顺序执行)</span></h4><h4 id="mELkyuLp48eq8WKDHxYpTr" class="wolai-block"><span class="inline-wrap">3. 父类的普通代码块和普通属性初始化(优先级一样，按定义顺序执行)</span></h4><h4 id="naoRPSKwJrj9aAw8YqfaSb" class="wolai-block"><span class="inline-wrap">4. 父类构造方法</span></h4><h4 id="86XJ1XKNgFfqGyr9c3wEeQ" class="wolai-block"><span class="inline-wrap">5. 子类的普通代码块和普通属性初始化(优先级一样，按定义顺序执行)</span></h4><h4 id="mGdja4UKsEdfMaEkPGpSdJ" class="wolai-block"><span class="inline-wrap">6. 子类构造方法</span></h4><h1 id="kkHT9nYtNfo6iMvjr89HtM" class="wolai-block"><span class="inline-wrap">9 枚举和注解</span></h1><h4 id="8rTUBXeB4WRqjw225CPgQS" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="9PG3PtTyTLX3TD7oEPDMFU" class="wolai-block"><span class="inline-wrap">枚举是一组常量的集合，属于一种特殊的类，里面只包含一组有限的特定的对象</span></h4><h2 id="nGkskLUUgFiKpAQUuJt2jB" class="wolai-block"><span class="inline-wrap">9.1 自定义类实现枚举</span></h2><h4 id="ddnPMnHw6B7v8MEnh5fpaW" class="wolai-block"><span class="inline-wrap">实现步骤：</span></h4><h4 id="9hXR9k25CmPutToVCdPYTV" class="wolai-block"><span class="inline-wrap">1. 构造器私有化</span></h4><h4 id="iAbjn7rKEorfU7TtVM4KDR" class="wolai-block"><span class="inline-wrap">2. 本类内部创建一组对象</span></h4><ol class="wolai-block"><li id="4BeZQndNKFjLhjkowiC8mu"><div class="marker"></div><span class="inline-wrap">对外暴露对象(通过为对象添加 public final static 修饰符)</span></li><li id="rQLczkxWK15Ai3bmPqV3pE"><div class="marker"></div><span class="inline-wrap">提供 get 方法，但是不提供 set 方法</span></li></ol><h4 id="26JE1fazTNSgTR3pkQ3NqF" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="ppTXn5BLGWFvjohqews4S1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token maybe-class-name">Inner10</span> <span class="token function">getInner10_</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Inner10</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="7UsmzpJdmWHVUDV4w15yZ9" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="122YLgoaNuXJjbFxR4AQ4E"><div class="marker"></div><span class="inline-wrap">不需要提供 setxxx 方法，因为枚举对象值通常为只读</span></li><li id="47ciT5NMP6SGwZNDjZS3CP"><div class="marker"></div><span class="inline-wrap">枚举对象/属性使用 final + static 共同修饰，实现底层优化</span></li><li id="uc1AJwN2SWqJyTWoaZkkx3"><div class="marker"></div><span class="inline-wrap">枚举对象名通常使用全部大写，常量的命名规范</span></li><li id="4FWL8DLK5uDgV2S55p4pdy"><div class="marker"></div><span class="inline-wrap">枚举对象根据需要，也可以有多个属性</span></li></ol><h2 id="gULhVPYWcR5wZWCbjXq6g5" class="wolai-block"><span class="inline-wrap">9.2 enum 关键字实现枚举</span></h2><h4 id="1M47VL1S5ZUrs6g7ticTAL" class="wolai-block"><span class="inline-wrap">实现步骤：</span></h4><ol class="wolai-block"><li id="mwMD7cfPZMETjLoGZB1D2b"><div class="marker"></div><span class="inline-wrap">关键字 enum 代替 class</span></li><li id="p2Zmo3fc93PPEu9q5nF5HQ"><div class="marker"></div><span class="inline-wrap">行首：常量名(实参列表)</span></li></ol><h4 id="a1PgangQHxFHduAbcKWV1B" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="5b4aabvCJBjYDTq79qNhVE"><div class="marker"></div><span class="inline-wrap">使用 enum 关键字开发一个枚举类时，默认会继承 Enum 类</span></li><li id="ruQQq15ubk4cFBhwbHN8T2"><div class="marker"></div><span class="inline-wrap">传统的 public static final Season SPRING = new Season(&quot;春天”&quot;温暖&quot;)；
简化成 SPRING(&quot;春天”，&quot;温暖”)，我们必须知道它调用的是哪个构造器</span></li><li id="5Af4pC2raBVfD5FYe25oZ4"><div class="marker"></div><span class="inline-wrap">如果使用无参构造器 创建 枚举对象，则实参列表和小括号都可以省略</span></li><li id="4kadbAM4UnJDUZTQShYyvy"><div class="marker"></div><span class="inline-wrap">多个枚举对象，使用,间隔，最后;结尾</span></li><li id="9pgbDGYMkVsvBSXXnHCV7V"><div class="marker"></div><span class="inline-wrap">枚举对象必须放在枚举类行首</span></li></ol><h4 id="pU3SC8yF6u9bj6EUjMYafM" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="8PvLMZeQAo1YRATGL3sHJ9" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>toString：Enum类己经重写过了，返回的是当前对象名子类可以重写该方法，用于返回对象的属性信息
<span class="token function">name：返回当前对象名</span><span class="token punctuation">(</span>常量名<span class="token punctuation">)</span>，子类中不能重写
ordinal：返回当前对象的位置号，默认从 <span class="token number">0</span> 开始
values：返回当前枚举类中所有的常量
valueof：将字符串转换成枚举对象，要求字符串必须为已有的常量名，否则报异常
compareTo：比较两个枚举常量的编号，做差</pre></div></code-block><code-block id="fm9s5hNh7LGrPPiZMhn6J8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">enum</span> <span class="token maybe-class-name">Season</span> <span class="token punctuation">{</span>
<span class="token constant">SPRING</span><span class="token punctuation">(</span><span class="token string">"春天"</span><span class="token punctuation">,</span><span class="token string">"温暖"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">WINTER</span><span class="token punctuation">(</span><span class="token string">"冬天"</span><span class="token punctuation">,</span><span class="token string">"寒冷"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="eQV3y6r7LfnX2M2be8KFu4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> desc<span class="token punctuation">;</span></pre></div></code-block><code-block id="9BU49B68NTpMH7ensX2amz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token function"><span class="token maybe-class-name">Season</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> desc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">desc</span> <span class="token operator">=</span> desc<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="3TsxR3PZouguYmtsbxsAUG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EnumMethod</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//使用Season2 枚举类，来演示各种方法</span>
<span class="token maybe-class-name">Season2</span> autumn <span class="token operator">=</span> <span class="token maybe-class-name">Season2</span><span class="token punctuation">.</span><span class="token constant">AUTUMN</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="rpvaUTgkyPqZgr7swokANU" class="wolai-block"><span class="inline-wrap">//输出枚举对象的名字</span></h4><div id="1WsLV5HLb3gD4qwBCjC9Vm" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(autumn.name());
//ordinal() 输出的是该枚举对象的次序/编号，从 0 开始编号
//AUTUMN 枚举对象是第三个，因此输出 2
System.out.println(autumn.ordinal());
//从反编译可以看出 values 方法，返回 Season2[]
//含有定义的所有枚举对象
Season2[] values = Season2.values();
System.out.println(&quot;===遍历取出枚举对象(增强 for)====&quot;);
for (Season2 season: values) {//增强 for 循环
System.out.println(season);
}</span></div></div><div id="d73iYQ77gDGsZTZCcQiKTi" class="wolai-block wolai-text"><div><span class="inline-wrap">//valueOf：将字符串转换成枚举对象，要求字符串必须•为已有的常量名，否则报异常
//执行流程
//1. 根据你输入的 &quot;AUTUMN&quot; 到 Season2 的枚举对象去查找
//2. 如果找到了，就返回，如果没有找到，就报错
Season2 autumn1 = Season2.valueOf(&quot;AUTUMN&quot;);
System.out.println(&quot;autumn1=&quot; + autumn1);
System.out.println(autumn == autumn1);</span></div></div><div id="k5JB1E3socKHyXp1eoxfeu" class="wolai-block wolai-text"><div><span class="inline-wrap">//compareTo：比较两个枚举常量，比较的就是编号
//
//1. 就是把 Season2.AUTUMN 枚举对象的编号 和 Season2.SUMMER 枚举对象的编号比较
//2. 看看结果
/*
public final int compareTo(E o) {</span></div></div><div id="43TgnhVj3L3Qng36zHg15x" class="wolai-block wolai-text"><div><span class="inline-wrap">return self.ordinal - other.ordinal;
}
Season2.AUTUMN 的编号[2] - Season2.SUMMER 的编号[3]
*/
System.out.println(Season2.AUTUMN.compareTo(Season2.SUMMER));</span></div></div><div id="97VL1xfwj8VHCZRfDVbTtC" class="wolai-block wolai-text"><div><span class="inline-wrap">//补充了一个增强 for
// int[] nums = {1, 2, 9};
// //普通的 for 循环
// System.out.println(&quot;=====普通的 for=====&quot;);
// for (int i = 0; i &lt; nums.length; i++) {
// System.out.println(nums[i]);
// }
// System.out.println(&quot;=====增强的 for=====&quot;);
// //执行流程是 依次从 nums 数组中取出数据，赋给 i, 如果取出完毕，则退出 for
// for(int i : nums) {
// System.out.println(&quot;i=&quot; + i);
// }
}
}</span></div></div><h4 id="x1zFtv1aKH2FqE2WbfzAsK" class="wolai-block"><span class="inline-wrap">实现接口：</span></h4><ol class="wolai-block"><li id="3Nmfwu2vtk2BzzMgRg4t8J"><div class="marker"></div><span class="inline-wrap">使用 enum 关键字后，就不能再继承其它类了，因为 enum 会隐式继承 Enum，而 Java 是单继承机制</span></li><li id="qQg8LifQU8aSSk1T4mhzA3"><div class="marker"></div><span class="inline-wrap">枚举类和普通类一样，可以实现接口：enum 类名 implements 接口 1 ，接口 2{}</span></li></ol><h2 id="qAqvHbkz18z5eWrKGuqu26" class="wolai-block"><span class="inline-wrap">9.3 JDk 内置的基本注解类型</span></h2><h4 id="5u2NezhmPF75rxaUF4R6F1" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="rZ1RRtaJV5xGiLYMWP5gcw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">注解</span><span class="token punctuation">(</span><span class="token maybe-class-name">Annotation</span><span class="token punctuation">)</span><span class="token function">也被称为元数据</span><span class="token punctuation">(</span><span class="token maybe-class-name">Metadata</span><span class="token punctuation">)</span>，用于修饰解释包<span class="token punctuation">,</span>类、方法、属性、构造器、局部变量等
数据信息
和注释一样，注解不影响程序逻辑，但注解可以被编译或运行，相当于嵌入在代码中的补充信息
在JavaSE中，注解的使用目的比较简单，例如标记过时的功能，忽略警告等。在JavaEE中注解占据了更
重要的⻆色，例如用来配置应用程序的任何切面，代替java <span class="token constant">EE</span>旧版本中所有遗留的繁冗代码和<span class="token constant">XML</span>配置</pre></div></code-block><h4 id="62YfFeHqiK4hksca8VSbNd" class="wolai-block"><span class="inline-wrap">基本 Annotation 介绍：</span></h4><code-block id="cR8XATPjPHMpjnzkfGcSMA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override：</span> 限定某个方法，是重写父类方法，该注解只能用于方法
@<span class="token function"><span class="token maybe-class-name">Deprecated：用于表示某个程序元素</span></span><span class="token punctuation">(</span>类，方法等<span class="token punctuation">)</span>己过时
@<span class="token maybe-class-name">SuppressWarnings：抑制编译器警告</span></pre></div></code-block><h3 id="3sdQ6LXJqDP7E4C7fcYVqh" class="wolai-block"><span class="inline-wrap">9.3.1 @Override</span></h3><h4 id="etqmYjt4pfjPD81UmtCiRV" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="dvZEMS7YSbseQT2VxHXKDn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span> <span class="token function">表示指定重写父类的方法</span><span class="token punctuation">(</span>从编译层面验证<span class="token punctuation">)</span>，如果父类没有方法，则会报错
如果没写 @<span class="token maybe-class-name">Override</span> 还是会重写父类
@<span class="token maybe-class-name">Override</span> 只能修饰方法，不能修饰其它类，包，属性等等
如果写了@<span class="token maybe-class-name">Override</span> 注解，编译器就会去检查该方法是否真的重写了父类的方法，若果没有构成重写则
编译错误
查看@<span class="token maybe-class-name">Override注解源码</span>@<span class="token function"><span class="token maybe-class-name">Target</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">MRTHOD</span><span class="token punctuation">)</span>，说明只能修饰方法
@<span class="token maybe-class-name">Target</span> 是修饰注解的注解，称为元注解</pre></div></code-block><h3 id="ggwQqX6b8h4SBXWqaS6C65" class="wolai-block"><span class="inline-wrap">9.3.2 @Deprecated</span></h3><h4 id="hbMFJAixJwTSmfktBzFwCb" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="j6xk1tFQ9AFYoih84a29yn" class="wolai-block"><span class="inline-wrap">用于表示某个程序元素(类，方法等)己过时</span></h4><h4 id="8cYJzaHR4nCHaHj6ZKskB4" class="wolai-block"><span class="inline-wrap">可以修饰方法，类，字段，包，参数 等等</span></h4><code-block id="eDDt8xVoBACX266rNvu29q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token function"><span class="token maybe-class-name">Target</span></span> <span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">CONSTRUCTOR</span><span class="token punctuation">,</span><span class="token constant">FIELD</span><span class="token punctuation">,</span><span class="token constant">LOCAL_</span> <span class="token constant">VARIABLE</span><span class="token punctuation">,</span> <span class="token constant">METHOD</span><span class="token punctuation">,</span><span class="token constant">PACKAGE</span><span class="token punctuation">,</span> <span class="token constant">PARAMETER</span><span class="token punctuation">,</span> <span class="token constant">TYPE</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
@<span class="token maybe-class-name">Deprecated</span> 的作用可以做到新旧版本的兼容和过渡</pre></div></code-block><h3 id="2WKLoc2kUkcN6p7Zy7Sjzq" class="wolai-block"><span class="inline-wrap">9.3.3 @SuppressWarnings</span></h3><h4 id="efRqKuwLvwPSHzq4h3jwvx" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="j2teQRqF5w9j4SeaK9EnfA" class="wolai-block"><span class="inline-wrap">抑制编译器警告信息</span></h4><code-block id="7jvUEz73sceKz9qXyzFdu8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>unchecked 是忽略没有检查的警告
rawtypes 是忽略没有指定泛型的警告
unused 是忽略没有使用某个变量的警告错误</pre></div></code-block><code-block id="j9v5ZX838PQht31ku64FNb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">SuppressWarnings可以修饰的程序元素为，查看</span>@<span class="token maybe-class-name">Target</span>
生成@<span class="token maybe-class-name">SupperssWarnings</span> <span class="token function">时，不用背，直接点击左侧的⻩色提示，就可以选择</span><span class="token punctuation">(</span>注意可以指定生成的位
置<span class="token punctuation">)</span></pre></div></code-block><h2 id="a9QFGK2aiB4wfGCra8yVd8" class="wolai-block"><span class="inline-wrap">9.4 元注解：对注解进行注解</span></h2><h4 id="jsazG2mtYyXYy47YDWnEEL" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="poLJiCZ6FbLn695zqn4dvd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">JDK</span> 的元 <span class="token maybe-class-name">Annotation</span> 用于修饰其他 <span class="token maybe-class-name">Annotation</span></pre></div></code-block><h4 id="arPUnn1vQn6PayznAiQegS" class="wolai-block"><span class="inline-wrap">四种元注解：</span></h4><ol class="wolai-block"><li id="kuwusLFRw4FAQH3uZdCHrn"><div class="marker"></div><span class="inline-wrap">Retention：指定注解的作用范围，三种 SOURCE,CLASS,RUNTIME</span></li><li id="ayVPGSGWRsMFzEhidEAH9d"><div class="marker"></div><span class="inline-wrap">Target：指定注解可以在哪些地方使用</span></li><li id="kNCjro9jZjZBkxHBvPvbtv"><div class="marker"></div><span class="inline-wrap">Documented：指定该注解是否会在 javadoc 体现</span></li><li id="kuWBaGAbEHtHLFfreBWrFt"><div class="marker"></div><span class="inline-wrap">lnherited：子类会继承父类注解</span></li></ol><h1 id="qtND7it3mquKwDVhpBjswJ" class="wolai-block"><span class="inline-wrap">10 异常</span></h1><h4 id="3tciNBA6nEiVTmfHUGPRAc" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="pUpWQMNchcdf9qQ66v7tuV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Java语言中，将程序执行中发生的不正常情况称为</span> “异常”</pre></div></code-block><h4 id="enPwfXVTAVKnbi67Vzh29N" class="wolai-block"><span class="inline-wrap">执行中异常事件分类：</span></h4><ol class="wolai-block"><li id="qkuuiu11U167VbvxeqM5aa"><div class="marker"></div><span class="inline-wrap">Error(错误)：Java 虚拟机无法解决的严重问题。如：JVM 系统内部错误、资源耗尽等严重情況。比如：
StackoverflowError[栈溢出]和 OOM(out ofmemory)，Error 是严重错误，程序会崩溃</span></li><li id="oFGGDteGCZ664JNSLs1ufx"><div class="marker"></div><span class="inline-wrap">Exception：其它因编程错误或偶然的外在因素导致的一般性问题，可以使用针对性的代码进行处理。，
例如空指针访问，
试图读取不存在的文件，网络连接中断等等，Exception 分为两大类：运行时异常口和编译时异常口。</span></li></ol><h2 id="7BJ1jJhrQ2w9mWuULiBMSx" class="wolai-block"><span class="inline-wrap">10.1 异常体系图 ⭐</span></h2><h4 id="v83vokyMoTyqLMw7dny33F" class="wolai-block"><span class="inline-wrap">异常体系图：</span></h4><h4 id="mUoG39SEszVvwuwMBU9xpj" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="mzcWC33jhweqsKbn7e1Mzh" class="wolai-block"><span class="inline-wrap">1. 异常分为两大类，运行时异常和编译时异常</span></h4><h4 id="kAanFicWVyJSNA9kB3WEz1" class="wolai-block"><span class="inline-wrap">2. 运行时异常，编译器不要求强制处置的异常。一般是指编程时的逻辑错误，是程序员应该避免其出现的</span></h4><code-block id="drt3XEYSgZ6zxy2BMS4NFy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>异常。java<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">RuntimeException类及它的子类都是运行时异常</span></span></pre></div></code-block><ol class="wolai-block"><li id="aZb7HLCAPToWdB3wnQPPxD"><div class="marker"></div><span class="inline-wrap">运行时异常，可以不作处理，因为这类异常很普遍，若全处理可能会对程序的可读性和运行效率产生影</span></li></ol><h4 id="1dC7FpszKV1VkitwndGcXi" class="wolai-block"><span class="inline-wrap">响</span></h4><h4 id="vmWpQyP1Dd5q5tigK3ibDN" class="wolai-block"><span class="inline-wrap">4. 编译时异常，是编译器要求必须处置的异常</span></h4><h2 id="t3dzhmCcJtrSrxVBFndRhs" class="wolai-block"><span class="inline-wrap">10.2 常⻅的异常</span></h2><h4 id="7kEneEhF1DCigGGkkQWXfR" class="wolai-block"><span class="inline-wrap">运行时异常：</span></h4><code-block id="x8xocVMZbJvd9WBbn3czsE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">NullPointerException：空指针异常</span>
<span class="token maybe-class-name">ArithmeticException：数学运算异常</span>
<span class="token maybe-class-name">ArrayIndexOutOfBoundsException：数组下标越界异常</span>
<span class="token maybe-class-name">ClassCastException：类型转换异常</span>
<span class="token maybe-class-name">NumberFormatException：数字格式不正确异常</span></pre></div></code-block><h4 id="pTDC14ZciqhRDcjaq3eSy5" class="wolai-block"><span class="inline-wrap">编译时异常：</span></h4><code-block id="bHSvHmt6kSmjPHnx5853rr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">SQLException：操作数据库时，查询表可能发生异常</span>
lOException：操作文供时，发生的异常
<span class="token maybe-class-name">FileNotFoundException：当操作一个不存在的文件时，发生异常</span>
<span class="token maybe-class-name">ClassNotFoundException：加载类，而该类不存在时异常</span>
<span class="token maybe-class-name">EOFException：操作文件，到文件末尾，发生异常</span>
illegalArguementException：参数异常</pre></div></code-block><h2 id="uP8iuHrZJDfVnR26HmtaSP" class="wolai-block"><span class="inline-wrap">10.3 异常处理 ⭐</span></h2><h4 id="uUE8MRPunhqCQSkV9KzDxD" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="7GgAmELx9muULqtXPvNVxK" class="wolai-block"><span class="inline-wrap">异常处理就是当异常发生时，对异常处理的方式</span></h4><h3 id="i7MRzJ63kAyiQ9KxnbX5dq" class="wolai-block"><span class="inline-wrap">10.3.1 try-catch-finally</span></h3><h4 id="6ECKWk3Xo28NPT1pD4XZCR" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="tbzALks1h8MW6ExtKUeySn" class="wolai-block"><span class="inline-wrap">程序员在代码中捕获发生的异常，自行处理</span></h4><h4 id="ssyuwX5DsLzkPFevaQvGcc" class="wolai-block"><span class="inline-wrap">流程图：</span></h4><h4 id="qDwt4qVFUBNjWgSjCBm9cZ" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="rsP26non9D3ivgpUKDJFF4"><div class="marker"></div><span class="inline-wrap">如果异常发生了，则异常发生后面的代码不会执行，直接进入到 catch 块</span></li><li id="r7kjna9K2qeHgusTdg4xG2"><div class="marker"></div><span class="inline-wrap">如果异常没有发生，则顺序执行 try 的代码块，不会进入到 catch 块</span></li><li id="tesT8paEnLQNunr74FAVHq"><div class="marker"></div><span class="inline-wrap">如果希望不管是否发生异常，都执行某段代码(比如关闭连接，释放资源等)，则使用如下代码-finally{}</span></li><li id="bMagC1hLQeJQsAd2VmF8Ad"><div class="marker"></div><span class="inline-wrap">可以有多个 catch 语句，捕获不同的异常(进行不同的业务处理)，要求父类异常在后，子类异常在前，比
如(Exception 在后，NullPointer Exception 在前)，如果发生异常，只会匹配一个 catch</span></li><li id="1LEy458kS2H1MTPqTfTcZe"><div class="marker"></div><span class="inline-wrap">try-finally 配合，相当于没有捕获异常，程序直接崩溃但执行 finally</span></li></ol><h3 id="4j5zAgkRzBDGTKKzEY8JAJ" class="wolai-block"><span class="inline-wrap">10.3.2 throws</span></h3><h4 id="e21MmLfZSVpwudZUwpDTnV" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="vTMAXhSVSttcZFgrqQEjsV" class="wolai-block"><span class="inline-wrap">将发生的异常抛出，交给调用者(方法)来处理，最顶级的处理者就是 JVM，默认抛出运行异常</span></h4><h4 id="rtvWYQ5hpJtjT4w7VgUMf7" class="wolai-block"><span class="inline-wrap">流程图：</span></h4><h4 id="aCM5Bi4UwTHNLSXDQcLNJd" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="9hsWyn49SNg5RrRj5rZbif"><div class="marker"></div><span class="inline-wrap">对于编译异常，程序中必须处理，比如 try-catch 或者 throws</span></li><li id="eGxFwRt9J2WNW5upk6USLF"><div class="marker"></div><span class="inline-wrap">对于运行时异常，程序中如果没有处理，默认就是 throws 的方式处理</span></li><li id="kBfjSxdP3FgS4dTxVmQfmm"><div class="marker"></div><span class="inline-wrap">子类重写父类的方法时，对抛出异常的规定：子类重与的方法，所抛出的异常类型要么和父类抛出的异
常一致，要么为父类拋出的异常的类型的子类型</span></li><li id="bvLz1KP7h2Nhd5PYnY1fxf"><div class="marker"></div><span class="inline-wrap">在 throws 过程中，如果有方法 try-catch，就相当于处理异常，就可以不必 throws</span></li><li id="iSV5b5nMzEhuJxDQyz5jqM"><div class="marker"></div><span class="inline-wrap">在方法声明中用 throws 语句可以声明抛出异常的列表，throws 后面的异常类型可以是方法中产生的异常
类型，也可以是它的父类</span></li></ol><h2 id="brBrSngQYMn9mkFmG95yEN" class="wolai-block"><span class="inline-wrap">10.4 自定义异常</span></h2><h4 id="nffsjPEidJShxqiscQfD5B" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="9zRzMcDknyJUfSp5brz5TX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>当程序中出现了某些 “错误〞，但该错误信息并没有在Throwable子类中描述处理，这时可以设计异常类，用
于描达该错误信息</pre></div></code-block><h4 id="8ARBwxufuRWJidGypFKL3h" class="wolai-block"><span class="inline-wrap">自定义异常步骤：</span></h4><ol class="wolai-block"><li id="duMH4P6LzwBVjdiURYYadq"><div class="marker"></div><span class="inline-wrap">定义类：自定义异常类名(程序员自己写)继承 Exception 或 Runtime Exception</span></li><li id="tmC7FpjWQndtCKPmZDJLoQ"><div class="marker"></div><span class="inline-wrap">如果继承 Exception，属于编译异常</span></li><li id="mjkDtUmwvEKx9U4uCpaqng"><div class="marker"></div><span class="inline-wrap">如果继承 RuntimeException，属子运行异常(一般来说，继承 RuntimeException)</span></li></ol><h2 id="fxhJXcszdwB4hbpqTT9UQj" class="wolai-block"><span class="inline-wrap">10.5 throw 和 throws</span></h2><h4 id="dGNa1X7naQrPuiA6KWJ8ua" class="wolai-block"><span class="inline-wrap">对比：</span></h4><h1 id="cCymLBmGAJ8deSn5afYzmU" class="wolai-block"><span class="inline-wrap">11 包装类</span></h1><h2 id="vXjMDv4eSDtZKeC9TZndur" class="wolai-block"><span class="inline-wrap">11.0 包装类(Integer 例)</span></h2><h4 id="3pbiWTxiMEEdAZGX8rUQqr" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="uf2fT32vVcyjFRuQNNEjsW" class="wolai-block"><span class="inline-wrap">八种基本数据类型相应的引用类型——包装类</span></h4><h4 id="3k7YXuErRw1wJn8yrBhFt1" class="wolai-block"><span class="inline-wrap">装箱和拆箱：</span></h4><code-block id="d4ZxKFkcbzGQ6D875o3PHg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Integer01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//演示int &lt;--> Integer 的装箱和拆箱</span>
<span class="token comment">//jdk5前是手动装箱和拆箱</span>
<span class="token comment">//手动装箱 int->Integer</span>
int n1 <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">;</span>
<span class="token maybe-class-name">Integer</span> integer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Integer</span> integer1 <span class="token operator">=</span> <span class="token maybe-class-name">Integer</span><span class="token punctuation">.</span><span class="token method function property-access">valueOf</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fNEZs1v9pJMV29BPVyUBgo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//手动拆箱</span>
<span class="token comment">//Integer -> int</span>
int i <span class="token operator">=</span> integer<span class="token punctuation">.</span><span class="token method function property-access">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="e8XsEMCghNth7d84cQGReH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//jdk5后，就可以自动装箱和自动拆箱</span>
int n2 <span class="token operator">=</span> <span class="token number">200</span> <span class="token punctuation">;</span>
<span class="token comment">//自动装箱 int->Integer</span>
<span class="token maybe-class-name">Integer</span> integer2 <span class="token operator">=</span> n2<span class="token punctuation">;</span> <span class="token comment">//底层使用的是 Integer.valueOf(n2)</span>
<span class="token comment">//自动拆箱 Integer->int</span>
int n3 <span class="token operator">=</span> integer2<span class="token punctuation">;</span> <span class="token comment">//底层仍然使用的是 intValue()方法</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="tdzdJZ6Fb7rAoq8sYLzmtw" class="wolai-block"><span class="inline-wrap">包装类方法：</span></h4><h4 id="oU7mQxuUFFNXk6VyYTMWbv" class="wolai-block"><span class="inline-wrap">Integer 创建机制：</span></h4><code-block id="51CPbjrnSpoSTEbVDv8P79" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WrapperVSString</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//包装类(Integer)->String</span>
<span class="token maybe-class-name">Integer</span> i <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">;</span><span class="token comment">//自动装箱</span>
<span class="token comment">//方式 1</span>
<span class="token known-class-name class-name">String</span> str1 <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token comment">//方式 2</span>
<span class="token known-class-name class-name">String</span> str2 <span class="token operator">=</span> i<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//方式 3</span>
<span class="token known-class-name class-name">String</span> str3 <span class="token operator">=</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token method function property-access">valueOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="hAixp8jSgHfUaWoHSpXvpu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//String -> 包装类(Integer)</span>
<span class="token known-class-name class-name">String</span> str4 <span class="token operator">=</span> <span class="token string">"12345"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token maybe-class-name">Integer</span><span class="token punctuation">.</span><span class="token method function property-access">parseInt</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用到自动装箱</span>
<span class="token maybe-class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//构造器</span></pre></div></code-block><code-block id="qZ3gwW2Rf1LFwk4yPwpKRt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"ok~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="mZHEBSZi5cJtXs5hbnKxL7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WrapperExercise03</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//示例一</span>
<span class="token maybe-class-name">Integer</span> i1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span> <span class="token number">127</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Integer</span> i2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span> <span class="token number">127</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i1 <span class="token operator">==</span> i2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F</span>
<span class="token comment">//示例二</span>
<span class="token maybe-class-name">Integer</span> i3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span> <span class="token number">128</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Integer</span> i4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span> <span class="token number">128</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i3 <span class="token operator">==</span> i4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F</span></pre></div></code-block><code-block id="2QwmYjXSsBvm8Np3avBWN8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//示例三</span>
<span class="token maybe-class-name">Integer</span> i5 <span class="token operator">=</span> <span class="token number">127</span> <span class="token punctuation">;</span><span class="token comment">//底层Integer.valueOf(127)</span>
<span class="token maybe-class-name">Integer</span> i6 <span class="token operator">=</span> <span class="token number">127</span> <span class="token punctuation">;</span><span class="token comment">//-128~127</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i5 <span class="token operator">==</span> i6<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//T</span>
<span class="token comment">//示例四</span>
<span class="token maybe-class-name">Integer</span> i7 <span class="token operator">=</span> <span class="token number">128</span> <span class="token punctuation">;</span>
<span class="token maybe-class-name">Integer</span> i8 <span class="token operator">=</span> <span class="token number">128</span> <span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i7 <span class="token operator">==</span> i8<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F</span>
<span class="token comment">//示例五</span>
<span class="token maybe-class-name">Integer</span> i9 <span class="token operator">=</span> <span class="token number">127</span> <span class="token punctuation">;</span> <span class="token comment">//Integer.valueOf(127)</span>
<span class="token maybe-class-name">Integer</span> i10 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span> <span class="token number">127</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i9 <span class="token operator">==</span> i10<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F</span></pre></div></code-block><h2 id="9iyA7MLvVQsEHi2SXqzccc" class="wolai-block"><span class="inline-wrap">11.1 String ⭐</span></h2><h4 id="3hPyPHp5GPuTmjTqcezMJf" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="8P8Nxi5dQo2ocaeEQzE4Le" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> 对象用于保存字符串，也就是一组字符序列
字符串常量对象是用双引号括起的字符序列
<span class="token function">字符串的字符使用Unicode宇符编码，一个字符</span><span class="token punctuation">(</span>不区分字母还是汉字<span class="token punctuation">)</span>占两个字节</pre></div></code-block><h4 id="69m1iHZWPckoNbrCPUyy5z" class="wolai-block"><span class="inline-wrap">创建 String 对象方式：</span></h4><ol class="wolai-block"><li id="pdXVLqDfeobA9JdWN8aUy1"><div class="marker"></div><span class="inline-wrap">直接赋值 String s = &quot;hsp&quot;;</span></li><li id="orDminorAbpmxXtiNF3ENm"><div class="marker"></div><span class="inline-wrap">调用构造器 String s2 = new String(&quot;hsp&quot;);</span></li></ol><h4 id="gnwEgD4tEXQKBXfsPMHtaa" class="wolai-block"><span class="inline-wrap">两种方式对比：</span></h4><code-block id="bbnPreCCyn4mqytEppDYR3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>方式一：先从常量池查看是否有”hsp”数据空间，如果有，直接指向；
如果沒有则重新创建，然后植自。s最终指向的是常量池的空间地址
方式二：先在堆中创建空间，里面维护了value属性，指向常量池的hsp空间。如果常量池没有"hsp’，重
新创建，如果有，直接通过value指向，最终指向的是堆中的空间地址</pre></div></code-block><h4 id="1nuzYgvq8HcoPa3vYtW5xS" class="wolai-block"><span class="inline-wrap">//示例六</span></h4><code-block id="9jg5BdxFouon4gNiLbrRFM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Integer</span> i11<span class="token operator">=</span> <span class="token number">127</span> <span class="token punctuation">;</span>
int i12<span class="token operator">=</span> <span class="token number">127</span> <span class="token punctuation">;</span>
<span class="token comment">//只有有基本数据类型，判断的是</span>
<span class="token comment">//值是否相同</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i11<span class="token operator">==</span>i12<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//T</span>
<span class="token comment">//示例七</span>
<span class="token maybe-class-name">Integer</span> i13<span class="token operator">=</span> <span class="token number">128</span> <span class="token punctuation">;</span>
int i14<span class="token operator">=</span> <span class="token number">128</span> <span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>i13<span class="token operator">==</span>i14<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//T</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="iWF7r8RTk1Kzaxq4Meyhmp" class="wolai-block"><span class="inline-wrap">常用构造方法：</span></h4><code-block id="unfKFcYyvxGrTpKVtDXZaB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> original<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>char<span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>char<span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span>int startIndex<span class="token punctuation">,</span>int count<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="jkQKRNCMkMTpotGqdits51" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="smZfuiQ3YST2wUFpsrMgwx"><div class="marker"></div><span class="inline-wrap">String 是 final 类，不能被继承</span></li><li id="ai4bu7y2C1uJKbufcXd8Vu"><div class="marker"></div><span class="inline-wrap">string 有属性 private final char valve []; 用于存放字符串内容</span></li><li id="bm6iMn3mQFUhBcBis3Zwxo"><div class="marker"></div><span class="inline-wrap"><b>value 是一个 final 类型，不可以修改(值可以修改，地址不可修改)</b></span></li><li id="jPK41JfoZQSJg3QrUNHreC"><div class="marker"></div><span class="inline-wrap">intern 方法：返回常量池的地址对象</span></li></ol><h4 id="jbQH3foK1gwk1sz7hg1U3g" class="wolai-block"><span class="inline-wrap">特性：</span></h4><code-block id="9iKRWD6Hpuf28JN9yKmxx6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringExercise05</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">"hspedu"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Person</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p2<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">"hspedu"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="u9mg7LNFywv1HsVkrPeSLA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//比较内容: True</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">==</span> p2<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//T</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">==</span> <span class="token string">"hspedu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//T</span></pre></div></code-block><div id="bYwB6QVoN7QdAKXQaFYVrL" class="wolai-block wolai-text"><div><span class="inline-wrap">String s1 = new String(&quot;bcde&quot;);
String s2 = new String(&quot;bcde&quot;);
System.out.println(s1==s2); //False
}
}
class Person {
public String name;
}</span></div></div><div id="26Ym14nMj6GjisYRfngDNA" class="wolai-block wolai-text"><div><span class="inline-wrap">String s1 = &quot;hello&quot;;
s1 = &quot;haha&quot;;
//创建了两个对象，s1 指向“hello”，
//再在常量池中创建“haha”，s1 指向&quot;haha“</span></div></div><div id="qqiYTf4WmPRaAAn8eM2YU3" class="wolai-block wolai-text"><div><span class="inline-wrap">String a = &quot;hello&quot; + &quot;abc&quot;;
//等价于 String a = &quot;helloabc&quot;
//判断创建的常量池对象，是否有引用指向</span></div></div><div id="fCG5RCdLcHj6nWXDFvtQfu" class="wolai-block wolai-text"><div><span class="inline-wrap">String a = &quot;hello&quot;; //创建 a 对象
String b = &quot;abc&quot;;//创建 b 对象
//1. 先 创建一个 StringBuilder sb = StringBuilder()
//2. 执行 sb.append(&quot;hello&quot;);
//3. sb.append(&quot;abc&quot;);
//4. String c= sb.toString()
//最后其实是 c 指向堆中的对象(String) value[] -&gt; 池中 &quot;helloabc&quot;
String c = a + b;
String d = &quot;helloabc&quot;;
System.out.println(c == d);//真还是假? 是 false
String e = &quot;hello&quot; + &quot;abc&quot;;//直接看池， e 指向常量池
System.out.println(d == e);//真还是假? 是 true</span></div></div><div id="pDx5i4DveSrouo9FV8AzTW" class="wolai-block wolai-text"><div><span class="inline-wrap">/*底层：String Builder sb = new String Builder();
sb.append(a);sb.append(b);
sb 是在堆中，井且 append 是在原来字符串的基础上追加的、</span></div></div><div id="ug9bFnS1Bjd7K9dEaG8mfT" class="wolai-block wolai-text"><div><span class="inline-wrap">重要规则：String c1 =“ab”+&quot;cd”;常量在池中相加
String c1 = a + b;变量在堆中相加
*/</span></div></div><div id="n68B82CZpuGHNMzdVxGE9r" class="wolai-block wolai-text"><div><span class="inline-wrap">class Test1 {
String str = new String(&quot;hsp&quot;);
final char[] ch = {&#39;j&#39;, &#39;a&#39;, &#39;v&#39;, &#39;a&#39;};</span></div></div><div id="8rKws4xUP3zcDM6rka8tWY" class="wolai-block wolai-text"><div><span class="inline-wrap">public void change(String str, char ch[]) {
str = &quot;java&quot;;
ch[ 0 ] = &#39;h&#39;;
}</span></div></div><div id="7mVyzS94B8Sqva13MLsce6" class="wolai-block wolai-text"><div><span class="inline-wrap">public static void main(String[] args) {
Test1 ex = new Test1();
ex.change(ex.str, ex.ch);
System.out.print(ex.str + &quot; and &quot;);
System.out.println(ex.ch);
}
}</span></div></div><h4 id="pihef2Aa8Yo6NjrxuW4f2k" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="kUVg7UEENatd1u829JknsP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>equals：区分大小写，判断内容是否相等
equalslgnoreCase：忽略大小写的判断内容是否相等
length：获取字符的个数，字符串的⻓度
indexOf：获取字符在字符串中第 <span class="token number">1</span> 次出现的索引<span class="token punctuation">,</span>索引从 <span class="token number">0</span> 开始，如果找不到<span class="token punctuation">,</span>返回<span class="token operator">-</span><span class="token number">1</span>
lastlndexOf：获取宇符在字符串中最后 <span class="token number">1</span> 次出现的索引<span class="token punctuation">,</span>索引从 <span class="token number">0</span> 开始，如找不到<span class="token punctuation">,</span>返回<span class="token operator">-</span><span class="token number">1</span>
substring： 截取指定范围的子串
trim：去前后空格
charAt：获取某索引处的字符，注意不能使用Str<span class="token punctuation">[</span>index<span class="token punctuation">]</span>这种方式
toUpperCase：大写字母
toLowerCase：小写字母
concat：拼接
replace：替换字符串中的字符
split：分割字符串
compareTo：比较两个字符串的大小
toCharArray：转换成字符数组
format：格式字符串</pre></div></code-block><code-block id="8rFsf7ibzxnTj4BK8FgvJf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. equals 前面已经讲过了. 比较内容是否相同，区分大小写</span>
<span class="token known-class-name class-name">String</span> str1 <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> str2 <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>str1<span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span></pre></div></code-block><code-block id="vLEFPFi5KCvvAeyXkA1jme" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// 2.equalsIgnoreCase 忽略大小写的判断内容是否相等</span></pre></div></code-block><div id="qvEc1NpNECWWZ4MSZX3WvD" class="wolai-block wolai-text"><div><span class="inline-wrap">String username = &quot;johN&quot;;
if (&quot;john&quot;.equalsIgnoreCase(username)) {
System.out.println(&quot;Success!&quot;);
} else {
System.out.println(&quot;Failure!&quot;);
}</span></div></div><div id="j8WHhEbAkrNefUNTdEsgcE" class="wolai-block wolai-text"><div><span class="inline-wrap">// 3.length 获取字符的个数，字符串的⻓度
System.out.println(&quot;韩顺平&quot;.length());</span></div></div><div id="9FGPstBXpPxmmEKXKXpYLm" class="wolai-block wolai-text"><div><span class="inline-wrap">// 4.indexOf 获取字符在字符串对象中第一次出现的索引，索引从 0 开始，如果找不到，返
回-1
String s1 = &quot;wer@terwe@g&quot;;
int index = s1.indexOf(&#39;@&#39;);
System.out.println(index);// 3
System.out.println(&quot;weIndex=&quot; + s1.indexOf(&quot;we&quot;));//0</span></div></div><div id="h4de8HE3WEYxn2ew4ojCAZ" class="wolai-block wolai-text"><div><span class="inline-wrap">// 5.lastIndexOf 获取字符在字符串中最后一次出现的索引，索引从 0 开始，如果找不到，返
回-1
s1 = &quot;wer@terwe@g@&quot;;
index = s1.lastIndexOf(&#39;@&#39;);
System.out.println(index);//11
System.out.println(&quot;ter 的位置=&quot; + s1.lastIndexOf(&quot;ter&quot;));//4</span></div></div><div id="syWzmSjHGeAfXAdCLyYvU5" class="wolai-block wolai-text"><div><span class="inline-wrap">// 6.substring 截取指定范围的子串
String name = &quot;hello,张三&quot;;
//下面 name.substring(6) 从索引 6 开始截取后面所有的内容
System.out.println(name.substring( 6 ));//截取后面的字符
//name.substring(0,5)表示从索引 0 开始截取，截取到索引 5-1=4 位置
System.out.println(name.substring( 2 , 5 ));//llo</span></div></div><div id="f8P5LDnbyV5tcp1zCdCgJs" class="wolai-block wolai-text"><div><span class="inline-wrap">// 1.toUpperCase 转换成大写
String s = &quot;heLLo&quot;;
System.out.println(s.toUpperCase());//HELLO</span></div></div><div id="7eiwC9WxfwvzAXNMQKQ5C3" class="wolai-block wolai-text"><div><span class="inline-wrap">// 2.toLowerCase
System.out.println(s.toLowerCase());//hello</span></div></div><div id="2DJ7Gj8yUHhba8bzHrqFWV" class="wolai-block wolai-text"><div><span class="inline-wrap">// 3.concat 拼接字符串</span></div></div><div id="5uhHfyh3QDWjjQKZzQpY5J" class="wolai-block wolai-text"><div><span class="inline-wrap">String s1 = &quot;宝玉&quot;;
s1 = s1.concat(&quot;林黛玉&quot;).concat(&quot;薛宝钗&quot;).concat(&quot;together&quot;);
System.out.println(s1);//宝玉林黛玉薛宝钗 together</span></div></div><div id="33GweZiD35MQw6Q7GG7iQx" class="wolai-block wolai-text"><div><span class="inline-wrap">// 4.replace 替换字符串中的字符
s1 = &quot;宝玉 and 林黛玉 林黛玉 林黛玉&quot;;
//在 s1 中，将 所有的 林黛玉 替换成薛宝钗
// : s1.replace() 方法执行后，返回的结果才是替换过的.
// 注意对 s1 没有任何影响</span></div></div><div id="tRndLqbW64zuwvycrCafhp" class="wolai-block wolai-text"><div><span class="inline-wrap">String s11 = s1.replace(&quot;宝玉&quot;, &quot;jack&quot;);
System.out.println(s1);//宝玉 and 林黛玉 林黛玉 林黛玉
System.out.println(s11);//jack and 林黛玉 林黛玉 林黛玉</span></div></div><div id="4nMcD88JaGN6EDtVieNcyt" class="wolai-block wolai-text"><div><span class="inline-wrap">// 5.split 分割字符串, 对于某些分割字符，我们需要 转义比如 | \等
String poem = &quot;锄禾日当午,汗滴禾下土,谁知盘中餐,粒粒皆辛苦&quot;;</span></div></div><div id="pxQmNMcRU7wmhtDm9jnMnm" class="wolai-block wolai-text"><div><span class="inline-wrap">//：
// 1. 以 , 为标准对 poem 进行分割 , 返回一个数组
// 2. 在对字符串进行分割时，如果有特殊字符，需要加入 转义符 </span><span class="inline-wrap">
</span><span class="inline-wrap">String[] split = poem.split(&quot;,&quot;);
poem = &quot;E:\aaa\bbb&quot;;
split = poem.split(&quot;\\&quot;);
System.out.println(&quot;==分割后内容===&quot;);
for (int i = 0 ; i &lt; split.length; i++) {
System.out.println(split[i]);
}</span></div></div><div id="25yeHzsyAChfnoxehzvdvJ" class="wolai-block wolai-text"><div><span class="inline-wrap">// 6.toCharArray 转换成字符数组
s = &quot;happy&quot;;
char[] chs = s.toCharArray();
for (int i = 0 ; i &lt; chs.length; i++) {
System.out.println(chs[i]);
}</span></div></div><div id="vDfxUvWQw2emQmmy5jMmjB" class="wolai-block wolai-text"><div><span class="inline-wrap">// 7.compareTo 比较两个字符串的大小，如果前者大，
// 则返回正数，后者大，则返回负数，如果相等，返回 0
//
// (1) 如果⻓度相同，并且每个字符也相同，就返回 0
// (2) 如果⻓度相同或者不相同，但是在进行比较时，可以区分大小
// 就返回 if (c1 != c2) {
// return c1 - c2;
// }
// (3) 如果前面的部分都相同，就返回 str1.len - str2.len
String a = &quot;jcck&quot;;// len = 3
String b = &quot;jack&quot;;// len = 4
System.out.println(a.compareTo(b)); // 返回值是 &#39;c&#39; - &#39;a&#39; = 2 的值</span></div></div><div id="u4b4S8NABYfYGAbfjJ6AWz" class="wolai-block wolai-text"><div><span class="inline-wrap">// 8.format 格式字符串
/* 占位符有:</span></div></div><ul class="wolai-block"><li id="91vui81yPdZKmv66Pqc3ou"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">%s 字符串 %c 字符 %d 整型 %.2f 浮点型</span></li><li id="4racuyiCfWtMjRxNj2cou9"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">*/
String name = &quot;john&quot;;
int age = 10 ;
double score = 56.857;
char gender = &#39;男&#39;;
//将所有的信息都拼接在一个字符串.
String info =</span></li></ul><h2 id="9EFVVKrZ2jfyZqERAu82AS" class="wolai-block"><span class="inline-wrap">11.2 StringBuffer ⭐</span></h2><h4 id="drpSYDdSLiCoAPHfsRfEVt" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="9vVt6y4v8XF9v8qXgpeEZT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>java<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">StringBuffer代表可变的字符序列，可以对字符串内容进行增删。</span></span>
很多方法与<span class="token known-class-name class-name">String</span>相同，但StringBuffer是可变⻓度的。
<span class="token known-class-name class-name">String</span> <span class="token maybe-class-name">Buffer是一个容器。</span></pre></div></code-block><h4 id="3eW5JyYi2vHuyBqPGm58gu" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="7hxeTXMUHeoEqzNR3vsuc2"><div class="marker"></div><span class="inline-wrap">StringBuffer 的直接父类是 AbstractstringBuilder</span></li><li id="oFoTDeh5rZhdZEcumMdVL2"><div class="marker"></div><span class="inline-wrap">StringBuffer 实现了 Serializable，即 StringBuffer 的对象可以串行化</span></li><li id="w28wbvaHuAsMp3L7Pq6Cuc"><div class="marker"></div><span class="inline-wrap">在父类中 AbstractstringBuilder 有属性 char[] valve,不是 final，该 valve 数组存放 宁符串内容，引出存
放在堆中的</span></li><li id="tDa7S9BvCvoZb68DqZFWWT"><div class="marker"></div><span class="inline-wrap">StringBuffer 是一个 final 类，不能被继承</span></li><li id="pw4oC5u6uvofwsHfQBoGEm"><div class="marker"></div><span class="inline-wrap">StringBuffer 字符内容存在 char[] value，所以在变化〔增加/删除)不用每次都更换地址(即不是每次创建
新对象)</span></li></ol><h4 id="dkLeaiDS3uzG3NgNqPGqns" class="wolai-block"><span class="inline-wrap">String 和 StringBuffer 对比：</span></h4><ol class="wolai-block"><li id="hHjMbQk3r7EjC1jrpnY88p"><div class="marker"></div><span class="inline-wrap">String 保存的是宇符串常量，里面的值不能更改，每次 String 类的更新实际上就是更改地址</span></li><li id="2rrWXoUe9C3hh1jM4UiS3i"><div class="marker"></div><span class="inline-wrap">StringBuffer 保存的是字符串变量，里面的值可以更改，不用更新地址，效率高</span></li></ol><h4 id="iMCWPFFroku59eLa9iZLDz" class="wolai-block"><span class="inline-wrap">构造器：</span></h4><code-block id="nM8xCrsz96v3z6kndFuKtt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token string">"我的姓名是"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"年龄是"</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">",成绩是"</span> <span class="token operator">+</span> score <span class="token operator">+</span>
<span class="token string">"性别是"</span> <span class="token operator">+</span> gender <span class="token operator">+</span> <span class="token string">"。希望大家喜欢我！"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="kCAxLUDpYVcyWPRfehAcxk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="6gtaw91V6h3yahBXe2oNBt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. %s , %d , %.2f %c 称为占位符,这些占位符由后面变量来替换</span>
<span class="token comment">//2. %s 由 字符串来替换</span>
<span class="token comment">//3. %d 由 整数来替换</span>
<span class="token comment">//4. %.2f 表示使用小数来替换，替换后，只会保留小数点两位, 并且进行四舍五入的处理</span>
<span class="token comment">//5. %c 使用char 类型来替换</span>
<span class="token known-class-name class-name">String</span> formatStr <span class="token operator">=</span> "我的姓名是<span class="token operator">%</span>s 年龄是<span class="token operator">%</span>d，成绩是<span class="token operator">%</span><span class="token number">.2</span>f 性别是<span class="token operator">%</span>c<span class="token punctuation">.</span><span class="token property-access">希望大家喜欢</span>
我！"<span class="token punctuation">;</span></pre></div></code-block><code-block id="pv1bL9J5Go2gTE5CdSWR4U" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> info2 <span class="token operator">=</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span>formatStr<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> score<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="ihjjPRFg1YaCfVvJuNmScN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"info2="</span> <span class="token operator">+</span> info2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="k9TKP3bidaK8ysF4fLMQEh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 创建一个 大小为 16 的 char[] ,用于存放字符内容</span>
<span class="token maybe-class-name">StringBuffer</span> stringBuffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="eXjxFHuE9Tf5bQWm8f5TF6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2 通过构造器指定 char[] 大小</span>
<span class="token maybe-class-name">StringBuffer</span> stringBuffer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="9rFnVN4Sh6nhdvGmeNHgcS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 通过 给一个String 创建 StringBuffer, char[] 大小就是 str.length() + 16</span>
<span class="token maybe-class-name">StringBuffer</span> hello <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="hyssZzzSMbzmntDu1oWiDZ" class="wolai-block"><span class="inline-wrap">String 和 StringBuffer 转换：</span></h4><h4 id="55B86YXaEi7i9DDmiK5q2W" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="k3Uazc8dNd6jUwEwbYFdP5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>增：append
删：<span class="token keyword">delete</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span>
<span class="token function">改：replace</span> <span class="token punctuation">(</span>start<span class="token punctuation">,</span>end<span class="token punctuation">,</span>string<span class="token punctuation">)</span>
查：indexOf
插：insert
获取⻓度：length</pre></div></code-block><code-block id="b13gzvdhMgCHiXZ7uD1GvS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// String——>StringBuffer</span>
<span class="token known-class-name class-name">String</span> str <span class="token operator">=</span> <span class="token string">"hello tom"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="d3CG1P3ZYeb271Nf2xr9EQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方式 1 使用构造器</span>
<span class="token comment">//注意： 返回的才是StringBuffer对象，对str 本身没有影响</span>
<span class="token maybe-class-name">StringBuffer</span> stringBuffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//方式 2 使用的是append方法</span>
<span class="token maybe-class-name">StringBuffer</span> stringBuffer1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stringBuffer1 <span class="token operator">=</span> stringBuffer1<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="btM7LBFvB8FqroD6GtsTho" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// StringBuffer ->String</span>
<span class="token maybe-class-name">StringBuffer</span> stringBuffer3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"韩顺平教育"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//方式 1 使用StringBuffer提供的 toString方法</span>
<span class="token known-class-name class-name">String</span> s <span class="token operator">=</span> stringBuffer3<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//方式2: 使用构造器来搞定</span>
<span class="token known-class-name class-name">String</span> s1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>stringBuffer3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fiqXP7riSjqm7tGvmCxHR6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">StringBuffer</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="tSTWJuMnboCFmmkqNHdt81" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//增</span>
s<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// "hello,"</span>
s<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"张三丰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello,张三丰"</span>
s<span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token string">"赵敏"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">append</span><span class="token punctuation">(</span><span class="token number">10.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello,张三丰赵敏</span>
<span class="token number">100</span>true10<span class="token punctuation">.</span><span class="token number">5</span>"
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello,张三丰赵敏100true10.5"</span></pre></div></code-block><code-block id="mMYaumspPQGK4GkVYnYVSj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//删</span>
<span class="token comment">/*
* 删除索引为>=start &amp;&amp; &lt;end 处的字符
* : 删除 11~14的字符 [11, 14)
*/</span>
s<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span> <span class="token number">11</span> <span class="token punctuation">,</span> <span class="token number">14</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello,张三丰赵敏true10.5"</span></pre></div></code-block><code-block id="65ZaikAR22USRAZFW9hwAF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//改</span>
<span class="token comment">//，使用 周芷若 替换 索引9-11的字符 [9,11)</span></pre></div></code-block><h2 id="vnJcU5hy5fxJtR6b2Y629x" class="wolai-block"><span class="inline-wrap">11.3 StringBulider ⭐</span></h2><h4 id="43bZ4bi4mf5jFJDLYuQEFZ" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="m7M4fEgmtNp1rmPMNDz59y" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>一个可变的字符序列。此类提供一个与 <span class="token maybe-class-name">StringBuffer</span> 兼容的 <span class="token constant">API</span>，但不保证同步，
该类被设计用作 <span class="token known-class-name class-name">String</span> <span class="token maybe-class-name">Buffer</span> 的个简易替换，用在字符串缓冲区被单个线程使用的时候
如果可能，建议优先采用该类，因为在大多数实现中，它比StringBuffer 快
在 <span class="token maybe-class-name">StringBuilder</span> 上的主要操作是 append 和 insert 方法，可重载这些方法，以接受任意类型的数据</pre></div></code-block><h4 id="3rCNXjeokbC6D43VeDvVGF" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="8NA98UpC7c9kh2dAW8Djn5"><div class="marker"></div><span class="inline-wrap">StringBuilder 继承 AbstractstringBuilder 类</span></li><li id="seeM9Ftw6ibTZMMYR8FUZP"><div class="marker"></div><span class="inline-wrap">实现了 Serializable，说明 StringBuilder 对象是可以串行化(对象可以网络传输，可以保存到文件)</span></li><li id="o1TikfaV3dz2ACQhA2ToFM"><div class="marker"></div><span class="inline-wrap">StringBuilder 是 final 类，不能被继承</span></li><li id="ji1hRWhbo1gbLX4aCstZch"><div class="marker"></div><span class="inline-wrap">StringBuitder 对象字符序列仍然足存放在其父类 AbstractstringBuilder 的 char [I valve;因此，字符序列
是堆中</span></li><li id="mbdNaiFr7CnQuHtgz1hoMK"><div class="marker"></div><span class="inline-wrap">StringBoilder 的方法，没有做互斥的处理，即没有 synchronized 关键字，网此在单线程的情況下使用</span></li></ol><h4 id="dm2HCJpnDPPozpqRRrDCdT" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="kufRaGF6mixmN9EPP7HCJo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>和StringBuffer相同</pre></div></code-block><h4 id="qeHh5oqkVMy5HdNatFX9SK" class="wolai-block"><span class="inline-wrap">三类对比：</span></h4><ol class="wolai-block"><li id="bvaT1y7KGmhpcCc7NaqAv9"><div class="marker"></div><span class="inline-wrap">String：不可变字符序列，效率低,但是复用率高</span></li><li id="jB2NpcXjrmH3DgaUgDZ2Dx"><div class="marker"></div><span class="inline-wrap">StringBuffer：可变字符序列，效率较高(增删)，线程安全</span></li><li id="udBfco5wkp8CR4isog7CzQ"><div class="marker"></div><span class="inline-wrap">String Builder：可变字符序列、效率最高、线程不安全</span></li><li id="qQR25kz77HjbwBJrxKfTYd"><div class="marker"></div><span class="inline-wrap">StringBuilder 和 StringBuffer 非常类似，均代表可变的字符序列，且方法相同</span></li><li id="83CbPag2K6Lejdp3uFT46d"><div class="marker"></div><span class="inline-wrap">String 使用注意说明：string s=&quot;a”;//创建了一个字符串 s+=&quot;b&quot;;1/实际上原来的&quot;a&quot;字符串对象已经丢奔
了，现在又产生了一个字符串 S+&quot;b”(也就是”ab&quot;)。如果多次执行这些改变串内容的操作，会导致大量副
本字符串对象存留在内存中，降低效率。如果这样的操作放到循环中，会极大影响程序的性能</span></li></ol><code-block id="1KCKur8QdTnrCjT4ksyvJi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>s<span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span> <span class="token number">9</span> <span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation">,</span> <span class="token string">"周芷若"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello,张三丰周芷若true10.5"</span>
<span class="token comment">//查找指定的子串在字符串第一次出现的索引，如果找不到返回-1</span>
int indexOf <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span><span class="token string">"张三丰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>indexOf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6</span></pre></div></code-block><code-block id="nFoFYeRqjaatEGHcKJ5A7B" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//插</span>
<span class="token comment">//，在索引为 9 的位置插入 "赵敏",原来索引为 9 的内容自动后移</span>
s<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span> <span class="token number">9</span> <span class="token punctuation">,</span> <span class="token string">"赵敏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hello,张三丰赵敏周芷若true10.5"</span></pre></div></code-block><code-block id="vQn4xqiyUQBE8d4z8iLrtk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//⻓度</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//22</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="54qAak76LuZWv6RJaDWfBa" class="wolai-block"><span class="inline-wrap">三类选择：</span></h4><ol class="wolai-block"><li id="fiCvfh2VqtSHttkAF8YMap"><div class="marker"></div><span class="inline-wrap">如果宇符串存在大量的修改操作，一般使用 StringBuffer 或 StringBuilder</span></li><li id="2Zfg1YYYxDmqVvRzrQE8w4"><div class="marker"></div><span class="inline-wrap">如果字符串存在大量的修改操作，并在单线程的情況，使用 StringBuilder</span></li><li id="xnDoau63UteV39bRoFqcHN"><div class="marker"></div><span class="inline-wrap">如果字符串存在大量的修改操作，并在多线程的情况，使用 String Buffer</span></li><li id="ncmxxKP1iqCeWLBQ6UoyLY"><div class="marker"></div><span class="inline-wrap">如果我们字符串很少修改，被多个对象引用，使用 String</span></li></ol><h2 id="1P31mV1H74Qg4AaHhtBeo9" class="wolai-block"><span class="inline-wrap">11.4 Math</span></h2><h4 id="uspiHY6mGzfvPpWAy2tNVL" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="kmmYfB9CXDirhL5oaMbocW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">Math</span> 类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三⻆函数，均为静态方法</pre></div></code-block><h4 id="qcQPVaBMtMuiVmgeFm7JLE" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="d89qPbbtcNDdSEY4dNXP1S" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>abs：绝对值
pow：求幂
ceil：向上取整
floor：向下取整
round：四舍五入
sqrt：求开方
random：求随机数
max：求两个数的最大值
min：求两个数的最小值</pre></div></code-block><h2 id="bKNKtKv67WfNYNnF65f46t" class="wolai-block"><span class="inline-wrap">11.5 Date、Calenda、LocalDate</span></h2><h3 id="bPsUFgkCD9PiELfaZT1saZ" class="wolai-block"><span class="inline-wrap">11.5.1 Date</span></h3><h4 id="cMnnJZspHUE8uhowC8fRkH" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="hJMTrDHGnj9Eqy6BKq5iHJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">Date</span>：精确到毫秒，代表特定时间
<span class="token maybe-class-name">Simple</span> <span class="token known-class-name class-name">Date</span> <span class="token maybe-class-name">Format：格式和解析日期的类SimpleDateFormat</span> 格式化和解析日期的具体类
它允许进行格式化（日期一＞文本）解析（文本<span class="token operator">-</span>＞日期）和规范化</pre></div></code-block><h3 id="mbRbXEmy1fzzB1XuxMMkRF" class="wolai-block"><span class="inline-wrap">11.5.2 Calenda</span></h3><h4 id="2g3wcqLTh9V41A94RcA8Yx" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="f1DpCDpB2pzCGjTphkX61q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>是一个抽象类，并且构造器是<span class="token keyword">private</span>，可以通过 <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>来获得实例，提供大量的方法和字段</pre></div></code-block><h4 id="vcJoqHYmDRrUFQrXHxpDnq" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="v6kQCiz3orBhuK76p8ARmn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：获取实例
get<span class="token punctuation">.</span><span class="token constant">XXXX</span>：获取字段</pre></div></code-block><h3 id="padXFwJEvpp7qycXt8jUee" class="wolai-block"><span class="inline-wrap">11.5.3 LocalDate</span></h3><h4 id="bW5X3pvg1ppa3jNpZdAM66" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="7Rnf8hkHCNbuWnancVWDAR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">LocalDateTime</span> ldt <span class="token operator">=</span> <span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：获取时间
get<span class="token punctuation">.</span><span class="token method function property-access"><span class="token maybe-class-name">Xxxx</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>：获取字段
<span class="token maybe-class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：格式化
<span class="token maybe-class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token method function property-access">ofPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：定制格式化
<span class="token known-class-name class-name">Date</span> date <span class="token operator">=</span> <span class="token known-class-name class-name">Date</span><span class="token punctuation">.</span><span class="token keyword module">from</span><span class="token punctuation">(</span>instant<span class="token punctuation">)</span><span class="token punctuation">;</span>：Instant转换<span class="token known-class-name class-name">Date</span>
<span class="token maybe-class-name">Instant</span> instant <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token method function property-access">tolnstant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>：<span class="token known-class-name class-name">Date</span>转换Instant</pre></div></code-block><h2 id="sCRJpeNJHuXwoFkHSgcT8X" class="wolai-block"><span class="inline-wrap">11.6 System</span></h2><code-block id="dhn1fsETZANTHBkGA75gGW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 使用now() 返回表示当前日期时间的 对象</span>
<span class="token maybe-class-name">LocalDateTime</span> ldt <span class="token operator">=</span> <span class="token maybe-class-name">LocalDateTime</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//LocalDate.now();//LocalTime.now()</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>ldt<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="doqcaCaWr9hf8FEPUbLSyX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 使用DateTimeFormatter 对象来进行格式化</span>
<span class="token comment">// 创建 DateTimeFormatter对象</span>
<span class="token maybe-class-name">DateTimeFormatter</span> dateTimeFormatter <span class="token operator">=</span> <span class="token maybe-class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token method function property-access">ofPattern</span><span class="token punctuation">(</span>"yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd
<span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> format <span class="token operator">=</span> dateTimeFormatter<span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span>ldt<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"格式化的日期="</span> <span class="token operator">+</span> format<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7WvGAmRWvokgqzNPX9nUhj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"年="</span> <span class="token operator">+</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"月="</span> <span class="token operator">+</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"月="</span> <span class="token operator">+</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"日="</span> <span class="token operator">+</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"时="</span> <span class="token operator">+</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"分="</span> <span class="token operator">+</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"秒="</span> <span class="token operator">+</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="uNTaM41msc8avvaEN2a4Ge" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">LocalDate</span> now <span class="token operator">=</span> <span class="token maybe-class-name">LocalDate</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//可以获取年月日</span>
<span class="token maybe-class-name">LocalTime</span> now2 <span class="token operator">=</span> <span class="token maybe-class-name">LocalTime</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取到时分秒</span></pre></div></code-block><code-block id="b8LDA3QHyhFFED48xoGpTK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//提供 plus 和 minus方法可以对当前时间进行加或者减</span>
<span class="token comment">//看看 890 天后，是什么时候 把 年月日-时分秒</span>
<span class="token maybe-class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">plusDays</span><span class="token punctuation">(</span> <span class="token number">890</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"890天后="</span> <span class="token operator">+</span> dateTimeFormatter<span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="s4CJ4PmKmNWm5Jt65xrcqG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//看看在 3456 分钟前是什么时候，把 年月日-时分秒输出</span>
<span class="token maybe-class-name">LocalDateTime</span> localDateTime2 <span class="token operator">=</span> ldt<span class="token punctuation">.</span><span class="token method function property-access">minusMinutes</span><span class="token punctuation">(</span> <span class="token number">3456</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"3456分钟前 日期="</span> <span class="token operator">+</span>
dateTimeFormatter<span class="token punctuation">.</span><span class="token method function property-access">format</span><span class="token punctuation">(</span>localDateTime2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="8weAhfjRnJuCYypRUWg6ZV" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="7cZqxDp7SbnBDoVosxU51t" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>exit：退出当前程序
arraycopy：复制数组元素，比较适合底层调用，一般使用Arrays<span class="token punctuation">.</span><span class="token property-access">copyOf完成复制数组</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2.3</span><span class="token punctuation">}</span><span class="token operator">:</span>
int<span class="token punctuation">[</span><span class="token punctuation">]</span> dest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">arraycopy</span> <span class="token punctuation">(</span>src<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> dest<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
currentTimeMillens：返回当前时间距离<span class="token number">1970</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">1</span>的毫秒数
<span class="token function">gc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：运行垃圾回收机制</pre></div></code-block><h2 id="db5gV9hjcWz5HpiaGq13dT" class="wolai-block"><span class="inline-wrap">11.7 Arrays</span></h2><h4 id="a5Vq6tEeXwVEuPpsaLeQF1" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="6s9iaP5oQrjwFSXYkiL1gn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function"><span class="token maybe-class-name">Arrays里面包含了一系列静态方法，用于管理或操作数组</span></span><span class="token punctuation">(</span>比如排序和搜索<span class="token punctuation">)</span></pre></div></code-block><h4 id="4Ru2QZyK5Du7moURuHbGPh" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="uwgJuYFBkXj7uD1c8u1QvE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>toString：返回数组的字符串形式：
<span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span> <span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
<span class="token function">sort：排序</span><span class="token punctuation">(</span>自然排序和定制排序<span class="token punctuation">)</span>：
<span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">sout</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
binarySearch：通过二分搜索法进行查找，必须是有排序的数组：
int index <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">binarySearch</span> <span class="token punctuation">(</span>arr<span class="token punctuation">,</span> 需要查找的数<span class="token punctuation">)</span>
copyOf：数组元素的复制：
<span class="token maybe-class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newArr <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">copyOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span>
fill：数组元素的填充
<span class="token maybe-class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span>
<span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">fill</span> <span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
equals：比较两个数组元素内容是否完全一
boolean equals <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span> <span class="token property-access">arr2</span><span class="token punctuation">)</span>
aslist：将一组值，转换成list
<span class="token maybe-class-name">List</span> asList <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">asList</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span></pre></div></code-block><code-block id="cFJQGJ7nsvkuXfvRpQJAp7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">90</span> <span class="token punctuation">,</span> <span class="token number">123</span> <span class="token punctuation">,</span> <span class="token number">567</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// binarySearch 通过二分搜索法进行查找，要求必须排好</span>
<span class="token comment">//</span>
<span class="token comment">//1. 使用 binarySearch 二叉查找</span>
<span class="token comment">//2. 要求该数组是有序的. 如果该数组是无序的，不能使用binarySearch</span>
<span class="token comment">//3. 如果数组中不存在该元素，就返回 return -(low + 1); // key not found.</span>
int index <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">binarySearch</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">567</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"index="</span> <span class="token operator">+</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="h3ERxRvuRbD96i6HfqCZvc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//copyOf 数组元素的复制</span>
<span class="token comment">//</span>
<span class="token comment">//1. 从 arr 数组中，拷⻉ arr.length个元素到 newArr数组中</span></pre></div></code-block><h2 id="97AP52KHsjbPMc8LmvNN2m" class="wolai-block"><span class="inline-wrap">11.8 BigInteger BigDecimal</span></h2><h4 id="9WnV4utz28DUhE19Dn4MkD" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="audLkuoApJu2vwej5Trgak" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Biglnteger适合保存比较大的整型</span>
<span class="token maybe-class-name">BigDecimal适合保存精度更高的浮点型（小数）</span></pre></div></code-block><h4 id="xhb7vnSN4he8auVh3W81dY" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="9dPT153Tn8kKbAL3v6tzku" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>add：加
subtract：减
multiply：乘
divide：除</pre></div></code-block><h1 id="9DQY991dutoDTV72qQx5JF" class="wolai-block"><span class="inline-wrap">12 集合</span></h1><code-block id="hyS3UBeYBr29u5ZVtAiMD8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 如果拷⻉的⻓度 > arr.length 就在新数组的后面 增加 null</span>
<span class="token comment">//3. 如果拷⻉⻓度 &lt; 0 就抛出异常NegativeArraySizeException</span>
<span class="token comment">//4. 该方法的底层使用的是 System.arraycopy()</span>
<span class="token maybe-class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> newArr <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">copyOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> arr<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"==拷⻉执行完毕后=="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="jjJPVYqhVFWnUzgDtCnECy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//ill 数组元素的填充</span>
<span class="token maybe-class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token number">9</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//</span>
<span class="token comment">//1. 使用 99 去填充 num数组，可以理解成是替换原理的元素</span>
<span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">fill</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">99</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"==num数组填充后=="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="bsJuXuxN2c9pSW93tuHtGW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//equals 比较两个数组元素内容是否完全一致</span>
<span class="token maybe-class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">90</span> <span class="token punctuation">,</span> <span class="token number">123</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//</span>
<span class="token comment">//1. 如果arr 和 arr2 数组的元素一样，则方法true;</span>
<span class="token comment">//2. 如果不是完全一样，就返回 false</span>
boolean equals <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"equals="</span> <span class="token operator">+</span> equals<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="eacwKq6P4sLuMYQmQuQi9E" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//asList 将一组值，转换成list</span>
<span class="token comment">//</span>
<span class="token comment">//1. asList方法，会将 (2,3,4,5,6,1)数据转成一个List集合</span>
<span class="token comment">//2. 返回的 asList 编译类型 List(接口)</span>
<span class="token comment">//3. asList 运行类型 java.util.Arrays#ArrayList, 是Arrays类的</span>
<span class="token comment">// 静态内部类 private static class ArrayList&lt;E> extends AbstractList&lt;E></span>
<span class="token comment">// implements RandomAccess, java.io.Serializable</span>
<span class="token maybe-class-name">List</span> asList <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">asList</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"asList="</span> <span class="token operator">+</span> asList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"asList的运行类型"</span> <span class="token operator">+</span> asList<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="5rAUJKJ8g83h4pHpDnvAUJ" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="3KL73hKTZW9tWTbshpJPLS" class="wolai-block"><span class="inline-wrap">可以动态保存任意多个对象</span></h4><h4 id="7CWqKkpZgm2cA6BMXfKZBy" class="wolai-block"><span class="inline-wrap">提供了一系列方便的操作对象的方法</span></h4><h4 id="vhDHdYnue2nhumbHSA56Dc" class="wolai-block"><span class="inline-wrap">使用集合添加、删除新元素的示意代码更简洁</span></h4><h2 id="5BmBXJjQwr1k4yFoYtHWFK" class="wolai-block"><span class="inline-wrap">12.1 集合框架体系 ⭐</span></h2><h4 id="mRitx2EhPvCiZVWJUT77M7" class="wolai-block"><span class="inline-wrap">框架图：</span></h4><h2 id="rtsX4KKefupv4pSFM94Tts" class="wolai-block"><span class="inline-wrap">12.2 Collection</span></h2><h4 id="2EhJf8QQH3BjSZeT634jGz" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="65fpDfZgbK1MpYqNmTFEgX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Collection实现子类可以存放多个元素，每个元素可以是</span><span class="token known-class-name class-name">Object</span>
<span class="token maybe-class-name">Collection的实现类，有些可以存放重复的元素，有些不可以</span>
<span class="token function"><span class="token maybe-class-name">Collection的实现类，有些是有序的</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">List</span><span class="token punctuation">)</span><span class="token function">，有些不是有序</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Set</span><span class="token punctuation">)</span>
<span class="token maybe-class-name">Collection接口没有直接的实现子类，是通过它的子接口</span><span class="token known-class-name class-name">Set</span> 和 <span class="token maybe-class-name">List</span> 来实现的</pre></div></code-block><h4 id="iJZ36K7jqVPuqoLdUJ2rAj" class="wolai-block"><span class="inline-wrap">接口常用方法：</span></h4><code-block id="2uJeSWG5QHepEwBRdPwfV6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>add：添加单个元素
remove：删除指定元素
contains：查找元素是否存在
size：获取元素个数
isEmpty：判断是否为空
clear：清空
addAll：添加多个元素
containsAll：查找多个元素是否都存在
removeAll：删除多个元素</pre></div></code-block><code-block id="4UvyUPzX5HMitZEi9PCWtc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// add:添加单个元素</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//list.add(new Integer(10))</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// remove:删除指定元素</span>
<span class="token comment">//list.remove(0);//删除第一个元素</span>
list<span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//指定删除某个元素</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// contains:查找元素是否存在</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token method function property-access">contains</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//T</span>
<span class="token comment">// size:获取元素个数</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
<span class="token comment">// isEmpty:判断是否为空</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token method function property-access">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F</span>
<span class="token comment">// clear:清空</span>
list<span class="token punctuation">.</span><span class="token method function property-access">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// addAll:添加多个元素</span>
<span class="token maybe-class-name">ArrayList</span> list2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list2<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"红楼梦"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list2<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"三国演义"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">addAll</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// containsAll:查找多个元素是否都存在</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token method function property-access">containsAll</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//T</span>
<span class="token comment">// removeAll：删除多个元素</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"聊斋"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">removeAll</span><span class="token punctuation">(</span>list2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[聊斋]</span>
<span class="token comment">// 说明：以ArrayList实现类来演示.</span></pre></div></code-block><h3 id="nQbd9FR5Z84Wwre3u9RAdk" class="wolai-block"><span class="inline-wrap">12.2.1 List</span></h3><h4 id="fpP4yMdpvEcriFx8qUMaBi" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="j8nWFtHagaQaxP3mLWQ6bh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">List集合类中元素有序（即添加顺序和取出顺序一致）、且可重复</span>
<span class="token maybe-class-name">List集合中的每个元素都有其对应的顺序索引，即支持索引</span>
<span class="token maybe-class-name">List容器中的元素都对应一个整数型的序号记载其在容器中的位置，可以根据序号存取容器元素</span>
常用： <span class="token maybe-class-name">ArrayList、LinkedList、Vector</span></pre></div></code-block><h4 id="v8CaGYJgVNHpnKRAqDgVqo" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="f6qZ5qBWF4cjDECVNKDCdw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>int index<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> ele<span class="token punctuation">)</span>：在index位置插入ele元素
boolean <span class="token function">addAll</span><span class="token punctuation">(</span>int index<span class="token punctuation">,</span> <span class="token maybe-class-name">Collection</span> eles<span class="token punctuation">)</span>：从index位置开始将eles中的所有元素添加进来
<span class="token known-class-name class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span>int index<span class="token punctuation">)</span>：获取指定index位置的元素
int <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> obj<span class="token punctuation">)</span>：返回obj在集合中首次出现的位置
int <span class="token function">lastindexOf</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> obj<span class="token punctuation">)</span>：返回obj在当前集合中末次出现的位置
<span class="token known-class-name class-name">Object</span> <span class="token function">remove</span><span class="token punctuation">(</span>int index<span class="token punctuation">)</span>：移除指定index位置的元素，井返回此元素
<span class="token known-class-name class-name">Object</span> <span class="token function">set</span><span class="token punctuation">(</span>int index<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> ele<span class="token punctuation">)</span>：设置指定index位置的元素为ele，相当于是替换
<span class="token maybe-class-name">List</span> <span class="token function">sublist</span><span class="token punctuation">(</span>int fromlndex<span class="token punctuation">,</span> int tolndex<span class="token punctuation">)</span>：返回从fromlndex到tolndex位置的子集合</pre></div></code-block><code-block id="uWJEWN24R1FKWJBeuBBCrK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"张三丰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"贾宝玉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// void add(int index, Object ele):在index位置插入ele元素</span>
<span class="token comment">//在index = 1的位置插入一个对象</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">"韩顺平"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="dGz8UvJM998GMABJffJ8Dm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// boolean addAll(int index, Collection eles):从index位置开始将eles中的所有</span>
元素添加进来
<span class="token maybe-class-name">List</span> list2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list2<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list2<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">addAll</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> list2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="8HAPSNczJ3aLpSdrhdpjiN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// Object get(int index):获取指定index位置的元素</span></pre></div></code-block><code-block id="wBqYD2YHSZVAxo5FGycjAd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// int indexOf(Object obj):返回obj在集合中首次出现的位置</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span></pre></div></code-block><code-block id="tV84etxRAqcLLhoT6qn7Fr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// int lastIndexOf(Object obj):返回obj在当前集合中末次出现的位置</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"韩顺平"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token method function property-access">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">"韩顺平"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="p471BMcZBHuc8FzqbMUauN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// Object remove(int index):移除指定index位置的元素，并返回此元素</span></pre></div></code-block><h4 id="uSvTHqtXBmdzMZuzXGYZiR" class="wolai-block"><span class="inline-wrap">12.2.1.1 迭代器</span></h4><h4 id="tKjXm6QG4BbpBUeaA2K7AT" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="jk1oEKDufzjNSQQMHsTW8t" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>lterator对象称为迭代器，主要用于遍历 <span class="token maybe-class-name">Collection</span> 集合中的元素
<span class="token function">实现了Collection接口的集合都有一个iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法，用以返回一个实现了lterator接口的对象，即可以
返回一个迭代器
lterator 仅用于遍历集合，lterator 本身并不存放对象
在调用it<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法之前必须要调用it<span class="token punctuation">.</span><span class="token method function property-access">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>进行检测。若不调用，且下一条记录无效，直接调用
it<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>会抛出NoSuchElementException异常</pre></div></code-block><code-block id="ijCisNztt2xFeoS2wKzNi4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>list<span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="uR4jimDaYWNoki8bM24FYR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// Object set(int index, Object ele):设置指定index位置的元素为ele , 相当于是</span>
替换<span class="token punctuation">.</span>
<span class="token property-access">list</span><span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">"玛丽"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fifztjuiELzyTk2iaNXRfS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// List subList(int fromIndex, int toIndex):返回从fromIndex到toIndex位置的</span>
子集合
<span class="token comment">// 注意返回的子集合 fromIndex &lt;= subList &lt; toIndex</span>
<span class="token maybe-class-name">List</span> returnlist <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token method function property-access">subList</span><span class="token punctuation">(</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"returnlist="</span> <span class="token operator">+</span> returnlist<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="2ogLZhCNuq99eZ65NWd7gP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CollectionIterator</span> <span class="token punctuation">{</span>
@<span class="token function"><span class="token maybe-class-name">SuppressWarnings</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"all"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="5gWqtdKsWd7Q5PyCk1AC6y" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Collection</span> col <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div id="48hGYqQfsQj1ZRc4hqHoJP" class="wolai-block wolai-text"><div><span class="inline-wrap">col.add(new Book(&quot;三国演义&quot;, &quot;罗贯中&quot;, 10.1));
col.add(new Book(&quot;小李⻜刀&quot;, &quot;古⻰&quot;, 5.1));
col.add(new Book(&quot;红楼梦&quot;, &quot;曹雪芹&quot;, 34.6));</span></div></div><div id="3Q6MWtihAyME6n6qrS5q7U" class="wolai-block wolai-text"><div><span class="inline-wrap">//System.out.println(&quot;col=&quot; + col);
//现在老师希望能够遍历 col 集合
//1. 先得到 col 对应的 迭代器
Iterator iterator = col.iterator();
//2. 使用 while 循环遍历
// while (iterator.hasNext()) {//判断是否还有数据
// //返回下一个元素，类型是 Object
// Object obj = iterator.next();
// System.out.println(&quot;obj=&quot; + obj);
// }</span></div></div><div id="3owDw1pUyaRjoi9rnFi12Q" class="wolai-block wolai-text"><div><span class="inline-wrap">//老师教大家一个快捷键，快速生成 while =&gt; itit
//显示所有的快捷键的的快捷键 ctrl + j</span></div></div><div id="2vZqTr2FFXHcbg4ssargoX" class="wolai-block wolai-text"><div><span class="inline-wrap">while (iterator.hasNext()) {
Object obj = iterator.next();
System.out.println(&quot;obj=&quot; + obj);</span></div></div><div id="tsbjUagbTKRui17NLXXKc8" class="wolai-block wolai-text"><div><span class="inline-wrap">}
//3. 当退出 while 循环后 , 这时 iterator 迭代器，指向最后的元素
// iterator.next();//NoSuchElementException
//4. 如果希望再次遍历，需要重置我们的迭代器
iterator = col.iterator();
System.out.println(&quot;===第二次遍历===&quot;);
while (iterator.hasNext()) {
Object obj = iterator.next();
System.out.println(&quot;obj=&quot; + obj);</span></div></div><div id="nQwy8AAKfBVFGZ33GLtizK" class="wolai-block wolai-text"><div><span class="inline-wrap">}
}
}</span></div></div><div id="uuARGQokomxDYYeNYYGKnR" class="wolai-block wolai-text"><div><span class="inline-wrap">class Book {
private String name;
private String author;
private double price;</span></div></div><div id="cw2q3J8eTMDg4tfecq2Bo9" class="wolai-block wolai-text"><div><span class="inline-wrap">public Book(String name, String author, double price) {
this.name = name;
this.author = author;
this.price = price;
}</span></div></div><div id="idf8zfWwXjHjnuwV429D2N" class="wolai-block wolai-text"><div><span class="inline-wrap">public String getName() {
return name;</span></div></div><h4 id="81AUSi59qwBse3wdKe9c9P" class="wolai-block"><span class="inline-wrap">12.2.1.2 for 增强循环</span></h4><h4 id="aDcLDvmRfUvhqXEJA3CZFX" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="thqqsKVPeiF5TCky6Zx31p" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>增强<span class="token keyword control-flow">for</span>循环，可以代替iterator迭代器，特点：增强<span class="token keyword control-flow">for</span>就是简化版的iterator，本质一样，只能用于遍历集合
或数组</pre></div></code-block><h4 id="vRbyx9hh2UJB6qjMXpoj5h" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="5aHh7kZz3f9o6yWN6vvsUx" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="gbnjNSzuYf7TU17xuT5UpY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="tAHgeLv2VrukQfe9HRqGY8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">getAuthor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> author<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="5rvLyutq2mJoPYE8Wbu2N6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAuthor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> author</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">author</span> <span class="token operator">=</span> author<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="nu5J7tTdWEqHknA519j9iJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> double <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="sQhmM3ua6eon4ZeK28CrUh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token parameter">double price</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">price</span> <span class="token operator">=</span> price<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="tVc5eXSSv7njT9BT8ksP4q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token string">"Book{"</span> <span class="token operator">+</span>
<span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
<span class="token string">", author='"</span> <span class="token operator">+</span> author <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
<span class="token string">", price="</span> <span class="token operator">+</span> price <span class="token operator">+</span>
<span class="token string">'}'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="5g1SGfANPe9WSHqDzn9r99" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">for</span><span class="token punctuation">(</span>元素类型 元素名<span class="token operator">:</span> 集合名或数组名<span class="token punctuation">)</span><span class="token punctuation">{</span>
访问元素<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="mAf1nBdLYb2zUH4uownN2E" class="wolai-block"><span class="inline-wrap">12.2.1.3 普通遍历循环</span></h4><h4 id="bG5ZCSWfd5ki8DahWza4jA" class="wolai-block"><span class="inline-wrap">12.2.1.4 ArrayList ⭐</span></h4><h4 id="iAaNThBmx5fneCVcbj2VEV" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="kdSYrkZbxBiPMUK4ZAxxVx"><div class="marker"></div><span class="inline-wrap">允许所有元素包括 null 加入</span></li><li id="du9H2CPr9UqpqnYfa1Hf3F"><div class="marker"></div><span class="inline-wrap">ArrayList 是由数组来实现数据存储的</span></li><li id="nnTC4GaZGZyBCWVYMUsnxP"><div class="marker"></div><span class="inline-wrap">ArrayList 基本等同于 Vector，除了 ArrayList 是线程不安全（执行效率高），在多线程情况下，不建议使
用 ArrayList</span></li></ol><h4 id="dn6PfD9ynWzkqK93D7uUNr" class="wolai-block"><span class="inline-wrap">底层结构和源码分析：</span></h4><ol class="wolai-block"><li id="rDyPqCrhUGTMkWeJJ7nEnw"><div class="marker"></div><span class="inline-wrap">ArrayList 中维护了一个 Object 类型的数组 elementData，transient Object[] elementData;
transient 表示瞬间,短暂的，表示该属性不会被序列化</span></li><li id="8t1U3zQkY2caghRH1peyLG"><div class="marker"></div><span class="inline-wrap">创建 ArrayList 对象时，如果使用的是无参构造器，则初始 elementData 容量为 0 ，第 1 次添加，则扩容
elementData 为 10 ，如需要再次扩容，则扩容 elementData 为 1.5 倍</span></li><li id="t9nwDUYvuEd94eEdQzy5V3"><div class="marker"></div><span class="inline-wrap">如果使用的是指定大小的构造器，则初始 elementData 容量为指定大小，如果需要扩容，则直接扩容
elementData 为 1.5 倍</span></li></ol><h4 id="sDhzXdGMGzPvVy4RBDdQDH" class="wolai-block"><span class="inline-wrap">12.2.1.5 Vector ⭐</span></h4><h4 id="3hkjSw3GqTBiinvjmTn5BE" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="m4idTLVnMzD4ZCmwADHbre"><div class="marker"></div><span class="inline-wrap">Vector 底层是一个对象数组， protected Object[] elementData;</span></li><li id="d16ujFNbJRgjY6FzqgLTFB"><div class="marker"></div><span class="inline-wrap">Vector 是线程同步的，即线程安全，Vector 类的操作方法带有 synchronized</span></li></ol><h4 id="brVe4ArN4SzokvX3UPgY8U" class="wolai-block"><span class="inline-wrap">底层机制和源码分析：</span></h4><code-block id="s2415TwjmrLrHgcRQhz3HG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Vector_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//无参构造器</span>
<span class="token comment">//有参数的构造</span>
<span class="token maybe-class-name">Vector</span> vector <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vector</span><span class="token punctuation">(</span> <span class="token number">8</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
vector<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
vector<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"vector="</span> <span class="token operator">+</span> vector<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//老韩解读源码</span>
<span class="token comment">//1. new Vector() 底层</span>
<span class="token comment">/*
public Vector() {
this(10);
}
补充：如果是 Vector vector = new Vector(8);
走的方法:
public Vector(int initialCapacity) {
this(initialCapacity, 0);
}</span></pre></div></code-block><ol class="wolai-block"><li id="bmu54xhSS8eLh1mXQbmSFq"><div class="marker"></div><span class="inline-wrap">vector.add(i)
2.1 //下面这个方法就添加数据到 vector 集合
public synchronized boolean add(E e) {
modCount++;
ensureCapacityHelper(elementCount + 1);
elementData[elementCount++] = e;
return true;
}
2.2 //确定是否需要扩容 条件 ： minCapacity - elementData.length&gt;0
private void ensureCapacityHelper(int minCapacity) {
// overflow-conscious code
if (minCapacity - elementData.length &gt; 0)
grow(minCapacity);
}
2.3 //如果 需要的数组大小 不够用，就扩容 , 扩容的算法
//newCapacity = oldCapacity + ((capacityIncrement &gt; 0)?
// capacityIncrement : oldCapacity);
//就是扩容两倍.
private void grow(int minCapacity) {
// overflow-conscious code</span></li></ol><h4 id="7NqTn5tqiskhPjxpf6ejQp" class="wolai-block"><span class="inline-wrap">ArrayList 和 Vector：</span></h4><h4 id="ptopZ9WYdzDykqdmcRgvKM" class="wolai-block"><span class="inline-wrap">12.2.1.6 LinkedList</span></h4><h4 id="m2Ryr7qaSB8gcWEUDvwmkk" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="qajByaVWg7KDJrwyEAuFgW"><div class="marker"></div><span class="inline-wrap">LinkedList 底层实现了双向链表和双端队列特点</span></li><li id="14aKX3hPKa55sYrkbuwTgh"><div class="marker"></div><span class="inline-wrap">可以添加任意元素包括 null</span></li><li id="bbZvppUEn58kubhJ9HWjHC"><div class="marker"></div><span class="inline-wrap">线程不安全，没有实现同步</span></li></ol><h4 id="vMPvuPnXE41v1KHh93pDC5" class="wolai-block"><span class="inline-wrap">底层机制：</span></h4><ol class="wolai-block"><li id="3o28ffcF7FJxRU558fJjcC"><div class="marker"></div><span class="inline-wrap">Linkedlist 底层维护了一个 </span><span class="inline-wrap"><b>双向链表</b></span></li><li id="gtqtddF6GWW32eVk1JePCf"><div class="marker"></div><span class="inline-wrap">Linkedlist 中维护了两个属性 first 和 last 分别指向首节点和尾节点</span></li><li id="8HAJF5qdwvCpGj6ewsuw99"><div class="marker"></div><span class="inline-wrap">每个节点（Node 对象），里面又维护了 prev、next.item 三个属性，其中通过
prev 指向前一个，通过 next 指向后一个节点。最终实现双向链表</span></li><li id="iutveFdRdGodiJsX9Dy4ir"><div class="marker"></div><span class="inline-wrap">所以 LinkedList 的元素的添加和删除，不是通过数组完成的，相对来说效率较高</span></li></ol><code-block id="nVJ6XgZxRLM2oW5ez4cbmk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
int newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>capacityIncrement <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">?</span>
capacityIncrement <span class="token operator">:</span> oldCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> <span class="token constant">MAX_ARRAY_SIZE</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
elementData <span class="token operator">=</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">*</span><span class="token operator">/</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="driRd2V4wun3nKhPGDkjKM" class="wolai-block"><span class="inline-wrap">ArrayList 和 LinkedList：</span></h4><ol class="wolai-block"><li id="wyXfJEjbn44TYfhsKrMSZg"><div class="marker"></div><span class="inline-wrap">如果我们改查的操作多，选择 ArrayList</span></li><li id="j82HNxHFfqqjfSTqgg71JX"><div class="marker"></div><span class="inline-wrap">如果我们增删的操作多，选择 LinkedList</span></li><li id="upyvCXFewo3tCaghKjkX9V"><div class="marker"></div><span class="inline-wrap">一般来说，在程序中，80%-90%<span class="jill"></span>都是查询，因此大部分情况下会选择 ArrayList</span></li></ol><h3 id="kMRDUehsctzDAuw4U3zREy" class="wolai-block"><span class="inline-wrap">12.2.2 Set</span></h3><h4 id="i5aHKR7wfQ5WctM4mwdPUN" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="4kKdWLhX7iQUr3823TBWrw" class="wolai-block"><span class="inline-wrap">无序（添加和取出的顺序不一致），没有索引</span></h4><code-block id="xsAM2zW7BugakE5TETHEgR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>不允许重复元素，所以最多包含一个<span class="token keyword null nil">null</span>
<span class="token constant">JDK</span> <span class="token constant">API</span>中<span class="token known-class-name class-name">Set</span>接口的实现类有：</pre></div></code-block><h4 id="hLG6NAQeCCoj6ijkVvXao1" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="33Jt38JXxswuof1QCdbV8o" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>add：添加单个元素
remove：删除指定元素
contains：查找元素是否存在
size：获取元素个数
isEmpty：判断是否为空
clear：清空
addAll：添加多个元素
containsAll：查找多个元素是否都存在
removeAll：删除多个元素</pre></div></code-block><code-block id="5LSDVmGRtoUctJgtKFfubV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SetMethod</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//老韩解读</span>
<span class="token comment">//1. 以Set 接口的实现类 HashSet 来讲解Set 接口的方法</span>
<span class="token comment">//2. set 接口的实现类的对象(Set接口对象), 不能存放重复的元素, 可以添加一个null</span>
<span class="token comment">//3. set 接口对象存放数据是无序(即添加的顺序和取出的顺序不一致)</span>
<span class="token comment">//4. 注意：取出的顺序的顺序虽然不是添加的顺序，但是他的固定.</span>
<span class="token known-class-name class-name">Set</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"lucy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//重复</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"hsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"mary"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//再次添加null</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">;</span>i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"set="</span> <span class="token operator">+</span> set<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="jMwohYQTmrnmjToQ1d1Vqq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//遍历</span>
<span class="token comment">//方式 1 ： 使用迭代器</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"=====使用迭代器===="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Iterator</span> iterator <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token method function property-access">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">Object</span> obj <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"obj="</span> <span class="token operator">+</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="epTQK1knh4sQWRvQ4NirDM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="sStEZQpYL2VqBQ25FiNfHu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>set<span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="nkszUk7amEJY5fp5EVHj8V" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方式2: 增强for</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"=====增强for===="</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="sfBoETErgkVCBBdxpKcgeK" class="wolai-block"><span class="inline-wrap">遍历方式：</span></h4><h4 id="xiv8FsnB8MvfeGzJ8Z7gKu" class="wolai-block"><span class="inline-wrap">1. 迭代器</span></h4><ol class="wolai-block"><li id="uSduPNVwJPybma37cStbGq"><div class="marker"></div><span class="inline-wrap">增强 for</span></li><li id="wJfbFkLcgepDP5VMF8eFeS"><div class="marker"></div><span class="inline-wrap"><b>不能使用索引方式获取</b></span><span class="inline-wrap"> （普通遍历循环）</span></li></ol><h4 id="a6V9oHQmKixAyjEqFaWFyP" class="wolai-block"><span class="inline-wrap">12.2.2.1 HashSet ⭐</span></h4><h4 id="tXKc7H4xiA8pkPcfubi9tV" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="1u7z6XT8wYWkmMeS8d4UBj"><div class="marker"></div><span class="inline-wrap">Hashset 实现了 Set 接口</span></li><li id="bmFsqm6AAEiUuLUdBBuWPj"><div class="marker"></div><span class="inline-wrap">Hashset 实际上是 HashMap</span></li><li id="3emBwzV1Bq9GAfZ84EZtAm"><div class="marker"></div><span class="inline-wrap">可以存放 null 值，但是只能有一个 null</span></li><li id="7L4bUS1HLY47taWzGw4YBT"><div class="marker"></div><span class="inline-wrap">Hashset 不保证元素是有序的,取决于 hash 后，再确定索引的结果</span></li><li id="gcn2GWwUj56Bio1yE5NKR9"><div class="marker"></div><span class="inline-wrap">不能有重复元素/对象</span></li></ol><h4 id="abCAkKN4dgUM5rbJigGWG3" class="wolai-block"><span class="inline-wrap">底层机制和源码分析：</span></h4><ol class="wolai-block"><li id="p1Ubr3JFQBvv46Y4755tzM"><div class="marker"></div><span class="inline-wrap">HashSet 底层是 HashMap</span></li><li id="vWD4nE2NWMEzZGJqNWPYz9"><div class="marker"></div><span class="inline-wrap">添加一个元素时，先得到 hash 值会转成索引值</span></li><li id="m4QKPaF6xh27uzqujkDicV"><div class="marker"></div><span class="inline-wrap">找到存储数据表 table，看这个素引位置是否己经存放的有元素如果没有，直接加入</span></li><li id="qgCqYT8vYkjAmUVZUFJSYv"><div class="marker"></div><span class="inline-wrap">如果有调用 equals 比较，如果相同，就放奔添加，如果不相同，则添加到最后</span></li><li id="4ehCEThBELp48q2xobruM2"><div class="marker"></div><span class="inline-wrap">在 Java8 中，如果一条链表的元素个数超过 TREEIFY THRESHOLD（默认是 8 ），井且 table 的大小＞
=MIN TREEIFY CAPACITY（默认 64)就会进行树化(红黑树）</span></li></ol><code-block id="i65uvp1w7sQ3nUCmFvwcE1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> o <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"o="</span> <span class="token operator">+</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//set 接口对象，不能通过索引来获取</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="4AHt1MuqJ7K9B9EEqYU8e8" class="wolai-block wolai-text"><div><span class="inline-wrap">public class HashSetSource {
public static void main(String[] args) {</span></div></div><div id="fqoiPHrj6TzPjDzWXc43LZ" class="wolai-block wolai-text"><div><span class="inline-wrap">HashSet hashSet = new HashSet();
hashSet.add(&quot;java&quot;);//到此位置，第 1 次 add 分析完毕.
hashSet.add(&quot;php&quot;);//到此位置，第 2 次 add 分析完毕
hashSet.add(&quot;java&quot;);
System.out.println(&quot;set=&quot; + hashSet);</span></div></div><div id="pQntjon6chuDy2wi8bS3LD" class="wolai-block wolai-text"><div><span class="inline-wrap">/*
HashSet 的源码解读</span></div></div><ol class="wolai-block"><li id="wdZRv9CG4bGiVHMZMrVdL9"><div class="marker"></div><span class="inline-wrap">执行 HashSet()
public HashSet() {
map = new HashMap&lt;&gt;();
}</span></li><li id="d8aQH48jS3K2HFDHmw19vj"><div class="marker"></div><span class="inline-wrap">执行 add()
public boolean add(E e) {//e = &quot;java&quot;
return map.put(e, PRESENT)==null;//(static) PRESENT = new
Object();
} 3.执行 put() , 该方法会执行 hash(key) 得到 key 对应的 hash 值 算法 h =
key.hashCode()) ^ (h &gt;&gt;&gt; 16)
public V put(K key, V value) {//key = &quot;java&quot; value = PRESENT 共享
return putVal(hash(key), key, value, false, true);
} 4.执行 putVal
final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
boolean evict) {
Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; //定义了辅助变量
//table 就是 HashMap 的一个数组，类型是 Node[]
//if 语句表示如果当前 table 是 null, 或者 大小=0</span></li></ol><h4 id="rB2KUh56MHpB8MsiVVsfRi" class="wolai-block"><span class="inline-wrap">//就是第一次扩容，到 16 个空间.</span></h4><div id="46ypYAc8KL2o9nGGS56EDc" class="wolai-block wolai-text"><div><span class="inline-wrap">if ((tab = table) == null || (n = tab.length) == 0)
n = (tab = resize()).length;</span></div></div><div id="1WUB2yqo4HNdYmgrZHF5pw" class="wolai-block wolai-text"><div><span class="inline-wrap">//(1)根据 key，得到 hash 去计算该 key 应该存放到 table 表的哪个索引位置
//并把这个位置的对象，赋给 p
//(2)判断 p 是否为 null
//(2.1) 如果 p 为 null, 表示还没有存放元素, 就创建一个 Node
(key=&quot;java&quot;,value=PRESENT)
//(2.2) 就放在该位置 tab[i] = newNode(hash, key, value, null)</span></div></div><div id="2f6vRdgxU9wpGgv5vfcST9" class="wolai-block wolai-text"><div><span class="inline-wrap">if ((p = tab[i = (n - 1) &amp; hash]) == null)
tab[i] = newNode(hash, key, value, null);
else {
//一个开发技巧提示： 在需要局部变量(辅助变量)时候，在创建
Node&lt;K,V&gt; e; K k; //
//如果当前索引位置对应的链表的第一个元素和准备添加的 key 的 hash 值一样
//并且满足 下面两个条件之一:
//(1) 准备加入的 key 和 p 指向的 Node 结点的 key 是同一个对象
//(2) p 指向的 Node 结点的 key 的 equals() 和准备加入的 key 比较后相
同
//就不能加入
if (p.hash == hash &amp;&amp;
((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))
e = p;
//再判断 p 是不是一颗红黑树,
//如果是一颗红黑树，就调用 putTreeVal , 来进行添加
else if (p instanceof TreeNode)
e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key,
value);
else {//如果 table 对应索引位置，已经是一个链表, 就使用 for 循环比较</span></div></div><div id="td7PkrkMnhebSaKarVqs3p" class="wolai-block wolai-text"><div><span class="inline-wrap">//(1) 依次和该链表的每一个元素比较后，都不相同, 则加入到该链表
的最后
// 注意在把元素添加到链表后，立即判断 该链表是否已经达到 8 个
结点
// , 就调用 treeifyBin() 对当前这个链表进行树化(转成红黑
树)
// 注意，在转成红黑树时，要进行判断, 判断条件
// if (tab == null || (n = tab.length) &lt;
MIN_TREEIFY_CAPACITY(64))
// resize();
// 如果上面条件成立，先 table 扩容.
// 只有上面条件不成立时，才进行转成红黑树
//(2) 依次和该链表的每一个元素比较过程中，如果有相同情况,就直
接 break</span></div></div><div id="17EPuFVVKoehfptvP3Zpx2" class="wolai-block wolai-text"><div><span class="inline-wrap">for (int binCount = 0; ; ++binCount) {
if ((e = p.next) == null) {</span></div></div><h4 id="fCmqAXgJKmBxA9Y7k7Awzx" class="wolai-block"><span class="inline-wrap">扩容和红黑树机制：</span></h4><ol class="wolai-block"><li id="wSoi2rhkQgZ4H47MpAtta3"><div class="marker"></div><span class="inline-wrap">HashSet 底层是 HashMap</span></li><li id="2e7o2PNoBBH5YT83eJTGVs"><div class="marker"></div><span class="inline-wrap">第一次添加时，table 数组扩容到 16 ，临界值(threshold)是 16*加载因子(loadFactor)是 0.75= 12</span></li><li id="6y46zYPZpzvoh69VFBq4RS"><div class="marker"></div><span class="inline-wrap">每加入一个节点，size 就会<span class="jill"></span>++，到达临界值就会扩容</span></li><li id="mSRbA4uoU6Dr3bzLRwKL4r"><div class="marker"></div><span class="inline-wrap">如果 table 数组使用到了临界值 12,就会扩容到 16*2=32,新的临界值就是 32 *0.75=24，依次类推</span></li><li id="dT2ChTDR7q85NEtQ4Xsypd"><div class="marker"></div><span class="inline-wrap">在 Java8 中，如果一条链表的元素个数到达 TREEIFY_ THRESHOLD(默认是 8 ）井且 table 的大小＞=MIN
TREEIFY CAPACITY (默认 64),就会进行树化(红黑树），否则仍然采用数组扩容机制</span></li></ol><h4 id="184KtbvQ2wnmUH9NrLEVmN" class="wolai-block"><span class="inline-wrap">去重机制对比：</span></h4><code-block id="xa3Y1eqkyLHbLimY4M3GST" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">HashSet去重机制</span><span class="token operator">:</span> <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，底层先通过存入对象，通过运算hash值得到对应的索引，如
果table索引所在的位置没有数据就直接存放；如果有数据就进行 equals （注意重写情况）比较<span class="token punctuation">[</span>遍历比
较<span class="token punctuation">]</span>，如果比较后，不相同就加入，否则就不加入
<span class="token maybe-class-name">TreeSet的去重机制：如果你传入了一个Comparator匿名对象，就使用实现的compare去重，如果方法</span>
返回<span class="token number">0</span><span class="token punctuation">,</span>就是相同的元素<span class="token operator">/</span>数据，就不添加，如果你没有传入一个Comparator匿名对象，则以你添加的对
象实现的Compareable接口的compareTo去重</pre></div></code-block><code-block id="v9K82ig8d5JfnT4Vq9bHE5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>p<span class="token punctuation">.</span><span class="token property-access">next</span> <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">>=</span> <span class="token constant">TREEIFY_THRESHOLD</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// -1</span>
<span class="token keyword control-flow">for</span> <span class="token number">1</span>st
<span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">hash</span> <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword null nil">null</span> <span class="token operator">&amp;&amp;</span>
key<span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
p <span class="token operator">=</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// existing mapping for key</span>
<span class="token constant">V</span> oldValue <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent <span class="token operator">||</span> oldValue <span class="token operator">==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span>
e<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
<span class="token function">afterNodeAccess</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">return</span> oldValue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">++</span>modCount<span class="token punctuation">;</span>
<span class="token comment">//size 就是我们每加入一个结点Node(k,v,h,next), size++</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">></span> threshold<span class="token punctuation">)</span>
<span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//扩容</span>
<span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">*</span><span class="token operator">/</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="89UQm5aFZELX3Utso8hirn" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="4bPNFA5kFU9KZu8Y5xZNCa" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Homework06</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">HashSet</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
<span class="token maybe-class-name">Person</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span> <span class="token number">1001</span> <span class="token punctuation">,</span><span class="token string">"AA"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
<span class="token maybe-class-name">Person</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span> <span class="token number">1002</span> <span class="token punctuation">,</span><span class="token string">"BB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
p1<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">"CC"</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span> <span class="token number">1001</span> <span class="token punctuation">,</span><span class="token string">"CC"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span> <span class="token number">1001</span> <span class="token punctuation">,</span><span class="token string">"AA"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span></pre></div></code-block><code-block id="czyfK8rpauQadZtuaJJQYE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="mwDDZBCB2ZnPogyxPZjo16" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
<span class="token keyword">public</span> int id<span class="token punctuation">;</span></pre></div></code-block><code-block id="61NXAjgSpX4WsazXBCuRrq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Person</span></span><span class="token punctuation">(</span><span class="token parameter">int id<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="aPa1iZwqGqEaN5DNdnrCPP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> boolean <span class="token function">equals</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">Object</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> o<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword null nil">null</span> <span class="token operator">||</span> <span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> o<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Person</span> person <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Person</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>
<span class="token keyword control-flow">return</span> id <span class="token operator">==</span> person<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">&amp;&amp;</span>
<span class="token maybe-class-name">Objects</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> person<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="mcZHvv45TxekXA8Ec38TiU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> int <span class="token function">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token maybe-class-name">Objects</span><span class="token punctuation">.</span><span class="token method function property-access">hash</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="g3nJ3ajGGeJiGbfKX2CuRA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token string">"Person{"</span> <span class="token operator">+</span>
<span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
<span class="token string">", id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
<span class="token string">'}'</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="m3QzBbVgEHXVpaxgD3fwhV" class="wolai-block"><span class="inline-wrap">12.2.2.2 LinkedHashSet</span></h4><h4 id="3WXaDwx5846x8wq8fyQs7W" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="tjsNkJ3uK6XF8hX5TkERsY"><div class="marker"></div><span class="inline-wrap">LinkedHashset 是 Hashset 的子类</span></li><li id="mN5xC2VYkjwi9egMY3vQB9"><div class="marker"></div><span class="inline-wrap">LinkedHashSet 底层是一个 LinkedHashMap，底层维护了一个 数组＋ </span><span class="inline-wrap"><b>双向链表</b></span></li><li id="azWwRXqzt3ozDnBRj23okk"><div class="marker"></div><span class="inline-wrap">LinkedHashSet 根据元素的 hashCode 值来决定元素的存储位置，同时使用链表维护元素的次序(图)，
这使得元素看起来是以插入顺序保存的</span></li><li id="sMUgiTgr5C1UZ51DkPPhsL"><div class="marker"></div><span class="inline-wrap">LinkedHashSet 不允许添重复元素</span></li></ol><h4 id="ou1tq2QrsnDTZWT769dyVF" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="qxswA8pYqC8GUv2T1t6U2p" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="bz6bQ1NyNqnCRWWJgbBC4d" class="wolai-block"><span class="inline-wrap">底层机制和源代码分析：</span></h4><ol class="wolai-block"><li id="nAHJsnXtN446p3PrmaRYo7"><div class="marker"></div><span class="inline-wrap">LinkedHashSet 加入顺序和取出元素/数据的顺序一致</span></li><li id="21GPyS919CmT5pyiiKdKvs"><div class="marker"></div><span class="inline-wrap">LinkedHashSet 底层维护的是一个 LinkedHashMap(是 HashMap 的子类)</span></li><li id="4wfPfLqEFqTK5dRqeJy3Qw"><div class="marker"></div><span class="inline-wrap">LinkedHashSet 底层结构 (数组 table+<span class="jill"></span>双向链表)</span></li><li id="hGA41DJ7nTggcBvPpe7mPP"><div class="marker"></div><span class="inline-wrap">添加第一次时，直接将 数组 table 扩容到 16 ,存放的结点类型是 LinkedHashMap$Entry</span></li><li id="gJVbKfdr2mTh9VBWdKth49"><div class="marker"></div><span class="inline-wrap">数组是 HashMap</span><span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo><mtext>存放的元素</mtext><mi mathvariant="normal">/</mi><mtext>数据是</mtext><mi>L</mi><mi>i</mi><mi>n</mi><mi>k</mi><mi>e</mi><mi>d</mi><mi>H</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi>M</mi><mi>a</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">Node[] 存放的元素/数据是 LinkedHashMap</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mopen">[</span><span class="mclose">]</span><span class="mord cjk_fallback">存放的元素</span><span class="mord">/</span><span class="mord cjk_fallback">数据是</span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right:0.03148em;">ink</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">a</span><span class="mord mathnormal">p</span></span></span></span></span><span class="inline-wrap">Entry 类型</span></li></ol><code-block id="aAqsftxjjkrodT5orqTnSS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkedHashSetSource</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//分析一下LinkedHashSet的底层机制</span>
<span class="token known-class-name class-name">Set</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"AA"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span> <span class="token number">456</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span> <span class="token number">456</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Customer</span><span class="token punctuation">(</span><span class="token string">"刘"</span><span class="token punctuation">,</span> <span class="token number">1001</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span> <span class="token number">123</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"HSP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="6wzj3ZWVEHqvzfsXmtf7xv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"set="</span> <span class="token operator">+</span> set<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="cebhwMhCgtBMexKvu7SjcM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. LinkedHashSet 加入顺序和取出元素/数据的顺序一致</span>
<span class="token comment">//2. LinkedHashSet 底层维护的是一个LinkedHashMap(是HashMap的子类)</span>
<span class="token comment">//3. LinkedHashSet 底层结构 (数组table+双向链表)</span>
<span class="token comment">//4. 添加第一次时，直接将 数组table 扩容到 16 ,存放的结点类型是 LinkedHashMap$Entry</span>
<span class="token comment">//5. 数组是 HashMap$Node[] 存放的元素/数据是 LinkedHashMap$Entry类型</span>
<span class="token comment">/*
//继承关系是在内部类完成.
static class Entry&lt;K,V> extends HashMap.Node&lt;K,V> {
Entry&lt;K,V> before, after;
Entry(int hash, K key, V value, Node&lt;K,V> next) {
super(hash, key, value, next);
}
}
*/</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Customer</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
<span class="token keyword">private</span> int no<span class="token punctuation">;</span></pre></div></code-block><code-block id="q8YgnGwDDsiuCWqVWKc5LW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Customer</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span> int no</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">no</span> <span class="token operator">=</span> no<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="3mV7Sg2A3ec9kZkz2pncu2" class="wolai-block"><span class="inline-wrap">12.2.2.3 TreeSet</span></h4><h4 id="sJ5gLex6DiSFRnu5U1aipX" class="wolai-block"><span class="inline-wrap">底层机制：</span></h4><ol class="wolai-block"><li id="r6ceCDFPMWCiJRjueQKRD2"><div class="marker"></div><span class="inline-wrap">TreeSet()构造器需传入 Comparator 接口的匿名内部类，因为底层 Comparable&lt;? super K&gt; k =
(Comparator&lt;? super K&gt;) key;
若没有传入，则需要把传入的类实现 Comparable 接口</span></li><li id="fEH1UBLKRqNpmY4e2PFQc8"><div class="marker"></div><span class="inline-wrap">若按照 compare 方法比较 value 相同则无法加入 value</span></li></ol><code-block id="1DLSvqvT53zaGZwbkmrMED" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeSet_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="4J4uHVgDgdkfnMBQDzh4Nr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 当我们使用无参构造器，创建TreeSet时，默认按字母排序</span>
<span class="token comment">//2. 老师希望添加的元素，按照字符串大小来排序</span>
<span class="token comment">//3. 使用TreeSet 提供的一个构造器，可以传入一个比较器(匿名内部类)</span>
<span class="token comment">// 并指定排序规则</span>
<span class="token comment">//4. 简单看看源码</span></pre></div></code-block><code-block id="cdonNk3VxcpM5mUBHYQMrw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">/*</span></pre></div></code-block><ol class="wolai-block"><li id="gcFej7yfM5eePm7t4A5Zn9"><div class="marker"></div><span class="inline-wrap">构造器把传入的比较器对象，赋给了 TreeSet 的底层的 TreeMap 的属性 this.comparator</span></li></ol><code-block id="xyv55kRYRsWRZqsHv9iFYz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">TreeMap</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Comparator</span><span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token constant">K</span><span class="token operator">></span> comparator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">comparator</span> <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><ol class="wolai-block"><li id="mZg4sEkcSFnidvEgwpKyz7"><div class="marker"></div><span class="inline-wrap">在 调用 treeSet.add(&quot;tom&quot;), 在底层会执行到</span></li></ol><code-block id="o1Mkcjw8kLyJhkQc1chwM1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cpr <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//cpr 就是我们的匿名内部类(对象)</span>
<span class="token keyword control-flow">do</span> <span class="token punctuation">{</span>
parent <span class="token operator">=</span> t<span class="token punctuation">;</span>
<span class="token comment">//动态绑定到我们的匿名内部类(对象)compare</span>
cmp <span class="token operator">=</span> cpr<span class="token punctuation">.</span><span class="token method function property-access">compare</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
t <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token property-access">left</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>
t <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token property-access">right</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">else</span> <span class="token comment">//如果相等，即返回0,这个Key就没有加入</span>
<span class="token keyword control-flow">return</span> t<span class="token punctuation">.</span><span class="token method function property-access">setValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>t <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">*</span><span class="token operator">/</span></pre></div></code-block><code-block id="jtJz4jE1815V6Q18uYuQ1u" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// TreeSet treeSet = new TreeSet();</span>
<span class="token maybe-class-name">TreeSet</span> treeSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeSet</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> int <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">Object</span> o1<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> o2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//下面 调用String的 compareTo方法进行字符串大小比较</span>
<span class="token comment">//如果老韩要求加入的元素，按照⻓度大小排序</span>
<span class="token comment">//return ((String) o2).compareTo((String) o1);</span></pre></div></code-block><h2 id="a7WvKXrLkMA9JkoMVSXNvQ" class="wolai-block"><span class="inline-wrap">12.3 Map</span></h2><h4 id="36Md43RGefLxWBjD6iVe7m" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="iMxGJ2ipwdCyBFU6c3g5rW"><div class="marker"></div><span class="inline-wrap">Map 与 Collection 井列存在，用于保存具有映射关系的数据</span></li><li id="joUGaK1LyMbLstqf9ZB9Yr"><div class="marker"></div><span class="inline-wrap"><b>Map 中的 key 和 value 可以是任何引用类型的数据，会封装到 HashMap$Node 对象中</b></span></li><li id="ehVtQADXwcYBZFfRcPwBKB"><div class="marker"></div><span class="inline-wrap">Map 中的 key 不允许重复，原因和 HashSet 一样</span></li><li id="6aXv2P4xta69HEmEqVK5t4"><div class="marker"></div><span class="inline-wrap">Map 中的 value 可以重复</span></li><li id="fUtG4Gzidf5oQGEm6DvxdE"><div class="marker"></div><span class="inline-wrap">Map 的 key 可以为 null，value 也可以为 null，key 为 null 只有能有一个，value 为 null 可以为多个</span></li><li id="f4zfHNWCLWdha9bGrKwW7r"><div class="marker"></div><span class="inline-wrap">常用 String 类作为 Map 的 key</span></li><li id="xuMaGg1hXnNFPGGb2KCfmb"><div class="marker"></div><span class="inline-wrap">key 和 value 之间存在单向一对一关系，即通过指定的 key 总能找到对应的 value</span></li><li id="d4nt38BJuee1LodLD7zcbU"><div class="marker"></div><span class="inline-wrap">Map 存放数据的 key-value 示意图，一对 k-y 是放在一个 Node 中的，有因为 Node 实现了 Entry 接口</span></li></ol><h4 id="pt2eKu32jah5i8QLqc3MEc" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="papC6Ev15EmjBRdmCV7raU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>put：添加
remove：根据键删除映射关系
<span class="token keyword">get</span>：根据键获取值
size：获取元素个数</pre></div></code-block><code-block id="4YvMeirdrDYEQjRAZDv7Ew" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">)</span> o1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">)</span> o2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//添加数据.</span>
treeSet<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span>
treeSet<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"sp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
treeSet<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3</span></pre></div></code-block><code-block id="eSQMsLaFNjwo6Hp9v98Tru" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"treeSet="</span> <span class="token operator">+</span> treeSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="cDaa4ZqaH2YTMXEj1tMYHe" class="wolai-block wolai-text"><div><span class="inline-wrap">isEmpty：判断个数是否为 0</span></div></div><div id="9EnbS2TYjGypV3HHQVu1iy" class="wolai-block wolai-text"><div><span class="inline-wrap">clear：清除</span></div></div><div id="kCBuABxzjY13J9jSkgNxgy" class="wolai-block wolai-text"><div><span class="inline-wrap">containskey：查找键是否存在</span></div></div><code-block id="wYGvERLFe3QKxVbWXH1C9C" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapMethod</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//演示map接口常用方法</span></pre></div></code-block><code-block id="87g4MLCo2YbrBsjqvgT6q4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"邓超"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"邓超"</span><span class="token punctuation">,</span> <span class="token string">"孙俪"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//替换-> 一会分析源码</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"王宝强"</span><span class="token punctuation">,</span> <span class="token string">"⻢蓉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"宋喆"</span><span class="token punctuation">,</span> <span class="token string">"⻢蓉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"刘令博"</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">"刘亦菲"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"鹿晗"</span><span class="token punctuation">,</span> <span class="token string">"关晓彤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"hsp"</span><span class="token punctuation">,</span> <span class="token string">"hsp的老婆"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="obD9ZPvu8A3ZuKdVd5FxrG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"map="</span> <span class="token operator">+</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="74Jq2Ppiq6wf8ThK3ADkep" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// remove:根据键删除映射关系</span>
map<span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"map="</span> <span class="token operator">+</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// get：根据键获取值</span>
<span class="token known-class-name class-name">Object</span> val <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">"鹿晗"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"val="</span> <span class="token operator">+</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// size:获取元素个数</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"k-v="</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token method function property-access">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// isEmpty:判断个数是否为 0</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token method function property-access">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F</span>
<span class="token comment">// clear:清除k-v</span>
<span class="token comment">//map.clear();</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"map="</span> <span class="token operator">+</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// containsKey:查找键是否存在</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"结果="</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token method function property-access">containsKey</span><span class="token punctuation">(</span><span class="token string">"hsp"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//T</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="byNEumvTMWttd7do1ARG5U" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
<span class="token keyword">private</span> int num<span class="token punctuation">;</span></pre></div></code-block><code-block id="wuXajTwiS2oeWxWnfCavQK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Book</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span> int num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">num</span> <span class="token operator">=</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="7PHRhrD3eW7K1bCxJtNdS2" class="wolai-block"><span class="inline-wrap">遍历方式：</span></h4><ol class="wolai-block"><li id="6zDrmFjApUyC4fwwSEXM75"><div class="marker"></div><span class="inline-wrap">先取出 所有的 Key , 通过 Key 取出对应的 Value</span></li><li id="5dLUfPWVkab8Z9Vi2dMV2L"><div class="marker"></div><span class="inline-wrap">把所有的 values 取出</span></li><li id="pFyBmq3NY6h5Rte9KscPq8"><div class="marker"></div><span class="inline-wrap">通过 EntrySet 来获取 k-v</span></li></ol><code-block id="7XeWs9xtweRJ3wjCD7e9rw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MapFor</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="qtRNcUe9rxqTUVA1fb6SKx" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"邓超"</span><span class="token punctuation">,</span> <span class="token string">"孙俪"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"王宝强"</span><span class="token punctuation">,</span> <span class="token string">"⻢蓉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"宋喆"</span><span class="token punctuation">,</span> <span class="token string">"⻢蓉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"刘令博"</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">"刘亦菲"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"鹿晗"</span><span class="token punctuation">,</span> <span class="token string">"关晓彤"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="drD9cHZNgHMR1QLvmsqxsq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//第一组: 先取出 所有的Key , 通过Key 取出对应的Value</span>
<span class="token known-class-name class-name">Set</span> keyset <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token method function property-access">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(1) 增强for</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"---第一种方式-------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> key <span class="token operator">:</span> keyset<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//(2) 迭代器</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"----第二种方式--------"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Iterator</span> iterator <span class="token operator">=</span> keyset<span class="token punctuation">.</span><span class="token method function property-access">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token method function property-access">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">Object</span> key <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> map<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="ituDvcd5pQPQ6bZ2UcooTi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//第二组: 把所有的values取出</span>
<span class="token maybe-class-name">Collection</span> values <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token method function property-access">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//这里可以使用所有的Collections使用的遍历方法</span>
<span class="token comment">//(1) 增强for</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"---取出所有的value 增强for----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> value <span class="token operator">:</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//(2) 迭代器</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"---取出所有的value 迭代器----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Iterator</span> iterator2 <span class="token operator">=</span> values<span class="token punctuation">.</span><span class="token method function property-access">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>iterator2<span class="token punctuation">.</span><span class="token method function property-access">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">Object</span> value <span class="token operator">=</span> iterator2<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="oVJ1Qxza2VLUfTahQcdwcA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><h3 id="axVqdAmpwrwuujX4CCsyQn" class="wolai-block"><span class="inline-wrap">12.3.1 HashMap ⭐</span></h3><h4 id="uSeMMk1KhwzF4RSaHyR7qT" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="a68aUEbAqsV4eD7ZSBnT6U"><div class="marker"></div><span class="inline-wrap">HashMap 是 Map 接口使用频率最高的实现类</span></li><li id="c5CtRYmQW6L3N5X8a63cut"><div class="marker"></div><span class="inline-wrap">Hashap 是以 key-val 对的方式来存储数据(HashMap$Node 类型）</span></li><li id="aJw25xvNNPMMGN3xwsqUK2"><div class="marker"></div><span class="inline-wrap"><b>key 不能重复，但是值可以重复，允许使用 null 和 null 值</b></span></li><li id="eFv7fT4U7B5DMAVyDDPLbC"><div class="marker"></div><span class="inline-wrap"><b>如果添加相同的 key，则会覆盖原来的 key-val ，等同于修改（key 不会替换，val 会替换）</b></span></li><li id="3J2shQnCEv7gMHsJe9ie3b"><div class="marker"></div><span class="inline-wrap">与 HashSet 一样，不保证映射的顺序，因为底层是以 hash 表的方式来存储的(jdk8 的 hashMap 底层 数组
＋链表＋红黑树）</span></li><li id="bAQ6k5x7yHcqebmieZcS3X"><div class="marker"></div><span class="inline-wrap">HashMap 没有实现同步，因此是线程不安全的，方法没有做同步互斥的操作，没有 synchronized</span></li></ol><h4 id="rFtCe8fyhLNsCQKk8yoNg1" class="wolai-block"><span class="inline-wrap">底层机制和源码剖析：</span></h4><ol class="wolai-block"><li id="gkFrnnP2G3u4w3Kz1ejKZp"><div class="marker"></div><span class="inline-wrap">扩容机制和 Hashset 相同</span></li><li id="eRmkc7CyumTZbPW4vGpZAr"><div class="marker"></div><span class="inline-wrap">HashMap 底层维护了 Node 类型的数组 table，默认为 null</span></li><li id="rUuzTu9LEWSkFo36Ze77Lt"><div class="marker"></div><span class="inline-wrap">当创建对象时，将加载因子(loadfactor)初始化为 0.75</span></li><li id="dVN9zFyrTmkdBhvX2VroZg"><div class="marker"></div><span class="inline-wrap">当添加 key-val 时，通过 key 的哈希值得到在 table 的索引。然后判断该索引处是否有元素，如果没有元素
直接添加。如果该索引处有元素，继续判断该元素的 key 是否和准备加入的 key 相等，如果相等，则直接
替换 val：如果不相等需要判断是树结构还是链表结构，做出相应处理。如果添加时发现容量不够，则需
要扩容</span></li><li id="ryseHogMuR2XAyuEcFNYgk"><div class="marker"></div><span class="inline-wrap">第 1 次添加，则需要扩容 table 容量为 16 ，临界值(threshold)为 12</span></li><li id="dnfJC5JH4XUyfWVtF29W8u"><div class="marker"></div><span class="inline-wrap">以后再扩容，则需要扩容 table 容量为原来的 2 倍，临界值为原来的 2 倍,即 24 ，依次类推</span></li></ol><code-block id="xAd38X9itAtpqhN95N4Ueb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//第三组: 通过EntrySet 来获取 k-v</span>
<span class="token known-class-name class-name">Set</span> entrySet <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token method function property-access">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// EntrySet&lt;Map.Entry&lt;K,V>></span>
<span class="token comment">//(1) 增强for</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"----使用EntrySet 的 for增强(第 3 种)----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> entry <span class="token operator">:</span> entrySet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//将entry 转成 Map.Entry</span>
<span class="token known-class-name class-name">Map</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Entry</span></span> m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Map</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Entry</span></span><span class="token punctuation">)</span> entry<span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token method function property-access">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> m<span class="token punctuation">.</span><span class="token method function property-access">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//(2) 迭代器</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"----使用EntrySet 的 迭代器(第 4 种)----"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Iterator</span> iterator3 <span class="token operator">=</span> entrySet<span class="token punctuation">.</span><span class="token method function property-access">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>iterator3<span class="token punctuation">.</span><span class="token method function property-access">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">Object</span> entry <span class="token operator">=</span> iterator3<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//System.out.println(next.getClass());//HashMap$Node -实现-></span>
<span class="token known-class-name class-name">Map</span><span class="token punctuation">.</span><span class="token method function property-access"><span class="token maybe-class-name">Entry</span></span> <span class="token punctuation">(</span>getKey<span class="token punctuation">,</span>getValue<span class="token punctuation">)</span>
<span class="token comment">//向下转型 Map.Entry</span>
<span class="token known-class-name class-name">Map</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Entry</span></span> m <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Map</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Entry</span></span><span class="token punctuation">)</span> entry<span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token method function property-access">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> m<span class="token punctuation">.</span><span class="token method function property-access">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><ol class="wolai-block"><li id="jVARLMWh5CmKJhFJ5JDUiX"><div class="marker"></div><span class="inline-wrap">在 Java8 中，如果一条链表的元素个数超过 TREEIFY THRESHOLD（默认是 8 ），并且
table 的大小＞=MIN TREEIFY CAPACITY（默认 64),就会进行树化（红黑树）</span></li></ol><code-block id="6kuHY6rhCGvXgBpRi96d76" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HashMapSource1</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">HashMap</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"java"</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"php"</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ok</span>
map<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"java"</span><span class="token punctuation">,</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//替换value</span></pre></div></code-block><code-block id="uK6sQdsUSrp6mKjrdCfezq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"map="</span> <span class="token operator">+</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span></pre></div></code-block><code-block id="3G9XCa3FLvPUz74GJfRzeM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">/*老韩解读HashMap的源码+图解</span></pre></div></code-block><ol class="wolai-block"><li id="deDQ8SwVwiJPvnZGVptzcJ"><div class="marker"></div><span class="inline-wrap">执行构造器 new HashMap()
初始化加载因子 loadfactor = 0.75
HashMap$Node[] table = null</span></li><li id="2aP1U9o3o6HpE64WQerGft"><div class="marker"></div><span class="inline-wrap">执行 put 调用 hash 方法，计算 key 的 hash 值 (h = key.hashCode()) ^ (h &gt;&gt;&gt;</span></li><li id="wnbQjY7a78S4qJrqB6uSwA"><div class="marker"></div><span class="inline-wrap">public V put(K key, V value) {//K = &quot;java&quot; value = 10
return putVal(hash(key), key, value, false, true);
}</span></li><li id="tf88zFVPRx75LeRa6tDRKu"><div class="marker"></div><span class="inline-wrap">执行 putVal
final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
boolean evict) {
Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;//辅助变量
//如果底层的 table 数组为 null, 或者 length =0 , 就扩容到 16
if ((tab = table) == null || (n = tab.length) == 0)
n = (tab = resize()).length;
//取出 hash 值对应的 table 的索引位置的 Node, 如果为 null, 就直接把加入的 k-v
//, 创建成一个 Node ,加入该位置即可
if ((p = tab[i = (n - 1) &amp; hash]) == null)
tab[i] = newNode(hash, key, value, null);
else {
Node&lt;K,V&gt; e; K k;//辅助变量
// 如果 table 的索引位置的 key 的 hash 相同和新的 key 的 hash 值相同，
// 并 满足(table 现有的结点的 key 和准备添加的 key 是同一个对象 || equals
返回真)</span></li></ol><div id="jquEK7pVw5Bh9FZ8LaeEz4" class="wolai-block wolai-text"><div><span class="inline-wrap">// 就认为不能加入新的 k-v
if (p.hash == hash &amp;&amp;
((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))
e = p;
else if (p instanceof TreeNode)//如果当前的 table 的已有的 Node
是红黑树，就按照红黑树的方式处理
e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key,
value);
else {
//如果找到的结点，后面是链表，就循环比较
for (int binCount = 0; ; ++binCount) {//死循环
if ((e = p.next) == null) {//如果整个链表，没有和他相
同,就加到该链表的最后
p.next = newNode(hash, key, value, null);
//加入后，判断当前链表的个数，是否已经到 8 个，到 8 个，后
//就调用 treeifyBin 方法进行红黑树的转换
if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1
for 1st
treeifyBin(tab, hash);
break;
}
if (e.hash == hash &amp;&amp; //如果在循环比较过程中，发现有相
同,就 break,就只是替换 value
((k = e.key) == key || (key != null &amp;&amp;
key.equals(k))))
break;
p = e;
}
}
if (e != null) { // existing mapping for key
V oldValue = e.value;
if (!onlyIfAbsent || oldValue == null)
e.value = value; //替换，key 对应 value
afterNodeAccess(e);
return oldValue;
}
}
++modCount;//每增加一个 Node ,就 size++
if (++size &gt; threshold[12-24-48])//如 size &gt; 临界值，就扩容
resize();
afterNodeInsertion(evict);
return null;
}</span></div></div><ol class="wolai-block"><li id="11Dcz7XZZwTb5db519S5kC"><div class="marker"></div><span class="inline-wrap">关于树化(转成红黑树)
//如果 table 为 null ,或者大小还没有到 64 ，暂时不树化，而是进行扩容.
//否则才会真正的树化 -&gt; 剪枝
final void treeifyBin(Node&lt;K,V&gt;[] tab, int hash) {
int n, index; Node&lt;K,V&gt; e;</span></li></ol><h3 id="i2gkadiZMhCxLEGv5cFiS4" class="wolai-block"><span class="inline-wrap">12.3.2 Hashtable</span></h3><h4 id="9q5bPM4f6yCGUEftF9XAJC" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="u2R3XCYdvEPYwoT8E52SJk" class="wolai-block"><span class="inline-wrap">1. 存放的元素是键值对：即 K-V</span></h4><ol class="wolai-block"><li id="tVkSj6XtGa3StXzqAyM3MW"><div class="marker"></div><span class="inline-wrap">hashtable 的键和值都不能为 null， 否则会抛出 NulPointerException</span></li><li id="hFF8cAK5HCTqKmZUogz4Nx"><div class="marker"></div><span class="inline-wrap">hashTable 使用方法基本上和 HashMap 一样</span></li><li id="h1PAEJVsLSAcVdZj7jvg8c"><div class="marker"></div><span class="inline-wrap">hashTable 是线程安全的(synchronized)，hashMap 是线程不安全的</span></li></ol><h4 id="pnsCVWDB7FLzKKs3HiQG5k" class="wolai-block"><span class="inline-wrap">底层机制：</span></h4><ol class="wolai-block"><li id="dBMe7PQuqMGm4MPa1Lnbyi"><div class="marker"></div><span class="inline-wrap">底层有数组 Hashtable$Entry[] 初始化大小为 11</span></li><li id="w41LJXoJNP8PofsWtAeHg8"><div class="marker"></div><span class="inline-wrap">临界值 threshold 8 = 11 * 0.75</span></li><li id="nMfW2iMPRKo9kxCFkionnx"><div class="marker"></div><span class="inline-wrap">扩容: 按照自己的扩容机制来进行即可</span></li><li id="tkeBSidyKYAEnbgW5EZY4r"><div class="marker"></div><span class="inline-wrap">执行方法 addEntry(hash, key, value, index); 添加 K-V 封装到 Entry</span></li><li id="5vgV3ooYHG3uRDZhepzFoA"><div class="marker"></div><span class="inline-wrap">当 if (count &gt;= threshold) 满足时，就进行扩容</span></li><li id="x84stiWs9iTCJnzYfbJMdQ"><div class="marker"></div><span class="inline-wrap">按照 int newCapacity = (oldCapacity &lt;&lt; 1) + 1;的大小扩容</span></li></ol><h4 id="6p7iAn37S79rC7oCaPG58Y" class="wolai-block"><span class="inline-wrap">Hashtable 和 HashMapd:</span></h4><h3 id="8XoZd7taT5Wex3hnVqL5xf" class="wolai-block"><span class="inline-wrap">12.3.3 LinkedHashMap</span></h3><h3 id="5n5wx7YQKnZRgehzpD7REZ" class="wolai-block"><span class="inline-wrap">12.3.4. TreeMap</span></h3><h4 id="6ZVqEnQnfar4g5pWwDVQfK" class="wolai-block"><span class="inline-wrap">底层机制和源码剖析：</span></h4><ol class="wolai-block"><li id="ouo5nrL6zU9sV9ZcQfNt19"><div class="marker"></div><span class="inline-wrap">若按照 compare 方法比较 key 相同则无法加入 value 值</span></li></ol><code-block id="pycc2gjhBZxS6cyNWTnA6D" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword null nil">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token constant">MIN_TREEIFY_CAPACITY</span><span class="token punctuation">)</span>
<span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">*</span><span class="token operator">/</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="9QKcaXRzUFx64H6iojx8kE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TreeMap_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="c2kANreHQEyWFNaRb2VVhr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//使用默认的构造器，创建TreeMap, 是字母排序</span>
<span class="token comment">/*
要求：按照传入的 k(String) 的大小进行排序
*/</span>
<span class="token comment">// TreeMap treeMap = new TreeMap();</span>
<span class="token maybe-class-name">TreeMap</span> treeMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
@<span class="token maybe-class-name">Override</span></pre></div></code-block><div id="7Y9GGbyafLW3fYnj9sj1zQ" class="wolai-block wolai-text"><div><span class="inline-wrap">public int compare(Object o1, Object o2) {
//按照传入的 k(String) 的大小进行排序
//按照 K(String) 的⻓度大小排序
//return ((String) o2).compareTo((String) o1);
return ((String) o2).length() - ((String) o1).length();
}
});
treeMap.put(&quot;jack&quot;, &quot;杰克&quot;);
treeMap.put(&quot;tom&quot;, &quot;汤姆&quot;);
treeMap.put(&quot;kristina&quot;, &quot;克瑞斯提诺&quot;);
treeMap.put(&quot;smith&quot;, &quot;斯密斯&quot;);
treeMap.put(&quot;hsp&quot;, &quot;韩顺平&quot;);//加入不了</span></div></div><div id="dBEifCT63riVuCXaaTJMqz" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(&quot;treemap=&quot; + treeMap);</span></div></div><div id="faZVfoYfXKUqieZ27Pq3ed" class="wolai-block wolai-text"><div><span class="inline-wrap">/*
解读源码：</span></div></div><ol class="wolai-block"><li id="kyp11Ycx9pnzHQj4MVtkdc"><div class="marker"></div><span class="inline-wrap">构造器. 把传入的实现了 Comparator 接口的匿名内部类(对象)，传给给 TreeMap 的
comparator
public TreeMap(Comparator&lt;? super K&gt; comparator) {
this.comparator = comparator;
}</span></li><li id="nzUfvg254woKknwcn3RV1S"><div class="marker"></div><span class="inline-wrap">调用 put 方法
2.1 第一次添加, 把 k-v 封装到 Entry 对象，放入 root
Entry&lt;K,V&gt; t = root;
if (t == null) {
compare(key, key); // type (and possibly null) check</span></li></ol><div id="eS2MJorAqhS7ujTgkeXyJX" class="wolai-block wolai-text"><div><span class="inline-wrap">root = new Entry&lt;&gt;(key, value, null);
size = 1;
modCount++;
return null;
}
2.2 以后添加
Comparator&lt;? super K&gt; cpr = comparator;
if (cpr != null) {
do { //遍历所有的 key , 给当前 key 找到适当位置
parent = t;
cmp = cpr.compare(key, t.key);//动态绑定到我们的匿名内部类的
compare
if (cmp &lt; 0)
t = t.left;
else if (cmp &gt; 0)
t = t.right;
else //如果遍历过程中，发现准备添加 Key 和当前已有的 Key 相等，就不添
加
return t.setValue(value);
} while (t != null);
}</span></div></div><h3 id="pncdxJ5k6kkZaDt1784tY8" class="wolai-block"><span class="inline-wrap">12.3.5. Properties</span></h3><h4 id="3c5zmRtazxcXf7ihP8nw1i" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="cy7Vtf6LGLL3nsQhZxeF8w"><div class="marker"></div><span class="inline-wrap">Properties 类继承 Hashtable 类，实现了 Map 接口，也是使用一种简直对的形式保存数据</span></li><li id="es9VLK9xjpvYYwpDxzqjaG"><div class="marker"></div><span class="inline-wrap">使用特点和 Hashtable 类似</span></li><li id="4bCsS9k334wntDK4tD5u5T"><div class="marker"></div><span class="inline-wrap">Properties 还可以用于 从 xxx.properties 文件中，加载数据到 Properties 类对象井进行读取和修改</span></li><li id="3mZMypFTxC4X7c5aKLqCEg"><div class="marker"></div><span class="inline-wrap">xxx.properties 文件通常作为配置文件</span></li></ol><h2 id="5sjqGw8aSf2PvX7wAxU2vy" class="wolai-block"><span class="inline-wrap">12.4 Collections</span></h2><h4 id="gEWThqA3uPuVQERuqqzrKW" class="wolai-block"><span class="inline-wrap">*/</span></h4><h4 id="3PBp99oLShG5HR2SUUgko1" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="c17eDKSyCY1ZonnuxnTBsg" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="aejmyjwQLEgUHU8krJH4DP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Properties_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="tpWrsDUTGJXPBqUkNzFCsv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. Properties 继承 Hashtable</span>
<span class="token comment">//2. 可以通过 k-v 存放数据，当然key 和 value 不能为 null</span>
<span class="token comment">//增加</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//properties.put(null, "abc");//抛出 空指针异常</span>
<span class="token comment">//properties.put("abc", null); //抛出 空指针异常</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"john"</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//k-v</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"lucy"</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"lic"</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"lic"</span><span class="token punctuation">,</span> <span class="token number">88</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果有相同的key ， value被替换</span></pre></div></code-block><code-block id="sL1bANA5BLyRGPYngc6vk6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"properties="</span> <span class="token operator">+</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="ufvUXynXzY9Xuw7RvAAMVA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//通过k 获取对应值</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>properties<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">"lic"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//88</span></pre></div></code-block><code-block id="hgiGwneN9MhhbdHKVyHDjY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//删除</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token string">"lic"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"properties="</span> <span class="token operator">+</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7sjHJ7TDrTaTVTM2Uzk8hx" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//修改</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">put</span><span class="token punctuation">(</span><span class="token string">"john"</span><span class="token punctuation">,</span> <span class="token string">"约翰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"properties="</span> <span class="token operator">+</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="kagDWysFapqg9AU8ziUNtA" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="cFdARtbT41xSicaQ4HN7xj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Collections</span> 是一个操作 <span class="token known-class-name class-name">Set</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">List</span></span> 和 <span class="token known-class-name class-name">Map</span> 等集合的工具类
<span class="token maybe-class-name">Collections</span> 中提供了一系列静态的方法对集合元素进行排序、查询和修改等操作</pre></div></code-block><h4 id="hCSTv5wmyhfGLBgFBGmaPk" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><h4 id="4LDPysErZuyaBQ6U73yPkt" class="wolai-block"><span class="inline-wrap">排序操作：</span></h4><code-block id="9FaNsstZA86X94FXoHXZyd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">reverse</span> <span class="token punctuation">(</span><span class="token maybe-class-name">List</span><span class="token punctuation">)</span>：反转List中元素顺序
<span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token maybe-class-name">List</span><span class="token punctuation">)</span>：对 <span class="token maybe-class-name">List</span> 集合元素进行随机排序
<span class="token function">sort</span><span class="token punctuation">(</span><span class="token maybe-class-name">List</span><span class="token punctuation">)</span>：根据元素的自然顺序对指定 <span class="token maybe-class-name">List</span> 集合元素按升序排序
<span class="token function">sort</span><span class="token punctuation">(</span><span class="token maybe-class-name">List</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Comparator</span><span class="token punctuation">)</span>：根据指定的 <span class="token maybe-class-name">Comparator</span> 产生的顺序对 <span class="token maybe-class-name">List</span> 集合元素进行排序
<span class="token function">swap</span> <span class="token punctuation">(</span><span class="token maybe-class-name">List</span><span class="token punctuation">,</span> int<span class="token punctuation">,</span>int<span class="token punctuation">)</span>：将指定 list 集合中的 i处元素和j处元素进行交换
查找替换：
<span class="token known-class-name class-name">Object</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token maybe-class-name">Collection</span><span class="token punctuation">)</span>：根据元素的自然顺序，返回给定集合中的最大元素
<span class="token known-class-name class-name">Object</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token maybe-class-name">Collection</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Comparator</span><span class="token punctuation">)</span>：根据 <span class="token maybe-class-name">Comparator</span> 指定的顺序，返回给定集合中的最大元
素
<span class="token known-class-name class-name">Object</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token maybe-class-name">Collection</span><span class="token punctuation">)</span>
<span class="token known-class-name class-name">Object</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token maybe-class-name">Collection</span><span class="token punctuation">,</span> <span class="token maybe-class-name">Comparator</span><span class="token punctuation">)</span>
int <span class="token function">frequency</span><span class="token punctuation">(</span><span class="token maybe-class-name">Collection</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">)</span>：返回指定集合中指定元素的出现次数
<span class="token keyword">void</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token maybe-class-name">List</span> dest<span class="token punctuation">,</span> <span class="token maybe-class-name">List</span> src<span class="token punctuation">)</span>：将src中的内容复制到dest中
boolean <span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token maybe-class-name">List</span> list<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> oldVal<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> newVal<span class="token punctuation">)</span>：使用新值替换 <span class="token maybe-class-name">List</span> 对象的所有旧值</pre></div></code-block><code-block id="szf6TEwzrR1Mt2b5JG4DX5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Collections_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="3paqxqdGekggPBC5PVVsCA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//创建ArrayList 集合，用于测试.</span>
<span class="token maybe-class-name">List</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"smith"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"king"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"milan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="ikAwb5LSaf5BxZQ629vqAU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// reverse(List)：反转 List 中元素的顺序</span>
<span class="token maybe-class-name">Collections</span><span class="token punctuation">.</span><span class="token method function property-access">reverse</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// shuffle(List)：对 List 集合元素进行随机排序</span>
<span class="token comment">// for (int i = 0; i &lt; 5; i++) {</span>
<span class="token comment">// Collections.shuffle(list);</span>
<span class="token comment">// System.out.println("list=" + list);</span>
<span class="token comment">// }</span></pre></div></code-block><code-block id="nXrMzrjLSLLK1vu4eNenqj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// sort(List)：根据元素的自然顺序对指定 List 集合元素按升序排序</span>
<span class="token maybe-class-name">Collections</span><span class="token punctuation">.</span><span class="token method function property-access">sort</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"自然排序后"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div id="3mGt1KySCWfp1vEKLPaG4i" class="wolai-block wolai-text"><div><span class="inline-wrap">// sort(List，Comparator)：根据指定的 Comparator 产生的顺序对 List 集合元
素进行排序
//我们希望按照 字符串的⻓度大小排序
Collections.sort(list, new Comparator() {
@Override
public int compare(Object o1, Object o2) {
//可以加入校验代码.
return ((String) o2).length() - ((String) o1).length();
}
});
System.out.println(&quot;字符串⻓度大小排序=&quot; + list);
// swap(List，int， int)：将指定 list 集合中的 i 处元素和 j 处元素进行交换</span></div></div><div id="4vyFAdtg4AZ5pg1TtZXBoJ" class="wolai-block wolai-text"><div><span class="inline-wrap">//比如
Collections.swap(list, 0 , 1 );
System.out.println(&quot;交换后的情况&quot;);
System.out.println(&quot;list=&quot; + list);</span></div></div><div id="7bQ4bpwjxATwsqrTobnosi" class="wolai-block wolai-text"><div><span class="inline-wrap">//Object max(Collection)：根据元素的自然顺序，返回给定集合中的最大元素
System.out.println(&quot;自然顺序最大元素=&quot; + Collections.max(list));
//Object max(Collection，Comparator)：根据 Comparator 指定的顺序，返回
给定集合中的最大元素
//比如，我们要返回⻓度最大的元素
Object maxObject = Collections.max(list, new Comparator() {
@Override
public int compare(Object o1, Object o2) {
return ((String)o1).length() - ((String)o2).length();
}
});
System.out.println(&quot;⻓度最大的元素=&quot; + maxObject);</span></div></div><div id="2wMryHqqhi15XMSK1c6qy3" class="wolai-block wolai-text"><div><span class="inline-wrap">//Object min(Collection)
//Object min(Collection，Comparator)
//上面的两个方法，参考 max 即可</span></div></div><div id="ivw81NYdshULGX6QvPZYY7" class="wolai-block wolai-text"><div><span class="inline-wrap">//int frequency(Collection，Object)：返回指定集合中指定元素的出现次数
System.out.println(&quot;tom 出现的次数=&quot; + Collections.frequency(list,
&quot;tom&quot;));</span></div></div><div id="w4XYc7eykBCShPkVoLKrUF" class="wolai-block wolai-text"><div><span class="inline-wrap">//void copy(List dest,List src)：将 src 中的内容复制到 dest 中</span></div></div><div id="p6R6gEZyLMTy9zJZbWkCBE" class="wolai-block wolai-text"><div><span class="inline-wrap">ArrayList dest = new ArrayList();
//为了完成一个完整拷⻉，我们需要先给 dest 赋值，大小和 list.size()一样
for(int i = 0 ; i &lt; list.size(); i++) {
dest.add(&quot;&quot;);
}
//拷⻉
Collections.copy(dest, list);</span></div></div><h2 id="vosUzvfeNMTUD9Ee5pCFat" class="wolai-block"><span class="inline-wrap">12.5 总结 ⭐⭐</span></h2><h4 id="itMXP25nqWATQBRm1FKZQT" class="wolai-block"><span class="inline-wrap">选择集合：</span></h4><h4 id="tE91AS14v5XX7qwUSNmrYv" class="wolai-block"><span class="inline-wrap">先判断存储的类型（一组对象[单列]或一组键值对[双列]）</span></h4><code-block id="mxfLgNPX3XnAjnCTagJU8r" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>一组对象<span class="token punctuation">[</span>单列<span class="token punctuation">]</span>： <span class="token maybe-class-name">Collection接口</span>
允许重复：List
增删多：LinkedList <span class="token punctuation">[</span>底层维护双向链表<span class="token punctuation">]</span>
改查多：ArrayList <span class="token punctuation">[</span>底层維护 <span class="token known-class-name class-name">Object</span>类型的可变数组<span class="token punctuation">]</span>
不允许重复：<span class="token known-class-name class-name">Set</span>
无序：HashSet <span class="token punctuation">[</span><span class="token function">底层是HashMap，维护了一个哈希表，即</span><span class="token punctuation">(</span>数组＋链表＋红黑树<span class="token punctuation">)</span><span class="token punctuation">]</span>
排序：Treeset <span class="token punctuation">[</span><span class="token punctuation">]</span>
插入和取出顺序一致：LinkedHashSet <span class="token punctuation">[</span>底层维护数组＋双向链表<span class="token punctuation">]</span>
一组键<span class="token punctuation">[</span>值对双列<span class="token punctuation">]</span>：<span class="token known-class-name class-name">Map</span>
键无序：HashMap <span class="token punctuation">[</span>底层是：哈希表 jdk7：数组＋链表，jdk8<span class="token operator">:</span>数组＋链表＋红黑树<span class="token punctuation">]</span>
键排序：TreeMap <span class="token punctuation">[</span><span class="token punctuation">]</span>
键插入和取出顺序一致：LinkedHashMap
读取文件 <span class="token maybe-class-name">Propertie</span></pre></div></code-block><h1 id="43j99x1BCtCjBGd1VdLYVW" class="wolai-block"><span class="inline-wrap">13 泛型</span></h1><h2 id="czLKhbevef7BhHWa1mU6Q8" class="wolai-block"><span class="inline-wrap">13.1 泛型</span></h2><h4 id="3ohHyekZrj4VtzFUr4Nw2B" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="uUvCRjEnpG1mpMcTvZzfgM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>泛型又称参数化类型（接收数据类型的数据类型），是Jdk5<span class="token punctuation">.</span><span class="token number">0</span>出现的新特性<span class="token punctuation">,</span>解决数据类型的安全性问题
在类声明或实例化时只要指定好需要的具体的类型即可
<span class="token maybe-class-name">Java泛型可以保证如果程序在编译时没有发出警告，运行时就不会产生ClassCastException异常。同</span>
时，代码更加简洁、健壮</pre></div></code-block><code-block id="4uFPcxi5MMZmHctVrEMCBe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"dest="</span> <span class="token operator">+</span> dest<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7qWQho2dbdLJeisKP85Bqp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//boolean replaceAll(List list，Object oldVal，Object newVal)：使用新</span>
值替换 <span class="token maybe-class-name">List</span> 对象的所有旧值
<span class="token comment">//如果list中，有tom 就替换成 汤姆</span>
<span class="token maybe-class-name">Collections</span><span class="token punctuation">.</span><span class="token method function property-access">replaceAll</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token string">"汤姆"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list替换后="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="qrznT9wPmE8Fd69umjiyaw" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="7sXrhWoKMizR5DiZgpntAX" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="7PS3fqfgjzD1QJkrfzjYD8" class="wolai-block"><span class="inline-wrap">1. 泛型只能是引用类型</span></h4><h4 id="cSKr69Qf85u663tQxxTLUj" class="wolai-block"><span class="inline-wrap">2. 在给泛型指定具体类型后，可以传入该类型或者其子类类型</span></h4><ol class="wolai-block"><li id="fgGWf8kZ4Fsgjd9JyeBnSe"><div class="marker"></div><span class="inline-wrap">List list3 = new ArrayList()：默认给它的 泛型是[&lt;E ＞ E 就是 Object]</span></li></ol><h4 id="2n7hVQbeDydrUt4oqwtK9s" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="nC5jerqX9z3zdwCYNhZ1rE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">interface</span> 接口 <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> 类 <span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span><span class="token constant">V</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span></pre></div></code-block><code-block id="a7SEwFmyvcYCktqnd6RvQW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">在类名后指定类型参数的值</span><span class="token punctuation">(</span>类型<span class="token punctuation">)</span><span class="token operator">:</span>
<span class="token maybe-class-name">List</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">String</span><span class="token operator">></span> strList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">String</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lterator<span class="token operator">&lt;</span><span class="token maybe-class-name">Customer</span><span class="token operator">></span> iterator <span class="token operator">=</span> customers<span class="token punctuation">.</span><span class="token method function property-access">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="o2GgHxbVbCwnFYwNmCm7qK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GenericExercise02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Employee</span><span class="token operator">></span> employees <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Employee</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
employees<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">,</span> <span class="token number">2000</span> <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyDate</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
employees<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token number">2000</span> <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyDate</span><span class="token punctuation">(</span> <span class="token number">6</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
employees<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">,</span> <span class="token number">3000</span> <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyDate</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
employees<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token string">"jack"</span><span class="token punctuation">,</span> <span class="token number">2000</span> <span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">MyDate</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="ctG7EXS2UBMw2vPH9tNTgy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>employees<span class="token punctuation">.</span><span class="token method function property-access">sort</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Comparator</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Employee</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//传入匿名内部类接口重写compare方法</span>
@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> int <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Employee</span> o1<span class="token punctuation">,</span> <span class="token maybe-class-name">Employee</span> o2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>o1 <span class="token keyword">instanceof</span> <span class="token class-name">Employee</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>o2 <span class="token keyword">instanceof</span> <span class="token class-name">Employee</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"类型不正确"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">return</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">return</span> o1<span class="token punctuation">.</span><span class="token method function property-access">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">compareTo</span><span class="token punctuation">(</span>o2<span class="token punctuation">.</span><span class="token method function property-access">getBirthday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在MyDate内重写</span>
compareTo方法
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="54GcskZX7cj1JhBaBe8BkD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Employee</span> employee <span class="token operator">:</span> employees<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="dbj8Rp27ai5KFQb345ankZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
<span class="token keyword">private</span> int sal<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token maybe-class-name">MyDate</span> birthday<span class="token punctuation">;</span></pre></div></code-block><code-block id="9z7XJWxCN6NxsZEXKX3kch" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Employee</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span> int sal<span class="token punctuation">,</span> <span class="token maybe-class-name">MyDate</span> birthday</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><div id="7Cd9fRWZuDYasjVczGAKiT" class="wolai-block wolai-text"><div><span class="inline-wrap">this.name = name;
this.sal = sal;
this.birthday = birthday;
}</span></div></div><div id="cj95zHnP85CLmw5qw88RsK" class="wolai-block wolai-text"><div><span class="inline-wrap">public String getName() {
return name;
}</span></div></div><div id="5JSZbGnh6egsTgmX9MtF5e" class="wolai-block wolai-text"><div><span class="inline-wrap">public void setName(String name) {
this.name = name;
}</span></div></div><div id="qtgvwaN5ynRLDgX5ic6gTh" class="wolai-block wolai-text"><div><span class="inline-wrap">public int getSal() {
return sal;
}</span></div></div><div id="fgprD3cQ7M8Q6Yi31cDUJD" class="wolai-block wolai-text"><div><span class="inline-wrap">public void setSal(int sal) {
this.sal = sal;
}</span></div></div><div id="eehps56FsEfPt14vC23eVG" class="wolai-block wolai-text"><div><span class="inline-wrap">public MyDate getBirthday() {
return birthday;
}</span></div></div><div id="a5U5CsVxvaJSMLTW9B9wsX" class="wolai-block wolai-text"><div><span class="inline-wrap">public void setBirthday(MyDate birthday) {
this.birthday = birthday;
}</span></div></div><div id="wupVRraBW1ffSiA1man8hR" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public String toString() {
return &quot;Employee{&quot; +
&quot;name=&#39;&quot; + name + &#39;&#39;&#39; +
&quot;, sal=&quot; + sal +
&quot;, birthday=&quot; + birthday +
&#39;}&#39;;
}
}</span></div></div><div id="kS5gj6g6fu6duXBJkS2H53" class="wolai-block wolai-text"><div><span class="inline-wrap">class MyDate implements Comparable</span></div></div><div id="c2ofvzXJ1XZJ5ZroFFp2B6" class="wolai-block wolai-text"><div><span class="inline-wrap"> {</span></div></div><div id="vMbLVXDYSr5PnzKSpmUyvm" class="wolai-block wolai-text"><div><span class="inline-wrap">private int year;
private int month;
private int day;</span></div></div><div id="o5LViHsJuSjWAsNfrfSKtM" class="wolai-block wolai-text"><div><span class="inline-wrap">public MyDate(int year, int month, int day) {
this.year = year;
this.month = month;
this.day = day;</span></div></div><h2 id="kyuJNGJx8GKbu4Me3vkcN6" class="wolai-block"><span class="inline-wrap">13.2 自定义泛型</span></h2><h4 id="8nFk4QXW2Gw8PCPkLNx73J" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="qMwdrVfUWbboHe9vqhw56o" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> year<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="sV3BxddqJn1Kuy5P2XbewK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setYear</span><span class="token punctuation">(</span><span class="token parameter">int year</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">year</span> <span class="token operator">=</span> year<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="m4ceLBorimiT4uxt3zqQc2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> month<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="bfUH15KMAFFXHbUVF23xFJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMonth</span><span class="token punctuation">(</span><span class="token parameter">int month</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">month</span> <span class="token operator">=</span> month<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="uCNrsPAs98xYvXEDfPqWnq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> day<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="tKTLHwDmMzuo8d3mhbwkEs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDay</span><span class="token punctuation">(</span><span class="token parameter">int day</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">day</span> <span class="token operator">=</span> day<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="kVXdNkPY5qFjeJuZbaqwcF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token string">"MyDate{"</span> <span class="token operator">+</span>
<span class="token string">"year="</span> <span class="token operator">+</span> year <span class="token operator">+</span>
<span class="token string">", month="</span> <span class="token operator">+</span> month <span class="token operator">+</span>
<span class="token string">", day="</span> <span class="token operator">+</span> day <span class="token operator">+</span>
<span class="token string">'}'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2F6v6qRMezyLAxHTG6tmcb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> int <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">MyDate</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int yearMinus <span class="token operator">=</span> year <span class="token operator">-</span> o<span class="token punctuation">.</span><span class="token property-access">year</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>yearMinus <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> yearMinus<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
int monthMinus <span class="token operator">=</span> month <span class="token operator">-</span> o<span class="token punctuation">.</span><span class="token property-access">month</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>monthMinus <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> monthMinus<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">return</span> day <span class="token operator">-</span> o<span class="token punctuation">.</span><span class="token property-access">day</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="6QdDN56zSusj8ZJ23Vbv4T" class="wolai-block"><span class="inline-wrap">13.2 自定义泛型</span></h2><h3 id="aAdj5eiSs5bJWzokH7yxjQ" class="wolai-block"><span class="inline-wrap">13.2.1 泛型类</span></h3><h4 id="d82eyPaeJWmideHs78rwrY" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="tzBtDMGxKKDiPEnw2vbjkp" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="4nCHNnLbeDn9MpSPzSmT6Z" class="wolai-block"><span class="inline-wrap">1. 普通成员可以使用泛型（属性、方法）</span></h4><h4 id="nLGNJ4DNXd9mkBqaL8XH3E" class="wolai-block"><span class="inline-wrap">2. 使用泛型的数组，不能初始化</span></h4><h4 id="5nxKZhVHwz1vZ82Jzh6eG3" class="wolai-block"><span class="inline-wrap">3. 静态方法中不能使用类的泛型</span></h4><h4 id="brFM5Dhem6Bq5dBZzk6BFF" class="wolai-block"><span class="inline-wrap">4. 泛型类的类型，是在创建对象时确定的（因为创建对象时，需要指定确定类型）</span></h4><ol class="wolai-block"><li id="15x3xZd6VoxvgcWRN2ugU8"><div class="marker"></div><span class="inline-wrap">如果在创建对象时，没有指定类型，默认为 Object</span></li></ol><code-block id="uFKutX4SAFntGob1xuMcG5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> 类名<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">R</span><span class="token spread operator">...</span><span class="token operator">></span><span class="token punctuation">{</span>
成员<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="iWSHeckmiBoFpBcgenDQHG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomGeneric_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="cR2hbKcXAeV2UnYx4jhJ2x" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//T=Double, R=String, M=Integer</span>
<span class="token maybe-class-name">Tiger</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Double</span><span class="token punctuation">,</span><span class="token known-class-name class-name">String</span><span class="token punctuation">,</span><span class="token maybe-class-name">Integer</span><span class="token operator">></span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiger</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"john"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token method function property-access">setT</span><span class="token punctuation">(</span><span class="token number">10.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//OK</span>
<span class="token comment">//g.setT("yy"); //错误，类型不对</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Tiger</span> g2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tiger</span><span class="token punctuation">(</span><span class="token string">"john~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK T=Object R=Object M=Object</span>
g2<span class="token punctuation">.</span><span class="token method function property-access">setT</span><span class="token punctuation">(</span><span class="token string">"yy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//OK ,因为 T=Object "yy"=String 是Object子类</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"g2="</span> <span class="token operator">+</span> g2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="9EbiJSNADWBmVxoZ5mkaFY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="roZtawTfbYy9oBkbUGfn5Q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. Tiger 后面泛型，所以我们把 Tiger 就称为自定义泛型类</span>
<span class="token comment">//2, T, R, M 泛型的标识符, 一般是单个大写字母</span>
<span class="token comment">//3. 泛型标识符可以有多个.</span>
<span class="token comment">//4. 普通成员可以使用泛型 (属性、方法)</span>
<span class="token comment">//5. 使用泛型的数组，不能初始化</span>
<span class="token comment">//6. 静态方法中不能使用类的泛型</span>
<span class="token keyword">class</span> <span class="token class-name">Tiger</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">M</span><span class="token operator">></span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span>
<span class="token constant">R</span> r<span class="token punctuation">;</span> <span class="token comment">//属性使用到泛型</span>
<span class="token constant">M</span> m<span class="token punctuation">;</span>
<span class="token constant">T</span> t<span class="token punctuation">;</span>
<span class="token comment">//因为数组在new 不能确定T的类型，就无法在内存开空间</span>
<span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ts<span class="token punctuation">;</span></pre></div></code-block><div id="m4afMQBkYT2PDWhXWTv8ce" class="wolai-block wolai-text"><div><span class="inline-wrap">public Tiger(String name) {
this.name = name;
}</span></div></div><div id="oFEtwxDvqsfS5Z1FgHuPz1" class="wolai-block wolai-text"><div><span class="inline-wrap">public Tiger(R r, M m, T t) {//构造器使用泛型</span></div></div><div id="kq6q4yq9Ss2aEgZVF1W5tp" class="wolai-block wolai-text"><div><span class="inline-wrap">this.r = r;
this.m = m;
this.t = t;
}</span></div></div><div id="6pzHJWhK5pukNxsMcHz93C" class="wolai-block wolai-text"><div><span class="inline-wrap">public Tiger(String name, R r, M m, T t) {//构造器使用泛型
this.name = name;
this.r = r;
this.m = m;
this.t = t;
}</span></div></div><div id="x8icFz8VMWXVz7fnp2uPLB" class="wolai-block wolai-text"><div><span class="inline-wrap">//因为静态是和类相关的，在类加载时，对象还没有创建
//所以，如果静态方法和静态属性使用了泛型，JVM 就无法完成初始化
// static R r2;
// public static void m1(M m) {
//
// }</span></div></div><div id="7AUn2suHmDtAdzA58NmiqG" class="wolai-block wolai-text"><div><span class="inline-wrap">//方法使用泛型</span></div></div><div id="rC9fxm4xEnDpoJX9ohBy4v" class="wolai-block wolai-text"><div><span class="inline-wrap">public String getName() {
return name;
}</span></div></div><div id="doTRMYoKcJsvnj2o5SG91y" class="wolai-block wolai-text"><div><span class="inline-wrap">public void setName(String name) {
this.name = name;
}</span></div></div><div id="4EsTTrZvEhZv5xQ9zJfpK4" class="wolai-block wolai-text"><div><span class="inline-wrap">public R getR() {
return r;
}</span></div></div><div id="q5cPArLtSBivVeQT6C3NTS" class="wolai-block wolai-text"><div><span class="inline-wrap">public void setR(R r) {//方法使用到泛型
this.r = r;
}</span></div></div><div id="7dZ5RyWu9wnS9wfYnpW9uR" class="wolai-block wolai-text"><div><span class="inline-wrap">public M getM() {//返回类型可以使用泛型.
return m;
}</span></div></div><div id="7oP6m7EbcU8pQemyiw9iHo" class="wolai-block wolai-text"><div><span class="inline-wrap">public void setM(M m) {
this.m = m;</span></div></div><h3 id="6DZqxhEVo9Wo1foQ562rbN" class="wolai-block"><span class="inline-wrap">13.2.2 泛型接口</span></h3><h4 id="6gFfTVF2DjVMRqAagQW67b" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="brkGFHx65kpJdHJ2Rd75Gs" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="n6SGWMabKzsSiyEjpv9USz" class="wolai-block"><span class="inline-wrap">1. 静态成员不能使用泛型</span></h4><h4 id="51bsiKVn4TBMuoRphe9bfp" class="wolai-block"><span class="inline-wrap">2. 泛型接口的类型，在继承接口或者实现接口时确定</span></h4><ol class="wolai-block"><li id="w8ya141wXrSq9mHrYKrXHH"><div class="marker"></div><span class="inline-wrap">没有指定类型，默认为 Object</span></li></ol><h4 id="2dDYRmxSvSku2wejJKUTpQ" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="kxR27LNtURFoKBNCaQktbE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token constant">T</span> <span class="token function">getT</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="dG3yTdC9XoUWqBZa2Ts6Zy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setT</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">T</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">t</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="ij8FF3wbvRsgpP8ofZWv6U" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token string">"Tiger{"</span> <span class="token operator">+</span>
<span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
<span class="token string">", r="</span> <span class="token operator">+</span> r <span class="token operator">+</span>
<span class="token string">", m="</span> <span class="token operator">+</span> m <span class="token operator">+</span>
<span class="token string">", t="</span> <span class="token operator">+</span> t <span class="token operator">+</span>
<span class="token string">", ts="</span> <span class="token operator">+</span> <span class="token maybe-class-name">Arrays</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span>ts<span class="token punctuation">)</span> <span class="token operator">+</span>
<span class="token string">'}'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="rmguFsp5p9dxnUzvbTdNRH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">interface</span> 接口名<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">R</span><span class="token spread operator">...</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">}</span></pre></div></code-block><code-block id="8VQ6ji8XJPYknS9KC9AtaA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomInterfaceGeneric</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="pJYACoPi1VeTCAbPZ7FNFY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="fXwQKXff3xmL89Qw3SZzHL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token doc-comment comment">/**
* 泛型接口使用的说明
* 1. 接口中，静态成员也不能使用泛型
* 2. 泛型接口的类型, 在继承接口或者实现接口时确定
* 3. 没有指定类型，默认为Object
*/</span></pre></div></code-block><h4 id="mcxCxoerM6Tu7pNppZMaF9" class="wolai-block"><span class="inline-wrap">//在继承接口 指定泛型接口的类型</span></h4><div id="cp12W28NoDDTNMPXDfQamy" class="wolai-block wolai-text"><div><span class="inline-wrap">interface IA extends IUsb&lt;String, Double&gt; {</span></div></div><div id="9rALcRUigynr3KZBUNeFe8" class="wolai-block wolai-text"><div><span class="inline-wrap">}
//当我们去实现 IA 接口时，因为 IA 在继承 IUsu 接口时，指定了 U 为 String R 为 Double
//，在实现 IUsu 接口的方法时，使用 String 替换 U, 是 Double 替换 R
class AA implements IA {</span></div></div><div id="rV3qJfbBSitTuKrv9hrTzX" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public Double get(String s) {
return null;
}
@Override
public void hi(Double aDouble) {</span></div></div><div id="wjPi1hGHZSHJ2x3t1n9JTm" class="wolai-block wolai-text"><div><span class="inline-wrap">}
@Override
public void run(Double r1, Double r2, String u1, String u2) {</span></div></div><div id="83MaXRRmgpTZmcDQgBuQf3" class="wolai-block wolai-text"><div><span class="inline-wrap">}
}</span></div></div><div id="a9DvjjfdaqBBE1oANR7fzD" class="wolai-block wolai-text"><div><span class="inline-wrap">//实现接口时，直接指定泛型接口的类型
//给 U 指定 Integer 给 R 指定了 Float
//所以，当我们实现 IUsb 方法时，会使用 Integer 替换 U, 使用 Float 替换 R
class BB implements IUsb&lt;Integer, Float&gt; {</span></div></div><div id="sJKm69L3Wvk3LeG5UxB5R3" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public Float get(Integer integer) {
return null;
}</span></div></div><div id="1LttEqGopx47KafvKaqJWF" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public void hi(Float aFloat) {</span></div></div><div id="qgsi4JoN5ZLf52povf2Nv9" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="5Su61KqkSJq6NcHo8jvYVA" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public void run(Float r1, Float r2, Integer u1, Integer u2) {</span></div></div><div id="66ZaoAFdXMoZn1cUaxt4jG" class="wolai-block wolai-text"><div><span class="inline-wrap">}
}
//没有指定类型，默认为 Object
//建议直接写成 IUsb&lt;Object,Object&gt;
class CC implements IUsb { //等价 class CC implements IUsb&lt;Object,Object&gt; {
@Override
public Object get(Object o) {
return null;
}</span></div></div><h3 id="66V7P3QoK9hbon3vDFDs31" class="wolai-block"><span class="inline-wrap">13.2.3 泛型方法</span></h3><h4 id="jU9UbZFdSE9SB4bKLni2g3" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="2TK11iR9a77wb9uc39f5fR" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="cMhJLd34toGmCb59gd5SS7" class="wolai-block"><span class="inline-wrap">1. 泛型方法，可以定义在普通类中，也可以定义在泛型类中</span></h4><h4 id="xhx4ciebLunFPtz2CCSDan" class="wolai-block"><span class="inline-wrap">2. 当泛型方法被调用时，类型会确定</span></h4><ol class="wolai-block"><li id="vwmQBNyRHAt18gKBjEFw1p"><div class="marker"></div><span class="inline-wrap">public void eat(E e) {},
修饰符后没有&lt;T,R...＞ eat
方法不是泛型方法，而是使用了泛型</span></li></ol><code-block id="gQJrGBT1skj9dBW23wYxKd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">Object</span> o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">Object</span> r1<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> r2<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> u1<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span> u2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="b1dSVgGLjjoRmLnkus5tyB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vSaSWofS8Dtjiyqm7S5iH7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">interface</span> <span class="token class-name">IUsb</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">></span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="cLKwgJjaVYZkm2FrkqckTQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int n <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
<span class="token comment">//U name; 不能这样使用</span></pre></div></code-block><code-block id="dCpoVa5G3sgoPhM6ToQiEQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//普通方法中，可以使用接口泛型</span>
<span class="token constant">R</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">U</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="vUKdaq3DAwUyuFu1i9uQPb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token constant">R</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="u2dPpyAf7nkYEBQ4supxhj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token constant">R</span> r1<span class="token punctuation">,</span> <span class="token constant">R</span> r2<span class="token punctuation">,</span> <span class="token constant">U</span> u1<span class="token punctuation">,</span> <span class="token constant">U</span> u2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="o5FanbY3GJmYxDDM17YDRZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//在jdk8 中，可以在接口中，使用默认方法, 也是可以使用泛型</span>
<span class="token keyword module">default</span> <span class="token constant">R</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">U</span> u</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="j6Qga554XZnckDTxTJM8Dh" class="wolai-block"><span class="inline-wrap">修饰符&lt;T,R...&gt;返回类型 方法名(参数列表){}</span></h4><code-block id="nKRXbFj3735V7hctLuh2jh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomMethodGeneric</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
car<span class="token punctuation">.</span><span class="token method function property-access">fly</span><span class="token punctuation">(</span><span class="token string">"宝⻢"</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当调用方法时，传入参数，编译器，就会确定类型</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"======="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
car<span class="token punctuation">.</span><span class="token method function property-access">fly</span><span class="token punctuation">(</span> <span class="token number">300</span> <span class="token punctuation">,</span> <span class="token number">100.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当调用方法时，传入参数，编译器，就会确定类型</span></pre></div></code-block><h2 id="4xQ2huC3ajT51dBbAMevCd" class="wolai-block"><span class="inline-wrap">13.3 泛型继承和通配符</span></h2><h4 id="gdBr2Q9wTpjBp2LRUzK6WB" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="t9npzT8ouLRSSNkV6JGTaP" class="wolai-block"><span class="inline-wrap">1. 泛型不具备继承性</span></h4><h4 id="tq6cJzvC9zX9qHKXsaiUTe" class="wolai-block"><span class="inline-wrap">2. &lt;?&gt;：支持任意泛型类型</span></h4><h4 id="rg2LQqbQ6uWKyggRXH34ZA" class="wolai-block"><span class="inline-wrap">//测试</span></h4><code-block id="dKom2KVJjDpiLweAwb1xSQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//T->String, R-> ArrayList</span>
<span class="token maybe-class-name">Fish</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">String</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ArrayList</span><span class="token operator">></span> fish <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fish</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fish<span class="token punctuation">.</span><span class="token method function property-access">hello</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">11.3</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2Ue3BeQgdFLJSJVLzVQNkX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//泛型方法，可以定义在普通类中, 也可以定义在泛型类中</span>
<span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span><span class="token comment">//普通类</span></pre></div></code-block><code-block id="v1qoyPeUuXeUvPUTofSZuE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//普通方法</span>
<span class="token punctuation">}</span>
<span class="token comment">//说明 泛型方法</span>
<span class="token comment">//1. &lt;T,R> 就是泛型</span>
<span class="token comment">//2. 是提供给 fly使用的</span>
<span class="token keyword">public</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">fly</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">T</span> t<span class="token punctuation">,</span> <span class="token constant">R</span> r</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//泛型方法</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//String</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Integer</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="buLuVUbBrUtLGGr4yHNtHF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Fish</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">R</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token comment">//泛型类</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//普通方法</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token punctuation">,</span><span class="token constant">M</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">eat</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">U</span> u<span class="token punctuation">,</span> <span class="token constant">M</span> m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//泛型方法</span></pre></div></code-block><code-block id="p61AeSZtu9Tu15NP5c2ywZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token comment">//说明</span>
<span class="token comment">//1. 下面hi方法不是泛型方法</span>
<span class="token comment">//2. 是hi方法使用了类声明的 泛型</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">T</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token comment">//泛型方法，可以使用类声明的泛型，也可以使用自己声明泛型</span>
<span class="token keyword">public</span><span class="token operator">&lt;</span><span class="token constant">K</span><span class="token operator">></span> <span class="token keyword">void</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">R</span> r<span class="token punctuation">,</span> <span class="token constant">K</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ArrayList</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Float</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="k4Adr5cWfiVpHeia5mbkhF" class="wolai-block wolai-text"><div><span class="inline-wrap">public class GenericExtends {
public static void main(String[] args) {</span></div></div><div id="wvcdgTuYZAR3zgXmNi8Xve" class="wolai-block wolai-text"><div><span class="inline-wrap">Object o = new String(&quot;xx&quot;);</span></div></div><div id="9U8tK1wk95ATdEpF8DMkB2" class="wolai-block wolai-text"><div><span class="inline-wrap">//泛型没有继承性
//List</span></div></div><div id="dDscnHXcpRmo1NvseaVkk7" class="wolai-block wolai-text"><div><span class="inline-wrap"> list = new ArrayList</span></div></div><div id="cbzcuoc6gLeodx2eFykoJw" class="wolai-block wolai-text"><div><span class="inline-wrap">();</span></div></div><div id="qt4UfGiwhHvvtfefgQ7ixo" class="wolai-block wolai-text"><div><span class="inline-wrap">//举例说明下面三个方法的使用
List</span></div></div><div id="8LCGxznCmjYhyn9pfaEGVu" class="wolai-block wolai-text"><div><span class="inline-wrap"> list1 = new ArrayList&lt;&gt;();
List</span></div></div><div id="qUjjH8faAUuAwH7Ewsh8aN" class="wolai-block wolai-text"><div><span class="inline-wrap"> list2 = new ArrayList&lt;&gt;();
List</span></div></div><div id="sU5Ls71jVnkpzLXwnvcwHo" class="wolai-block wolai-text"><div><span class="inline-wrap"> list3 = new ArrayList&lt;&gt;();
List</span></div></div><div id="rx93jYXyTR7siRv7ZrVte7" class="wolai-block wolai-text"><div><span class="inline-wrap"> list4 = new ArrayList&lt;&gt;();
List</span></div></div><div id="qk5PPQsdPqKcRX4kKws1Gq" class="wolai-block wolai-text"><div><span class="inline-wrap"> list5 = new ArrayList&lt;&gt;();</span></div></div><div id="8xNzJpY3NEYiP3oE5MSsp5" class="wolai-block wolai-text"><div><span class="inline-wrap">//如果是 List&lt;?&gt; c ，可以接受任意的泛型类型
printCollection1(list1);
printCollection1(list2);
printCollection1(list3);
printCollection1(list4);
printCollection1(list5);</span></div></div><div id="rUkzZU5U96jgeN27e6F7AM" class="wolai-block wolai-text"><div><span class="inline-wrap">//List&lt;? extends AA&gt; c： 表示 上限，可以接受 AA 或者 AA 子类
// printCollection2(list1);//×
// printCollection2(list2);//×
printCollection2(list3);//√
printCollection2(list4);//√
printCollection2(list5);//√</span></div></div><div id="eEuCjJBaTWshfjR349vQJc" class="wolai-block wolai-text"><div><span class="inline-wrap">//List&lt;? super AA&gt; c: 支持 AA 类以及 AA 类的父类，不限于直接父类
printCollection3(list1);//√
//printCollection3(list2);//×
printCollection3(list3);//√
//printCollection3(list4);//×
//printCollection3(list5);//×</span></div></div><h4 id="bRRdMUHJ6zRd6z6ehtrJu9" class="wolai-block"><span class="inline-wrap">//冒泡排序</span></h4><h4 id="pTQ4ME8mEUct5xkBb33L8E" class="wolai-block"><span class="inline-wrap">//插入排序</span></h4><h4 id="saeRM8wLVHoeE7iPiqkkj5" class="wolai-block"><span class="inline-wrap">//....</span></h4><h4 id="vfRPSaY7jNAUyhmfg7QKQ8" class="wolai-block"><span class="inline-wrap">}</span></h4><div id="8uBhVuoZmMDMZsQhzqMru5" class="wolai-block wolai-text"><div><span class="inline-wrap">//? extends AA 表示 上限，可以接受 AA 或者 AA 子类
public static void printCollection2(List&lt;? extends AA&gt; c) {
for (Object object : c) {
System.out.println(object);
}</span></div></div><h4 id="qs1NaxBKnaM8LqGzaiGhpQ" class="wolai-block"><span class="inline-wrap">例：</span></h4><h4 id="wqzrCGGDVMTzjEGDd9uFQd" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="2a5imGTVuXczkcK7JYpP6j" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//说明: List&lt;?> 表示 任意的泛型类型都可以接受</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printCollection1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">List</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> object <span class="token operator">:</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 通配符，取出时，就是Object</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="4HQHPm5ztFHLNq3ZqTh6Lu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//? super 子类类名AA:支持AA类以及AA类的父类，不限于直接父类，</span>
<span class="token comment">//规定了泛型的下限</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printCollection3</span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">List</span><span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token constant">AA</span><span class="token operator">></span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Object</span> object <span class="token operator">:</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="8UqiTQpGJF3RSKJD5iFLRe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">AA</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="5DPjqZwLjYjQ8Pvmm9BwnH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">BB</span> <span class="token keyword">extends</span> <span class="token class-name">AA</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="m3uMYmgPgq8mCGB33w9apK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">CC</span> <span class="token keyword">extends</span> <span class="token class-name">BB</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="78WRszornUBQYsfuupKpHb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeWork01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="mZpy5PyYUPgwW9hTmPV4Rm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">DAO</span><span class="token operator">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator">></span> dao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DAO</span><span class="token operator">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dao<span class="token punctuation">.</span><span class="token method function property-access">save</span><span class="token punctuation">(</span><span class="token string">"001"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">,</span><span class="token string">"jack"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dao<span class="token punctuation">.</span><span class="token method function property-access">save</span><span class="token punctuation">(</span><span class="token string">"002"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation">,</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dao<span class="token punctuation">.</span><span class="token method function property-access">save</span><span class="token punctuation">(</span><span class="token string">"003"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">,</span> <span class="token number">12</span> <span class="token punctuation">,</span><span class="token string">"mike"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">List</span><span class="token operator">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator">></span> list <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token method function property-access">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="4Lxks8bwPCb3YPoaNUM7wL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>dao<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token string">"002"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">14</span> <span class="token punctuation">,</span><span class="token string">"faker"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">List</span><span class="token operator">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator">></span> list1 <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token method function property-access">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>list1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="8xBo8e2wyja1vpA2yhdDPE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>dao<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span><span class="token string">"001"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">List</span><span class="token operator">&lt;</span><span class="token maybe-class-name">User</span><span class="token operator">></span> list2 <span class="token operator">=</span> dao<span class="token punctuation">.</span><span class="token method function property-access">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div id="mVQSY2vxzJmqiPQ7NVSMGJ" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(list2);
}
}</span></div></div><div id="9j7dc5uJiEfXGz4Vnv89Em" class="wolai-block wolai-text"><div><span class="inline-wrap">public class DAO</span></div></div><div id="7WkX951FXUhSncDQARG6hX" class="wolai-block wolai-text"><div><span class="inline-wrap"> {//泛型类
private Map&lt;String, T&gt; map = new HashMap&lt;&gt;();</span></div></div><div id="j7EdTsbxHciQtwKvmx4f4B" class="wolai-block wolai-text"><div><span class="inline-wrap">public T get(String id) {
return map.get(id);
}
public void update(String id,T entity) {
map.put(id, entity);
}
//返回 map 中存放的所有 T 对象
//遍历 map [k-v],将 map 的 所有 value(T entity),封装到 ArrayList 返回即可
public List</span></div></div><div id="nE7pHrhM28ai3YCfrdq9jX" class="wolai-block wolai-text"><div><span class="inline-wrap"> list() {
//创建 Arraylist
List</span></div></div><div id="nVTzHWbmKTRkH6wi4EFALT" class="wolai-block wolai-text"><div><span class="inline-wrap"> list = new ArrayList&lt;&gt;();</span></div></div><div id="qijsDHKuvFTphMuKovc3Yp" class="wolai-block wolai-text"><div><span class="inline-wrap">//遍历 map
Set</span></div></div><div id="hr53cNVi4idRzaJMYbZziG" class="wolai-block wolai-text"><div><span class="inline-wrap"> keySet = map.keySet();
for (String key : keySet) {
//map.get(key) 返回就是 User 对象-&gt;ArrayList
list.add(map.get(key));//也可以直接使用本类的 get(String id)
}</span></div></div><div id="4ynhAiYXEGwTy7enVifhHK" class="wolai-block wolai-text"><div><span class="inline-wrap">return list;
}
public void delete(String id) {
map.remove(id);
}
public void save(String id,T entity) {//把 entity 保存到 map
map.put(id, entity);
}
}</span></div></div><div id="66HoWvHzXk4nfcwfWVgGkf" class="wolai-block wolai-text"><div><span class="inline-wrap">public class User {
private int id;
private int age;
private String name;</span></div></div><div id="x8pmc5dG5c8JeQBER6WM1p" class="wolai-block wolai-text"><div><span class="inline-wrap">public User(int id, int age, String name) {
this.id = id;
this.age = age;
this.name = name;
}</span></div></div><div id="ePVVEf4x7e3wzfbGjcBxN3" class="wolai-block wolai-text"><div><span class="inline-wrap">public int getId() {</span></div></div><h1 id="sEvQid4a2NUcERyVHgVTwY" class="wolai-block"><span class="inline-wrap">14 GUI</span></h1><h2 id="9cpbKLof7vCAnB6QJr2GYz" class="wolai-block"><span class="inline-wrap">14.1 绘图</span></h2><h4 id="tTQV5vqXNHdPn9D2FwQdUe" class="wolai-block"><span class="inline-wrap">绘图原理：</span></h4><code-block id="ayym3vWf5qqWUJYp4Y2fE5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Component类提供了两个和绘图相关最重要的方法：</span></pre></div></code-block><ol class="wolai-block"><li id="jhj7Er9AN2b826XefogRXU"><div class="marker"></div><span class="inline-wrap">paint(Graphics g)绘制组件的外观</span></li><li id="w4F2vwoYaqmqkMjmXiMvhh"><div class="marker"></div><span class="inline-wrap">repaint()刷新组件的外观
当组件第一次在屏幕显示的时候,程序会自动的调用 paint0 方法来绘制组件，在以下情况 paintQ 将会被调
用：</span></li><li id="1XxAAW8VsrTJw4TgfJPAGB"><div class="marker"></div><span class="inline-wrap">窗口最小化,再最大化</span></li><li id="811Y6L1Co5gETvt5LFwSY4"><div class="marker"></div><span class="inline-wrap">窗口的大小发生变化</span></li><li id="dKzvtoutVt6BUH9yztWw6C"><div class="marker"></div><span class="inline-wrap">repaint 函数被调用</span></li></ol><code-block id="sw7RZpy1UGHzvFPg5FjA6u" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">return</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="rps4iCC2Qut9oL9X99KNYK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token parameter">int id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1kC4ffn8wdd9ofE1NmqfhN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> int <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6f8pEYAA4ewBmq1M5VJSVH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAge</span><span class="token punctuation">(</span><span class="token parameter">int age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="ruGctbDSAfaGnJuRPX9AAZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="mGc1dKAZMuoQbKLmZLxkJj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="nScRmWL1zPU2LiGgwcoup3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token string">"User{"</span> <span class="token operator">+</span>
<span class="token string">"id="</span> <span class="token operator">+</span> id <span class="token operator">+</span>
<span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>
<span class="token string">", name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>
<span class="token string">'}'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="reAn6142gFcUr4bZpYmabh" class="wolai-block"><span class="inline-wrap">Graphics 类：</span></h4><code-block id="bVDFPbLz57gDqQdoEoMjFE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>画直线 <span class="token function">drawLine</span><span class="token punctuation">(</span>int x1<span class="token punctuation">,</span>int yl<span class="token punctuation">,</span>int x2<span class="token punctuation">,</span>int y2<span class="token punctuation">)</span>
画矩形边框 <span class="token function">drawRect</span><span class="token punctuation">(</span>int x<span class="token punctuation">,</span> int y<span class="token punctuation">,</span> int width<span class="token punctuation">,</span> int height<span class="token punctuation">)</span>
画椭圆边框 <span class="token function">drawOval</span><span class="token punctuation">(</span>int x<span class="token punctuation">,</span> int y<span class="token punctuation">,</span> int width<span class="token punctuation">,</span> int height<span class="token punctuation">)</span>
<span class="token function">填充矩形fillRect</span><span class="token punctuation">(</span>int x<span class="token punctuation">,</span> int y<span class="token punctuation">,</span> int width<span class="token punctuation">,</span> int height<span class="token punctuation">)</span>
填充椭园 <span class="token function">fillOval</span><span class="token punctuation">(</span>int x<span class="token punctuation">,</span> int y<span class="token punctuation">.</span> <span class="token property-access">int</span> width<span class="token punctuation">,</span> int height<span class="token punctuation">)</span>
画图片 <span class="token function">drawlmage</span><span class="token punctuation">(</span><span class="token maybe-class-name">Image</span> img<span class="token punctuation">,</span> int x<span class="token punctuation">,</span> int y<span class="token punctuation">,</span> <span class="token spread operator">...</span><span class="token punctuation">)</span>
画字符串 <span class="token function">drawString</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> str<span class="token punctuation">,</span> int x<span class="token punctuation">,</span> inty<span class="token punctuation">)</span>
设置画笔的字体 <span class="token function">setFont</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Font</span> font<span class="token punctuation">)</span>
设置画笔的颜色 <span class="token function">setColor</span><span class="token punctuation">(</span><span class="token maybe-class-name">Color</span> c<span class="token punctuation">)</span></pre></div></code-block><h2 id="bs9PFaVLiBMKaidtCGLQWo" class="wolai-block"><span class="inline-wrap">14.2 事件控制</span></h2><h4 id="a4XwaxjTTYmoX9TU5EGomB" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="ro5tXXeZdZtUFAntkmdJr1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>java事件处理是采取“委派事件模型”。当事件发生时<span class="token punctuation">,</span>产生事件的对象<span class="token punctuation">,</span>会把此<span class="token string">"信息"</span>传递给"事件的监听者” 处
理，这里所说的<span class="token string">"信息"</span>实际上就是 java<span class="token punctuation">.</span><span class="token property-access">awt</span><span class="token punctuation">.</span><span class="token property-access">event</span> 事件类库里某个类所创建的对象，把它称为”事件的对象“</pre></div></code-block><h4 id="6EXaRtq7NswbNdHbyagK57" class="wolai-block"><span class="inline-wrap">深入理解：</span></h4><h4 id="n46YePnPqRUUjCSWQc4LnZ" class="wolai-block"><span class="inline-wrap">1. 事件源：事件源是一个产生事件的对象，比如按钮，窗口等</span></h4><h4 id="fXwDb62whPTUvncaT72TZD" class="wolai-block"><span class="inline-wrap">2. 事件：事件就是承载事件源状态改变时的对象，比如当键盘事件、鼠标事件、窗口事件等等，会生成一</span></h4><code-block id="rJorTAxgcQiuL3rerV7fVP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>个事件对象，该对家保存着当前事件很多信息，比如KeyEvent 对象有含有被按下键的Gode值。
java<span class="token punctuation">.</span><span class="token property-access">awt</span><span class="token punctuation">.</span><span class="token property-access">event包</span> 和javax<span class="token punctuation">.</span><span class="token property-access">swing</span><span class="token punctuation">.</span><span class="token property-access">event包中定义了各种事</span>
件类型</pre></div></code-block><ol class="wolai-block"><li id="4fS2ZBGxXhKJ5JzE71Fj67"><div class="marker"></div><span class="inline-wrap">事件类型：</span></li></ol><h4 id="k5eZqxSN3MZBfhE7F8vRvZ" class="wolai-block"><span class="inline-wrap">4. 事件监听噐号接口：</span></h4><code-block id="dDRju241F7Ttyb3EWHRdMt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token function">当事件源产生一个事件，可以传送给事件监听者处理Interfaces</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 事件监听者本质是一个类，该类实现了某个事件监听器接口比如前面我们案例中的MyPanle就是一个
类，它实现了
<span class="token function"><span class="token maybe-class-name">KeyListener接口，它就可以作为一个事件监听者，对接受到的事件进行处理</span></span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>事件监听器接口有多种，不同的事件监听器接口可以监听不同的事件 <span class="token function">一个类可以实现多个监听接口</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>这些接口在java<span class="token punctuation">.</span><span class="token property-access">awt</span><span class="token punctuation">.</span><span class="token property-access">event包和javax</span><span class="token punctuation">.</span><span class="token property-access">swing</span><span class="token punctuation">.</span><span class="token property-access">event包中定义，列出常用的事件监听器接口，查看jdk</span> 文
档聚集了</pre></div></code-block><h1 id="vy4DbTWpJ5PQr3h9t3CJbv" class="wolai-block"><span class="inline-wrap">15 线程(基础)</span></h1><h4 id="ba4mFQQU2aRnxEuYpHAcpH" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="omd983yKTiesnd4jTuwCoa" class="wolai-block"><span class="inline-wrap">线程由进程创建的，是进程的一个实体</span></h4><h4 id="sP2qz8j4yKKcL2LymV4eHQ" class="wolai-block"><span class="inline-wrap">一个进程可以拥有多个线程</span></h4><h4 id="rWGUauSoj8oV8RwezHnLmM" class="wolai-block"><span class="inline-wrap">单线程：同一个时刻，只允许执行一个线程</span></h4><h4 id="1sVe4CssWDAVd4ksHWdozP" class="wolai-block"><span class="inline-wrap">多线程：同一个时刻，可以执行多个线程</span></h4><h4 id="aChVQ3qE6HYefTbpgs1wkC" class="wolai-block"><span class="inline-wrap">并发：同一个时刻，多个任务交替执行，造成一种“貌似同时”的错觉</span></h4><code-block id="15aicLNc3AWXB7vW777g2L" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>并行：同一个时刻，多个任务同时执行，多核cpu可以实现并行</pre></div></code-block><h2 id="vxSGtMTY38G8APgANhQ2f6" class="wolai-block"><span class="inline-wrap">16.1 线程使用</span></h2><h2 id="pU71gGfJZCVaGbs4oMpaA7" class="wolai-block"><span class="inline-wrap">16.1.1 继承 Thread</span></h2><code-block id="1U4JpeChFukVHjXwdJuzC5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">InterruptedException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="rFLFHYCyfnYT8RUL7gRRzp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//创建Cat对象，可以当做线程使用</span>
<span class="token maybe-class-name">Cat</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="2pXNhh2AY8kSa6VopjZaDb" class="wolai-block"><span class="inline-wrap">//源码</span></h4><h4 id="7xzC4wr1hWj8W5t3zBfJa8" class="wolai-block"><span class="inline-wrap">/*</span></h4><h4 id="n9zfgQv5jgdxy2t5snidLX" class="wolai-block"><span class="inline-wrap">(1)</span></h4><div id="7tZAfp1wX3DsPKwDFWUoL3" class="wolai-block wolai-text"><div><span class="inline-wrap">public synchronized void start() {
start0();
}
(2)
//start0() 是本地方法，是 JVM 调用, 底层是 c/c++<span class="jill"></span>实现
//真正实现多线程的效果，是 start0(), 而不是 run
private native void start0();
*/</span></div></div><div id="k4WHBp7VkxGPqcj4p6UNUX" class="wolai-block wolai-text"><div><span class="inline-wrap">cat.start();//启动线程-&gt; 最终会执行 cat 的 run 方法</span></div></div><div id="mLiWyf5WSxnW6tt9NzLExG" class="wolai-block wolai-text"><div><span class="inline-wrap">//cat.run();//run 方法就是一个普通的方法, 没有真正的启动一个线程，就会把 run 方法执行完毕，才
向下执行
//说明: 当 main 线程启动一个子线程 Thread-0, 主线程不会阻塞, 会继续执行
//这时 主线程和子线程是交替执行..
System.out.println(&quot;主线程继续执行&quot; + Thread.currentThread().getName());//名字 main
for(int i = 0 ; i &lt; 60 ; i++) {
System.out.println(&quot;主线程 i=&quot; + i);
//让主线程休眠
Thread.sleep( 1000 );
}</span></div></div><div id="1y75yvxXYESj1pw72FwB6K" class="wolai-block wolai-text"><div><span class="inline-wrap">}
}</span></div></div><div id="6eaEYn75awa3Nqdf7N9PQm" class="wolai-block wolai-text"><div><span class="inline-wrap">//1. 当一个类继承了 Thread 类， 该类就可以当做线程使用
//2. 我们会重写 run 方法，写上自己的业务代码
//3. run Thread 类 实现了 Runnable 接口的 run 方法
/_
@Override
public void run() {
if (target != null) {
target.run();
}
}
_/</span></div></div><div id="sC9G5Exv8Q9szeL22WQnDW" class="wolai-block wolai-text"><div><span class="inline-wrap">class Cat extends Thread {</span></div></div><div id="x2aPwA4psPpSZ5yKhjg57V" class="wolai-block wolai-text"><div><span class="inline-wrap">int times = 0 ;
@Override
public void run() {//重写 run 方法，写上自己的业务逻辑</span></div></div><div id="iroY4WPxKj5pWx5exq75Z5" class="wolai-block wolai-text"><div><span class="inline-wrap">while (true) {
//该线程每隔 1 秒。在控制台输出 “喵喵, 我是小猫咪”</span></div></div><h3 id="o1ymaJHJEMCajRHEpe4Yih" class="wolai-block"><span class="inline-wrap">16.1.2 实现 Runnable</span></h3><code-block id="jE36WRbQ2ZKqYoDXPQufLT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"喵喵, 我是小猫咪"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>times<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 线程名="</span> <span class="token operator">+</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//让该线程休眠 1 秒 ctrl+alt+t</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>times <span class="token operator">==</span> <span class="token number">80</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span><span class="token comment">//当times 到80, 退出while, 这时线程也就退出..</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="xuuZkbfrngRb8rbLpwpQEP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//dog.start(); 这里不能调用start</span>
<span class="token comment">//创建了Thread对象，把 dog对象(实现Runnable),放入Thread</span>
<span class="token maybe-class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
thread<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="wRxMG1nzMnTwvV5VTAHtNg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// Tiger tiger = new Tiger();//实现了 Runnable</span>
<span class="token comment">// ThreadProxy threadProxy = new ThreadProxy(tiger);</span>
<span class="token comment">// threadProxy.start();</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="xfDG3fo5S67hQMb78VkRtD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2CHsAf3dYv1mqoddmCTsVG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Tiger</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="8huofNbbGQzjmweJcpBBbB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"老⻁嗷嗷叫...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1hSuCJWm1Jgjo4biFL5zhg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//线程代理类 , 模拟了一个极简的Thread类</span>
<span class="token keyword">class</span> <span class="token class-name">ThreadProxy</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span><span class="token comment">//你可以把Proxy类当做 ThreadProxy</span></pre></div></code-block><code-block id="iXJyHG5kGQq56RZjZGCdij" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token maybe-class-name">Runnable</span> target <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token comment">//属性，类型是 Runnable</span></pre></div></code-block><div id="w6TWAgYSoedFCLJRuPKNoh" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public void run() {
if (target != null) {
target.run();//动态绑定（运行类型 Tiger）
}
}</span></div></div><div id="v4U6FMNDoASLbBn8UFpwWr" class="wolai-block wolai-text"><div><span class="inline-wrap">public ThreadProxy(Runnable target) {
this.target = target;
}</span></div></div><div id="9no2289YmqVhodNGgS3cqW" class="wolai-block wolai-text"><div><span class="inline-wrap">public void start() {
start0();//这个方法时真正实现多线程方法
}</span></div></div><div id="8EZKCtfmvAoiPM3G9yNpwJ" class="wolai-block wolai-text"><div><span class="inline-wrap">public void start0() {
run();
}
}</span></div></div><div id="aKGyazcFBGeEVVHuvHA2TE" class="wolai-block wolai-text"><div><span class="inline-wrap">class Dog implements Runnable { //通过实现 Runnable 接口，开发线程</span></div></div><div id="rGuV9hk19FF5Jnic7yAoet" class="wolai-block wolai-text"><div><span class="inline-wrap">int count = 0 ;</span></div></div><div id="i63r9hJMZCiipmDY9TskVX" class="wolai-block wolai-text"><div><span class="inline-wrap">@Override
public void run() { //普通方法
while (true) {
System.out.println(&quot;小狗汪汪叫..hi&quot; + (++count) +
Thread.currentThread().getName());</span></div></div><div id="jSBUoFjG9tvYhL9uX9U8j3" class="wolai-block wolai-text"><div><span class="inline-wrap">//休眠 1 秒
try {
Thread.sleep( 1000 );
} catch (InterruptedException e) {
e.printStackTrace();
}</span></div></div><div id="s3bJJrYppmgjntJs5UWtjV" class="wolai-block wolai-text"><div><span class="inline-wrap">if (count == 10 ) {
break;
}
}
}
}</span></div></div><h4 id="5nVKKCzLZnUb1X1VsfEYEd" class="wolai-block"><span class="inline-wrap">对比：</span></h4><ol class="wolai-block"><li id="nTkPCN2ENeAVJhwqKMiCrh"><div class="marker"></div><span class="inline-wrap">java 的设计来看，通过继承 Thread 或者实现 Runnable 接口来创建线程本质上没有区别,从 jidk 帮助文档我
们可以看到 Thread 类本身就实现了 Runnable 接口</span></li><li id="uCEYoxYz6UrSzgwecwU6sm"><div class="marker"></div><span class="inline-wrap">实现 Runnable 接口方式更加适合多个线程共享一个资源的情况，并且避免了单继承的限制</span></li></ol><h4 id="jGHXHEbtERUxfsStPrKoTi" class="wolai-block"><span class="inline-wrap">线程退出：</span></h4><code-block id="wNk4M2ro1btZLX1zUxkTEd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadExit_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">InterruptedException</span> <span class="token punctuation">{</span>
<span class="token constant">T</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t1<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fbAwEjFAa4d4r71DTY4HKr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//如果希望main线程去控制t1 线程的终止, 必须可以修改 loop</span>
<span class="token comment">//让t1 退出run方法，从而终止 t1线程 -> 通知方式</span></pre></div></code-block><code-block id="cpYYBrVSiEmibBfXiLcXp7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//让主线程休眠 10 秒，再通知 t1线程退出</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"main线程休眠10s..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
t1<span class="token punctuation">.</span><span class="token method function property-access">setLoop</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6hbuPJyTHt6tdDoodAeRBb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
<span class="token keyword">private</span> int count <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token comment">//设置一个控制变量</span>
<span class="token keyword">private</span> boolean loop <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="wngbmdgWF8PXpsHjx9vBpo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>loop<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="gBsD63Xc5eCXhrwuZSJ3QL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">50</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 让当前线程休眠50ms</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"T 运行中...."</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="cqYX55qMDg3p9n3hFbFpmm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="x4gz4d8jp6GEupd33SMVAZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLoop</span><span class="token punctuation">(</span><span class="token parameter">boolean loop</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">loop</span> <span class="token operator">=</span> loop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="bSmxPCLU5KfobyANt5mrk8" class="wolai-block"><span class="inline-wrap">代理模式模拟：</span></h4><code-block id="dLWWnbmC6RPdqjqstc3r5K" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thread02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Dog</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//dog.start(); 这里不能调用start</span>
<span class="token comment">//创建了Thread对象，把 dog对象(实现Runnable),放入Thread</span>
<span class="token maybe-class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
thread<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="qJwXaNmfYFThwasoQyaJra" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// Tiger tiger = new Tiger();//实现了 Runnable</span>
<span class="token comment">// ThreadProxy threadProxy = new ThreadProxy(tiger);</span>
<span class="token comment">// threadProxy.start();</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="rv3cMyz8GifMCbAmA3WPbH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="3JvUsTCZpF3AiKLtQB6CnJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Tiger</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="5nijMz8hUvsmb8N7Yv3eUX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"老⻁嗷嗷叫...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="jad4SvJ8uwXeDVXeNFAqJz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//线程代理类 , 模拟了一个极简的Thread类</span>
<span class="token keyword">class</span> <span class="token class-name">ThreadProxy</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span><span class="token comment">//你可以把Proxy类当做 ThreadProxy</span></pre></div></code-block><code-block id="ejbhZm6FeS4DEZ5mUYesQj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token maybe-class-name">Runnable</span> target <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token comment">//属性，类型是 Runnable</span></pre></div></code-block><code-block id="pScqKNnZpMDcwaLG832qi9" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>target <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
target<span class="token punctuation">.</span><span class="token method function property-access">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//动态绑定（运行类型Tiger）</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="cpuAZaaLja1jktsJGdVgHe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">ThreadProxy</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Runnable</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">target</span> <span class="token operator">=</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vtF8gsQz8hxxv4nnzcnb7c" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这个方法时真正实现多线程方法</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="p7vAxeQtsDJoJ84UiXjfDe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">start0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="5h2t9SRdqErA3LBG1FqJsC" class="wolai-block"><span class="inline-wrap">16.2 线程方法</span></h2><h4 id="aVFjr4Q13Be7H14xvoTd4t" class="wolai-block"><span class="inline-wrap">常用方法 1 ：</span></h4><code-block id="bV3LVrFGPz6Sr21fW4erNz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>setName：设置线程名称，使之与参数 name 相同
getName：返回该线程的名称
start：使该线程开始执行<span class="token punctuation">;</span><span class="token maybe-class-name">Java</span> 虚拟机底层调用该线程的 start0方法
run ：调用线程对象 run 方法
setPriority：更改线程的优先级
getPriority：获取线程的优先级
sleep：在指定的毫秒数内让当前正在执行的线程休眠（暂停执行<span class="token punctuation">)</span>
interrupt：中断线程</pre></div></code-block><h4 id="4ahCNszWoodaScZvddjniq" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="71AqA9Ro23mJeeuymmJxx2" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="nM2RHq9Xx975pYD44vAYjt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span> <span class="token comment">//通过实现Runnable接口，开发线程</span></pre></div></code-block><code-block id="19Zr1VPtiRWiAwCw9Y6j7L" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int count <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span></pre></div></code-block><code-block id="p2g1ACMhrFv32S45f71vAx" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//普通方法</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"小狗汪汪叫..hi"</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">++</span>count<span class="token punctuation">)</span> <span class="token operator">+</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="n55DFneiYKSWcHuEdmGWkd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//休眠 1 秒</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="m9HMdNdRsCix6J8Nr1f7Uv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">break</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="psGfSMfRBai3PmBGvGg9ze" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadMethod01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">InterruptedException</span> <span class="token punctuation">{</span>
<span class="token comment">//测试相关的方法</span>
<span class="token constant">T</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token method function property-access">setName</span><span class="token punctuation">(</span><span class="token string">"老韩"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="1EJVvHXMmAa34mm85BiP5Q" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="2615AbnS44Sw32nwAWbzYB"><div class="marker"></div><span class="inline-wrap">start：底层会创建新的线程，调用 run，run 就是一个简单的方法调用，不会启动新线程</span></li><li id="cFh16H3DtriPg3DjUiwfxR"><div class="marker"></div><span class="inline-wrap">interrupt：中断线程，但并没有真正的结束线程，所以一般用于中断正在休眠线程</span></li><li id="6qsddqdLuwri4yDunkcnor"><div class="marker"></div><span class="inline-wrap">sleep：线程的静态方法，使当前线程休眠</span></li></ol><code-block id="suUNb8ShFBU4NTGe29BSms" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>t<span class="token punctuation">.</span><span class="token method function property-access">setPriority</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token constant">MIN_PRIORITY</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span>
t<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//启动子线程</span></pre></div></code-block><code-block id="jbEEUmPmRUjrTpckzagvW7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//主线程打印5 hi ,然后我就中断 子线程的休眠</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"hi "</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6ddmcdEMZLHKwx5XN1Qgjo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" 线程的优先级 ="</span> <span class="token operator">+</span> t<span class="token punctuation">.</span><span class="token method function property-access">getPriority</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1</span></pre></div></code-block><code-block id="1gfkuaXvomSvXQH2t4n8dz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>t<span class="token punctuation">.</span><span class="token method function property-access">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当执行到这里，就会中断 t线程的休眠.</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2CXTVGRHQca2QcHQbnaASj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">T</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span> <span class="token comment">//自定义的线程类</span>
@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//Thread.currentThread().getName() 获取当前线程的名称</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> " 吃包子
<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>" <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> " 休眠中
<span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">20000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20秒</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//当该线程执行到一个interrupt 方法时，就会catch 一个 异常, 可以加入自己</span>
的业务代码
<span class="token comment">//InterruptedException 是捕获到一个中断异常.</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> "被
interrupt了"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="b59Fg7RvBDPmZ4pZsmbv82" class="wolai-block"><span class="inline-wrap">常用方法 2:</span></h4><code-block id="vFYVo4XvPVCCozjVpMaKA1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">yield</span>：线程的礼让。让出Cpu，让其他线程执行，但礼让的时间不确定，所以也不一定礼让成功
join：线程的插队。插队的线程一旦插队成功，则肯定先执行完插入的线程所有的任</pre></div></code-block><h4 id="rfKX8mGxUmsPPw9NjrLtZb" class="wolai-block"><span class="inline-wrap">用户线程和守护线程：</span></h4><h4 id="7AFzjs1HxgHtxCnqu9y47y" class="wolai-block"><span class="inline-wrap">用户线程：也叫工作线程，当线程的任务执行完或通知方式结束</span></h4><h4 id="dHkNaogKPgfSK2h9BZegi1" class="wolai-block"><span class="inline-wrap">守护线程：一般是为工作线程服务的，当所有的用户线程结束，守护线程自动结束</span></h4><code-block id="kpp3w4ZzYJHwaw3Fpp7Z1U" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token maybe-class-name">True</span><span class="token punctuation">)</span>
常⻅的守护线程：垃圾回收机制</pre></div></code-block><code-block id="h5PctJPT6vSyHbyBxqHCME" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadMethod02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">InterruptedException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="eCvLw6sfXdxSX4uvaL4P5w" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">T2</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
t2<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="11ZjS6ZsbFzzAP39ozkG6w" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">20</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"主线程(小弟) 吃了 "</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">" 包子"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">5</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"主线程(小弟) 让 子线程(老大) 先吃"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//join, 线程插队</span>
<span class="token comment">//t2.join();// 这里相当于让t2 线程先执行完毕</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword control-flow">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//礼让，不一定成功..</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"线程(老大) 吃完了 主线程(小弟) 接着吃.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="wwkjYbqaGmNPLt3c6rB89d" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2bqTsXDSNV9KVcstem8pQg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">T2</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">20</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//休眠 1 秒</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"子线程(老大) 吃了 "</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">" 包子"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="vDT7i8sCJaXvaeFxmT5QkN" class="wolai-block"><span class="inline-wrap">16.3 线程生命周期</span></h2><h4 id="cNvQ9RQqYWzXeKyL6UWa3o" class="wolai-block"><span class="inline-wrap">周期图：</span></h4><code-block id="fmr5QHbRnmSSvsca9E5y6E" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadMethod03</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">InterruptedException</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">MyDaemonThread</span> myDaemonThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyDaemonThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//如果我们希望当main线程结束后，子线程自动结束</span>
<span class="token comment">//只需将子线程设为守护线程即可</span>
myDaemonThread<span class="token punctuation">.</span><span class="token method function property-access">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myDaemonThread<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="3S9pyUXTNtcjVSJgP89MxR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">for</span><span class="token punctuation">(</span> int i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//main线程</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"辛苦的工作..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="3eUjCVfz3WrNeePhF7sq37" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">MyDaemonThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//无限循环</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//休眠 1000 毫秒</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"快乐聊天，哈哈哈~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="wyMPkk5jDSgBZsZUnDMcDJ" class="wolai-block"><span class="inline-wrap">16.4 Synchronized ⭐</span></h2><h4 id="ab2Dxn4CTTvss3u3tLDH1K" class="wolai-block"><span class="inline-wrap">线程同步机制：</span></h4><h4 id="jbkn9Xc6TEuGGGkNv5rgwn" class="wolai-block"><span class="inline-wrap">线程同步，即当有一个线程在对内存进行操作时，其他线程都不可以对这个内存地址进行操作，直到该线程完</span></h4><h4 id="fLsMvScS7VfpbiJP5Cequh" class="wolai-block"><span class="inline-wrap">成操作，其他线程才能对该内存地址进行操作</span></h4><h4 id="7X8aVybvwn5deVJ8LEXECz" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="5ZQFis1vim9z4U3fjdmG9Q" class="wolai-block"><span class="inline-wrap">例：</span></h4><h4 id="xrveEiDVabz676ZUYx6Jbr" class="wolai-block"><span class="inline-wrap">//同步代码块</span></h4><code-block id="xvQKgpDwFKPh1dcNtsMJkk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">synchronized</span><span class="token punctuation">(</span><span class="token parameter">对象</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 得到对象的锁，才能操作同步代码</span>
需要被同步代码；
<span class="token punctuation">}</span></pre></div></code-block><code-block id="cAn8WFwTN7CUjsMA5c7Wsc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//同步方法</span>
<span class="token keyword">public</span> synchronized <span class="token keyword">void</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
需要被同步代码；
<span class="token punctuation">}</span></pre></div></code-block><code-block id="at4kRaKfunkDqsJdLgdg2Q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SellTicket</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="tMW1cotZhcQc3snWrzKbdN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">SellTicket03</span> sellTicket03 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SellTicket03</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>sellTicket03<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//第 1 个线程-窗口</span></pre></div></code-block><div id="i4qM6xhZVWTe5YrRSs3xSa" class="wolai-block wolai-text"><div><span class="inline-wrap">new Thread(sellTicket03).start();//第 2 个线程-窗口
new Thread(sellTicket03).start();//第 3 个线程-窗口</span></div></div><div id="fMdreSMf49n2FsAABnZTWr" class="wolai-block wolai-text"><div><span class="inline-wrap">}
}</span></div></div><div id="8rhZzqdFeV3ioG67uAjkZ5" class="wolai-block wolai-text"><div><span class="inline-wrap">//实现接口方式, 使用 synchronized 实现线程同步
class SellTicket03 implements Runnable {
private int ticketNum = 100 ;//让多个线程共享 ticketNum
private boolean loop = true;//控制 run 方法变量
Object object = new Object();</span></div></div><h4 id="bhM6C5fzYem3S3CM4g5VWe" class="wolai-block"><span class="inline-wrap">//同步方法（静态的）的锁为当前类本身</span></h4><h4 id="8hjtmzwi5ogsS2N6c23LCz" class="wolai-block"><span class="inline-wrap">//老韩解读</span></h4><div id="cLz4nghGLxeydkD2uBBWBP" class="wolai-block wolai-text"><div><span class="inline-wrap">//1. public synchronized static void m1() {} 锁是加在 SellTicket03.class
//2. 如果在静态方法中，实现一个同步代码块.
/_
synchronized (SellTicket03.class) {
System.out.println(&quot;m2&quot;);
}
_/
public synchronized static void m1() {</span></div></div><div id="erm2gqKTQU2RUwQhd52KrK" class="wolai-block wolai-text"><div><span class="inline-wrap">}
public static void m2() {
synchronized (SellTicket03.class) {
System.out.println(&quot;m2&quot;);
}
}</span></div></div><div id="sH9tGHxzoFDNsHuNe2GGVo" class="wolai-block wolai-text"><div><span class="inline-wrap">//老韩说明
//1. public synchronized void sell() {} 就是一个同步方法
//2. 这时锁在 this 对象
//3. 也可以在代码块上写 synchronize ,同步代码块, 互斥锁还是在 this 对象
public /</span><span class="inline-wrap"><i>synchronized</i></span><span class="inline-wrap">/ void sell() { //同步方法, 在同一时刻， 只能有一个线程来执行
sell 方法</span></div></div><div id="iMKFAy6Pk5fDAG5sB8Um6b" class="wolai-block wolai-text"><div><span class="inline-wrap">synchronized (/</span><span class="inline-wrap"><i>this</i></span><span class="inline-wrap">/ object) {
if (ticketNum &lt;= 0 ) {
System.out.println(&quot;售票结束...&quot;);
loop = false;
return;
}</span></div></div><div id="oEDQYjU4hDxGmXVy2681Vm" class="wolai-block wolai-text"><div><span class="inline-wrap">//休眠 50 毫秒, 模拟
try {
Thread.sleep( 50 );</span></div></div><h2 id="9B6BauBa3344qKe4qX4AKR" class="wolai-block"><span class="inline-wrap">16.5 互斥锁 ⭐</span></h2><h4 id="7tDWxR65aPPuAzdvPnzUYz" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="m4W682X3hv1mDk3VmKCfdk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Java语言中，引入了对象互斥锁的概念，来保证共享数据操作的完整性</span>
每个对象都对应于一个可称为“互斥锁〞 的标记，这个标记用来保证在任一时刻，只能有一个线程访问该
对象
关键字synchronized 来与对象的互斥锁联系。当某个对象用synchronized修饰时表明该对象在任一时刻
只能由一个线程访问
同步的局限性：导致程序的执行效率要降低
同步方法（非静态的）的锁可以是<span class="token keyword">this</span>，也可以是其他对象（要求是同一个对象）
同步方法（静态的）的锁为当前类本身</pre></div></code-block><h4 id="37RKbPtFtTkwemn34cg5nV" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="qRf22ZEXB1docR2vUzEhPa"><div class="marker"></div><span class="inline-wrap">同步方法如果没有使用 static 修饰：默认锁对象为 this</span></li><li id="wrdaxLs1t7uSP6tsX21BQ4"><div class="marker"></div><span class="inline-wrap">如果方法使用 static 修饰，默认锁对象：当前类.class</span></li><li id="g28kPyAEzBtwwdDAZzB3kb"><div class="marker"></div><span class="inline-wrap">实现的落地步骤：</span><ol class="wolai-block"><li id="7h8ttqGqaR1b8CgnTszTPi"><div class="marker"></div><span class="inline-wrap">需要先分析上锁的代码</span></li><li id="fyeyfh9gyMNFrgbQwSaVKu"><div class="marker"></div><span class="inline-wrap">选择同步代码块或同步方法</span></li><li id="hTX6fLi84n8Kn4RRrf7SKX"><div class="marker"></div><span class="inline-wrap">要求多个线程的锁对象为同一个即可</span></li></ol></li></ol><code-block id="tNmKcXfuhi7eWWSopBXkKj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="dsLE9LH9iR2zNaiTjeRtFB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"窗口 "</span> <span class="token operator">+</span> <span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> " 售出一
张票"
<span class="token operator">+</span> <span class="token string">" 剩余票数="</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">--</span>ticketNum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//1 - 0 - -1 - -2</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="aPpFcb4zT9Sg3XoP8bAQ2W" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>loop<span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="3yEV66eYrf6DghdVVZaGuu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//sell方法是一共同步方法</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="4xzNFLj1WkUogZ3PAqbVhV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeadLock_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//模拟死锁现象</span>
<span class="token maybe-class-name">DeadLockDemo</span> <span class="token constant">A</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeadLockDemo</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">A</span><span class="token punctuation">.</span><span class="token method function property-access">setName</span><span class="token punctuation">(</span><span class="token string">"A线程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">DeadLockDemo</span> <span class="token constant">B</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DeadLockDemo</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">B</span><span class="token punctuation">.</span><span class="token method function property-access">setName</span><span class="token punctuation">(</span><span class="token string">"B线程"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="hHEeZLqkyj5PGzQs1i8DmH" class="wolai-block"><span class="inline-wrap">16.6 死锁</span></h2><code-block id="4fSwTVwit9UGQuGcmnHik3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">A</span><span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">B</span><span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="6tmcxkNo7j1kbxh1MhLzxn" class="wolai-block"><span class="inline-wrap">//线程</span></h4><code-block id="v5VAAu1qjZMbHyELc5apnz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">DeadLockDemo</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
<span class="token keyword">static</span> <span class="token known-class-name class-name">Object</span> o1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 保证多线程，共享一个对象,这里使用static</span>
<span class="token keyword">static</span> <span class="token known-class-name class-name">Object</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
boolean flag<span class="token punctuation">;</span></pre></div></code-block><code-block id="bdZBJTCnRYEDta7fd1w4rt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">DeadLockDemo</span></span><span class="token punctuation">(</span><span class="token parameter">boolean flag</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//构造器</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">flag</span> <span class="token operator">=</span> flag<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="dh687UHxwPGzrpTa8Az5uN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="wq2DeqEVSoPJGJbHqnZHcU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//下面业务逻辑的分析</span>
<span class="token comment">//1. 如果flag 为 T, 线程A 就会先得到/持有 o1 对象锁, 然后尝试去获取 o2 对象</span>
锁
<span class="token comment">//2. 如果线程A 得不到 o2 对象锁，就会Blocked</span>
<span class="token comment">//3. 如果flag 为 F, 线程B 就会先得到/持有 o2 对象锁, 然后尝试去获取 o1 对象</span>
锁
<span class="token comment">//4. 如果线程B 得不到 o1 对象锁，就会Blocked</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token function">synchronized</span> <span class="token punctuation">(</span><span class="token parameter">o1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//对象互斥锁, 下面就是同步代码</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> " 进入
<span class="token number">1</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">synchronized</span> <span class="token punctuation">(</span><span class="token parameter">o2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 这里获得li对象的监视权</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> "
进入<span class="token number">2</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="oCKp1EQPyqfggSgAC12uz5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
<span class="token function">synchronized</span> <span class="token punctuation">(</span><span class="token parameter">o2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> " 进入
<span class="token number">3</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">synchronized</span> <span class="token punctuation">(</span><span class="token parameter">o1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 这里获得li对象的监视权</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token maybe-class-name">Thread</span><span class="token punctuation">.</span><span class="token method function property-access">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> "
进入<span class="token number">4</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="jHYSE2jx2CyghHGAsv7FRz" class="wolai-block"><span class="inline-wrap">16.6 死锁</span></h2><h4 id="6TDQYLyJSeVCgTkWP4Ufym" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="kTB2Yx8VPvR4BUFSEFhKDK" class="wolai-block"><span class="inline-wrap">多个线程都占用了对方的锁资源，但不肯相让，导致了死锁，在编程是一定要避免死锁的发生</span></h4><h4 id="vgJoAz7uL48Z6owUPcEbMP" class="wolai-block"><span class="inline-wrap">释放锁：</span></h4><h4 id="mkUbNGAUfdKvX1gmWaysdc" class="wolai-block"><span class="inline-wrap">当前线程的同步方法、同步代码块执行结束</span></h4><code-block id="fbppgCstKcF3hQjdD4cCkT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>当前线程在同步代码块、同步方法中遇到<span class="token keyword control-flow">break</span>、<span class="token keyword control-flow">return</span>
当前线程在同步代码块、同步方法中出现了未处理的<span class="token known-class-name class-name">Error</span>或Exception，导致异常结束
当前线程在同步代码块、同步方法中执行了线程对象的wait0方法，当前线程暂停，井释放锁</pre></div></code-block><h4 id="k1cuzF6YW2iVaXqdq6H3xk" class="wolai-block"><span class="inline-wrap">不释放锁：</span></h4><code-block id="twG9iG4u5xx9zCCuVv4R7s" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>线程执行同步代码块或同步方法时，程序调用Thread<span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span><span class="token punctuation">)</span>、Thread<span class="token punctuation">.</span><span class="token keyword control-flow">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法暂停当前线程的执行
线程执行同步代码块时，其他线程调用了该线程的suspendO方法将该线程挂起</pre></div></code-block><h1 id="3EZ71Fezz7CsY13vBcwEKt" class="wolai-block"><span class="inline-wrap">16 IO 流</span></h1><h2 id="pJ8xmj9MJKf3czosqixNR2" class="wolai-block"><span class="inline-wrap">16.0 文件</span></h2><h4 id="74iS2dtP9qtZCagz8wpM8F" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="4ZoBZpQSstiFXGBmGazbEn" class="wolai-block"><span class="inline-wrap">文件是保存数据的地方</span></h4><h4 id="dk5Fd7m1zWCyPbmb6bameA" class="wolai-block"><span class="inline-wrap">文件流：</span></h4><h4 id="sVp6pSLEmhZ6Fevk3CQqoU" class="wolai-block"><span class="inline-wrap">输入流：数据从数据源(文件)到程序(内存)的路径</span></h4><h4 id="uSvmBbrVBFg4vMahSsmTH7" class="wolai-block"><span class="inline-wrap">输出流：数据从程序(内存)到数据源(文件)的路径</span></h4><h4 id="37kk9YNRtpiVTnoAa5ojF4" class="wolai-block"><span class="inline-wrap">创建文件：</span></h4><code-block id="tVHR6UQcLinzS1MaiDdF4e" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> pathname<span class="token punctuation">)</span> <span class="token comment">//根据文件路径构建</span>
<span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token maybe-class-name">File</span> parent<span class="token punctuation">,</span><span class="token known-class-name class-name">String</span> child<span class="token punctuation">)</span> <span class="token comment">//根据父目录文件+子路径构建</span>
<span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span> parent<span class="token punctuation">,</span><span class="token known-class-name class-name">String</span> child<span class="token punctuation">)</span> <span class="token comment">//根据父目录+子路径构建</span></pre></div></code-block><code-block id="pe1XmKNtvK7p8DeeKTdfVS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileCreate</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="og87gz2Qa7Q4daQhBhgChe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="msYtxYqZF2stsbqegJxyrR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方式1 new File(String pathname)</span></pre></div></code-block><div id="rk2aHar9fGsnDRxMJD3DVG" class="wolai-block wolai-text"><div><span class="inline-wrap">@Test
public void create01() {
String filePath = &quot;/Users/henghengzhu/Downloads/代码/news1.txt&quot;;
File file = new File(filePath);</span></div></div><div id="fZ5LyPJL5WyS6ooKY9R6fi" class="wolai-block wolai-text"><div><span class="inline-wrap">try {
file.createNewFile();
System.out.println(&quot;文件创建成功&quot;);
} catch (IOException e) {
e.printStackTrace();
}</span></div></div><div id="q4uRg9RqjuuL1Q45RQBjzq" class="wolai-block wolai-text"><div><span class="inline-wrap">}
//方式 2 new File(File parent,String child) //根据父目录文件<span class="jill"></span>+<span class="jill"></span>子路径构建
@Test
public void create02() {
File parentFile = new File(&quot;/Users/henghengzhu/Downloads/代码&quot;);
String fileName = &quot;news2.txt&quot;;
//这里的 file 对象，在 java 程序中，只是一个对象
//只有执行了 createNewFile 方法，才会真正的，在磁盘创建该文件
File file = new File(parentFile, fileName);</span></div></div><div id="dvm7U9c4Pxwd7jvFUofJWS" class="wolai-block wolai-text"><div><span class="inline-wrap">try {
file.createNewFile();
System.out.println(&quot;创建成功<span class="jill"></span>~&quot;);
} catch (IOException e) {
e.printStackTrace();
}
}</span></div></div><div id="vjXoPWJ79xFJqbEFk4BJJW" class="wolai-block wolai-text"><div><span class="inline-wrap">//方式 3 new File(String parent,String child) //根据父目录<span class="jill"></span>+<span class="jill"></span>子路径构建
@Test
public void create03() {
//String parentPath = &quot;e:\&quot;;
String parentPath = &quot;/Users/henghengzhu/Downloads/&quot;;
String fileName = &quot;news3.txt&quot;;
File file = new File(parentPath, fileName);</span></div></div><div id="uGzEaNVUUBFFevkahZL1E7" class="wolai-block wolai-text"><div><span class="inline-wrap">try {
file.createNewFile();
System.out.println(&quot;创建成功<span class="jill"></span>~&quot;);
} catch (IOException e) {
e.printStackTrace();
}
}
}</span></div></div><h4 id="wMQtBwnqYk4sjyxsochsRw" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="ivP5gmCSC7KTjv9P8uqwXZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>file<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file<span class="token punctuation">.</span><span class="token method function property-access">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file<span class="token punctuation">.</span><span class="token method function property-access">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file<span class="token punctuation">.</span><span class="token method function property-access">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file<span class="token punctuation">.</span><span class="token method function property-access">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
file<span class="token punctuation">.</span><span class="token method function property-access">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></div></code-block><h2 id="x6qTTcJnrrWny7x61uFMHv" class="wolai-block"><span class="inline-wrap">16.1 IO 流原理及分类</span></h2><h4 id="95mhZJhxUv8Q44C4sFTbB1" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="bjS2EMavRP5YtgiMa6CY4Z" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">I</span><span class="token operator">/</span><span class="token constant">O</span>是Input<span class="token operator">/</span><span class="token maybe-class-name">Output的缩写，</span><span class="token constant">I</span><span class="token operator">/</span><span class="token constant">O</span>技术是非常实用的技术，用于处理数据传输
<span class="token maybe-class-name">Java程序中，对于数据的输入</span><span class="token operator">/</span>输出操作以<span class="token string">"流(stream)"</span>的方式进行
java<span class="token punctuation">.</span><span class="token property-access">io包下提供了各种</span>"流”类和接口，用以获取不同种类的数据，并通过方法输入或输出数据
输入input：读取外部数据（磁盛、光盘等存储设备的数据）到程序（内存）中
输出output：将程序（内存）数据输出到磁盘、光盘等存储设备中</pre></div></code-block><h4 id="gjbtW2UfnjtuMhezWzaqJ1" class="wolai-block"><span class="inline-wrap">流的分类：</span></h4><code-block id="9WUitDnkt23EnU5mZpanb5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">按操作数据单位不同分为：字节流</span><span class="token punctuation">(</span><span class="token number">8</span> bit<span class="token punctuation">)</span><span class="token function">，字符流</span><span class="token punctuation">(</span>按字符）
按数据流的流向不同分为：输入流，输出流
按流的⻆色的不同分为：节点流，处理流<span class="token operator">/</span>包装流</pre></div></code-block><code-block id="1ihkZyYXrncGfxKNsCFoeg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//先创建文件对象</span>
<span class="token maybe-class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"e:\\news1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fm6Xezw6fsUPKkydpzaZuz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//调用相应的方法，得到对应信息</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"文件名字="</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//getName、getAbsolutePath、getParent、length、exists、isFile、isDirectory</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"文件绝对路径="</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token method function property-access">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"文件父级目录="</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token method function property-access">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"文件大小(字节)="</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token method function property-access">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"文件是否存在="</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token method function property-access">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//T</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"是不是一个文件="</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token method function property-access">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//T</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"是不是一个目录="</span> <span class="token operator">+</span> file<span class="token punctuation">.</span><span class="token method function property-access">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//F</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="vHr8EBNjXS6pAojXYj3XMR" class="wolai-block"><span class="inline-wrap">16.2 节点流和处理流</span></h2><h4 id="dSVr34V35VwJwELNH5GpSg" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="3TMpadqKqf8Db2UJjY3krm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>节点流可以从一个特定的数据源读写数据，如FileReader、FileWriter
<span class="token function">处理流</span><span class="token punctuation">(</span>也叫包装流<span class="token punctuation">)</span>是 “连接〞在已存在的流（节点流或处理流）之上，为程序提供更为强大的读写功
能，如BufferedReader、BufferedWriter</pre></div></code-block><h4 id="ttKnCSsnpEDwqogaZRnocY" class="wolai-block"><span class="inline-wrap">区别和联系：</span></h4><h4 id="8dPgENYSJcE8WncVFNpKGV" class="wolai-block"><span class="inline-wrap">1. 节点流是底层流/低级流,直接跟数据源相接</span></h4><h4 id="q5PGmUFN6PBH3ZeFYUR5x3" class="wolai-block"><span class="inline-wrap">2. 处理流包装节点流，既可以消除不同节点流的实现差异，也可以提供重方便的方法来完成输入输出</span></h4><h4 id="47ZeGo4pFndd9nrv9LBH99" class="wolai-block"><span class="inline-wrap">3. 处理流(也叫包装流)对节点流进行包装，使用了修饰器设计模式，不会直接与数据源相连</span></h4><h4 id="v8zWZqdZTZSXWUWKF9diec" class="wolai-block"><span class="inline-wrap">优点：</span></h4><h4 id="9VjPgcZQV7AQNaFgJxAtNx" class="wolai-block"><span class="inline-wrap">性能的提高：主要以增加缓冲的方式来提高输入输出的效率</span></h4><h4 id="7pMcTgoJYWXbKJEhq5qVdr" class="wolai-block"><span class="inline-wrap">操作的便捷：处理流可能提供了一系列便捷的方法来一次输入输出大批量的数据，使用重加灵活方便</span></h4><h4 id="mmtWsw8dbUmmhQUGHpUqLw" class="wolai-block"><span class="inline-wrap">模拟：</span></h4><code-block id="mJiJ5k4kGtG83EEo6JVL7Y" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">BufferedReader_</span> bufferedReader_ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader_</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedReader_<span class="token punctuation">.</span><span class="token method function property-access">readFiles</span><span class="token punctuation">(</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">BufferedReader_</span> bufferedReader_2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader_</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">StringReader_</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedReader_2<span class="token punctuation">.</span><span class="token method function property-access">readString</span><span class="token punctuation">(</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="bGrfRRFNKnmHetYh36zw9U" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> abstract <span class="token keyword">class</span> <span class="token class-name">Reader_</span> <span class="token punctuation">{</span> <span class="token comment">//抽象类</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="p4Qm9Xow6dYHsTwD71VbfG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//在Reader_ 抽象类，使用read方法统一管理.</span>
<span class="token comment">//后面在调用时，利于对象动态绑定机制， 绑定到对应的实现子类即可.</span>
<span class="token comment">//public abstract void read();</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="a4YTi7tdJPTGQUA32YXhqZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">FileReader_</span> <span class="token keyword">extends</span> <span class="token class-name">Reader_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"读取文件"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2dTuA3kwzCQWQPBJGxS7Jt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">StringReader_</span> <span class="token keyword">extends</span> <span class="token class-name">Reader_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"读取字符串"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="bEKCotrDsEG4om8jkCQQtA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedReader_</span> <span class="token keyword">extends</span> <span class="token class-name">Reader_</span><span class="token punctuation">{</span></pre></div></code-block><code-block id="e4m26eGiMC5eiGgTFJ613A" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token maybe-class-name">Reader_</span> reader_<span class="token punctuation">;</span> <span class="token comment">//属性是 Reader_类型</span></pre></div></code-block><h2 id="fPHs3JKN9Ee4TfCvsuF75S" class="wolai-block"><span class="inline-wrap">16.3 输入流 ⭐</span></h2><h4 id="8NoURAcm5Gcea1TXSNjic8" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h3 id="9xSPTNQ3YtK5hqWS572RrN" class="wolai-block"><span class="inline-wrap">16.3.1 InputStream</span></h3><h4 id="6T1mLdt1MRLtjwQEDt9ZPR" class="wolai-block"><span class="inline-wrap">16.3.1.1 FileInputStream</span></h4><h4 id="hvLxhUcfbR6ASJpfEJiJ6Z" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="qBP24ksJTVrhA834p9SN8h" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//接收Reader_ 子类对象</span>
<span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">BufferedReader_</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token maybe-class-name">Reader_</span> reader_</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">reader_</span> <span class="token operator">=</span> reader_<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="c78fJjWbS5Rd3ocPuV3PPr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//封装一层</span>
reader_<span class="token punctuation">.</span><span class="token method function property-access">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="duwm5Vmn4Jm4Va39a58dLX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//让方法更加灵活， 多次读取文件, 或者加缓冲byte[] ....</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFiles</span><span class="token punctuation">(</span><span class="token parameter">int num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
reader_<span class="token punctuation">.</span><span class="token method function property-access">readFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="9doXAbNMdBo7G1e5ZdCW5n" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//扩展 readString, 批量处理字符串数据</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readStrings</span><span class="token punctuation">(</span><span class="token parameter">int num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span>num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
reader_<span class="token punctuation">.</span><span class="token method function property-access">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="9PVULT5STtR19CcQd1FdzD" class="wolai-block"><span class="inline-wrap">使用方法：</span></h4><code-block id="anw1jKxmgg23R6WTT6ELpG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileInputStream_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="w2fy6orFrGa79PDzbhuFYq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="wLoUxyLkyVmeEAGEPaTNp7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token doc-comment comment">/**
* 演示读取文件...
* 单个字节的读取，效率比较低
* -> 使用 read(byte[] b)
*/</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\hello.txt"</span><span class="token punctuation">;</span>
int readData <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token maybe-class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token comment">//创建 FileInputStream 对象，用于读取 文件</span>
fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//从该输入流读取一个字节的数据。 如果没有输入可用，此方法将阻止。</span>
<span class="token comment">//如果返回-1 , 表示读取完毕</span></pre></div></code-block><div id="5o6nfE7VfPyw3PwCJYmHsv" class="wolai-block wolai-text"><div><span class="inline-wrap">while ((readData = fileInputStream.read()) != - 1 ) {
System.out.print((char)readData);//转成 char 显示
}</span></div></div><div id="234FUGX1wuX1ToG5EgfvMq" class="wolai-block wolai-text"><div><span class="inline-wrap">} catch (IOException e) {
e.printStackTrace();
} finally {
//关闭文件流，释放资源.
try {
fileInputStream.close();
} catch (IOException e) {
e.printStackTrace();
}
}
}</span></div></div><div id="puA7MhQd6oxwiwxmmJerPS" class="wolai-block wolai-text"><div><span class="inline-wrap">/**</span></div></div><ul class="wolai-block"><li id="1uEtAHK6zY2fenBVnW5v41"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用 read(byte[] b) 读取文件，提高效率
*/
@Test
public void readFile02() {
String filePath = &quot;e:\hello.txt&quot;;
//字节数组
byte[] buf = new byte[ 8 ]; //一次读取 8 个字节.
int readLen = 0 ;
FileInputStream fileInputStream = null;
try {
//创建 FileInputStream 对象，用于读取 文件
fileInputStream = new FileInputStream(filePath);
//从该输入流读取最多 b.length 字节的数据到字节数组。 此方法将阻塞，直到某些输入可用。
//如果返回-1 , 表示读取完毕
//如果读取正常, 返回实际读取的字节数
while ((readLen = fileInputStream.read(buf)) != - 1 ) {
System.out.print(new String(buf, 0 , readLen));//显示
}</span></li></ul><div id="tH6TAGKkMMU8Zxu7PgdBic" class="wolai-block wolai-text"><div><span class="inline-wrap">} catch (IOException e) {
e.printStackTrace();
} finally {
//关闭文件流，释放资源.
try {
fileInputStream.close();
} catch (IOException e) {
e.printStackTrace();
}
}
}
}</span></div></div><h4 id="hgH8RdXCsBxn6KgDidEPBw" class="wolai-block"><span class="inline-wrap">16.3.1.2 BufferedInputStream</span></h4><h4 id="hyZ3tx9XLd2rAiyyG5t5fj" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="qVjYpshmEeVGapZdathL3x" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Bufferedlnputstream是字节流在创建</span> <span class="token maybe-class-name">Bufferedlnputstream时，会创建一个内部缓沖区数组</span></pre></div></code-block><h4 id="uF6ejbnX5j3RWKTvgZZEFX" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><h4 id="rmDqbSSX4w7Kbf5eCB1dxy" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="8ViKZzfSwcgubaF1mqfZ59" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedCopy02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="agyxrJpydxmKunFpdBDG48" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// String srcFilePath = "e:\\Koala.jpg";</span>
<span class="token comment">// String destFilePath = "e:\\hsp.jpg";</span>
<span class="token comment">// String srcFilePath = "e:\\0245_韩顺平零基础学Java_引出this.avi";</span>
<span class="token comment">// String destFilePath = "e:\\hsp.avi";</span>
<span class="token known-class-name class-name">String</span> srcFilePath <span class="token operator">=</span> <span class="token string">"e:\\a.java"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> destFilePath <span class="token operator">=</span> <span class="token string">"e:\\a3.java"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="qxpbStLHwAExiCAjFp96rS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//创建BufferedOutputStream对象BufferedInputStream对象</span>
<span class="token maybe-class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">BufferedOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="maSgWdPRszaqok6WtBqtJ4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token comment">//因为 FileInputStream 是 InputStream 子类</span>
bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>srcFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>destFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="jSzydhLoaj7GwpWF7hseD8" class="wolai-block"><span class="inline-wrap">16.3.1.3 ObjectInputStream</span></h4><h4 id="5QVKW9szK3jKMa2WfufnTU" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="mMqt5SstnB5MvUaZ3K3nBz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Objectlnputstream</span> 提供反序列化功能
反序列化就是在恢复数据时，恢复数据的值和数据类型
需要让某个对象支持序列化机制，则必须让其类是可序列化的，为了让某个类是可序列化的，该类必须
实现如下两个接口之一：Serializable和Externalizable</pre></div></code-block><h4 id="1cNDrD3xHgR8YgaW8PFFAS" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="ftyar8pewSh1otpxaHMXEE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//循环的读取文件，并写入到 destFilePath</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span> <span class="token number">1024</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
int readLen <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token comment">//当返回 -1 时，就表示文件读取完毕</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>readLen <span class="token operator">=</span> bis<span class="token punctuation">.</span><span class="token method function property-access">read</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
bos<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> readLen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="qFPayu2skmrKrfHJQ3aoU3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"文件拷⻉完毕~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="iRguH23NjyYNVWp6qPSsbi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="gYKyiPWtjHR2Ffb1zmmh1g" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//关闭流 , 关闭外层的处理流即可，底层会去关闭节点流</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>bis <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
bis<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>bos <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
bos<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="43Et9YhKpGwgxzZi3tbdvW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectInputStream_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">ClassNotFoundException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="8nEmguzND9E5xVA8EKQ3rR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//指定反序列化的文件</span>
<span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\data.dat"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="okK86MF9CRtJX2fjePVmDy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h3 id="tWyBgyNehvgjWVSHw9nb9X" class="wolai-block"><span class="inline-wrap">16.3.2 Reader</span></h3><h4 id="rRkYXG8wSUVV2at4uxJo2M" class="wolai-block"><span class="inline-wrap">16.3.2.1 FileReader</span></h4><h4 id="vs7BGWUAeqdUYm38cZ1dgr" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="jsNSXoR5XUVrgXuSYiYAPL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>read：每次读取单个字符，返回该字符，如果到文件末尾返回<span class="token operator">-</span><span class="token number">1</span>
<span class="token function">read</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span>：批量读取多个字符到数组，返回读取到的字符数，如果到文件末尾返回<span class="token operator">-</span><span class="token number">1</span></pre></div></code-block><h4 id="7XrKvpCWiCaYBfbcreB4jV" class="wolai-block"><span class="inline-wrap">方法使用：</span></h4><h4 id="f3oc3PkUwB1sQCrFYXEnfu" class="wolai-block"><span class="inline-wrap">//解读</span></h4><h4 id="fwVsvCUYrYa6aiUWZ2U31u" class="wolai-block"><span class="inline-wrap">//1. 读取(反序列化)的顺序需要和你保存数据(序列化)的顺序一致</span></h4><h4 id="rLKFthzEdNRMrtYC6XqmVW" class="wolai-block"><span class="inline-wrap">//2. 否则会出现异常</span></h4><code-block id="2VSLzNVSNNVuMviLaEAURW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token method function property-access">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token method function property-access">readBoolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="wJc4kgNMpfu9oSnb3e45Mm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token method function property-access">readChar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token method function property-access">readDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>ois<span class="token punctuation">.</span><span class="token method function property-access">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="6e2AauCDSdZ5q542hGRnhk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//dog 的编译类型是 Object , dog 的运行类型是 Dog</span>
<span class="token known-class-name class-name">Object</span> dog <span class="token operator">=</span> ois<span class="token punctuation">.</span><span class="token method function property-access">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"运行类型="</span> <span class="token operator">+</span> dog<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"dog信息="</span> <span class="token operator">+</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//底层 Object -> Dog</span></pre></div></code-block><code-block id="tRvVyzZq6A1vgpfCCZP7NL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//这里是特别重要的细节:</span></pre></div></code-block><code-block id="chCPCR3msB2bBXiQRHGdUV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 如果我们希望调用Dog的方法, 需要向下转型</span>
<span class="token comment">//2. 需要我们将Dog类的定义，放在到可以引用的位置</span>
<span class="token maybe-class-name">Dog</span> dog2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Dog</span><span class="token punctuation">)</span>dog<span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>dog2<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//旺财..</span></pre></div></code-block><code-block id="jqNq5mHUKZwgnF7WpLX634" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//关闭流, 关闭外层流即可，底层会关闭 FileInputStream 流</span>
ois<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="nrAdCSi9DP5JnwM5LgK4mq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileReader_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="5uPafJNncUeAueSeunqZ2f" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token doc-comment comment">/**
* 单个字符读取文件
*/</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">readFile01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><div id="oRrkHQwiPtPqYjsLH6nmkv" class="wolai-block wolai-text"><div><span class="inline-wrap">String filePath = &quot;e:\story.txt&quot;;
FileReader fileReader = null;
int data = 0 ;
//1. 创建 FileReader 对象
try {
fileReader = new FileReader(filePath);
//循环读取 使用 read, 单个字符读取
while ((data = fileReader.read()) != - 1 ) {
System.out.print((char) data);
}</span></div></div><div id="wsRoayRf2iADi7o431bHhM" class="wolai-block wolai-text"><div><span class="inline-wrap">} catch (IOException e) {
e.printStackTrace();
} finally {
try {
if (fileReader != null) {
fileReader.close();
}
} catch (IOException e) {
e.printStackTrace();
}
}
}</span></div></div><div id="sGvJ3WwBXfkxFwFQtRqbHY" class="wolai-block wolai-text"><div><span class="inline-wrap">/**</span></div></div><ul class="wolai-block"><li id="cUG3p2shXtzEtK77vnJzPF"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">字符数组读取文件
*/
@Test
public void readFile02() {
System.out.println(&quot;~~~readFile02 ~~~&quot;);
String filePath = &quot;e:\story.txt&quot;;
FileReader fileReader = null;</span></li></ul><div id="s4ZqCA7vCWZ6b6TiXAQvhx" class="wolai-block wolai-text"><div><span class="inline-wrap">int readLen = 0 ;
char[] buf = new char[ 8 ];
//1. 创建 FileReader 对象
try {
fileReader = new FileReader(filePath);
//循环读取 使用 read(buf), 返回的是实际读取到的字符数
//如果返回-1, 说明到文件结束
while ((readLen = fileReader.read(buf)) != - 1 ) {
System.out.print(new String(buf, 0 , readLen));
}</span></div></div><div id="3so5Nx4TbiEjRgZjo5HyYt" class="wolai-block wolai-text"><div><span class="inline-wrap">} catch (IOException e) {
e.printStackTrace();
} finally {
try {
if (fileReader != null) {</span></div></div><h4 id="4NhLmD1eUwaPtb3WGJmH86" class="wolai-block"><span class="inline-wrap">16.3.2.2 BufferedReader</span></h4><h4 id="wZRwfdKPNK3E6Thct9nNKX" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="wCSB5WNCshqZiD71FoVEGp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>fileReader<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vtmJttkbaGP4VjEa6YgG1m" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedReader_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="9J1i4oAP27SkeDMRPgazMi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\a.java"</span><span class="token punctuation">;</span>
<span class="token comment">//创建bufferedReader</span>
<span class="token maybe-class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileReader</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//读取</span>
<span class="token known-class-name class-name">String</span> line<span class="token punctuation">;</span> <span class="token comment">//按行读取, 效率高</span>
<span class="token comment">//说明</span>
<span class="token comment">//1. bufferedReader.readLine() 是按行读取文件</span>
<span class="token comment">//2. 当返回null 时，表示文件读取完毕</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span><span class="token method function property-access">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="fiSi3DKtHgQmukXGMCCTc9" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//关闭流, 这里注意，只需要关闭 BufferedReader ，因为底层会自动的去关闭 节点流</span>
<span class="token comment">//FileReader。</span>
<span class="token comment">/*
public void close() throws IOException {
synchronized (lock) {
if (in == null)
return;
try {
in.close();//in 就是我们传入的 new FileReader(filePath), 关闭
了.
} finally {
in = null;
cb = null;
}
}
}
*/</span>
bufferedReader<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="sBnLPTozAxE7tLeyVsV7nJ" class="wolai-block"><span class="inline-wrap">16.3.2.3 InputStreamReader</span></h4><h4 id="4z4r4TrPQBEgN1AuCCyr7c" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="axx1SuQSngH8nxteLWWXgV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function"><span class="token maybe-class-name">InputStreamReader：Reader的子类，可以将lnputStream</span></span><span class="token punctuation">(</span>字节流<span class="token punctuation">)</span><span class="token function">包装成Reader</span><span class="token punctuation">(</span>字符流）
当处理纯文本数据时，如果使用宇符流效率重高，井且可以有效解決中文问题，所以建议字节流转换成
字符流</pre></div></code-block><h4 id="pFoqGsTh9s4XqKnHz1RXa6" class="wolai-block"><span class="inline-wrap">例：</span></h4><h2 id="2974fq3CPWAecXH2jyfWME" class="wolai-block"><span class="inline-wrap">16.4 输出流 ⭐</span></h2><h4 id="dh7bzTKNNwiGgFJxSfMLh4" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="v6HUDinEZRfmiHBp6rjZ9S" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputStreamReader_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="cETM8Dq82fm3vNm5N6Q4by" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\a.txt"</span><span class="token punctuation">;</span>
<span class="token comment">//解读</span>
<span class="token comment">//1. 把 FileInputStream 转成 InputStreamReader</span>
<span class="token comment">//2. 指定编码 gbk</span>
<span class="token comment">//InputStreamReader isr = new InputStreamReader(new</span>
<span class="token function"><span class="token maybe-class-name">FileInputStream</span></span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 把 InputStreamReader 传入 BufferedReader</span>
<span class="token comment">//BufferedReader br = new BufferedReader(isr);</span></pre></div></code-block><code-block id="vuxtGgKqK4tbZGdVrNbaBM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//将 2 和 3 合在一起</span>
<span class="token maybe-class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>
<span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="nsrBTuJLLXTvYaYACrVSQ4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 读取</span>
<span class="token known-class-name class-name">String</span> s <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token method function property-access">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"读取内容="</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5. 关闭外层流</span>
br<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h3 id="q7MZiNpybyTvZb1JYF6h7R" class="wolai-block"><span class="inline-wrap">16.4.1 OutputStream</span></h3><h4 id="4UJeNTCdXhmCcHr8CYQ5E7" class="wolai-block"><span class="inline-wrap">16.4.1.1 FileOutputStream</span></h4><h4 id="nYt81yS5GZ4ypWAX7iUz6T" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><h4 id="ug9z8vWCvmC3fBfmQLdDjf" class="wolai-block"><span class="inline-wrap">使用方法：</span></h4><code-block id="vStWSJ1enwFihUgxcUn1Ch" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOutputStream01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="2NdaXJvYJVoAexz4aMRygy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="cyHxYxZhLpTx9jK6eGDduW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token doc-comment comment">/**
* 演示使用FileOutputStream 将数据写到文件中,
* 如果该文件不存在，则创建该文件
*/</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="izQAWodpFVmX4kRsCUuov4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//创建 FileOutputStream对象</span>
<span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\a.txt"</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="uDu6PmxYeEBJZeLqEsV37c" class="wolai-block"><span class="inline-wrap">16.4.1.2 BufferedOutputStream</span></h4><h4 id="vxnQ1whkfZJ6wY26qs1189" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><div id="2nj4KfaKnfv2exdexGyEBm" class="wolai-block wolai-text"><div><span class="inline-wrap">BufferedOutputstream 是字节流，实现缓冲的输出流，可以将多个字节写入底层输出流中，而不必对每次字节写
入调用底层
系统</span></div></div><h4 id="bkDWMYMzuZdAEC6VSAdiWA" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="wVHL2G1PFKzT6Mtab8F8SH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">FileOutputStream</span> fileOutputStream <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token comment">//得到 FileOutputStream对象</span>
<span class="token comment">//说明</span>
<span class="token comment">//1. new FileOutputStream(filePath) 创建方式，当写入内容是，会覆盖原来的内容</span>
<span class="token comment">//2. new FileOutputStream(filePath, true) 创建方式，当写入内容是，是追加到文</span>
件后面
fileOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//写入一个字节</span>
<span class="token comment">//fileOutputStream.write('H');//</span>
<span class="token comment">//写入字符串</span>
<span class="token known-class-name class-name">String</span> str <span class="token operator">=</span> <span class="token string">"hsp,world!"</span><span class="token punctuation">;</span>
<span class="token comment">//str.getBytes() 可以把 字符串-> 字节数组</span>
<span class="token comment">//fileOutputStream.write(str.getBytes());</span>
<span class="token comment">/*
write(byte[] b, int off, int len) 将 len字节从位于偏移量 off的指定字节数组写
入此文件输出流
*/</span>
fileOutputStream<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token method function property-access">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="bqHxQoQvCeYDveEhHkmS5W" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
fileOutputStream<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="sK9SAMxYJwTTyEyxn4c2LW" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="v72XDPn2RAPv9SoBM35d5Q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedCopy02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="uxqTzQduPog6easGxYXQco" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// String srcFilePath = "e:\\Koala.jpg";</span>
<span class="token comment">// String destFilePath = "e:\\hsp.jpg";</span>
<span class="token comment">// String srcFilePath = "e:\\0245_韩顺平零基础学Java_引出this.avi";</span>
<span class="token comment">// String destFilePath = "e:\\hsp.avi";</span>
<span class="token known-class-name class-name">String</span> srcFilePath <span class="token operator">=</span> <span class="token string">"e:\\a.java"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> destFilePath <span class="token operator">=</span> <span class="token string">"e:\\a3.java"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="jmUxzKtegyLmHZYc1DT6wu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//创建BufferedOutputStream对象BufferedInputStream对象</span>
<span class="token maybe-class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">BufferedOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="tpBUexAeh3SjuTvDNnwDnL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token comment">//因为 FileInputStream 是 InputStream 子类</span>
bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>srcFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>destFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fFftqpyP68gxKHV2NaZqiC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//循环的读取文件，并写入到 destFilePath</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> buff <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span> <span class="token number">1024</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
int readLen <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token comment">//当返回 -1 时，就表示文件读取完毕</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>readLen <span class="token operator">=</span> bis<span class="token punctuation">.</span><span class="token method function property-access">read</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
bos<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> readLen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="tUaFBXVU3YLwE7LWEf8ZM4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"文件拷⻉完毕~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="8rZpynZjwQNXTrccLupP9m" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="ua3LWKcZsmVCfrd4rGsMtY" class="wolai-block"><span class="inline-wrap">16.4.1.3 ObjectOutputStream</span></h4><h4 id="7roAWDAtWibVgmYaB81fcV" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="xz6hjBVq5nKotMQdvMsxeT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Objectoutputstream</span> 提供序列化功能
序列化就是在保存数据时，保存数据的值和数据类型
列化就是在恢复数据时，恢复数据的值和数据类型
需要让某个对象支持序列化机制，则必须让其类是可序列化的，为了让某个类是可序列化的，该类必须
实现如下两个接口之一：Serializable和Externalizable</pre></div></code-block><h4 id="5XzwnnUYq5GCmnb8C2CJo3" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="2Ls9T8TmdVzX4PhssbWNyp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="hGkcVUHTiqAUVuAALMimf4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//关闭流 , 关闭外层的处理流即可，底层会去关闭节点流</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>bis <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
bis<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>bos <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
bos<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vKfkVyaBpXqtw2P6ssxbV7" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ObjectOutStream_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span>
<span class="token comment">//序列化后，保存的文件格式，不是存文本，而是按照他的格式来保存</span>
<span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\data.dat"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="otkpprR4RBjaR7vwgCQLTr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="gyiE3ZvBS9hhh9Ld5Y5Kc2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//序列化数据到 e:\data.dat</span>
oos<span class="token punctuation">.</span><span class="token method function property-access">writeInt</span><span class="token punctuation">(</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// int -> Integer (实现了 Serializable)</span>
oos<span class="token punctuation">.</span><span class="token method function property-access">writeBoolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// boolean -> Boolean (实现了 Serializable)</span>
oos<span class="token punctuation">.</span><span class="token method function property-access">writeChar</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// char -> Character (实现了 Serializable)</span>
oos<span class="token punctuation">.</span><span class="token method function property-access">writeDouble</span><span class="token punctuation">(</span><span class="token number">9.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// double -> Double (实现了 Serializable)</span>
oos<span class="token punctuation">.</span><span class="token method function property-access">writeUTF</span><span class="token punctuation">(</span><span class="token string">"韩顺平教育"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//String</span>
<span class="token comment">//保存一个dog对象</span>
oos<span class="token punctuation">.</span><span class="token method function property-access">writeObject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">"旺财"</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">,</span> <span class="token string">"日本"</span><span class="token punctuation">,</span> <span class="token string">"白色"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oos<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"数据保存完毕(序列化形式)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="6K3z4J1vN19WPTq1oUEbxh" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="hGN2HFJtEvMMmaDJtKQVZU" class="wolai-block"><span class="inline-wrap">1. 读写顺序要一致</span></h4><ol class="wolai-block"><li id="6e3s535KC3gHiXwqnCUQKA"><div class="marker"></div><span class="inline-wrap">要求实现序列化或反序列化对象，需要实现 Serializable</span></li><li id="mrgp1jm6wLFbrq23KB7uad"><div class="marker"></div><span class="inline-wrap">序列化的类中建议添加 SerialVersionUID，为了提高版本兼容性</span></li><li id="urcVArGoUoSq2Vn3Vpz8dF"><div class="marker"></div><span class="inline-wrap">序列化对象时，默认将里面所有属性都进行序列化，但除了 static 或 transient 修饰的成员</span></li><li id="v2YkwdUPUd8YZYyCX8hN68"><div class="marker"></div><span class="inline-wrap">序列化对象时，要求里面属性的类型也需要实现序列化接口</span></li><li id="pgtJndcP6q1dSXexy3byPi"><div class="marker"></div><span class="inline-wrap">序列化具备可继承性，也就是如果某类已经实现了序列化，则它的所有子类也己经默认实现了序列化</span></li></ol><h4 id="fkNvndbioiP8iYTUyiKHHZ" class="wolai-block"><span class="inline-wrap">16.4.1.4 PrintStream</span></h4><h4 id="1LD5UyBDBDhqZx7L3FCiHQ" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="rToCiQsp6VVZ7maVavXRxR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintStream_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="cSU27NzLy7417nMbTRxEV8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">PrintStream</span> out <span class="token operator">=</span> <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">;</span>
<span class="token comment">//在默认情况下，PrintStream 输出数据的位置是 标准输出，即显示器</span>
<span class="token comment">/*
public void print(String s) {
if (s == null) {
s = "null";
}
write(s);
}
*/</span>
out<span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span><span class="token string">"john, hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//因为print底层使用的是write , 所以我们可以直接调用write进行打印/输出</span>
out<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"韩顺平,你好"</span><span class="token punctuation">.</span><span class="token method function property-access">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="sazJMhTycYFRMhCAh5zhu3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//我们可以去修改打印流输出的位置/设备</span>
<span class="token comment">//1. 输出修改成到 "e:\\f1.txt"</span>
<span class="token comment">//2. "hello, 韩顺平教育~" 就会输出到 e:\f1.txt</span>
<span class="token comment">//3. public static void setOut(PrintStream out) {</span>
<span class="token comment">// checkIO();</span>
<span class="token comment">// setOut0(out); // native 方法，修改了out</span>
<span class="token comment">// }</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">setOut</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintStream</span><span class="token punctuation">(</span><span class="token string">"e:\\f1.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"hello, 韩顺平教育~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h3 id="oVkdrxBjzn62bVxxcydHdq" class="wolai-block"><span class="inline-wrap">16.4.2 Writer</span></h3><h4 id="e1ahvmcKTSh56kTTQ8XNKf" class="wolai-block"><span class="inline-wrap">16.4.2.1 FileWriter</span></h4><h4 id="2VobrZWxPrEBihpGtiNwPb" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="uMnTAyqW8dNCNpAWYa39cn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token function"><span class="token maybe-class-name">Writer</span></span> <span class="token punctuation">(</span><span class="token maybe-class-name">File</span><span class="token operator">/</span><span class="token known-class-name class-name">String</span><span class="token punctuation">)</span>：覆盖模式，相当于流的指针在首端
<span class="token keyword">new</span> <span class="token class-name">FileWriter</span> <span class="token punctuation">(</span><span class="token maybe-class-name">File</span><span class="token operator">/</span><span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token boolean">true</span><span class="token punctuation">)</span>：追加模式，相当于流的指针在尾端
<span class="token function">write</span><span class="token punctuation">(</span>int<span class="token punctuation">)</span>：写入单个字符
<span class="token function">write</span><span class="token punctuation">(</span>char<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>：写入指定数组
<span class="token function">write</span><span class="token punctuation">(</span>char<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>off len<span class="token punctuation">)</span>：写入指定数组的指定部分
<span class="token function">write</span> <span class="token punctuation">(</span>string<span class="token punctuation">)</span>：写入整个字符律
<span class="token function">write</span><span class="token punctuation">(</span>string<span class="token punctuation">,</span>off<span class="token punctuation">,</span>len<span class="token punctuation">)</span>：写入字符串的指定部分</pre></div></code-block><h4 id="qWjFn1Q6nexKou1mP8FED6" class="wolai-block"><span class="inline-wrap">方法使用：</span></h4><code-block id="raTCjezrYAdCbvu7asgTTb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileWriter_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="wXtsTDqBwJXeK4VdPHNbZe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\note.txt"</span><span class="token punctuation">;</span>
<span class="token comment">//创建FileWriter对象</span>
<span class="token maybe-class-name">FileWriter</span> fileWriter <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
char<span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
fileWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认是覆盖写入</span>
<span class="token comment">// 3) write(int):写入单个字符</span>
fileWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">'H'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 4) write(char[]):写入指定数组</span>
fileWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 5) write(char[],off,len):写入指定数组的指定部分</span>
fileWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"韩顺平教育"</span><span class="token punctuation">.</span><span class="token method function property-access">toCharArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 6) write（string）：写入整个字符串</span>
fileWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">" 你好北京~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fileWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"⻛雨之后，定⻅彩虹"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 7) write(string,off,len):写入字符串的指定部分</span>
fileWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"上海天津"</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//在数据量大的情况下，可以使用循环操作.</span></pre></div></code-block><code-block id="3MrjFHmKmMpzc9hAAGM23F" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="3kyph6yPbAaW3kpdqoqx3L" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//对应FileWriter , 一定要关闭流，或者flush才能真正的把数据写入到文件</span>
<span class="token comment">//老韩看源码就知道原因.</span>
<span class="token comment">/*
看看代码
private void writeBytes() throws IOException {
this.bb.flip();
int var1 = this.bb.limit();</span></pre></div></code-block><h4 id="bhjBBSQxeGHMg2jjNTPnhi" class="wolai-block"><span class="inline-wrap">文件拷⻉：</span></h4><code-block id="tMPWJYhnfzaJoTWbCcActP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int var2 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bb</span><span class="token punctuation">.</span><span class="token method function property-access">position</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="dA9HqVMiUihixvkk7sJd5C" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>assert var2 <span class="token operator">&lt;=</span> var1<span class="token punctuation">;</span></pre></div></code-block><code-block id="iNiWRHF99cZa7huevTVC85" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int var3 <span class="token operator">=</span> var2 <span class="token operator">&lt;=</span> var1<span class="token operator">?</span> var1 <span class="token operator">-</span> var2 <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>var3 <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">ch</span> <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
assert <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">ch</span><span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bb</span><span class="token punctuation">)</span> <span class="token operator">==</span> var3 <span class="token operator">:</span> var3<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bb</span><span class="token punctuation">.</span><span class="token method function property-access">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bb</span><span class="token punctuation">.</span><span class="token method function property-access">arrayOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> var2<span class="token punctuation">,</span>
var3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="5HvJyKUvZLQp3VK14XKh9V" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bb</span><span class="token punctuation">.</span><span class="token method function property-access">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">*</span><span class="token operator">/</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token comment">//fileWriter.flush();</span>
<span class="token comment">//关闭文件流，等价 flush() + 关闭</span>
fileWriter<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="uXufy7UFywcEYuoR4LVyCp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"程序结束..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="d61Jjku7KMMpeM9Z6YdUfZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6dJvqVc5bk1g3Lasgxqjso" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileCopy</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//完成 文件拷⻉，将 e:\\Koala.jpg 拷⻉ c:\\</span>
<span class="token comment">//思路分析</span>
<span class="token comment">//1. 创建文件的输入流 , 将文件读入到程序</span>
<span class="token comment">//2. 创建文件的输出流， 将读取到的文件数据，写入到指定的文件.</span>
<span class="token known-class-name class-name">String</span> srcFilePath <span class="token operator">=</span> <span class="token string">"e:\\Koala.jpg"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> destFilePath <span class="token operator">=</span> <span class="token string">"e:\\Koala3.jpg"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">FileInputStream</span> fileInputStream <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">FileOutputStream</span> fileOutputStream <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="b8eAf3vL7xyuUtDRq86nJd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="9xP6g4Hd1rGhYQLrZyYhhB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>fileInputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>srcFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
fileOutputStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>destFilePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//定义一个字节数组,提高读取效果</span></pre></div></code-block><h4 id="wzWCY2nN8TLMoBueoGiQU6" class="wolai-block"><span class="inline-wrap">注意事项：</span></h4><code-block id="9HzDCES5oSWn1BSiWNzxBh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function"><span class="token maybe-class-name">FileWriter使用后，必须要关闭</span></span><span class="token punctuation">(</span>close<span class="token punctuation">)</span><span class="token function">或刷新</span><span class="token punctuation">(</span>flush），否则写入不到指定的文件</pre></div></code-block><h4 id="b5MtEJ7pyHphKE7TeapehL" class="wolai-block"><span class="inline-wrap">16.4.2.2 BufferedWriter</span></h4><h4 id="2kP2d5jrWNKevQWCQmb1JR" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="cG21CKadYkBCo5RcZUBhxy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>byte<span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span> <span class="token number">1024</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
int readLen <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>readLen <span class="token operator">=</span> fileInputStream<span class="token punctuation">.</span><span class="token method function property-access">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//读取到后，就写入到文件 通过 fileOutputStream</span>
<span class="token comment">//即，是一边读，一边写</span>
fileOutputStream<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> readLen<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一定要使用这个方法</span></pre></div></code-block><code-block id="44HcdJ88DutFMR5Eo6mNGZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"拷⻉ok~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="b5wVy8S8egqcreAXKLYY4g" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token comment">//关闭输入流和输出流，释放资源</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>fileInputStream <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
fileInputStream<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>fileOutputStream <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
fileOutputStream<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6BAZ4UapTfbjh3zKwXbdGr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedWriter_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\ok.txt"</span><span class="token punctuation">;</span>
<span class="token comment">//创建BufferedWriter</span>
<span class="token comment">//说明:</span>
<span class="token comment">//1. new FileWriter(filePath, true) 表示以追加的方式写入</span>
<span class="token comment">//2. new FileWriter(filePath) , 表示以覆盖的方式写入</span>
<span class="token maybe-class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileWriter</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"hello, 韩顺平教育!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//插入一个和系统相关的换行</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"hello2, 韩顺平教育!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="woxfiLffjp58P5dwELvkfV" class="wolai-block"><span class="inline-wrap">文件拷⻉：</span></h4><code-block id="ij3kBRHY6Rtp5zmCnUHkUj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"hello3, 韩顺平教育!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="t7ZBMpabd7JK9Rxu2kdnz4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//说明：关闭外层流即可 ， 传入的 new FileWriter(filePath) ,会在底层关闭</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="h1tjKHtuEFALpaWHhnudZM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BufferedCopy_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="iTsZaisTbKqa3XAj4mChMf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. BufferedReader 和 BufferedWriter 是安装字符操作</span>
<span class="token comment">//2. 不要去操作 二进制文件[声音，视频，doc, pdf ], 可能造成文件损坏</span>
<span class="token comment">//BufferedInputStream</span>
<span class="token comment">//BufferedOutputStream</span>
<span class="token known-class-name class-name">String</span> srcFilePath <span class="token operator">=</span> <span class="token string">"e:\\a.java"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> destFilePath <span class="token operator">=</span> <span class="token string">"e:\\a2.java"</span><span class="token punctuation">;</span>
<span class="token comment">// String srcFilePath = "e:\\0245_韩顺平零基础学Java_引出this.avi";</span>
<span class="token comment">// String destFilePath = "e:\\a2韩顺平.avi";</span>
<span class="token maybe-class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> line<span class="token punctuation">;</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>srcFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>destFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="useaTHwRnZ7pAY2KkhTbzy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//说明: readLine 读取一行内容，但是没有换行</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> br<span class="token punctuation">.</span><span class="token method function property-access">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//每读取一行，就写入</span>
bw<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//插入一个换行</span>
bw<span class="token punctuation">.</span><span class="token method function property-access">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"拷⻉完毕..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="75fRKPWkipiMY98AbU1Xkm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token comment">//关闭流</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>br <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
br<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span>bw <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
bw<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="fK5SHSWp2HhA6EZc7XSLUn" class="wolai-block"><span class="inline-wrap">16.4.2.3 OutputStreamWriter</span></h4><h4 id="ovoVFWs2uQKt7yrK6iTSDy" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="1bCRz3RCGaQafwGmjQSwdi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function"><span class="token maybe-class-name">OutputStreamWriter：Writer的子类，实现将Outputstream</span></span><span class="token punctuation">(</span>字节流<span class="token punctuation">)</span><span class="token function">包装成Writer</span><span class="token punctuation">(</span>字符流<span class="token punctuation">)</span>
当处理纯文本数据时，如果使用宇符流效率重高，井且可以有效解決中文问题，所以建议格字节流转快
成字符流
可以在使用时指定编码格式</pre></div></code-block><h4 id="7GvZxZxVmvkc69SyoXyhmP" class="wolai-block"><span class="inline-wrap">例：</span></h4><h4 id="54R65YYpwwDvZwSRydWZ7y" class="wolai-block"><span class="inline-wrap">16.4.2.4 PrintWrite</span></h4><h4 id="iQ4mYWgNWEBeVRiFEZFX2b" class="wolai-block"><span class="inline-wrap">例：</span></h4><h2 id="x68ffmgdRh7DWFbaR1Rn4t" class="wolai-block"><span class="inline-wrap">16.5 Properties</span></h2><code-block id="46comZaMdyvuh91q13fNjh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="dVD5WuM7wbkUpa4mnNwUUK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OutputStreamWriter_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> filePath <span class="token operator">=</span> <span class="token string">"e:\\hsp.txt"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> charSet <span class="token operator">=</span> <span class="token string">"utf-8"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">OutputStreamWriter</span> osw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">,</span> charSet<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>osw<span class="token punctuation">)</span><span class="token punctuation">;</span>
bw<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"hi, 韩顺平教育"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bw<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"按照 "</span> <span class="token operator">+</span> charSet <span class="token operator">+</span> <span class="token string">" 保存文件成功~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="41pnpgRiuhPu8gGrpsaDvT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintWriter_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="rQCss2KCbYrUV8z6Hn1Wmm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//PrintWriter printWriter = new PrintWriter(System.out);</span>
<span class="token maybe-class-name">PrintWriter</span> printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"e:\\f2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
printWriter<span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span><span class="token string">"hi, 北京你好~~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
printWriter<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//flush + 关闭流, 才会将数据写入到文件..</span></pre></div></code-block><code-block id="mpuZRupSrEHrR5z68kkyya" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="cpDg2o9LhF1BkgydiZoRpn" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="vJQh6ubxehxSfGmoHLBCuU" class="wolai-block"><span class="inline-wrap">专⻔用于读号配置文件的集合类配置文件的格式：键=值</span></h4><h4 id="6KxBHbUjVFxvAUTeWeTFkn" class="wolai-block"><span class="inline-wrap">键值对不需要有空格，值不需要用引号一起来</span></h4><code-block id="qQrTdFey2mz79QBphGTKwg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>默认类型是<span class="token known-class-name class-name">String</span></pre></div></code-block><h4 id="rwdoUr2r5vbVj53y2M9Ti3" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="kiSkRGzAgVga8Rn6EkZbRV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>load：加载配置文件的键值对到Properties对象
list：将数据显示到指定设备
<span class="token function">getProperty</span> <span class="token punctuation">(</span>key<span class="token punctuation">)</span>：根据键获取值
<span class="token function">setProperty</span><span class="token punctuation">(</span>key value<span class="token punctuation">)</span>：设置键值对到Properties对象
store：将Properties中的键值对存储到配置文件，在idea 中，保存信息到配置文件，如果含有中文，会
存储为unicode码</pre></div></code-block><h4 id="fNZHeEwMNekMAyVNX8Ekxk" class="wolai-block"><span class="inline-wrap">读取：</span></h4><h4 id="2McJxix5nNGZ9d97yB1Dnh" class="wolai-block"><span class="inline-wrap">配置：</span></h4><code-block id="i4ggxZTzstnaWHrvp3rJGJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Properties02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//使用Properties 类来读取mysql.properties 文件</span></pre></div></code-block><code-block id="5LuiacEQoP6c4j5CMjftyH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 创建Properties 对象</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 加载指定配置文件</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 把k-v显示控制台</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">list</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. 根据key 获取对应的值</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> pwd <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"用户名="</span> <span class="token operator">+</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"密码是="</span> <span class="token operator">+</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="vUK3vYzLMFXisVmdXax61C" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Properties03</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//使用Properties 类来创建 配置文件, 修改配置文件内容</span></pre></div></code-block><code-block id="mKeuMbQPvcJHWA1z7iPDxJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建</span>
<span class="token comment">//1.如果该文件没有key 就是创建</span>
<span class="token comment">//2.如果该文件有key ,就是修改</span>
<span class="token comment">/*
Properties 父类是 Hashtable ， 底层就是Hashtable 核心方法
public synchronized V put(K key, V value) {
// Make sure the value is not null</span></pre></div></code-block><h1 id="vLWQUPqu71tYJLx4q7S6ii" class="wolai-block"><span class="inline-wrap">17 网络编程</span></h1><h2 id="fw3JdoG4h1kD1ToPVuoBMN" class="wolai-block"><span class="inline-wrap">17.1 网络基础</span></h2><h4 id="gqgRUc7QWfrkiybpuErbbX" class="wolai-block"><span class="inline-wrap">ip 地址：</span></h4><h4 id="sc7VoRkSk1TPha79i6hnGc" class="wolai-block"><span class="inline-wrap">用于唯一标识网络中的每台计算机/主机</span></h4><code-block id="r2TpmLSCwQPD2goiSW3rsM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>查看ip地址：ipconfig
ip地址的表示形式：点分十进制 xx<span class="token punctuation">.</span><span class="token property-access">xx</span><span class="token punctuation">.</span><span class="token property-access">xx</span><span class="token punctuation">.</span><span class="token property-access">xx</span>
每一个十进制数的范围：<span class="token number">0</span><span class="token operator">~</span><span class="token number">255</span>
ip地址的组成<span class="token operator">=</span>网络地址＋主机地址，比如：<span class="token number">192.168</span><span class="token number">.16</span><span class="token number">.69</span>
ilPv6是互联网工程任务组设计的用于替代<span class="token number">1</span><span class="token maybe-class-name">PV4的下一代</span><span class="token constant">IP</span>协议</pre></div></code-block><code-block id="d2Tn5291upH1hw9JL3VyTa" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1FMLRDsXCbER5ND8hPyjiH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// Makes sure the key is not already in the hashtable.</span>
<span class="token maybe-class-name">Entry</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span><span class="token operator">?</span><span class="token operator">></span> tab<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> table<span class="token punctuation">;</span>
int hash <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token method function property-access">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
int index <span class="token operator">=</span> <span class="token punctuation">(</span>hash <span class="token operator">&amp;</span> <span class="token number">0x7FFFFFFF</span><span class="token punctuation">)</span> <span class="token operator">%</span> tab<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span>
@<span class="token function"><span class="token maybe-class-name">SuppressWarnings</span></span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
<span class="token maybe-class-name">Entry</span><span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span><span class="token constant">V</span><span class="token operator">></span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Entry</span><span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span><span class="token constant">V</span><span class="token operator">></span><span class="token punctuation">)</span>tab<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> entry <span class="token operator">!=</span> <span class="token keyword null nil">null</span> <span class="token punctuation">;</span> entry <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token property-access">next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span><span class="token property-access">hash</span> <span class="token operator">==</span> hash<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> entry<span class="token punctuation">.</span><span class="token property-access">key</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token constant">V</span> old <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span>
entry<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> value<span class="token punctuation">;</span><span class="token comment">//如果key 存在，就替换</span>
<span class="token keyword control-flow">return</span> old<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="gdcj5cUX6wrAdmmiwfYT3E" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">addEntry</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果是新k, 就addEntry</span>
<span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="rXGBMeysgUbg9rccZnGc8W" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token operator">*</span><span class="token operator">/</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">setProperty</span><span class="token punctuation">(</span><span class="token string">"charset"</span><span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">setProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"汤姆"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注意保存时，是中文的 unicode码值</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">setProperty</span><span class="token punctuation">(</span><span class="token string">"pwd"</span><span class="token punctuation">,</span> <span class="token string">"888888"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="kzgzVVvnap4eYVrLEhd1QM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//将k-v 存储文件中即可</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">store</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql2.properties"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"保存配置文件成功~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="t7gGmPpJQMtAAgF7oRPZuT" class="wolai-block"><span class="inline-wrap">ipv4 地址分类：</span></h4><h4 id="ni9q3yviUcMyv4VK3PfApS" class="wolai-block"><span class="inline-wrap">域名：</span></h4><code-block id="gEN5U4UwUgQUnqB6swT8C2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>将ip地址映射成域名</pre></div></code-block><h4 id="cAyc5y6Q5TdAHurpfMZXFq" class="wolai-block"><span class="inline-wrap">端口号：</span></h4><h4 id="ezUug3KVdhV3DSaTzeHnmh" class="wolai-block"><span class="inline-wrap">用于标识计算机上某个特定的网络程序</span></h4><h4 id="edxPuhKfRPeg2zqKaw63k6" class="wolai-block"><span class="inline-wrap">表示形式：以整数形式，范围 0~65535</span></h4><code-block id="jQQ8LDoMCXbKa263dSuiZy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token number">0</span><span class="token operator">~</span><span class="token number">1024</span>己经被占用，比如ssh <span class="token number">22</span><span class="token punctuation">,</span>ftp <span class="token number">21</span><span class="token punctuation">,</span> smtp <span class="token number">25</span> http <span class="token number">80</span>
常⻅的网络程序端口号：
tomcat <span class="token operator">:</span><span class="token number">8080</span>
mysql<span class="token operator">:</span><span class="token number">3306</span>
oracle<span class="token operator">:</span><span class="token number">1521</span>
sqlserver<span class="token operator">:</span><span class="token number">1433</span></pre></div></code-block><h4 id="gd9Cs6w5YPopqzhcRPbxwJ" class="wolai-block"><span class="inline-wrap">网络通信协议：</span></h4><code-block id="vTG4rX8C1jgjhqNZxcYHV6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">TCP</span><span class="token operator">/</span><span class="token constant">IP</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Transmission</span> <span class="token maybe-class-name">Control</span> <span class="token maybe-class-name">Protocol</span><span class="token operator">/</span><span class="token maybe-class-name">Internet</span> <span class="token maybe-class-name">Protocol的简写，中文译名为传输控制协议</span><span class="token operator">/</span>因特网互
联协议，又叫网络通讯协议，这个协议是internet最基本的协议，internet国际互联网络的基础就是由网
络层的<span class="token constant">IP</span>协议和传输层的<span class="token constant">TCP</span>协议组成的</pre></div></code-block><h4 id="1QHZ4Lm137EUGHsm9NfkwF" class="wolai-block"><span class="inline-wrap">TCP：</span></h4><h4 id="v4NpAkxcTWQTfs8ugKXddJ" class="wolai-block"><span class="inline-wrap">使用 TCP 协议前，须先建立 TCP 连接，形成传输数据通道</span></h4><h4 id="ks1u4EhQGopeoBDvY19Wt7" class="wolai-block"><span class="inline-wrap">传输前，采用”三次握手&quot;方式，是可靠的</span></h4><h4 id="oGLqpu1bLSSoQ3MtuXMxzh" class="wolai-block"><span class="inline-wrap">TCP 协议进行通信的两个应用进程：客户端、服务端</span></h4><h4 id="2qKwaczwsfbAHMNXTpRFtY" class="wolai-block"><span class="inline-wrap">在连接中可进行大数据量的传输</span></h4><h4 id="15kmtxkvDAhjahssmkfSWK" class="wolai-block"><span class="inline-wrap">传输完毕，需释放已建立的连接，效率低</span></h4><h4 id="pp4Vaznq6yzuhBpqWAv2h2" class="wolai-block"><span class="inline-wrap">UDP：</span></h4><h4 id="cNoJm8cZEcHpthB71YMD43" class="wolai-block"><span class="inline-wrap">格数据源、目的封装成数据包，不需要建立连接</span></h4><h4 id="mjWEd57HargLYBiDfQnrVL" class="wolai-block"><span class="inline-wrap">每个数据报的大小限制在 64K 内</span></h4><h4 id="4FUM8x1qtd8KSXh8uC4do5" class="wolai-block"><span class="inline-wrap">因无需连接，故是不可靠的</span></h4><h4 id="uL6LZpFNWBXGPUA4sHWTLc" class="wolai-block"><span class="inline-wrap">发送数据结束时无需释放资源(因为不是面向连接的)，速度快</span></h4><h2 id="uyE1466edR7gMSaujDiUHg" class="wolai-block"><span class="inline-wrap">17.2 InetAddress</span></h2><h4 id="d9ULUB8EQucLoyUfzExoau" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="vN4Yct7Tc748KYcQkq6zVa" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>获取本机InetAddress对象 getLocalHost
根据指定主机名<span class="token operator">/</span>域名获取ip地址对象 getByName
获取InetAddress对象的主机名 getHostName
获取InetAddress对象的地址 getHostAddress</pre></div></code-block><code-block id="n1pdJhSHKwfpuekJ1TtPgf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">API_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">UnknownHostException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="puf7N8964mEU3rZKJpRRnX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 获取本机的InetAddress 对象</span>
<span class="token maybe-class-name">InetAddress</span> localHost <span class="token operator">=</span> <span class="token maybe-class-name">InetAddress</span><span class="token punctuation">.</span><span class="token method function property-access">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>localHost<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//DESKTOP-S4MP84S/192.168.12.1</span></pre></div></code-block><code-block id="8AqabAVWutCf3mC5Mfq7y8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 根据指定主机名 获取 InetAddress对象</span>
<span class="token maybe-class-name">InetAddress</span> host1 <span class="token operator">=</span> <span class="token maybe-class-name">InetAddress</span><span class="token punctuation">.</span><span class="token method function property-access">getByName</span><span class="token punctuation">(</span><span class="token string">"DESKTOP-S4MP84S"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"host1="</span> <span class="token operator">+</span> host1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//DESKTOP-S4MP84S/192.168.12.1</span></pre></div></code-block><code-block id="tbdQSeLwsRK5wp6w6H9mRp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 根据域名返回 InetAddress对象, 比如 http://www.baidu.com 对应</span>
<span class="token maybe-class-name">InetAddress</span> host2 <span class="token operator">=</span> <span class="token maybe-class-name">InetAddress</span><span class="token punctuation">.</span><span class="token method function property-access">getByName</span><span class="token punctuation">(</span><span class="token string">"www.baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="w14p1VSTPhND9b1BFwtX7p" class="wolai-block"><span class="inline-wrap">17.3 Socket</span></h2><h4 id="8P91TsX4C8tVyAAgmJv8sJ" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="qo7WWWbFr1Bo94uo95x821" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>通信的两端都要有Socket，是两台机器间通信的端点
<span class="token maybe-class-name">Socket允许程序把网络连接当成一个流，数据在两个Socket间通过</span><span class="token constant">IO</span>传输
一般主动发起通信的应用程序属客户端，等待通信请求的为服务端</pre></div></code-block><h4 id="2h12sTJCyfA3cRFvA8kvpE" class="wolai-block"><span class="inline-wrap">TCP 网络通信编程：</span></h4><h4 id="gWKAPQ34pd1Fm8xQ1XzV4q" class="wolai-block"><span class="inline-wrap">基于客户端——服务端的网络通信</span></h4><h4 id="t6G2yeSMPrehkaYntY9bQZ" class="wolai-block"><span class="inline-wrap">底层使用 TCP/IP 协议</span></h4><code-block id="detYaE92Rx6W43rkdmHbsd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>基于Socket的<span class="token constant">TCP</span>编程</pre></div></code-block><h2 id="nHCxgh1cvDNaAeYPKV8qQJ" class="wolai-block"><span class="inline-wrap">17.4 TCP 编程 ⭐</span></h2><h4 id="apRGDPyegM7Tiz6EUDYr8p" class="wolai-block"><span class="inline-wrap">服务端：</span></h4><code-block id="o6UYfmTcL8oqtFu7c2FL36" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"host2="</span> <span class="token operator">+</span> host2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//www.baidu.com / 110.242.68.4</span></pre></div></code-block><code-block id="jMSKZGwiXsRkurb97XTTnJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 通过 InetAddress 对象，获取对应的地址</span>
<span class="token known-class-name class-name">String</span> hostAddress <span class="token operator">=</span> host2<span class="token punctuation">.</span><span class="token method function property-access">getHostAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//IP 110.242.68.4</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"host2 对应的ip = "</span> <span class="token operator">+</span> hostAddress<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//110.242.68.4</span></pre></div></code-block><code-block id="pq2cMxzFQJGb2iq5qMNRe1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 通过 InetAddress 对象，获取对应的主机名/或者的域名</span>
<span class="token known-class-name class-name">String</span> hostName <span class="token operator">=</span> host2<span class="token punctuation">.</span><span class="token method function property-access">getHostName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"host2对应的主机名/域名="</span> <span class="token operator">+</span> hostName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://www.baidu.com</span></pre></div></code-block><code-block id="2Q41CMg7pMVcLsGop3wU1u" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="18prozit2ofZo8tiB8AYLS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SocketTCP03Server</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//思路</span>
<span class="token comment">//1. 在本机 的 9999 端口监听, 等待连接</span></pre></div></code-block><h4 id="3GuCHSvYTdGJXN9wvJFbgP" class="wolai-block"><span class="inline-wrap">客户端：</span></h4><h4 id="xktYEJ7D4REH6D9TAkzW1J" class="wolai-block"><span class="inline-wrap">// 细节: 要求在本机没有其它服务在监听 9999</span></h4><code-block id="tby6tdqwdWBDJBcgcotq3D" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// 细节：这个 ServerSocket 可以通过 accept() 返回多个Socket[多个客户端连接服务器</span>
的并发<span class="token punctuation">]</span>
<span class="token maybe-class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span> <span class="token number">9999</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"服务端，在 9999 端口监听，等待连接.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 当没有客户端连接 9999 端口时，程序会 阻塞, 等待连接</span>
<span class="token comment">// 如果有客户端连接，则会返回Socket对象，程序继续</span></pre></div></code-block><code-block id="vBzw2fFU8k26ugk1jXtQcQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token method function property-access">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="uPGbFMgYnpJyHBYewJxkAs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"服务端 socket ="</span> <span class="token operator">+</span> socket<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="cmLyLQiyaXNMHRu5gNpKsX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 通过socket.getInputStream() 读取客户端写入到数据通道的数据, 显示</span>
<span class="token maybe-class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token method function property-access">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="oRghsQyW7Mv3TNi3LsnFhR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. IO读取, 使用字符流, 老师使用 InputStreamReader 将 inputStream 转成字符流</span>
<span class="token maybe-class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span><span class="token method function property-access">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出</span></pre></div></code-block><code-block id="eS4caiYE36gktXYrUiSzg6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 获取socket相关联的输出流</span>
<span class="token maybe-class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token method function property-access">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用字符输出流的方式回复信息</span>
<span class="token maybe-class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"hello client 字符流"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 插入一个换行符，表示回复内容的结束</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//注意需要手动的flush</span></pre></div></code-block><code-block id="9xrG8BLTgoKPsh6hKEjekA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//6.关闭流和socket</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedReader<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
serverSocket<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//关闭</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="gtFDdWzNeCi9PM3oEoRe9F" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SocketTCP03Client</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//思路</span>
<span class="token comment">//1. 连接服务端 (ip , 端口）</span>
<span class="token comment">//解读: 连接本机的 9999 端口, 如果连接成功，返回Socket对象</span>
<span class="token maybe-class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token maybe-class-name">InetAddress</span><span class="token punctuation">.</span><span class="token method function property-access">getLocalHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9999</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"客户端 socket返回="</span> <span class="token operator">+</span> socket<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="5jkfz2u6a3Hq293ssPkwZ6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 连接上后，生成Socket, 通过socket.getOutputStream()</span></pre></div></code-block><h4 id="nPDWfTJwHpvDyS9G9dSAGd" class="wolai-block"><span class="inline-wrap">图片拷⻉</span></h4><code-block id="vKCJEYEuQy8BpaZ5yhRYqf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// 得到 和 socket对象关联的输出流对象</span>
<span class="token maybe-class-name">OutputStream</span> outputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token method function property-access">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="o7DMt6E5K3h24cwQkWsGo2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 通过输出流，写入数据到 数据通道, 使用字符流</span>
<span class="token maybe-class-name">BufferedWriter</span> bufferedWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span><span class="token string">"hello, server 字符流"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//插入一个换行符，表示写入的内容结束, 注意，要求对方使用</span>
<span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 如果使用的字符流，需要手动刷新，否则数据不会写入数据通道</span></pre></div></code-block><code-block id="2yya6Bc1ELnLncF7VPqohM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 获取和socket关联的输入流. 读取数据(字符)，并显示</span>
<span class="token maybe-class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token method function property-access">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">BufferedReader</span> bufferedReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> s <span class="token operator">=</span> bufferedReader<span class="token punctuation">.</span><span class="token method function property-access">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="2NHtJAN9Nc11GmePoqXBQt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 关闭流对象和socket, 必须关闭</span>
bufferedReader<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//关闭外层流</span>
bufferedWriter<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"客户端退出....."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="623BjbZw6A8uZiJdCEddY3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TCPFileUploadServer</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="ehaBV5SmZDcYa1NDr7aFtw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 服务端在本机监听 8888 端口</span>
<span class="token maybe-class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span> <span class="token number">8888</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"服务端在 8888 端口监听...."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 等待连接</span>
<span class="token maybe-class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token method function property-access">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="k8ZkTSRgw9MiY7wKafmDL8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 读取客户端发送的数据</span>
<span class="token comment">// 通过Socket得到输入流</span>
<span class="token maybe-class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token method function property-access">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token maybe-class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token method function property-access">streamToByteArray</span><span class="token punctuation">(</span>bis<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="kq3Fuy43EYyaFu3okur215" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 将得到 bytes 数组，写入到指定的路径，就得到一个文件了</span>
<span class="token known-class-name class-name">String</span> destFilePath <span class="token operator">=</span> <span class="token string">"src\\abc.mp4"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">BufferedOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>destFilePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bos<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
bos<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="nmD4YNGZ9bxuWJ2DkswSSn" class="wolai-block"><span class="inline-wrap">// 向客户端回复 &quot;收到图片&quot;</span></h4><div id="ctcjhjjPKuQ5CdvJY7RMeB" class="wolai-block wolai-text"><div><span class="inline-wrap">// 通过 socket 获取到输出流(字符)
BufferedWriter writer = new BufferedWriter(new
OutputStreamWriter(socket.getOutputStream()));
writer.write(&quot;收到图片&quot;);
writer.flush();//把内容刷新到数据通道
socket.shutdownOutput();//设置写入结束标记</span></div></div><div id="uzfbS1F2jESqsVGJfQYYfh" class="wolai-block wolai-text"><div><span class="inline-wrap">//关闭其他资源
writer.close();
bis.close();
socket.close();
serverSocket.close();
}
}</span></div></div><div id="aBwViCEEnvW5W5ASwG6yt1" class="wolai-block wolai-text"><div><span class="inline-wrap">public class TCPFileUploadClient {
public static void main(String[] args) throws Exception {</span></div></div><div id="d1imWfBA7ioRGtNVgMZLvX" class="wolai-block wolai-text"><div><span class="inline-wrap">//客户端连接服务端 8888 ，得到 Socket 对象
Socket socket = new Socket(InetAddress.getLocalHost(), 8888 );
//创建读取磁盘文件的输入流
//String filePath = &quot;e:\qie.png&quot;;
String filePath = &quot;e:\abc.mp4&quot;;
BufferedInputStream bis = new BufferedInputStream(new
FileInputStream(filePath));</span></div></div><div id="7U79z6hxQem9FjbwfJ3aBq" class="wolai-block wolai-text"><div><span class="inline-wrap">//bytes 就是 filePath 对应的字节数组
byte[] bytes = StreamUtils.streamToByteArray(bis);</span></div></div><div id="pdLaXQAPJQMwTM9iN4T5Fj" class="wolai-block wolai-text"><div><span class="inline-wrap">//通过 socket 获取到输出流, 将 bytes 数据发送给服务端
BufferedOutputStream bos = new
BufferedOutputStream(socket.getOutputStream());
bos.write(bytes);//将文件对应的字节数组的内容，写入到数据通道
bis.close();
socket.shutdownOutput();//设置写入数据的结束标记</span></div></div><div id="mstqUUg2zUk9jsXZMD8MMG" class="wolai-block wolai-text"><div><span class="inline-wrap">//=====接收从服务端回复的消息=====</span></div></div><div id="wqmGuBPNqrM9yqNWxnZq2d" class="wolai-block wolai-text"><div><span class="inline-wrap">InputStream inputStream = socket.getInputStream();
//使用 StreamUtils 的方法，直接将 inputStream 读取到的内容 转成字符串
String s = StreamUtils.streamToString(inputStream);
System.out.println(s);</span></div></div><div id="iNmitCzTdiPhqCrspm2HU3" class="wolai-block wolai-text"><div><span class="inline-wrap">//关闭相关的流
inputStream.close();
bos.close();
socket.close();</span></div></div><h4 id="bHh5t89LXREmDhVLsPtiMc" class="wolai-block"><span class="inline-wrap">音乐拷⻉：</span></h4><h4 id="s8CNz7zRyX2ebveux91jCx" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="mk5YsbHHGZ78Fh6wGmTyWb" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="3bn5QR42SJh4994sCzWhFg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Homework03Server</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="q88qGGBtzm9LUR95F61LhG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1 监听 9999 端口</span>
<span class="token maybe-class-name">ServerSocket</span> serverSocket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span> <span class="token number">9999</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.等待客户端连接</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"服务端，在 9999 端口监听，等待下载文件"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Socket</span> socket <span class="token operator">=</span> serverSocket<span class="token punctuation">.</span><span class="token method function property-access">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3.读取 客户端发送要下载的文件名</span>
<span class="token comment">// 这里老师使用了while读取文件名，时考虑将来客户端发送的数据较大的情况</span>
<span class="token maybe-class-name">InputStream</span> inputStream <span class="token operator">=</span> socket<span class="token punctuation">.</span><span class="token method function property-access">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span> <span class="token number">1024</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
int len <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> downLoadFileName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token method function property-access">read</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
downLoadFileName <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"客户端希望下载文件名="</span> <span class="token operator">+</span> downLoadFileName<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="p7HvN9wAajTe7A49UQhVfM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//老师在服务器上有两个文件, 无名.mp3 高山流水.mp3</span>
<span class="token comment">//如果客户下载的是 高山流水 我们就返回该文件，否则一律返回 无名.mp3</span></pre></div></code-block><code-block id="3Z8tsWsFT8oiDEj7Y7hVY3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> resFileName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token string">"高山流水"</span><span class="token punctuation">.</span><span class="token method function property-access">equals</span><span class="token punctuation">(</span>downLoadFileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
resFileName <span class="token operator">=</span> <span class="token string">"src\\高山流水.mp3"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
resFileName <span class="token operator">=</span> <span class="token string">"src\\无名.mp3"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6UCtxaza12PYhs2eyDztvW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 创建一个输入流，读取文件</span>
<span class="token maybe-class-name">BufferedInputStream</span> bis <span class="token operator">=</span>
<span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>resFileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="6QVwHz6oWed29aL4TzhXUB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 使用工具类StreamUtils ，读取文件到一个字节数组</span></pre></div></code-block><code-block id="c4cQsCzjmCMscV7Xc8Lr9J" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>byte<span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token maybe-class-name">StreamUtils</span><span class="token punctuation">.</span><span class="token method function property-access">streamToByteArray</span><span class="token punctuation">(</span>bis<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//6. 得到Socket关联的输出流</span>
<span class="token maybe-class-name">BufferedOutputStream</span> bos <span class="token operator">=</span>
<span class="token keyword">new</span> <span class="token class-name">BufferedOutputStream</span><span class="token punctuation">(</span>socket<span class="token punctuation">.</span><span class="token method function property-access">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//7. 写入到数据通道，返回给客户端</span>
bos<span class="token punctuation">.</span><span class="token method function property-access">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span><span class="token method function property-access">shutdownOutput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//很关键.</span></pre></div></code-block><code-block id="aPT4wMEoR6ceEBXQnBLPwf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//8 关闭相关的资源</span></pre></div></code-block><div id="4cdRymumVRCxgRiMzfmZWp" class="wolai-block wolai-text"><div><span class="inline-wrap">bis.close();
inputStream.close();
socket.close();
serverSocket.close();
System.out.println(&quot;服务端退出...&quot;);
}
}</span></div></div><div id="aDYhLusSeSQLHeGdGwiSKp" class="wolai-block wolai-text"><div><span class="inline-wrap">public class Homework03Client {
public static void main(String[] args) throws Exception {</span></div></div><h4 id="2Q5qWzd1dsCkBkXzc4wuZj" class="wolai-block"><span class="inline-wrap">//1. 接收用户输入，指定下载文件名</span></h4><div id="ukstzPE2orMvyzki1ANZXJ" class="wolai-block wolai-text"><div><span class="inline-wrap">Scanner scanner = new Scanner(System.in);
System.out.println(&quot;请输入下载文件名&quot;);
String downloadFileName = scanner.next();</span></div></div><div id="dmSzKHPHEJCWUDR5T7TsWS" class="wolai-block wolai-text"><div><span class="inline-wrap">//2. 客户端连接服务端，准备发送
Socket socket = new Socket(InetAddress.getLocalHost(), 9999 );
//3. 获取和 Socket 关联的输出流
OutputStream outputStream = socket.getOutputStream();
outputStream.write(downloadFileName.getBytes());
//设置写入结束的标志
socket.shutdownOutput();</span></div></div><div id="hma8xfXojk95tEmd6Go2Fz" class="wolai-block wolai-text"><div><span class="inline-wrap">//4. 读取服务端返回的文件(字节数据)
BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());
byte[] bytes = StreamUtils.streamToByteArray(bis);
//5. 得到一个输出流，准备将 bytes 写入到磁盘文件
//比如你下载的是 高山流水 =&gt; 下载的就是 高山流水.mp3
// 你下载的是 韩顺平 =&gt; 下载的就是 无名.mp3 文件名 韩顺平.mp3
String filePath = &quot;e:\&quot; + downloadFileName + &quot;.mp3&quot;;
BufferedOutputStream bos = new BufferedOutputStream(new
FileOutputStream(filePath));
bos.write(bytes);</span></div></div><div id="fibKqThLRo4MC8VMA1CcnU" class="wolai-block wolai-text"><div><span class="inline-wrap">//6. 关闭相关的资源
bos.close();
bis.close();
outputStream.close();
socket.close();</span></div></div><div id="ji89fTGH7NhovkXNq2iKe2" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(&quot;客户端下载完毕，正确退出..&quot;);
}
}</span></div></div><h4 id="5nkbe7ytpKgDJET2Exq2Vr" class="wolai-block"><span class="inline-wrap">netstat 指令：</span></h4><code-block id="1PA3UfLadiZjYrcnWnrVNj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>netstat<span class="token operator">-</span>an 可以查看当前主机网络情况，包括端口监听情况和网络连接情况
netstat <span class="token operator">-</span>an l more 可以分⻚显示
要求在dos控制台下执行</pre></div></code-block><h2 id="6gEUZgM7Q8nYiBWVvbuz6B" class="wolai-block"><span class="inline-wrap">17.5 UDP 编程</span></h2><h4 id="8c3TAju7zmwAUt84ezduTf" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="4iuqEL38tEGmM1tQe8nhKv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>类 <span class="token maybe-class-name">DatagramSocket</span> 和 <span class="token maybe-class-name">DatagramPacket</span> 实现了基于 <span class="token constant">UDP</span> 协议网络程序
<span class="token constant">UDP</span>数据报通过数据报套接字 <span class="token maybe-class-name">DatagramSocket</span> 发送和接收，系统不保证<span class="token constant">UDP</span>数据报一定能够安全送到
目的地，也不能确定什么时候可以抵达
<span class="token maybe-class-name">DatagramPacket</span> 对象封装了<span class="token constant">UDP</span>数据报，在数据报中包含了发送端的<span class="token constant">IP</span>地址和端口号以及接收端的<span class="token constant">IP</span>
地址和端口号
<span class="token constant">UDP</span>协议中每个数据报都给出了完整的地址信息，因此无须建立发送方和接收方的连接</pre></div></code-block><h4 id="gME5yDqdwh9xGcSt3gQUgQ" class="wolai-block"><span class="inline-wrap">基本流程：</span></h4><ol class="wolai-block"><li id="uW1CjrkSUBDsuTeqyE9rx3"><div class="marker"></div><span class="inline-wrap">核心的两个类/对象 Datagramsocket 与 DatagramPacket</span></li><li id="dznR2iM9qGyzmDYpsiRDPe"><div class="marker"></div><span class="inline-wrap">建立发送端，接收端</span></li><li id="8PA8EfgtwiSExrgqrddCbt"><div class="marker"></div><span class="inline-wrap">建立数据包</span></li><li id="wCy8RyQwn7iMdJbmMwtrjR"><div class="marker"></div><span class="inline-wrap">调用 DatagramSocket 的发送、接收方法</span></li><li id="x5frAkW16R7xs44hFNzTAc"><div class="marker"></div><span class="inline-wrap">关网 DatagramSocket</span></li></ol><h4 id="fArGZiMex3X91M93scUceA" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="d35Ciro6Y8cZSoYsg899vg" class="wolai-block"><span class="inline-wrap">1. 没有明确的服务端和客户端，演变成数据的发送端和接收端</span></h4><ol class="wolai-block"><li id="qnSzrWiFjmsSVLvDw8uTgM"><div class="marker"></div><span class="inline-wrap">接收数据和发送数据是通过 DatagramSocket 对象完成</span></li><li id="5icbZvkkAchCSk155xGqVQ"><div class="marker"></div><span class="inline-wrap">将数据封装到 DatagramPacket 对象/ 装包</span></li><li id="7qStRjjaqNYhQRKhddiJ7Z"><div class="marker"></div><span class="inline-wrap">当接收到 DatagramPacket 对象，需要进行拆包，取出数据</span></li><li id="fkF5vgqtxDZ9B36tpNU8kp"><div class="marker"></div><span class="inline-wrap">DatagramSocket 可以指定在哪个端口接收数据</span></li></ol><h4 id="wmPcmp8s34f6JHWCPr9Cby" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="a7rhsZSJEfgen99ujuEPSw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UDPReceiverA</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//1. 创建一个 DatagramSocket 对象，准备在 9999 接收数据</span>
<span class="token maybe-class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span> <span class="token number">9999</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 构建一个 DatagramPacket 对象，准备接收数据</span>
<span class="token comment">// 在前面讲解UDP 协议时，老师说过一个数据包最大 64k</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span> <span class="token number">1024</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">DatagramPacket</span> packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 调用 接收方法, 将通过网络传输的 DatagramPacket 对象</span>
<span class="token comment">// 填充到 packet对象</span>
<span class="token comment">//老师提示: 当有数据包发送到 本机的 9999 端口时，就会接收到数据</span>
<span class="token comment">// 如果没有数据包发送到 本机的 9999 端口, 就会阻塞等待.</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"接收端A 等待接收数据.."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span><span class="token method function property-access">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="oCrtQBgJxJQxvUgpQB4MMy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 可以把packet 进行拆包，取出数据，并显示.</span>
int length <span class="token operator">=</span> packet<span class="token punctuation">.</span><span class="token method function property-access">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//实际接收到的数据字节⻓度</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> packet<span class="token punctuation">.</span><span class="token method function property-access">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//接收到数据</span>
<span class="token known-class-name class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="7GiLGmJEQ5rxaiRygoRkuW" class="wolai-block"><span class="inline-wrap">//===回复信息给 B 端</span></h4><code-block id="jzCQxxQFfYM9LRfKqcX2JS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//将需要发送的数据，封装到 DatagramPacket对象</span>
data <span class="token operator">=</span> <span class="token string">"好的, 明天⻅"</span><span class="token punctuation">.</span><span class="token method function property-access">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//说明: 封装的 DatagramPacket对象 data 内容字节数组 , data.length , 主机(IP) , 端</span>
口
packet <span class="token operator">=</span>
<span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">InetAddress</span><span class="token punctuation">.</span><span class="token method function property-access">getByName</span><span class="token punctuation">(</span><span class="token string">"192.168.12.1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9998</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="jxqmS6wtQBm7fMuCXJ7mVi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>socket<span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发送</span></pre></div></code-block><code-block id="pcJ6JbP3DXi4kMXZS96GTm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 关闭资源</span>
socket<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"A端退出..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="jU7XevsDHCw4XDHAvixrnY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="g3zLacSBAP3ESurpPx1qyk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UDPSenderB</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="sZYom7UyEmYdSJgmYfqE8i" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1.创建 DatagramSocket 对象，准备在 9998 端口 接收数据</span>
<span class="token maybe-class-name">DatagramSocket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramSocket</span><span class="token punctuation">(</span> <span class="token number">9998</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h1 id="vqBFPpPkibHY9sHG4v3Vci" class="wolai-block"><span class="inline-wrap">18 反射</span></h1><h2 id="cmyfxa5LaFeencAVjqCthc" class="wolai-block"><span class="inline-wrap">18.1 反射机制</span></h2><h4 id="csvETrzJuBXqJ6QtiADFGp" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="giDJx9VkmqSZ8gySr4rRFj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>反射机制允许程序在执行期借助子Reflection <span class="token constant">API</span><span class="token function">取得任何类的内部信息</span><span class="token punctuation">(</span>比如成员变量，构造器，成员方
法等等），并能操作对象的属性及方法
加载完类之后，在堆中就产生了一个Class类型的对象（一个类只有一个Class对象），这个对象包含了
类的完整结构信息。通过这个对象得到类的结构。这个对象就像一面镜子，透过这个镜子看到类的结
构，所以，形象的称之为：反射</pre></div></code-block><code-block id="sAfZBryRmR4WnX1Pa12WpU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 将需要发送的数据，封装到 DatagramPacket对象</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token string">"hello 明天吃火锅~"</span><span class="token punctuation">.</span><span class="token method function property-access">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span></pre></div></code-block><code-block id="8YrX4eSWc88xMKzpEuTrUy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//说明: 封装的 DatagramPacket对象 data 内容字节数组 , data.length , 主机(IP) , 端</span>
口
<span class="token maybe-class-name">DatagramPacket</span> packet <span class="token operator">=</span>
<span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">InetAddress</span><span class="token punctuation">.</span><span class="token method function property-access">getByName</span><span class="token punctuation">(</span><span class="token string">"192.168.12.1"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">9999</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7emzzLwp1x78faCMGAss3S" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>socket<span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fVdNQaeB9Cv8YAE3NpW6vs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3.=== 接收从A端回复的信息</span>
<span class="token comment">//(1) 构建一个 DatagramPacket 对象，准备接收数据</span>
<span class="token comment">// 在前面讲解UDP 协议时，老师说过一个数据包最大 64k</span>
byte<span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">byte</span><span class="token punctuation">[</span> <span class="token number">1024</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
packet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DatagramPacket</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> buf<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(2) 调用 接收方法, 将通过网络传输的 DatagramPacket 对象</span>
<span class="token comment">// 填充到 packet对象</span>
<span class="token comment">//老师提示: 当有数据包发送到 本机的 9998 端口时，就会接收到数据</span>
<span class="token comment">// 如果没有数据包发送到 本机的 9998 端口, 就会阻塞等待.</span>
socket<span class="token punctuation">.</span><span class="token method function property-access">receive</span><span class="token punctuation">(</span>packet<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="4CL7ZNL93Y2hdGg6HQDh35" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//(3) 可以把packet 进行拆包，取出数据，并显示.</span>
int length <span class="token operator">=</span> packet<span class="token punctuation">.</span><span class="token method function property-access">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//实际接收到的数据字节⻓度</span>
data <span class="token operator">=</span> packet<span class="token punctuation">.</span><span class="token method function property-access">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//接收到数据</span>
<span class="token known-class-name class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="tdZVUCXhrS2d49DMxrkBRF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//关闭资源</span>
socket<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"B端退出"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="oGV9ZjwHEfvitgbxwSwwy4" class="wolai-block"><span class="inline-wrap">18.2 反射相关类</span></h2><code-block id="jnhUWHs96cyKRUe6NB8ZoN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>java<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Class：代表一个类，Class对象表示某个类加载后在堆中的对象</span></span>
java<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">.</span><span class="token property-access">reflect</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Method：代表该类的方法</span></span>
java<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">.</span><span class="token property-access">reflect</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Field：代表类的成员变量</span></span>
java<span class="token punctuation">.</span><span class="token property-access">lang</span><span class="token punctuation">.</span><span class="token property-access">reflect</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Constructor：代表类的构造方法</span></span></pre></div></code-block><code-block id="pwRigBKzVSttfdwy6Ff6qe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Reflection01</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="7RNb49EyKx6qEEByjA6NbD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 使用Properties 类, 可以读写配置文件</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\re.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> classfullpath <span class="token operator">=</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">"classfullpath"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"com.hspedu.Cat"</span>
<span class="token known-class-name class-name">String</span> methodName <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//"hi"</span></pre></div></code-block><h4 id="6ZgSRD2fws9s43NuKs2mpH" class="wolai-block"><span class="inline-wrap">//2. 使用反射机制解决</span></h4><code-block id="ibC89SbiyQsJuyE5M6CWbg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//(1) 加载类, 返回Class类型的对象cls</span>
<span class="token maybe-class-name">Class</span> cls <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>classfullpath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(2) 通过 cls 得到你加载的类 com.hspedu.Cat 的对象实例</span>
<span class="token known-class-name class-name">Object</span> o <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"o的运行类型="</span> <span class="token operator">+</span> o<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//运行类型</span>
<span class="token comment">//(3) 通过 cls 得到你加载的类 com.hspedu.Cat 的 methodName"hi" 的方法对象</span>
<span class="token comment">// 即：在反射中，可以把方法视为对象（万物皆对象）</span>
<span class="token maybe-class-name">Method</span> method1 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token method function property-access">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(4) 通过method1 调用方法: 即通过方法对象来实现调用方法</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"============================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
method1<span class="token punctuation">.</span><span class="token method function property-access">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//传统方法 对象.方法() , 反射机制 方法.invoke(对象)</span></pre></div></code-block><code-block id="2NoB9fSiEtpv6A5ieL7M17" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//java.lang.reflect.Field: 代表类的成员变量, Field对象表示某个类的成员变量</span>
<span class="token comment">//得到name字段</span>
<span class="token comment">//getField不能得到私有的属性</span></pre></div></code-block><h2 id="mLNAmWJ5jdLFQHjPRJ7t9a" class="wolai-block"><span class="inline-wrap">18.3 Class 类</span></h2><code-block id="adv1npuccZZZ8ohpnjkSEf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Field</span> nameField <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token method function property-access">getField</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>nameField<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传统写法 对象.成员变量 , 反射 : 成员变量对</span>
象<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>对象<span class="token punctuation">)</span></pre></div></code-block><code-block id="wtfeXbC3iiuzGjxu6ErqjA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//java.lang.reflect.Constructor: 代表类的构造方法, Constructor对象表示构造器</span>
<span class="token maybe-class-name">Constructor</span> constructor <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token method function property-access">getConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//()中可以指定构造器参数类型, 返回无</span>
参构造器
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Cat()</span></pre></div></code-block><code-block id="71CReGK1vTkLcC3UpaqtNU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Constructor</span> constructor2 <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token method function property-access">getConstructor</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里传入的</span>
<span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token property-access">class</span> 就是<span class="token known-class-name class-name">String</span>类的Class对象
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>constructor2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Cat(String name)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="qpkVDfEPSBbestrhaF1vrx" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="oi6k3HJhkSFS5oJaD2bZW8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Class也是类，因此也继承</span><span class="token known-class-name class-name">Object</span>类
<span class="token maybe-class-name">Class类对象不是</span><span class="token keyword">new</span>出来的，而是系统创建的
类的Class类对象，在内存中只有一份，且只加载一次
每个类的实例都会记录它属于哪个Class实例生成
通过Class可以完整地得到一个类的完整结构，通过一系列<span class="token constant">API</span>
<span class="token maybe-class-name">Class对象是存放在堆的</span>
<span class="token function">类的字节码二进制数据，是放在方法区的，有的地方称为类的元数据</span><span class="token punctuation">(</span>包括 方法代码，变量名，方法名，
访问权限等等）</pre></div></code-block><h4 id="nEedE7tMVU5Z1g5uTTQdCg" class="wolai-block"><span class="inline-wrap">Class 类对象获取：</span></h4><ol class="wolai-block"><li id="3rUZfCm7rC8Nk7nmYTFYfR"><div class="marker"></div><span class="inline-wrap">前提：已知一个类的全类名，且该类在类路径下，可通过 Class 类的静态方法 forName()获取
Class cls1 = Class.forName(&quot;java.lang.Cat” )
应用场景：多用于配置文件，读取类全路径，加载类</span></li><li id="e7MB8F7GPKT2qpsQjLGdAb"><div class="marker"></div><span class="inline-wrap">前提：若已知具体的类，通过类的 class 获取，该方式最为安全可靠，程序性能最高
Class cls2 = Cat.class
应用场景：多用于参数传递，比如通过反射得到对应构造器对象</span></li><li id="oK6CykyRQzfqvu6MiaGkoN"><div class="marker"></div><span class="inline-wrap">前提：已知某个类的实例，调用该实例的 getClass()方法获取 Class 对象
Class class = 对象.getClass();
应用场景：通过创建好的对象，获取 Class 对象</span></li><li id="6XxosbYEeA1vWCqw2isGc8"><div class="marker"></div><span class="inline-wrap">其他方式(类加载器)
ClassLoader cl = 对象.getClass().getClassLoader();
Class class4 = cl.loadClass(“类的全类名&quot;);</span></li><li id="q6JQ54rAxbA69NG1tA7Ffp"><div class="marker"></div><span class="inline-wrap">基本数据(int, char boolean,float,double.byte.long,short)
Class cls = 基本数据类型.class</span></li><li id="oo5qaRKZW2AGDeqDjjmqfX"><div class="marker"></div><span class="inline-wrap">基本数据类型对应的包装类，可以通过.type 得到 Class 类对象
Class cls = 包装类.TYPE</span></li></ol><code-block id="eQ7gBT8yUXBT5gBAJVp5a8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GetClass_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="iBRgkA6F4zi1bBTPcty6GM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. Class.forName</span>
<span class="token known-class-name class-name">String</span> classAllPath <span class="token operator">=</span> <span class="token string">"com.hspedu.Car"</span><span class="token punctuation">;</span> <span class="token comment">//通过读取配置文件获取</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls1 <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>classAllPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="pF7PsR3eHb3LL7nwz6Mmx8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 类名.class , 应用场景: 用于参数传递</span>
<span class="token maybe-class-name">Class</span> cls2 <span class="token operator">=</span> <span class="token maybe-class-name">Car</span><span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fiDvSRxyH1ixdXZR6PBpu8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 对象.getClass(), 应用场景，有对象实例</span>
<span class="token maybe-class-name">Car</span> car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Class</span> cls3 <span class="token operator">=</span> car<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="uqS6iABaMPFAUzjjLuVxr6" class="wolai-block"><span class="inline-wrap">有 Class 对象的类型：</span></h4><h4 id="wwkPAkHLq6o6R1s3WVwyb2" class="wolai-block"><span class="inline-wrap">1. 外部类，成员内部类，静态内部类，局部内部类，匿名内部类</span></h4><ol class="wolai-block"><li id="iX5Paqqur7wgg5LudTkRSc"><div class="marker"></div><span class="inline-wrap">interface :接口</span></li><li id="oLJPqXmoguFFJAUQukQW7z"><div class="marker"></div><span class="inline-wrap">数组</span></li><li id="eZrZHvsQzcc31jYzBQMfrb"><div class="marker"></div><span class="inline-wrap">enum：枚举</span></li><li id="ikQVnfCopzJJRh8uEYhSws"><div class="marker"></div><span class="inline-wrap">annotation ：注解</span></li><li id="o9sJBqm1mAe3tSoKi6Jr19"><div class="marker"></div><span class="inline-wrap">基本数据类型</span></li><li id="dkhwiZmBEaLgFz2kAYehaU"><div class="marker"></div><span class="inline-wrap">void</span></li></ol><h4 id="cbRiGhxFhPtV46C1wmXh2m" class="wolai-block"><span class="inline-wrap">常用方法：</span></h4><code-block id="8nC1xTGAqikLS1DtGDu92q" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls3<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="cTZT6jpNFqQrBiYf2iobgG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 通过类加载器【 4 种】来获取到类的Class对象</span>
<span class="token comment">//(1)先得到类加载器 car</span>
<span class="token maybe-class-name">ClassLoader</span> classLoader <span class="token operator">=</span> car<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//(2)通过类加载器得到Class对象</span>
<span class="token maybe-class-name">Class</span> cls4 <span class="token operator">=</span> classLoader<span class="token punctuation">.</span><span class="token method function property-access">loadClass</span><span class="token punctuation">(</span>classAllPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls4<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="g6ZSe9fmuv5wpskdmUyxH5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//cls1 , cls2 , cls3 , cls4 其实是同一个对象</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls1<span class="token punctuation">.</span><span class="token method function property-access">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls2<span class="token punctuation">.</span><span class="token method function property-access">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls3<span class="token punctuation">.</span><span class="token method function property-access">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls4<span class="token punctuation">.</span><span class="token method function property-access">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="9cgRF7svHbLdRYo4n3idEc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 基本数据(int, char,boolean,float,double,byte,long,short) 按如下方式得</span>
到Class类对象
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Integer</span><span class="token operator">></span> integerClass <span class="token operator">=</span> int<span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Character</span><span class="token operator">></span> characterClass <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">Boolean</span><span class="token operator">></span> booleanClass <span class="token operator">=</span> boolean<span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>integerClass<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//int</span></pre></div></code-block><code-block id="e4t36ySDGWjziTqhZCoDHQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//6. 基本数据类型对应的包装类，可以通过 .TYPE 得到Class类对象</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Integer</span><span class="token operator">></span> type1 <span class="token operator">=</span> <span class="token maybe-class-name">Integer</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Character</span><span class="token operator">></span> type2 <span class="token operator">=</span> <span class="token maybe-class-name">Character</span><span class="token punctuation">.</span><span class="token constant">TYPE</span><span class="token punctuation">;</span> <span class="token comment">//其它包装类BOOLEAN, DOUBLE,</span>
<span class="token constant">LONG</span><span class="token punctuation">,</span><span class="token constant">BYTE</span>等待
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>type1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="vAQYMBceNCdjietGd6HCdj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>integerClass<span class="token punctuation">.</span><span class="token method function property-access">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>type1<span class="token punctuation">.</span><span class="token method function property-access">hashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//?</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="5zG7vwydzXdnwh1QW8hebG" class="wolai-block"><span class="inline-wrap">18.4 类加载</span></h2><code-block id="kjbBALpMxCWyupApdgvT7Z" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Class02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">NoSuchFieldException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="uSRj3YqRX5q9r9kwX7iJyz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> classAllPath <span class="token operator">=</span> <span class="token string">"com.hspedu.Car"</span><span class="token punctuation">;</span>
<span class="token comment">//1. 获取到Car类 对应的 Class对象</span>
<span class="token comment">//&lt;?> 表示不确定的Java类型</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> cls <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>classAllPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 输出cls</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//显示cls对象, 是哪个类的Class对象 com.hspedu.Car</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//输出cls运行类型 java.lang.Class</span>
<span class="token comment">//3. 得到包名</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token method function property-access">getPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//包名</span>
<span class="token comment">//4. 得到全类名</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//5. 通过cls创建对象实例</span>
<span class="token maybe-class-name">Car</span> car <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Car</span><span class="token punctuation">)</span> cls<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//car.toString()</span>
<span class="token comment">//6. 通过反射获取属性 brand</span>
<span class="token maybe-class-name">Field</span> brand <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token method function property-access">getField</span><span class="token punctuation">(</span><span class="token string">"brand"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>brand<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//宝⻢</span>
<span class="token comment">//7. 通过反射给属性赋值</span>
brand<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>car<span class="token punctuation">,</span> <span class="token string">"奔驰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>brand<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>car<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//奔驰</span>
<span class="token comment">//8 我希望大家可以得到所有的属性(字段)</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"=======所有的字段属性===="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> cls<span class="token punctuation">.</span><span class="token method function property-access">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Field</span> f <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//名称</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="voGR6Pn4D1x4g5b6K8Vx51" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><ol class="wolai-block"><li id="dTmr1dxP9S7Gc1GuPuxVRh"><div class="marker"></div><span class="inline-wrap">反射机制是 java 实现动态语言的关键，也就是通过反射实现类动态加载</span></li><li id="74ZXktBhr7MAj5TqCsEbP5"><div class="marker"></div><span class="inline-wrap">静态加载：编译时加载相关的类，如果没有则报错，依赖性太强</span></li><li id="2Rg5U4hzzaFNnWmtRXyF6r"><div class="marker"></div><span class="inline-wrap">动态加载：运行时加载需要的类，如果运行时不用该类，即使不存在该类，则不报错，降低了依赖性</span></li></ol><h4 id="qFpHFJMP8811Y3SouHPehZ" class="wolai-block"><span class="inline-wrap">类加载时机：</span></h4><ol class="wolai-block"><li id="nc2FyyfQFAjWvSse2AWMvF"><div class="marker"></div><span class="inline-wrap">当创建对象时 (new）//静态加载</span></li><li id="6feFbJMXTFZFACuBrutXMr"><div class="marker"></div><span class="inline-wrap">当子类被加载时，父类也加载 //静态加载</span></li><li id="nNc76MiNMinzmUNCu1K2Uc"><div class="marker"></div><span class="inline-wrap">调用类中的静态成员时 //静态加载</span></li><li id="jgeVkKCYdhRKi9RzGmHtTV"><div class="marker"></div><span class="inline-wrap">通过反射 //动态加载</span></li></ol><h4 id="sdSqihQKZsN3awMgT6m1xW" class="wolai-block"><span class="inline-wrap">过程图：</span></h4><h4 id="oR5it5WsDSxMSD9A5QT3SL" class="wolai-block"><span class="inline-wrap">各个阶段任务：</span></h4><h4 id="i3tzfEVBqU43PheZmVeyDk" class="wolai-block"><span class="inline-wrap">1 加载阶段</span></h4><div id="55BELPzir2fACXJhzK2YHf" class="wolai-block wolai-text"><div><span class="inline-wrap">JM 在该阶段的主要目的是将字节码从不同的数据源（可能是 class 文件、也可能是 jar 包，甚至网络）转化为二进
制字节流加载到内存中，并生成一个代表该类的 java.lang.Class 对象</span></div></div><h4 id="9mZheSbT3gMDYBWY6K16tu" class="wolai-block"><span class="inline-wrap">2.1 连接阶段——验证</span></h4><ol class="wolai-block"><li id="1wJF4MPD9zho1LpxhojcsX"><div class="marker"></div><span class="inline-wrap">目的是为了确保 Class 文件的字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身的安全</span></li><li id="wg4qHZr8RyTQxtC1Jav4vq"><div class="marker"></div><span class="inline-wrap">包括：文件格式验证(是否以魔数 oxcafebabe 开头)、元数据验证、字节码验证和符号引用验证</span></li><li id="16Ym3HKDJLjHeW2bPqhTg1"><div class="marker"></div><span class="inline-wrap">可以考虑使用-Xverify:none 参数来关闭大部分的类验证措施，缩短虛拟机类加载的时间</span></li></ol><h4 id="dgtJt8yZue17NSbh2rP2oT" class="wolai-block"><span class="inline-wrap">2.2 连接阶段——准备</span></h4><ol class="wolai-block"><li id="vUA5yb3c5Z15ZafBsPaoiC"><div class="marker"></div><span class="inline-wrap">JVM 会在该阶段对静态变量，分配内存井初始化（对应数据类型的默认初始值如 0 、OL、null false 等），这
些变量所使用的内存都将在方法区中进行分配</span></li></ol><h4 id="hte8Yx5ozDrFuZS6c42srD" class="wolai-block"><span class="inline-wrap">2.3 连接阶段——解析</span></h4><h4 id="a3DCHS6ujdLsdebWJtd6Ng" class="wolai-block"><span class="inline-wrap">1. 虛拟机将常量池内的符号引用替换为直接引用的过程</span></h4><h4 id="8PqcGVwwLATPDBajHb5U2d" class="wolai-block"><span class="inline-wrap">3 初始化：</span></h4><ol class="wolai-block"><li id="b9CgdBD5QidrNVth2r7hNp"><div class="marker"></div><span class="inline-wrap">到初始化阶段，才真正开始执行类中定义的 Java 程序代码，此阶段是执行</span><span class="inline-wrap">() 方法的过程</span></li><li id="9EoeVaTCwio86BWget1Tsz"><div class="marker"></div><span class="inline-wrap">() 方法是由编译器按语句在源文件中出现的顺序，依次自动收集类中的所有静态变量的赋值动作和静
态代码块中的语句，
井进行合井</span></li><li id="8WmJ8YS3AP68T1UdEFKXx9"><div class="marker"></div><span class="inline-wrap">虚拟机会保证一个类的 </span><span class="inline-wrap">()方法在多线程环境中被正确地加锁、同步，如果多个线程同时去初始化一个
类，那么只会有一个线程去执行这个类的</span><span class="inline-wrap">()方其他线程都需要阻塞等待，直到活动线程执行</span><span class="inline-wrap">()
方法完毕</span></li></ol><h2 id="sTYE2Kk7Nus4tMzA2YpuaJ" class="wolai-block"><span class="inline-wrap">18.5 反射获取类的结构信息</span></h2><h4 id="pi7aM5zy9wJ3vbqPHt223n" class="wolai-block"><span class="inline-wrap">第一组 Class 类方法：</span></h4><code-block id="jsjC9iD1n8LqJjYEHhgC85" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>getName<span class="token operator">:</span>获取全类名
getSimpleName<span class="token operator">:</span>获取简单类名
getFields<span class="token operator">:</span>获取所有<span class="token keyword">public</span>修饰的属性，包含本类以及父类的
getDeclaredFields<span class="token operator">:</span>获取本类中所有属性
getMethods<span class="token operator">:</span>获取所有<span class="token keyword">public</span>修饰的方法，包含本类以及父类的
getDeclaredMethods<span class="token operator">:</span>获取本类中所有方法
getConstructors<span class="token operator">:</span>获取所有<span class="token keyword">public</span>修饰的构造器，包含本类
getDeclaredConstructors<span class="token operator">:</span>获取本类中所有构造器
getPackage<span class="token operator">:</span>lPackage形式返回 包信息
getSuperClass<span class="token operator">:</span>以Class形式返回父类信息
getlnterfaces<span class="token operator">:</span>以Class<span class="token punctuation">[</span><span class="token punctuation">]</span>形式返回接口信息</pre></div></code-block><div id="snU7zL6WoQJTu2F9asQvQU" class="wolai-block wolai-text"><div><span class="inline-wrap">getAnnotations:以 Annotation[] 形式返回注解信息</span></div></div><h4 id="iHd1sAs8PoPmQSkzk5EdRM" class="wolai-block"><span class="inline-wrap">//第一组方法 API</span></h4><code-block id="a2jtDaAh5WN3Uj2uM6BeBG" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">api_01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">NoSuchMethodException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="wjEVWj1ZPBH6bZXxub668D" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//得到Class对象</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> personCls <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span><span class="token string">"com.hspedu.reflection.Person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//getName:获取全类名</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>personCls<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//com.hspedu.reflection.Person</span>
<span class="token comment">//getSimpleName:获取简单类名</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>personCls<span class="token punctuation">.</span><span class="token method function property-access">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Person</span>
<span class="token comment">//getFields:获取所有public修饰的属性，包含本类以及父类的</span>
<span class="token maybe-class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//增强for</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类以及父类的属性="</span> <span class="token operator">+</span> field<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//getDeclaredFields:获取本类中所有属性</span>
<span class="token maybe-class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredFields <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Field</span> declaredField <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类中所有属性="</span> <span class="token operator">+</span> declaredField<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//getMethods:获取所有public修饰的方法，包含本类以及父类的</span>
<span class="token maybe-class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类以及父类的方法="</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//getDeclaredMethods:获取本类中所有方法</span>
<span class="token maybe-class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredMethods <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Method</span> declaredMethod <span class="token operator">:</span> declaredMethods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类中所有方法="</span> <span class="token operator">+</span> declaredMethod<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//getConstructors: 获取所有public修饰的构造器，包含本类</span>
<span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> constructor <span class="token operator">:</span> constructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类的构造器="</span> <span class="token operator">+</span> constructor<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//getDeclaredConstructors:获取本类中所有构造器</span>
<span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredConstructors <span class="token operator">=</span>
personCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> declaredConstructor <span class="token operator">:</span> declaredConstructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类中所有构造器="</span> <span class="token operator">+</span>
declaredConstructor<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里老师只是输出名</span>
<span class="token punctuation">}</span>
<span class="token comment">//getPackage:以Package形式返回 包信息</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>personCls<span class="token punctuation">.</span><span class="token method function property-access">getPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//com.hspedu.reflection</span>
<span class="token comment">//getSuperClass:以Class形式返回父类信息</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> superclass <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"父类的class对象="</span> <span class="token operator">+</span> superclass<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span></pre></div></code-block><div id="6cSNtDNfJgGH6D6eizT5hm" class="wolai-block wolai-text"><div><span class="inline-wrap">//getInterfaces:以 Class[]形式返回接口信息
Class</span></div></div><div id="4keGecprzNNhjy3M4CjBJU" class="wolai-block wolai-text"><div><span class="inline-wrap"> anInterface : interfaces) {
System.out.println(&quot;接口信息=&quot; + anInterface);
}
//getAnnotations:以 Annotation[] 形式返回注解信息
Annotation[] annotations = personCls.getAnnotations();
for (Annotation annotation : annotations) {
System.out.println(&quot;注解信息=&quot; + annotation);//注解
}
}
}</span></div></div><div id="cBTePVMCwEgLHm3RRe7JmY" class="wolai-block wolai-text"><div><span class="inline-wrap">class A {
public String hobby;</span></div></div><div id="w5auRaLLALgwxLzCsWKm1E" class="wolai-block wolai-text"><div><span class="inline-wrap">public void hi() {
}</span></div></div><div id="avyUpuDnjFVcGPEstEvoMc" class="wolai-block wolai-text"><div><span class="inline-wrap">public A() {
}</span></div></div><div id="ctx7ZetXEoduLTcCAx2cp2" class="wolai-block wolai-text"><div><span class="inline-wrap">public A(String name) {
}
}</span></div></div><div id="ijhk8TYeYiQNR4C38QSKAo" class="wolai-block wolai-text"><div><span class="inline-wrap">interface IA {
}</span></div></div><div id="4ZugiiGxzkr8wSGW6gjvE9" class="wolai-block wolai-text"><div><span class="inline-wrap">interface IB {</span></div></div><div id="f451tvTDpsVsj2w4ZWDavf" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="82faUD7ebgvXmUwNueTcJ5" class="wolai-block wolai-text"><div><span class="inline-wrap">@Deprecated
class Person extends A implements IA, IB {
//属性
public String name;
protected static int age; // 4 + 8 = 12
String job;
private double sal;</span></div></div><div id="f55Q1bT2Hxz8yv5N2BMUn3" class="wolai-block wolai-text"><div><span class="inline-wrap">//构造器
public Person() {
}</span></div></div><div id="t4xnDE9HA2M45NhDVpSr1X" class="wolai-block wolai-text"><div><span class="inline-wrap">public Person(String name) {
}</span></div></div><div id="xhs2UNJ1As84KdKjVqAU6c" class="wolai-block wolai-text"><div><span class="inline-wrap">//私有的</span></div></div><h4 id="eKiGZEa3B4WdiDyGZJqje9" class="wolai-block"><span class="inline-wrap">第二组 Field 类方法：</span></h4><code-block id="mNN2KDeDT782tvwFjrvxHb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>getModifiers<span class="token operator">:</span>以int形式返回修饰符
<span class="token keyword">public</span> 是 <span class="token number">1</span> ，<span class="token keyword">private</span> 是 <span class="token number">2</span> ，<span class="token keyword">protected</span> 是 <span class="token number">4</span> ，<span class="token keyword">static</span>是 <span class="token number">8</span> ，final是 <span class="token number">16</span>
getType<span class="token operator">:</span>以Class形式返回类型
getName<span class="token operator">:</span>返回属性名</pre></div></code-block><h4 id="5h8Na5xU6XBKZypf36ZwkW" class="wolai-block"><span class="inline-wrap">第三组 Method 类方法：</span></h4><code-block id="gEvuwzqeFvpfEkMi1osDZQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>getModifiers<span class="token operator">:</span>以int形式返回修饰符
<span class="token keyword">public</span> 是 <span class="token number">1</span> ，<span class="token keyword">private</span> 是 <span class="token number">2</span> ，<span class="token keyword">protected</span> 是 <span class="token number">4</span> ，<span class="token keyword">static</span>是 <span class="token number">8</span> ，final是 <span class="token number">16</span>
getName<span class="token operator">:</span>返回方法名
getParameterTypes<span class="token operator">:</span>以Class<span class="token punctuation">[</span><span class="token punctuation">]</span>返回参数类型数组</pre></div></code-block><code-block id="9iXsaB9fdLtn9HG65ZPz3Y" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token function"><span class="token maybe-class-name">Person</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span> int age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="ug5ThaXsNikfB3aTBaHmdf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="t5ALeFrcwrCYN9MjPqxZvK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方法</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name<span class="token punctuation">,</span> int age<span class="token punctuation">,</span> double sal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="xyQctw92F8XS2CMbf84Efx" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="5aGUoByQtRM1qDXedevSB5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">protected</span> <span class="token known-class-name class-name">String</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="hCJBNNtmyqHp7MR8BypfFu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">void</span> <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="fYagdc7FPeaLismvaHBQf3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="r5YRanKWgTxwFoWcCWk3aB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">m4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="vbrEkXGxKWTMfk4nrhStZf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2Mp6wCt9DC1uoJWPpq5KZB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//得到Class对象</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> personCls <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span><span class="token string">"com.hspedu.reflection.Person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//getDeclaredFields:获取本类中所有属性</span>
<span class="token comment">//规定 说明: 默认修饰符 是 0 ， public 是 1 ，private 是 2 ，protected 是 4 ,</span>
<span class="token keyword">static</span> 是 <span class="token number">8</span> ，final 是 <span class="token number">16</span>
<span class="token maybe-class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredFields <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Field</span> declaredField <span class="token operator">:</span> declaredFields<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类中所有属性="</span> <span class="token operator">+</span> declaredField<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">+</span> <span class="token string">" 该属性的修饰符值="</span> <span class="token operator">+</span> declaredField<span class="token punctuation">.</span><span class="token method function property-access">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></div></code-block><h4 id="8hb63PjVEtnuzWyvW34Pug" class="wolai-block"><span class="inline-wrap">第四组 Constructor 类方法：</span></h4><code-block id="fo8wpHyLuSAFWju4pr3ofD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>getModifiers<span class="token operator">:</span> 以int形式返回修饰符
getName<span class="token operator">:</span>返回构造器名
getParameterTypes<span class="token operator">:</span>以Class<span class="token punctuation">[</span><span class="token punctuation">]</span>返回参数类型数组</pre></div></code-block><h2 id="wFUB58Gxfw3LiYyfbX9BMd" class="wolai-block"><span class="inline-wrap">18.6 通过反射创建对象</span></h2><h4 id="w7xmzbERDrqA6n1KJtaWA9" class="wolai-block"><span class="inline-wrap">Class 相关方法：</span></h4><code-block id="ft6Nc4qQYpBxxqSJcdfRpn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>newlnstance：调用类中的无参构造器，获取对应类的对象
<span class="token function">getConstructor</span><span class="token punctuation">(</span><span class="token maybe-class-name">Class</span><span class="token spread operator">...</span><span class="token punctuation">.</span><span class="token property-access">clazz</span><span class="token punctuation">)</span><span class="token operator">:</span>根据参数列表，获取对应的<span class="token keyword">public</span>构造器对象
getDecalared <span class="token function"><span class="token maybe-class-name">Constructor</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token property-access">clazz</span><span class="token punctuation">)</span><span class="token operator">:</span>根据参数列表，获取对应的所有构造器对象</pre></div></code-block><h4 id="3YYX3yUjGL4cnvwsmKe94P" class="wolai-block"><span class="inline-wrap">Constructor 类相关方法：</span></h4><code-block id="wGmrvm1JiKg9amKqMhtogA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">SetAccessible</span><span class="token operator">:</span>暴破
<span class="token function">newlnstance</span><span class="token punctuation">(</span><span class="token maybe-class-name">Obiect</span><span class="token spread operator">...</span>obj<span class="token punctuation">)</span><span class="token operator">:</span>调用构造器</pre></div></code-block><code-block id="iYJAhK9NMDfmEucTs1RwiL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//getMethods:获取所有public修饰的方法，包含本类以及父类的</span>
<span class="token maybe-class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类以及父类的方法="</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//getDeclaredMethods:获取本类中所有方法</span>
<span class="token maybe-class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredMethods <span class="token operator">=</span> personCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Method</span> declaredMethod <span class="token operator">:</span> declaredMethods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类中所有方法="</span> <span class="token operator">+</span> declaredMethod<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="obfb9h1iQGMP7ipwqsVvUC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//getDeclaredConstructors:获取本类中所有构造器</span>
<span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> declaredConstructors <span class="token operator">=</span>
personCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> declaredConstructor <span class="token operator">:</span> declaredConstructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"===================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"本类中所有构造器="</span> <span class="token operator">+</span>
declaredConstructor<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里老师只是输出名</span></pre></div></code-block><code-block id="rrFPSVCmjg362pLb7iZ1oV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameterTypes <span class="token operator">=</span>
declaredConstructor<span class="token punctuation">.</span><span class="token method function property-access">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> parameterType <span class="token operator">:</span> parameterTypes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"该构造器的形参类型="</span> <span class="token operator">+</span> parameterType<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="wL2aVqLZyANNK96VgxVnbD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflecCreateInstance</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">NoSuchMethodException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">InvocationTargetException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="bqswhRPSpEdnrHzZd7ezx2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 先获取到User类的Class对象</span></pre></div></code-block><h2 id="7y8nkwEMnmdsQtZBtmdhy5" class="wolai-block"><span class="inline-wrap">18.7 通过反射访问类</span></h2><code-block id="nETcVTZ3FoKtQkY49o27Qf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> userClass <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span><span class="token string">"com.hspedu.reflection.User"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 通过public的无参构造器创建实例</span>
<span class="token known-class-name class-name">Object</span> o <span class="token operator">=</span> userClass<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 通过public的有参构造器创建实例</span>
<span class="token comment">/*
constructor 对象就是
public User(String name) {//public的有参构造器
this.name = name;
}
*/</span>
<span class="token comment">//3.1 先得到对应构造器</span>
<span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> constructor <span class="token operator">=</span> userClass<span class="token punctuation">.</span><span class="token method function property-access">getConstructor</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3.2 创建实例，并传入实参</span>
<span class="token known-class-name class-name">Object</span> hsp <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span><span class="token string">"hsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"hsp="</span> <span class="token operator">+</span> hsp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. 通过非public的有参构造器创建实例</span>
<span class="token comment">//4.1 得到private的构造器对象</span>
<span class="token maybe-class-name">Constructor</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> constructor1 <span class="token operator">=</span> userClass<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredConstructor</span><span class="token punctuation">(</span>int<span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">,</span>
<span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4.2 创建实例</span>
<span class="token comment">//暴破【暴力破解】 , 使用反射可以访问private构造器/方法/属性, 反射面前，都是纸老⻁</span>
constructor1<span class="token punctuation">.</span><span class="token method function property-access">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">Object</span> user2 <span class="token operator">=</span> constructor1<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span> <span class="token number">100</span> <span class="token punctuation">,</span> <span class="token string">"张三丰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"user2="</span> <span class="token operator">+</span> user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="54KXdVQK7Gm5esjf6TngCH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span> <span class="token comment">//User类</span>
<span class="token keyword">private</span> int age <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> <span class="token string">"韩顺平教育"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="2HoS1RZ12A728cETcdvCFi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">User</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//无参 public</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="9pish1vsJ1mTvzzBdB69Dm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">User</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//public的有参构造器</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="uJKHySB2ChUMv77vJtvFQQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token function"><span class="token maybe-class-name">User</span></span><span class="token punctuation">(</span><span class="token parameter">int age<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//private 有参构造器</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">age</span> <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="qgEzKSSnBm7bBwAXaqpYdr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token string">"User [age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">", name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h2 id="j7KTQqgDo2UUhUEVEnGraA" class="wolai-block"><span class="inline-wrap">18.7 通过反射访问类</span></h2><h4 id="qqNzFfKxuG8hvbmUw6fEkJ" class="wolai-block"><span class="inline-wrap">通过反射访问类中属性：</span></h4><code-block id="juaHbYZMajzbJFhGf62huP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>根据属性名获取Field对象
<span class="token maybe-class-name">Field</span> f<span class="token operator">=</span> <span class="token keyword">class</span>对象<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredField</span><span class="token punctuation">(</span>属性名<span class="token punctuation">)</span><span class="token punctuation">;</span>
暴破：f<span class="token punctuation">.</span><span class="token method function property-access">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
访问<span class="token operator">:</span>
f<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>值<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
如果是静态属性，则<span class="token keyword">set</span>和<span class="token keyword">get</span>中的参数o，可以写成<span class="token keyword null nil">null</span></pre></div></code-block><code-block id="bQpF6svWEwpJALSJV2Dkhe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflecAccessProperty</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">NoSuchFieldException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="tyBh9g1xGog9C7PbprSkjt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 得到Student类对应的 Class对象</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> stuClass <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span><span class="token string">"com.hspedu.reflection.Student"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 创建对象</span>
<span class="token known-class-name class-name">Object</span> o <span class="token operator">=</span> stuClass<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//o 的运行类型就是Student</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Student</span>
<span class="token comment">//3. 使用反射得到age 属性对象</span>
<span class="token maybe-class-name">Field</span> age <span class="token operator">=</span> stuClass<span class="token punctuation">.</span><span class="token method function property-access">getField</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
age<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">88</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//通过反射来操作属性</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>age<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回age属性的值</span></pre></div></code-block><code-block id="cCSUCLXhRMzfEv1hNhweTh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 使用反射操作name 属性</span>
<span class="token maybe-class-name">Field</span> name <span class="token operator">=</span> stuClass<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//对name 进行暴破, 可以操作private 属性</span>
name<span class="token punctuation">.</span><span class="token method function property-access">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//name.set(o, "老韩");</span>
name<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">"老韩~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//因为name是static属性，因此 o 也可以写出null</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取属性值</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取属性值, 要求name是static</span></pre></div></code-block><code-block id="qVLkigSrkTYJ9UgZRCRVrQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="psKQR1h3skAkLnkHUPiwrr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span><span class="token comment">//类</span>
<span class="token keyword">public</span> int age<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span></pre></div></code-block><code-block id="quxCoQnCnc9ZRuYNM2n5PD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Student</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//构造器</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="8AJBGhQx6d1RFQAtZ9xVSm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token known-class-name class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><h4 id="irWCFVQGm4e1cyAff1jZ8V" class="wolai-block"><span class="inline-wrap">通过反射访问类中方法：</span></h4><ol class="wolai-block"><li id="8nsKeQKfVWT6GmGxCpthwn"><div class="marker"></div><span class="inline-wrap">根据方法名和参数列表获取 Method 方法对象：Method m:
clazz.getDeclaredMethod(方法名，xx.class);</span></li><li id="64nwVGCiKbD8mbhdzUCEMf"><div class="marker"></div><span class="inline-wrap">获取对象：Object o=class.newlnstance();</span></li><li id="3jsVSD914DZ6jwXqDqXGgm"><div class="marker"></div><span class="inline-wrap">暴破：o.setAccessible(true);</span></li><li id="pVSDi8cnJHMwQtXDrXLpNF"><div class="marker"></div><span class="inline-wrap">访问：Object returnValue =m.invoke(o,实参列表)：可以写成 null</span></li><li id="9RaQwNSjEEZvP85jVwYdss"><div class="marker"></div><span class="inline-wrap">注意：如果是静态方法，则 invoke 的参数 o，可以写成 null</span></li></ol><code-block id="7rhMbcG9C33Dt7vH12Y7Dn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">return</span> <span class="token string">"Student [age="</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">", name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1y63L6PhXApzwqoyX5TFUm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflecAccessMethod</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">InstantiationException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">InvocationTargetException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="7V1w8VrBnHdxZuLQ8hbtCK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 得到Boss类对应的Class对象</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> bossCls <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span><span class="token string">"com.hspedu.reflection.Boss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 创建对象</span>
<span class="token known-class-name class-name">Object</span> o <span class="token operator">=</span> bossCls<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 调用public的hi方法</span>
<span class="token comment">//Method hi = bossCls.getMethod("hi", String.class);//OK</span>
<span class="token comment">//3.1 得到hi方法对象</span>
<span class="token maybe-class-name">Method</span> hi <span class="token operator">=</span> bossCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//OK</span>
<span class="token comment">//3.2 调用</span>
hi<span class="token punctuation">.</span><span class="token method function property-access">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">"韩顺平教育~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="55aKqqW9Cy5v3wVcPoKmxE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 调用private static 方法</span>
<span class="token comment">//4.1 得到 say 方法对象</span>
<span class="token maybe-class-name">Method</span> say <span class="token operator">=</span> bossCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"say"</span><span class="token punctuation">,</span> int<span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">,</span>
char<span class="token punctuation">.</span><span class="token property-access">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4.2 因为say方法是private, 所以需要暴破，原理和前面讲的构造器和属性一样</span>
say<span class="token punctuation">.</span><span class="token method function property-access">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>say<span class="token punctuation">.</span><span class="token method function property-access">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4.3 因为say方法是static的，还可以这样调用 ，可以传入null</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>say<span class="token punctuation">.</span><span class="token method function property-access">invoke</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token number">200</span> <span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">,</span> <span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="g8kNC7W2tqr61iLRuAAuaV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 在反射中，如果方法有返回值，统一返回Object , 但是他运行类型和方法定义的返回类</span>
型一致
<span class="token known-class-name class-name">Object</span> reVal <span class="token operator">=</span> say<span class="token punctuation">.</span><span class="token method function property-access">invoke</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token number">300</span> <span class="token punctuation">,</span> <span class="token string">"王五"</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"reVal 的运行类型="</span> <span class="token operator">+</span> reVal<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//String</span></pre></div></code-block><h4 id="8mnymTdCbQv9Qrquf8A9YY" class="wolai-block"><span class="inline-wrap">//在演示一个返回的案例</span></h4><code-block id="icQ1LSL3abQfyTbXzpBq1d" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Method</span> m1 <span class="token operator">=</span> bossCls<span class="token punctuation">.</span><span class="token method function property-access">getDeclaredMethod</span><span class="token punctuation">(</span><span class="token string">"m1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="1KASAt4PHoG62VB7hMYptC" class="wolai-block"><span class="inline-wrap">18.8 反射性能优化</span></h2><h4 id="iSHwpoMCKG42d4vr9sT8D4" class="wolai-block"><span class="inline-wrap">优缺点：</span></h4><h4 id="gb7VLGF6o4aFd1WtrEXeiP" class="wolai-block"><span class="inline-wrap">优点：可以动态的创建和使用对象(也是框架底层孩心)，使用灵活，没有反射机制，框架技术就失去底层</span></h4><h4 id="graSkyg1gjvkJkZhuF5jKH" class="wolai-block"><span class="inline-wrap">支撑</span></h4><h4 id="rBgeLkLZ46qeC4A3dxexeN" class="wolai-block"><span class="inline-wrap">缺点：使用反射基本是解释执行，对执行速度有影响</span></h4><code-block id="qKeecdgCNFLrCFrxnjppuV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">Object</span> reVal2 <span class="token operator">=</span> m1<span class="token punctuation">.</span><span class="token method function property-access">invoke</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"reVal2的运行类型="</span> <span class="token operator">+</span> reVal2<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Monster</span></pre></div></code-block><h4 id="6PNtHyfCthsxqbFoRXa2SJ" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="bXn4o4P6TDeNiuJVX9feem" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="jSPdCWx46e4Mcu9p1CxMqE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">class</span> <span class="token class-name">Monster</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Boss</span> <span class="token punctuation">{</span><span class="token comment">//类</span>
<span class="token keyword">public</span> int age<span class="token punctuation">;</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token known-class-name class-name">String</span> name<span class="token punctuation">;</span></pre></div></code-block><code-block id="xgYiNamfPbenmjp755vn7e" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token function"><span class="token maybe-class-name">Boss</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//构造器</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="tgwXnrirxQHhV8NAoaaSsL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token maybe-class-name">Monster</span> <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Monster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="2jzNpU83xKF9Xj4YuP6sXV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token known-class-name class-name">String</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token parameter">int n<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span> s<span class="token punctuation">,</span> char c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//静态方法</span>
<span class="token keyword control-flow">return</span> n <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> s <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="abnpaQtD54AB3CiXVVCqFA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//普通public方法</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"hi "</span> <span class="token operator">+</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="cpGG4oMBkbWxHkoB781dsR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Reflection02</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">NoSuchMethodException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">InstantiationException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">IllegalAccessException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="w6G8g1UpLCG9SYyfgManeq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//Field</span>
<span class="token comment">//Method</span>
<span class="token comment">//Constructor</span>
<span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="bgsL7fCCgsLJPFtbhKHkQN" class="wolai-block wolai-text"><div><span class="inline-wrap">//传统方法来调用 hi
public static void m1() {</span></div></div><div id="uhZnR8qpAR3qSahNXfNc6E" class="wolai-block wolai-text"><div><span class="inline-wrap">Cat cat = new Cat();
long start = System.currentTimeMillis();
for (int i = 0 ; i &lt; 90 ; i++) {
cat.hi();
}
long end = System.currentTimeMillis();
System.out.println(&quot;m1() 耗时=&quot; + (end - start));
}</span></div></div><div id="afXkMvWQSwB6y3rZBMSt5H" class="wolai-block wolai-text"><div><span class="inline-wrap">//反射机制调用方法 hi
public static void m2() throws ClassNotFoundException,
IllegalAccessException, InstantiationException, NoSuchMethodException,
InvocationTargetException {</span></div></div><div id="qFeCne1AEto3Reb5c9etRQ" class="wolai-block wolai-text"><div><span class="inline-wrap">Class cls = Class.forName(&quot;com.hspedu.Cat&quot;);
Object o = cls.newInstance();
Method hi = cls.getMethod(&quot;hi&quot;);
long start = System.currentTimeMillis();
for (int i = 0 ; i &lt; 900000000 ; i++) {
hi.invoke(o);//反射调用方法
}
long end = System.currentTimeMillis();
System.out.println(&quot;m2() 耗时=&quot; + (end - start));
}</span></div></div><div id="3wLgUG6syrmY3X65C96vBY" class="wolai-block wolai-text"><div><span class="inline-wrap">//反射调用优化 + 关闭访问检查</span></div></div><div id="5o8fY3atA7ehUK23tu9ajs" class="wolai-block wolai-text"><div><span class="inline-wrap">public static void m3() throws ClassNotFoundException,
IllegalAccessException, InstantiationException, NoSuchMethodException,
InvocationTargetException {</span></div></div><div id="eJ8ueXcDsUHKscNVFgL9CB" class="wolai-block wolai-text"><div><span class="inline-wrap">Class cls = Class.forName(&quot;com.hspedu.Cat&quot;);
Object o = cls.newInstance();
Method hi = cls.getMethod(&quot;hi&quot;);
hi.setAccessible(true);//在反射调用方法时，取消访问检查
long start = System.currentTimeMillis();
for (int i = 0 ; i &lt; 900000000 ; i++) {
hi.invoke(o);//反射调用方法
}
long end = System.currentTimeMillis();
System.out.println(&quot;m3() 耗时=&quot; + (end - start));
}</span></div></div><h4 id="5wQimH5T3N6AEDhxNXYM8a" class="wolai-block"><span class="inline-wrap">关闭访问检查：</span></h4><code-block id="waxysLoC4tMtZNjwRD38nM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function"><span class="token maybe-class-name">Method和Field、Constructor对象都有setAccessible</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法
setAccessible作用是启动和禁用访问安全检查的开关
参数值为<span class="token boolean">true</span>表示 反射的对象在使用时取消访问检查，提高反射的效率。参数值为<span class="token boolean">false</span>则表示反射的对
象执行访问检查</pre></div></code-block><h1 id="g21SfAK7SPp5ihbKfK5Xej" class="wolai-block"><span class="inline-wrap">19 MySQL 数据库</span></h1><h2 id="xvGbpfr39mPncsYyuZuLdv" class="wolai-block"><span class="inline-wrap">19.0 数据库</span></h2><h4 id="kuMxQqctwrLKW4ZHnRWBmn" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="o32VUnq81Bn699xabxqaBC" class="wolai-block"><span class="inline-wrap">创建指令：</span></h4><code-block id="eCPrHtyJUVz55Ar63yiBQh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>创建数据库：<span class="token constant">CREATE</span> <span class="token constant">DATABASE</span> syh_db01<span class="token punctuation">;</span>
创建一个使用 utf8 字符集的 hsp_db02 数据库：
<span class="token constant">CREATE</span> <span class="token constant">DATABASE</span> syh_db02 <span class="token constant">CHARACTER</span> <span class="token constant">SET</span> utf8<span class="token punctuation">;</span>
创建一个使用 utf8 字符集，并带校对规则的的syh_db03 数据库：
<span class="token constant">CREATE</span> <span class="token constant">DATABASE</span> hsp_db03 <span class="token constant">CHARACTER</span> <span class="token constant">SET</span> utf8 <span class="token constant">COLLATE</span> utf8_bin<span class="token punctuation">;</span></pre></div></code-block><h4 id="jDGXQWU3us56mjxSVsA3ns" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="7r1NZynMmShzhnuDjxcWmg"><div class="marker"></div><span class="inline-wrap">CHARACTER SET：指定数据库采用的字符集，如果不指定字符集， </span><span class="inline-wrap"><b>默认 utf8</b></span></li><li id="3hJjNMVSXyuSyFY5WJgdXv"><div class="marker"></div><span class="inline-wrap">COLLATE：指定数据库字符集的校对规则（常用的 utf8 bin、 utf8 general ci </span><span class="inline-wrap"><b>注意默认是 utf8 general</b></span><span class="inline-wrap">
</span><span class="inline-wrap"><b>ci</b></span><span class="inline-wrap"> ）</span></li><li id="7Qmv6rf9S6gtP4d7FKqnXi"><div class="marker"></div><span class="inline-wrap">校对规则：utf8_bin 区分大小，utf8_general_ci 不区分大小写</span></li></ol><h4 id="gpN1rQRWM226c94tW5Bvgd" class="wolai-block"><span class="inline-wrap">4. 表不指定字符集和校对规则则默认使用数据库的字符集和校对规则</span></h4><h4 id="aMttm99dYkcSA4kdLGAGaf" class="wolai-block"><span class="inline-wrap">查看、删除指令：</span></h4><h4 id="kpCpB4465fvHiCXejfzmJt" class="wolai-block"><span class="inline-wrap">显示数据库语句：SHOW DATABASES</span></h4><code-block id="fbhxFwXY9eCxYKKKbSNdip" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>品示数据库创建语句：<span class="token constant">SHOW</span> <span class="token constant">CREATE</span> <span class="token constant">DATABASE</span> db name
数据库删除语句：<span class="token constant">DROP</span> <span class="token constant">DATABASE</span> <span class="token punctuation">[</span><span class="token constant">IF</span> <span class="token constant">EXISTS</span><span class="token punctuation">]</span> db name</pre></div></code-block><h4 id="gpMLpnWbtEeF6mpk54JDTC" class="wolai-block"><span class="inline-wrap">备份、恢复指令：</span></h4><code-block id="pWnopPi8TRf5hEHZkvzAMa" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">备份数据库</span><span class="token punctuation">(</span>注意：在<span class="token constant">DOS</span>执行<span class="token punctuation">)</span> 命令行：mysqldump<span class="token operator">-</span>u 用户名 <span class="token operator">-</span>p <span class="token operator">-</span><span class="token constant">B</span> 数据库 <span class="token number">1</span> 数据库 <span class="token number">2</span> 数据库n＞文件
名<span class="token punctuation">.</span><span class="token property-access">sql</span>
<span class="token function">恢复数据库</span><span class="token punctuation">(</span>注意：进入Mysql命令行再执行<span class="token punctuation">)</span>：Source 文件名<span class="token punctuation">.</span><span class="token property-access">sql</span></pre></div></code-block><h2 id="6A5P27Fij9CtehMtkTTf2H" class="wolai-block"><span class="inline-wrap">19.1 表</span></h2><h4 id="fdSHpze8ct3MrRBF1PVtCK" class="wolai-block"><span class="inline-wrap">创建：</span></h4><h4 id="7jcjCwBPrySM363PsEk6H5" class="wolai-block"><span class="inline-wrap">添加：</span></h4><h4 id="2nCvsNCzo5cXbvQ8PGsg2m" class="wolai-block"><span class="inline-wrap">修改：</span></h4><h4 id="9LGS2W3aAuYku4oMihR9SL" class="wolai-block"><span class="inline-wrap">删除：</span></h4><h4 id="oz1Y7vCRMRD2BLB3hbtxTp" class="wolai-block"><span class="inline-wrap">其他：</span></h4><code-block id="454wacWZf867ySt9nVoobM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">user</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">(</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">id</span><span class="token template-punctuation string">`</span></span> <span class="token constant">INT</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">,</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name</span><span class="token template-punctuation string">`</span></span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span> <span class="token number">255</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">password</span><span class="token template-punctuation string">`</span></span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span> <span class="token number">255</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">biethday</span><span class="token template-punctuation string">`</span></span> <span class="token constant">DATE</span><span class="token punctuation">)</span>
<span class="token constant">CHARACTER</span> <span class="token constant">SET</span> utf8 <span class="token constant">COLLATE</span> utf8_bin <span class="token constant">ENGING</span> <span class="token constant">INNODB</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="39RQZ7rbx8NeSMCJXBc7ij" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> tablename
<span class="token constant">ADD</span> <span class="token punctuation">(</span>column datatype <span class="token punctuation">[</span><span class="token constant">DEFAULI</span> expr<span class="token punctuation">]</span><span class="token punctuation">,</span>
column datatype<span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="56W9U9TueY2W6Dm2WahQyq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> tablename
<span class="token constant">MODIFY</span><span class="token punctuation">(</span>column datatype <span class="token punctuation">[</span><span class="token maybe-class-name">DEFAULTexpr</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
column datatype<span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="hLc6mYFkNiJ5btmNpZ7kVY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> tablename
<span class="token constant">DROP</span><span class="token punctuation">(</span>column<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="vEQPwa8tTy6vFZpdem6cJR" class="wolai-block"><span class="inline-wrap">19.2 数据类型 ⭐</span></h2><h4 id="8Rh6LeZn9YKJR6bXvryuQP" class="wolai-block"><span class="inline-wrap">Mysql 常用数据类型：</span></h4><code-block id="o7vciNQcMqMYmbkztA7Rmu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>查看表的结构： desc 表名<span class="token punctuation">;</span>
修改表名： <span class="token maybe-class-name">Rename</span> table 表名 to 新表名<span class="token punctuation">;</span>
修改表宇符集： alter table 表名 character <span class="token keyword">set</span> 字符集<span class="token punctuation">;</span>
不允许为空： <span class="token constant">NOT</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
自增⻓： <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="1xZX3NXo1NMuS5hZPnrBi4" class="wolai-block"><span class="inline-wrap">无符号：</span></h4><code-block id="qMuSQbUvz8cjF8ZxrXogdn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>create table <span class="token function">t10</span> <span class="token punctuation">(</span>id tinyint <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认是有符号的</span>
create table <span class="token function">t11</span> <span class="token punctuation">(</span>id tinyint unsigned <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//无符号的</span></pre></div></code-block><h3 id="euXpizfC1KdoUmwMcWPAUH" class="wolai-block"><span class="inline-wrap">19.2.1 数值型</span></h3><h4 id="pm1qiUMyyZJWG9quaGMb9j" class="wolai-block"><span class="inline-wrap">整数：</span></h4><h4 id="mmRHHcovsgUyUnMnqYShVs" class="wolai-block"><span class="inline-wrap">bit：</span></h4><code-block id="mHpCTRKDWisNy9u3ZcDQ4b" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>mysql<span class="token operator">></span> create table <span class="token function">t05</span> <span class="token punctuation">(</span>num <span class="token function">bit</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">></span> insert into <span class="token function">t05</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">></span> insert into t05 <span class="token function">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="mmWygJswFRrtyebZnMGKeL" class="wolai-block"><span class="inline-wrap">bit 注意事项和细节：</span></h4><ol class="wolai-block"><li id="uj1rg8qiGmcvQMA6ecmwkS"><div class="marker"></div><span class="inline-wrap">bit 字段显示时，按照位的方式显示</span></li><li id="hB8KMNCodSW2ujKNUsoaPT"><div class="marker"></div><span class="inline-wrap">查询的时候仍然可以用使用 </span><span class="inline-wrap"><b>数值</b></span><span class="inline-wrap"> 查询</span></li><li id="nQg7Jj5ebWjnCkobCq3hax"><div class="marker"></div><span class="inline-wrap">如果一个值只有 0,1 可以考虑使用 bit(1)可以节约空间位类型</span></li><li id="kFDic5wEDkSP1nXjE4CtNh"><div class="marker"></div><span class="inline-wrap">M 指定位数，默认值 1 ，范围 1-64 使用不多</span></li></ol><h4 id="ihNitK5QYNv8zWbj5MfAcR" class="wolai-block"><span class="inline-wrap">小数：</span></h4><code-block id="toh8uaR3hR51Mm2eLQLL5a" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">FLOAT</span><span class="token comment">//Float//单精度精度</span>
<span class="token constant">DOUBLE</span> <span class="token punctuation">[</span><span class="token constant">UNSIGNED</span><span class="token punctuation">]</span><span class="token comment">//Double//双精度</span>
<span class="token constant">DECIMAL</span><span class="token punctuation">[</span><span class="token constant">M</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token constant">UNSIGNED</span><span class="token punctuation">]</span><span class="token comment">//自定义</span></pre></div></code-block><h4 id="7XHwSJ4npt1DvmdGMLgUjQ" class="wolai-block"><span class="inline-wrap">小数注意事项和细节：</span></h4><ol class="wolai-block"><li id="wQski2r3LrrWwt4fAobsrw"><div class="marker"></div><span class="inline-wrap">decimal 可以支持更加精确的小数位</span></li><li id="1nhrfyJAy72mTNHyiT93KL"><div class="marker"></div><span class="inline-wrap">M 是小数位数(精度)的总数，D 是小数点(标度)后面的位数。</span></li><li id="hQuFDBmQnP5Y9JE3VMqbMH"><div class="marker"></div><span class="inline-wrap">如果 D 是 0 ，则值没有小数点或分数部分。M 最大 65 ，D 最大是 30 。如果 D 被省略，默认是 0 。如果 M 被省
略，默认是 10</span></li><li id="taxQSsoXsVzA7dj1hdRP45"><div class="marker"></div><span class="inline-wrap">建议：如果希望小数的精度高，推荐使用 decimal</span></li></ol><h3 id="vGjnKcLQzZAxdovbzoMaKW" class="wolai-block"><span class="inline-wrap">19.2.2 字符串型</span></h3><h4 id="pUyhRguzYJjrsph3jAseec" class="wolai-block"><span class="inline-wrap">字符串：</span></h4><code-block id="bY8gZCTjnhJQTCk8C4dJP6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CHAR</span> <span class="token punctuation">(</span>size<span class="token punctuation">)</span>固定⻓度宇符串 最大 <span class="token number">255</span> 字符
<span class="token constant">VARCHAR</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>可变⻓度字符串最大 <span class="token number">65532</span> 字节<span class="token punctuation">[</span>utf8编码最大 <span class="token number">21844</span> 字符<span class="token number">1</span><span class="token operator">-</span><span class="token number">3</span>个字节用子记录大小<span class="token punctuation">]</span></pre></div></code-block><h4 id="nirq1TgXwn39uj4ocn7gSv" class="wolai-block"><span class="inline-wrap">字符串注意事项和细节：</span></h4><ol class="wolai-block"><li id="fUaNxTAGFpnZVnZtWMYRpN"><div class="marker"></div><span class="inline-wrap">char(4)//这个 4 表示字符数(最大 255)，不是字节数，不管是中文还是宇母都是放四个,按字符计算</span></li><li id="68mjeX8GAr1oUTtKzrBnWJ"><div class="marker"></div><span class="inline-wrap">varchar(4)//这个 4 表示字符数，不管是字母还是中文都以定义好的表的编码来存放数据</span></li><li id="a6ima9kZ7NSnnxWY7WtFYn"><div class="marker"></div><span class="inline-wrap">char(4) 是定⻓</span></li><li id="2BnAwJcEFGC2diDkj9erCk"><div class="marker"></div><span class="inline-wrap">varchar(4) 是变⻓，就是说，如果你插入了’aa’,实际占用空间大小并不是 4 个字符，而是按照实际占用空
间来分配（说明：varchar 本身还需要占用 1-3 个字节来记录存放内容⻓度）</span></li><li id="beGRoewRpUSWY8iN6ihhPY"><div class="marker"></div><span class="inline-wrap">查询速度：char &gt; varchar</span></li><li id="o29KYMQkVbQaRqxx2kgMis"><div class="marker"></div><span class="inline-wrap">存放文果时，也可以使用 Text 数据类型、可以将 TEXT 列视为 VARCHAR 列，注意 Text 不能有默认值．大
小 0-2^16 字节
如果希望存放更多字符，可以选择 MEDIUMTEXT 0-2^24 或者 LONGTEXT 0~2^32</span></li></ol><h3 id="jfhHMddQanDHkCBhtPkqCa" class="wolai-block"><span class="inline-wrap">19.2.3 日期型</span></h3><h4 id="1Kz2wfMLmE6fdFHZAhPtmB" class="wolai-block"><span class="inline-wrap">日期类：</span></h4><h4 id="jSSi37Qp1ooVAF5SMELnur" class="wolai-block"><span class="inline-wrap">日期类注意事项和细节：</span></h4><ol class="wolai-block"><li id="27nkZyFzTowoS1xWthweNJ"><div class="marker"></div><span class="inline-wrap">TimeStamp 在 Insert 和 update 时，自动更新</span></li></ol><h2 id="64GhsGjjZAS1XYE5LCxC2s" class="wolai-block"><span class="inline-wrap">19.3 CRUD ⭐</span></h2><code-block id="fBet6vJ8RgisspKMoKbBMu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">birthday6</span>
<span class="token punctuation">(</span>t1 <span class="token constant">DATE</span><span class="token punctuation">,</span>
t2 <span class="token constant">DATETIME</span><span class="token punctuation">,</span>
†<span class="token number">3</span> <span class="token constant">TIMESTAMP</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">DEFAULT</span>
<span class="token constant">CURRENT</span> <span class="token constant">TIMESTAMP</span> <span class="token constant">ON</span> <span class="token constant">UPDATE</span>
<span class="token constant">CURRENT_TIMESTAMP</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//timestamp时间戳</span></pre></div></code-block><h3 id="sHXuef7k4nf9acLiRAhfpa" class="wolai-block"><span class="inline-wrap">19.3.1 Insert</span></h3><h4 id="3Czu5M8kF3xexarMeVkpFx" class="wolai-block"><span class="inline-wrap">基本使用：</span></h4><h4 id="utg54m4KtHb7GfwgmFybHK" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="9cnY3tUBdkpRS7FXrKNsyu" class="wolai-block"><span class="inline-wrap">1. 插入的数据应与字段的数据类型相同</span></h4><h4 id="dQrNzYvuHcaHteGnMFiExc" class="wolai-block"><span class="inline-wrap">2. 数据的⻓度应在列的规定范围内</span></h4><ol class="wolai-block"><li id="bZGUwaVtmGXeDnoFsaasWB"><div class="marker"></div><span class="inline-wrap">在 values 中列出的数据位置必须与被加入的列的排列位置相对应</span></li><li id="3XAm4DXFCT9nGvhcMKL1ev"><div class="marker"></div><span class="inline-wrap">字符和日期型数据应包含在单引号中</span></li><li id="4vCNtDiBVd1jhtgcfW4J5x"><div class="marker"></div><span class="inline-wrap">列可以插入空值[前提是该字段允许为空]</span></li><li id="nGyvENdAZVk58Vos74hPBG"><div class="marker"></div><span class="inline-wrap">insert into tab name (列名...）values ().().() 形式添加多条记录</span></li><li id="668tYiSF5BamRiCcQeb1xZ"><div class="marker"></div><span class="inline-wrap">如果是给表中的所有字段添加数据，可以不写前面的字段名称</span></li><li id="gXMR7mRguW5uD1YcUACGpj"><div class="marker"></div><span class="inline-wrap">默认值的使用，当不给某个字段值时，如果有默认值就会添加，否则报错</span></li></ol><h3 id="wHztBSM8G72H5p2ra56aGd" class="wolai-block"><span class="inline-wrap">19.3.2 Update</span></h3><h4 id="mBKkmeJExYQED7BjRBEFHL" class="wolai-block"><span class="inline-wrap">基本使用：</span></h4><h4 id="9W9avd1w9sNPRhKimGhQm8" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="azK4f19SgBEdZW5ZTE5DMm" class="wolai-block"><span class="inline-wrap">1. UPDATE 语法可以用新值重新原有表行中的各列</span></h4><h4 id="sMvp5Mx6WZtqNHMjMd1zWW" class="wolai-block"><span class="inline-wrap">2. SET 子句指示要修改哪些列和要给子哪些值</span></h4><h4 id="pyEeXERzVKh7sBe2DiCBwP" class="wolai-block"><span class="inline-wrap">3. WHERE 子句指定应更新哪些行。如没有 WHERE 子句，则更新所有的行</span></h4><ol class="wolai-block"><li id="rDhYoUKJE5CzgCe3nC2eEu"><div class="marker"></div><span class="inline-wrap">如果需要修改多个字段，可以通过 set 字段 1=值 1 ，字段 2=值 2...</span></li></ol><h3 id="oXz3RadNtWFhqHDmAhBscf" class="wolai-block"><span class="inline-wrap">19.3.3 Delete</span></h3><h4 id="eSS9dLZSDhcuwwCBDTyisw" class="wolai-block"><span class="inline-wrap">基本使用：</span></h4><h4 id="hJwmMpjLfJSnJiKrNw7jwa" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="5XpbZPxBbdZvZ91eiA7w18"><div class="marker"></div><span class="inline-wrap">如果不使用 where 子句，将删除表中所有数据</span></li><li id="69jKLaNWKVNh1e3ghYfrFQ"><div class="marker"></div><span class="inline-wrap">Delete 语句不能删除某一列的值（可使用 update 设为 null 或者&quot;)</span></li><li id="t7aQ41ayJ2VUrfyGxqoteD"><div class="marker"></div><span class="inline-wrap">使用 delete 语句仅删除记录，不删除表本身，可以使用 drop 删除表</span></li></ol><code-block id="2a5Co6enQx99mQiPFRsGcv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">INSERT</span> <span class="token constant">INTO</span> <span class="token function">tablename</span> <span class="token punctuation">(</span>column <span class="token punctuation">,</span>column<span class="token spread operator">...</span><span class="token punctuation">)</span>
<span class="token constant">VALUES</span><span class="token punctuation">(</span>value <span class="token punctuation">,</span> value<span class="token spread operator">...</span><span class="token punctuation">)</span> <span class="token punctuation">;</span></pre></div></code-block><code-block id="ki1YveXe5Ux2dpnpiGGsT2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">UPDATE</span> employee
<span class="token constant">SET</span> salary <span class="token operator">=</span> <span class="token number">1000</span>
<span class="token constant">WHERE</span> user_name <span class="token operator">=</span> <span class="token string">'jack'</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="2XPQHkXdeeXvSfy4QhHk5c" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">DELETE</span> <span class="token constant">FROM</span> employee
<span class="token constant">WHERE</span> user_name <span class="token operator">=</span> <span class="token string">'jack'</span><span class="token punctuation">;</span></pre></div></code-block><h3 id="pRv3SLdfTUZqNDSPP87r4o" class="wolai-block"><span class="inline-wrap">19.3.4 Select</span></h3><h4 id="5Kx9DDFG5KqQqYwfuqQmHd" class="wolai-block"><span class="inline-wrap">基本使用：</span></h4><h4 id="vGzHEGayDnyjCJTaYbYZGg" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="j7SomRg3wFWvBqwER1E56N"><div class="marker"></div><span class="inline-wrap">Select 指定查询哪些列的数据</span></li><li id="sNen2zg56D21WiAWkT6SrM"><div class="marker"></div><span class="inline-wrap">column 指定列名</span></li><li id="toaD6zQcuC5xX1nxeHf17Z"><div class="marker"></div><span class="inline-wrap">*表示指定查询哪张表</span></li><li id="rrwm5CsQpDPZ4Zg34XamFE"><div class="marker"></div><span class="inline-wrap">DISTINCT 可选，指显示结果时，是否去掉重复数据</span></li></ol><h4 id="jEzKq7utspHfV2P9UKWzfP" class="wolai-block"><span class="inline-wrap">表达式进行列运算：</span></h4><h4 id="wqiVyt3PmU9JvuvjGkXCfW" class="wolai-block"><span class="inline-wrap">as：</span></h4><h4 id="vtThHFeqzPzc8WUn64eTxR" class="wolai-block"><span class="inline-wrap">where：</span></h4><code-block id="kqRAx7rmNUU9QqM7ykbxky" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> <span class="token punctuation">[</span><span class="token constant">DISTINCT</span><span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">|</span><span class="token punctuation">{</span>column1<span class="token punctuation">,</span>column2<span class="token punctuation">,</span><span class="token spread operator">...</span><span class="token punctuation">}</span>
<span class="token constant">FROM</span> tablename<span class="token punctuation">;</span>
<span class="token constant">GROUP</span> <span class="token constant">BY</span> column
having condition
<span class="token constant">ORDER</span> <span class="token constant">BY</span> column
limit start<span class="token punctuation">,</span>rows<span class="token punctuation">;</span></pre></div></code-block><code-block id="aPXjX4Awn7TdggnPBnS6Cb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> <span class="token operator">*</span><span class="token operator">|</span><span class="token punctuation">{</span>column1<span class="token operator">|</span>expression<span class="token punctuation">,</span>column2<span class="token operator">|</span>expression<span class="token punctuation">,</span><span class="token spread operator">...</span><span class="token punctuation">}</span>
<span class="token constant">FROM</span> tablename<span class="token punctuation">;</span></pre></div></code-block><code-block id="1KCLyz4Aqyjuf9GaxuePW1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> columname <span class="token keyword module">as</span> 别名 <span class="token keyword module">from</span> tablename<span class="token punctuation">;</span></pre></div></code-block><code-block id="7p2VyXJBrxKwNxo5WvkWWT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> tablename
<span class="token constant">WHERE</span> 条件；</pre></div></code-block><h4 id="96fFGKhEqJDxBTXnZfam5B" class="wolai-block"><span class="inline-wrap">between and:</span></h4><h4 id="oYrj6jnxMPidzRwUqBnpSy" class="wolai-block"><span class="inline-wrap">order by：</span></h4><h4 id="dcryGy7h4Sg5MwTpSW51DQ" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="f3sGbHzB39HPd5UDq6bsVG"><div class="marker"></div><span class="inline-wrap">Order by 指定排序的列，排序的列既可以是表中的列名，也可以是 select 语句后指定的列名</span></li><li id="mm974BuS2z6w8KAbBTy6kk"><div class="marker"></div><span class="inline-wrap">AsC 升序[默认]、Desc 降序</span></li><li id="n2zAzGeHGE4x1hfrsBFLoK"><div class="marker"></div><span class="inline-wrap">ORDER BY 子句应位于 SELECT 语句的结尾</span></li></ol><h4 id="mHL8AkYBv2fCdiX3oBLnT7" class="wolai-block"><span class="inline-wrap">group by/having：</span></h4><code-block id="gDYjJyEA9HfkpsVyLmom31" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>grade
<span class="token constant">FROM</span> emp<span class="token punctuation">,</span>dept<span class="token punctuation">,</span>salgrade
<span class="token constant">WHERE</span> emp<span class="token punctuation">.</span><span class="token property-access">deptno</span> <span class="token operator">=</span> dept<span class="token punctuation">.</span><span class="token property-access">deptno</span>
<span class="token constant">AND</span> <span class="token punctuation">(</span>sal <span class="token constant">BETWEEN</span> losal <span class="token constant">AND</span> hisal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="j7NPueqwFDjwPbmnAhNzme" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> column1<span class="token punctuation">,</span>column2<span class="token punctuation">,</span><span class="token spread operator">...</span>
<span class="token constant">FROM</span> tablename
order by colum asc<span class="token operator">|</span>desc<span class="token punctuation">;</span></pre></div></code-block><code-block id="bie3g2UfjF5y8qDUiGPRkQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> column1<span class="token punctuation">,</span>column2<span class="token punctuation">,</span><span class="token spread operator">...</span>
<span class="token constant">FROM</span> tablename
<span class="token constant">GROUP</span> <span class="token constant">BY</span> column2
having condition<span class="token punctuation">;</span></pre></div></code-block><h4 id="dSfBvgsGJF4iZLb858Qko4" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="rQT3tAi8YjTiTXEtFW4Eq6"><div class="marker"></div><span class="inline-wrap">group by 用于对查询的结果分组统计</span></li><li id="xwUxhCyYVjaf6ftrnUNXhy"><div class="marker"></div><span class="inline-wrap">having 子句用于限制分组显示结果</span></li></ol><h4 id="3878Qi8MaEZPMkbvt1x624" class="wolai-block"><span class="inline-wrap">limit：</span></h4><h3 id="vXjhEezhsbKSZJWEZJVmGn" class="wolai-block"><span class="inline-wrap">19.3.5 Select 增强查询</span></h3><h4 id="4PbRWMXSrgKAEwFUW8qYGt" class="wolai-block"><span class="inline-wrap">增强查询：</span></h4><h4 id="7HRJoD4p7NmyS4PvuvF4fo" class="wolai-block"><span class="inline-wrap">WHERE</span></h4><h4 id="v2ujruwE71s1od2RhS4Yfv" class="wolai-block"><span class="inline-wrap">模糊查询：</span></h4><h4 id="oLN3z2fJdhue59Uq5ar6cy" class="wolai-block"><span class="inline-wrap">LIKE</span></h4><h4 id="2x1T94Fkj6BW3MmcU7tZhS" class="wolai-block"><span class="inline-wrap">排序查询：</span></h4><h4 id="7zV5sYMJVTT5mefoiPFXsa" class="wolai-block"><span class="inline-wrap">ORDER BY ASC/DESC</span></h4><h4 id="jaep2pW1i6N6N95uq7cQSj" class="wolai-block"><span class="inline-wrap">分⻚查询：</span></h4><code-block id="9ya2LKWLGT1uzzqnxectTo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">LIMIT</span> star <span class="token punctuation">,</span> row</pre></div></code-block><h3 id="vZg6v3KJtjdV6u25pJ5UCV" class="wolai-block"><span class="inline-wrap">19.3.6 Select 多表查询</span></h3><h4 id="khEDdEbgCbss7TVfTqZRtH" class="wolai-block"><span class="inline-wrap">多表查询</span></h4><h4 id="smYvqRHRqVDV3bo59h6T2d" class="wolai-block"><span class="inline-wrap">自连接：</span></h4><h4 id="1HPJ2ZvGuzu6CvV5nzux7b" class="wolai-block"><span class="inline-wrap">多行子查询：</span></h4><code-block id="u6Wf92EXqUP78GrcXADbZF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> column1<span class="token punctuation">,</span>column2<span class="token punctuation">,</span><span class="token spread operator">...</span>
<span class="token constant">FROM</span> tablename
<span class="token constant">LIMIT</span> star <span class="token punctuation">,</span> row<span class="token punctuation">;</span></pre></div></code-block><code-block id="argrtaw5iVbXFgLGbS9UqZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token property-access">deptno</span>
<span class="token constant">FROM</span> emp<span class="token punctuation">,</span> dept
<span class="token constant">WHERE</span> emp<span class="token punctuation">.</span><span class="token property-access">deptno</span> <span class="token operator">=</span> dept<span class="token punctuation">.</span><span class="token property-access">deptno</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fLtafKQ2928JFqCe3j4Wf4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> worker<span class="token punctuation">.</span><span class="token property-access">ename</span> <span class="token constant">AS</span> <span class="token string">'职员名'</span> <span class="token punctuation">,</span> boss<span class="token punctuation">.</span><span class="token property-access">ename</span> <span class="token constant">AS</span> <span class="token string">'上级名'</span>
<span class="token constant">FROM</span> emp worker<span class="token punctuation">,</span> emp boss
<span class="token constant">WHERE</span> worker<span class="token punctuation">.</span><span class="token property-access">mgr</span> <span class="token operator">=</span> boss<span class="token punctuation">.</span><span class="token property-access">empno</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="br5TcSheAjuujv9ZMk5dwf" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="gDxr7vBWoWH86uBqZ111bR"><div class="marker"></div><span class="inline-wrap">多行子查询指返回多行数据的子查询 使用关键字 in</span></li></ol><h4 id="8YqeYR2oshtXu3Dv8JYvmU" class="wolai-block"><span class="inline-wrap">多列子查询：</span></h4><h4 id="ecdZrNLWTXp7AwCe6avt3v" class="wolai-block"><span class="inline-wrap">表复制：</span></h4><h4 id="6UWUTBiabWKB8voyA4Qr84" class="wolai-block"><span class="inline-wrap">结构复制：</span></h4><h4 id="vWB34akU2XzmmECMmQdexu" class="wolai-block"><span class="inline-wrap">返回表的所有列：</span></h4><h2 id="87DTt7exdGiyxyc5NAUkbi" class="wolai-block"><span class="inline-wrap">19.4 函数 ⭐</span></h2><code-block id="kyKekFmmDK7rwJALonvLrw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>select ename<span class="token punctuation">,</span> job<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> deptno
<span class="token constant">FROM</span> emp
<span class="token constant">WHERE</span> job <span class="token constant">IN</span> <span class="token punctuation">(</span>
<span class="token constant">SELECT</span> <span class="token constant">DISTINCT</span> job
<span class="token constant">FROM</span> emp
<span class="token constant">WHERE</span> deptno <span class="token operator">=</span> <span class="token number">10</span>
<span class="token punctuation">)</span> <span class="token constant">AND</span> deptno <span class="token operator">!=</span> <span class="token number">10</span> <span class="token punctuation">;</span></pre></div></code-block><h4 id="rNWCvKFx7qEodf16c6PSwN" class="wolai-block"><span class="inline-wrap">SELECT *</span></h4><code-block id="qw8rU9hZT7rLqQHPPrVpXH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">FROM</span> emp
<span class="token constant">WHERE</span> <span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>job<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
<span class="token constant">SELECT</span> deptno<span class="token punctuation">,</span>job
<span class="token constant">FROM</span> emp
<span class="token constant">WHERE</span> ename <span class="token operator">=</span> <span class="token string">'ALLEN'</span>
<span class="token punctuation">)</span> <span class="token constant">AND</span> ename <span class="token operator">!=</span> <span class="token string">'ALLEN'</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="6MEkUUFqK4oqmPoHUZ6Egm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">INSERT</span> <span class="token constant">INTO</span> my_table
<span class="token constant">SELECT</span> <span class="token operator">*</span> <span class="token constant">FROM</span> my_table<span class="token punctuation">;</span></pre></div></code-block><code-block id="wwYFxgm6zM9i3HFFgqYv8W" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> my_table <span class="token constant">LIKE</span> emp<span class="token punctuation">;</span></pre></div></code-block><code-block id="5YEnkA8YVWNLdRKgMmEzSZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> tmp<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token punctuation">,</span>dname<span class="token punctuation">,</span>loc
<span class="token constant">FROM</span> dept<span class="token punctuation">,</span><span class="token punctuation">(</span>
<span class="token constant">SELECT</span> <span class="token constant">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token constant">AS</span> per_num<span class="token punctuation">,</span>deptno
<span class="token constant">FROM</span> emp
<span class="token constant">GROUP</span> <span class="token constant">BY</span> deptno
<span class="token punctuation">)</span>tmp
<span class="token constant">WHERE</span> tmp<span class="token punctuation">.</span><span class="token property-access">deptno</span> <span class="token operator">=</span> dept<span class="token punctuation">.</span><span class="token property-access">deptno</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="oGA3EmgJTCg6RdcKjhspV3" class="wolai-block"><span class="inline-wrap">统计函数:</span></h4><h4 id="nZRVCgVGv3CtQCcG2jpBBa" class="wolai-block"><span class="inline-wrap">1. SUM //合计</span></h4><h4 id="pdNu3M8S1ng4guPKYA4VNw" class="wolai-block"><span class="inline-wrap">2. AVG //平均</span></h4><h4 id="wNvuUARcv1JUqcQMjFLD9f" class="wolai-block"><span class="inline-wrap">3. MAX/MIN</span></h4><ol class="wolai-block"><li id="3ZpsBNMVn1uQNh4U8uvVbw"><div class="marker"></div><span class="inline-wrap">COUNT //统计 (null 不计入)</span></li></ol><h4 id="ozU1ZCamFxfh4wdCzWQJpS" class="wolai-block"><span class="inline-wrap">字符串函数：</span></h4><h4 id="unub5XhkamQoSdznjkwW9B" class="wolai-block"><span class="inline-wrap">数学函数：</span></h4><h4 id="cfSwHNzYtaFGsThPicGA72" class="wolai-block"><span class="inline-wrap">时间函数：</span></h4><h4 id="cyimimJ54xT3cH7MBHpcar" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="eeJ33xuMndp9gKnb5noN6M"><div class="marker"></div><span class="inline-wrap">DATE ADD0 中的 interval 后面可以是 year minute second day 等</span></li><li id="3XCUbA4xnNVvxqkGtr9wvk"><div class="marker"></div><span class="inline-wrap">DATE SUB0 中的 interval 后面可以是 jear minute second dav 等</span></li><li id="v3Y1uyAa1st66BMsXtSJwP"><div class="marker"></div><span class="inline-wrap">DATEDIFF(date1.date2）得到的是天数，而且是 date 1-date2 的天数，因此可以取负数这四个⻄数的日
期类型可以是 date, datetime 或者 timestamp</span></li><li id="arr49JHCq2fcTYvg8oDCkd"><div class="marker"></div><span class="inline-wrap">使用 int 来保存一个 unix 时间个 unix 时间戳，然后使用 from unixtime()进行转换</span></li></ol><h4 id="pqn8YXrsjyBVia32954qM3" class="wolai-block"><span class="inline-wrap">加密和系统：</span></h4><h4 id="9dAvsgKNnsUhF9PYktfvjN" class="wolai-block"><span class="inline-wrap">流程控制：</span></h4><h2 id="esu5LTpZrn567pXmMg6rmf" class="wolai-block"><span class="inline-wrap">19.5 内连接</span></h2><h4 id="9LKGDZ8pvGPrVjjGXF2xTw" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="poSUrWkzfyrz8fqxx8rC2G" class="wolai-block"><span class="inline-wrap">只返回两表相连相等的行</span></h4><h2 id="tjDcYRoZQ2e8Y2PLdshsoZ" class="wolai-block"><span class="inline-wrap">19.6 外连接 ⭐</span></h2><h4 id="9MRUzK3fds31FmEsRMsAde" class="wolai-block"><span class="inline-wrap">左外连接：</span></h4><h4 id="wk2ME88H4zoAWRs9ASPNDk" class="wolai-block"><span class="inline-wrap">左侧的表完全显示我们就说是左外连接</span></h4><h4 id="wxRZ2rHYMmrh53FeK2Q3GM" class="wolai-block"><span class="inline-wrap">右外连接：</span></h4><h4 id="xfPtfggBKrwdBBouVcY3C6" class="wolai-block"><span class="inline-wrap">右侧的表完全显示我们就说是右外连接</span></h4><h2 id="wZ8LA112RwNuVavTXGhe5f" class="wolai-block"><span class="inline-wrap">19.7 约束</span></h2><h4 id="gmFFvZfW9nHbwk8Fim2MxU" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="exYGWyhvY9LCruRFVWkCY7" class="wolai-block"><span class="inline-wrap">约束用于确保数据库的数据满足特定的商业规则</span></h4><code-block id="ka9FneaVWgCLvwFJoW7cJ3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>约束包括：not <span class="token keyword null nil">null</span> 、unique、primary key、foreign key、check</pre></div></code-block><h3 id="7maenHC8UttGtko2xorE4A" class="wolai-block"><span class="inline-wrap">19.7.1 primary key</span></h3><h4 id="umdNeNzZcPL4QB6he1STaZ" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="oFNf3PDJd5RTBZLXdZA7yW" class="wolai-block"><span class="inline-wrap">用于唯一的标示表行的数据，当定义主键约束后，该列不能重复</span></h4><h4 id="dsuP5vcZ1yuzZdyah4XWi4" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><code-block id="nvuGPMD6Ww8VANtT1EgWCJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>emp<span class="token punctuation">.</span><span class="token property-access">deptno</span>
<span class="token constant">FROM</span> emp<span class="token punctuation">,</span> dept
<span class="token constant">WHERE</span> emp<span class="token punctuation">.</span><span class="token property-access">deptno</span> <span class="token operator">=</span> dept<span class="token punctuation">.</span><span class="token property-access">deptno</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="jpF57uFQNwWkHBgLQShuW8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>stu<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span>grade
<span class="token constant">FROM</span> stu <span class="token constant">LEFT</span> <span class="token constant">JOIN</span> exam
<span class="token constant">ON</span> stu<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> exam<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="9NcvRfhD22wRvf1aQ4zi7n" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">SELECT</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>stu<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span>grade
<span class="token constant">FROM</span> stu <span class="token constant">RIGHT</span> <span class="token constant">JOIN</span> exam
<span class="token constant">ON</span> stu<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> exam<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="ec9bMU2dMA7uDZQSkpEbC4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">tablename</span>
<span class="token punctuation">(</span>id <span class="token constant">INT</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span><span class="token punctuation">,</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name</span><span class="token template-punctuation string">`</span></span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span> <span class="token number">32</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="mv1pakFUHnTJYSQiR55RkZ" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="qvTdA9zEvNDNWHdmKi1bCu"><div class="marker"></div><span class="inline-wrap">primary key 不能重复而且 </span><span class="inline-wrap"><b>不能为 null</b></span></li><li id="kSeNfDZghQPpBaVXseTFox"><div class="marker"></div><span class="inline-wrap">一张表最多只能有一个主键，但可以是复合主键</span></li><li id="f9jSD5pFHd32HsDPDD8wRa"><div class="marker"></div><span class="inline-wrap">主键的指定方式有两种：
直接在字段名后指定：字段名 primakry key
在表定义最后写： primary key(列名)</span></li><li id="26PMd1A5qicbF2fsKqy8Td"><div class="marker"></div><span class="inline-wrap">使用 desc 表名，可以看到 primary key 的情况</span></li></ol><h3 id="faZrmZAz3TsCQiFZD9Q2D9" class="wolai-block"><span class="inline-wrap">19.7.2 not null</span></h3><h4 id="bbgnUYXVzEweZa4yFs59RB" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="tEMY91PjNkseNycQcmhagF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>如果在列上定义了not <span class="token keyword null nil">null</span><span class="token punctuation">,</span>那么当插入数据时，必须为列提供数据</pre></div></code-block><h3 id="4KrgHMvJb4CUZL8aNLBsUo" class="wolai-block"><span class="inline-wrap">19.7.3 unique</span></h3><h4 id="cwH5EGSDbWg83rE7BTUyj2" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="9cxpsJ38UVqZfEYREJ4ScZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>如果在列上定义了not <span class="token keyword null nil">null</span><span class="token punctuation">,</span>那么当插入数据时，必须为列提供数据</pre></div></code-block><h4 id="iCiANNjCsdWQ9SRXq9Ah8C" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="x2Y682SGpvBafdrBanUwjF"><div class="marker"></div><span class="inline-wrap">如果没有指定 not null ，则 unique 字段可以有多个 null</span></li><li id="oS1HUjFFqkpbWEtRtDzRiL"><div class="marker"></div><span class="inline-wrap">一张表可以有多个 unique 字段</span></li></ol><h3 id="7Necf6UGGXAqHAq2jt2mMs" class="wolai-block"><span class="inline-wrap">19.7.3 foreign key</span></h3><h4 id="tYWuSnjeaLpdrBYsFfsa9c" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="dQVLTEocEcvpNWJLSxLzq2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>用于定义主表和从表之间的关系：外键约束要定义在从表上，主表则必须具有主键约束或是unique约束，当
定义外键约束后，要求外键列数据必须在主表的主键列存在或是为<span class="token keyword null nil">null</span></pre></div></code-block><code-block id="f6Dg9V5i8Qer5Gj5Z69mJT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">tablename</span>
<span class="token punctuation">(</span>id <span class="token constant">INT</span><span class="token punctuation">,</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name</span><span class="token template-punctuation string">`</span></span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span> <span class="token number">32</span> <span class="token punctuation">)</span>
<span class="token constant">PRIMARY</span> <span class="token constant">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//复合主键</span></pre></div></code-block><h4 id="7LQAJbA8ERA13BrRqWjmPN" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="q1zHZN3QRYVaoFX9Kc5zUc" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="5pNkA3FWHBC7cMGPkNHca6"><div class="marker"></div><span class="inline-wrap">外键指向的表的字段，要求是 primary key 或者是 unique</span></li><li id="uG3JNXi9jDYcNBCwbXynC7"><div class="marker"></div><span class="inline-wrap">表的类型是 innodb，这样的表才支持外键</span></li><li id="nB31zREdkYQC46gh7tQtiW"><div class="marker"></div><span class="inline-wrap">外键字段的类型要和主键字段的类型一致(⻓度可以不同)</span></li><li id="sh8NMBbLrRAvCgYysHDHgV"><div class="marker"></div><span class="inline-wrap">外键宇段的值，必须在主键字段中出现过，或者为 null 前提是外键字段允许为 null</span></li><li id="9W4qwC9qCU8hGwrYPz4czg"><div class="marker"></div><span class="inline-wrap">一旦建立主外键的关系，数据不能随意删除了</span></li></ol><h3 id="omkUnLgpSaK5ePBBgYt92q" class="wolai-block"><span class="inline-wrap">19.7.4 check</span></h3><h4 id="1PtctbtU8w9PTHFmsn8SWt" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="rbpex6eZfn9myTijhXupGC" class="wolai-block"><span class="inline-wrap">用于强制行数据必须满足的条件</span></h4><h4 id="aTfr5bBzbCSVYxWgdFG4MB" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h2 id="inzCeSw38W3HWrq9yK7GoY" class="wolai-block"><span class="inline-wrap">19.8 自增⻓</span></h2><code-block id="ffFRDga49sP3V1b4dUB8rg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">tablename</span>
<span class="token punctuation">(</span>id <span class="token constant">INT</span> <span class="token punctuation">,</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name</span><span class="token template-punctuation string">`</span></span> <span class="token constant">VARCHAR</span><span class="token punctuation">(</span> <span class="token number">32</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token constant">FOREIGN</span> <span class="token constant">KEY</span> <span class="token punctuation">(</span>本表字段<span class="token punctuation">)</span> <span class="token constant">REFERENCES</span> <span class="token function">主表名</span><span class="token punctuation">(</span>主键或unique字段<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="9yod5SjHtCuUGC2YrgSwm4" class="wolai-block"><span class="inline-wrap">字段 数据类型 CHECK (条件)</span></h4><code-block id="ka5zFq6rjR1hnPphnKy8hw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>sex <span class="token constant">VARCHAR</span><span class="token punctuation">(</span> <span class="token number">32</span> <span class="token punctuation">)</span> <span class="token constant">CHECK</span><span class="token punctuation">(</span>sex <span class="token constant">IN</span><span class="token punctuation">(</span><span class="token string">'man'</span><span class="token punctuation">,</span><span class="token string">'woman'</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></div></code-block><h4 id="qr1RPND36yppeVymw3X8aT" class="wolai-block"><span class="inline-wrap">基本介绍</span></h4><h4 id="r6U9RciDkJBizZMQvp3XRa" class="wolai-block"><span class="inline-wrap">整数列添加记录时进行自我增⻓</span></h4><h4 id="vh4i6R5TL7Q89fd5WczrCD" class="wolai-block"><span class="inline-wrap">基本语法：</span></h4><h4 id="b7ZAACvNNqQAS4bW1DG5LG" class="wolai-block"><span class="inline-wrap">添加方式：</span></h4><code-block id="vuySVxsGbcUJDH8b8BC9xh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>insert into <span class="token function">xxx</span> <span class="token punctuation">(</span>字段 <span class="token number">1</span> ，字段<span class="token number">2.</span><span class="token spread operator">...</span><span class="token punctuation">.</span><span class="token method function property-access">）values</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span>，<span class="token string">'值'</span><span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
insert into <span class="token function">xxx</span> <span class="token punctuation">(</span>字段<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token method function property-access">）values</span><span class="token punctuation">(</span><span class="token string">'值1'</span>，<span class="token string">'值2'</span><span class="token spread operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
insert into xxx <span class="token function">values</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token string">'值1'</span>，<span class="token spread operator">...</span><span class="token punctuation">)</span></pre></div></code-block><h4 id="siEfRhFDEnRHTzHSULBKKX" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="76QnhG6cRUW7edmLmXjXNk"><div class="marker"></div><span class="inline-wrap">一般来说自增⻓是和 primary key 配合使用的</span></li><li id="vFFuD9ERh97rydM1CLQR3R"><div class="marker"></div><span class="inline-wrap">自增⻓也可以单独使用[但是需要配合一个 unique</span></li><li id="9HKzoes3otoBGKnLwJ1eNm"><div class="marker"></div><span class="inline-wrap">自增⻓修饰的字段为整数型(也可以为小数)</span></li><li id="ud6HkGW7hAHrpawk2VbAKp"><div class="marker"></div><span class="inline-wrap">自增⻓默认从 1 开始，你也可以通过如下命令修改 alter
table 表名 auto increment=新的开始值</span></li><li id="umCwDjL8o3xFJ7DVF3bMoL"><div class="marker"></div><span class="inline-wrap">如果你添加数据时，给自增⻓字段(列） 指定的有值，则以指定的值为准</span></li></ol><h2 id="5F7AyTzMHN5YxQGZuSsUFN" class="wolai-block"><span class="inline-wrap">19.9 索引 ⭐</span></h2><h4 id="9yFGjSBBcYvJmRBd8ht212" class="wolai-block"><span class="inline-wrap">查询索引：</span></h4><h3 id="vNoRfPtohy5snu99QXKKNX" class="wolai-block"><span class="inline-wrap">19.9.1 主键索引</span></h3><h4 id="pEydQLxqTrm1jB7SnYmUSD" class="wolai-block"><span class="inline-wrap">创建索引：</span></h4><code-block id="aLgTQQEoZzMKKKrbKcJTYU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">ALTER</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">uesr</span><span class="token template-punctuation string">`</span></span> <span class="token constant">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">;</span>
<span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">user</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">(</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">id</span><span class="token template-punctuation string">`</span></span> <span class="token constant">INT</span> <span class="token constant">NOT</span> <span class="token constant">NULL</span> <span class="token constant">AUTO_INCREMENT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="sVwxQiDjXtMDfStmABnBBM" class="wolai-block"><span class="inline-wrap">SHOW KEYS FROM 表名;</span></h4><h4 id="nqxZfcNNsPueGp2yCfyLTS" class="wolai-block"><span class="inline-wrap">SHOW INDEX FROM 表名;</span></h4><h4 id="pnBshok9AsD1QkQoatVge8" class="wolai-block"><span class="inline-wrap">SHOW INDEXES FROM 表名;</span></h4><code-block id="e4uP7rjqhUHPtDo4U1Kh9z" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">TABLE</span> <span class="token function">tablename</span>
<span class="token punctuation">(</span>id <span class="token constant">INT</span> <span class="token constant">PRIMARY</span> <span class="token constant">KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="x5zaigL1ngazHHdCxDL6Cy" class="wolai-block"><span class="inline-wrap">ALTER TABLE 表名 ADD PRIMARY KEY(字段);</span></h4><h4 id="eu1dN4s4uRezywipiWPYh3" class="wolai-block"><span class="inline-wrap">删除索引：</span></h4><h3 id="a3y4dYMoHQnAH4uCvnrB3b" class="wolai-block"><span class="inline-wrap">19.9.2 唯一索引</span></h3><h4 id="s367WaaAMUyVo32dedZWdZ" class="wolai-block"><span class="inline-wrap">创建索引：</span></h4><h3 id="hsWTgmL8kKQQwgqJVD1FT3" class="wolai-block"><span class="inline-wrap">19.9.3 普通索引</span></h3><h4 id="u1qe1y8zyhqMoHTa99QRb8" class="wolai-block"><span class="inline-wrap">创建索引：</span></h4><h4 id="pGsAwmwJJzudcqbaHNfEqD" class="wolai-block"><span class="inline-wrap">删除索引：</span></h4><h3 id="pChUhdi3FHVi76v8sw4xWA" class="wolai-block"><span class="inline-wrap">19.9.4 全文索引</span></h3><h3 id="reAv5XA7fzwZRCDC5TpqaX" class="wolai-block"><span class="inline-wrap">19.9.5 总结</span></h3><h4 id="nR6zxbD8L7J8Sf4iXUrCVR" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><h4 id="qVrJQ6dP9zbNMtFKWWEuHZ" class="wolai-block"><span class="inline-wrap">1. 较频繁的作为查询条件字段应该创建索引</span></h4><h4 id="fcrHkMxWosecF9qT1GDhgx" class="wolai-block"><span class="inline-wrap">2. 唯一性太差的字段不适合单独创建索引，即使频繁作为查询条件</span></h4><h4 id="8b7kmvfdkPF4LdaYyd1peF" class="wolai-block"><span class="inline-wrap">3. 更新非常频繁的字段不适合创建索引</span></h4><h4 id="bZQHZwW3x5NrC9ZLqPgFjX" class="wolai-block"><span class="inline-wrap">4. 不会出现在 WHERE 子句中字段不该创建索引</span></h4><h2 id="a4xiBPZHpV9zsAtkv6ikWb" class="wolai-block"><span class="inline-wrap">19.10 事物</span></h2><h3 id="qnbDFLbyKUYdyTxEiDCRFY" class="wolai-block"><span class="inline-wrap">19.10.1 事物</span></h3><h4 id="jQvhfN1Kc3M6PgQSu1UVCt" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="d9qeEFeep5RCzkbYbexmW8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>事务用于保证数据的一致性<span class="token punctuation">,</span>它由一组相关的dml语句组成<span class="token punctuation">,</span>该组的dml语句要么全部成功，要么全部失败</pre></div></code-block><h4 id="qNyEjUPECDm7pdBqk8dSib" class="wolai-block"><span class="inline-wrap">ALTER TABLE 表名 DROP PRIMARY KEY;</span></h4><h4 id="83W7ax16H9nhfuFpxGCGLH" class="wolai-block"><span class="inline-wrap">CREATE UNIQUE INDEX 索引名 ON 表名(字段);</span></h4><h4 id="aBD3WbzzdpWnsVQu3EtDaP" class="wolai-block"><span class="inline-wrap">CREATE INDEX 索引名 ON 表名(字段);</span></h4><h4 id="3398JDKph688vKbR2Z3jUR" class="wolai-block"><span class="inline-wrap">ALTER TABLE 表名 ADD INDEX 索引名(字段);</span></h4><h4 id="42MRARuqPrvKjP6odA3Gmh" class="wolai-block"><span class="inline-wrap">DROP INDEX 索引名 ON 表名;</span></h4><h4 id="eg44VsSZmg74X7Umau1AD3" class="wolai-block"><span class="inline-wrap">事物和锁：</span></h4><code-block id="k26DwJMzCQ7kPm2dznJfHJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function">当执行事务操作时</span><span class="token punctuation">(</span>dml语句<span class="token punctuation">)</span>，mysql会在表上加锁<span class="token punctuation">,</span>防止其它用户改表的数据</pre></div></code-block><h4 id="p98LBXeBzCy78rrgbSmW2r" class="wolai-block"><span class="inline-wrap">回退事物：</span></h4><code-block id="xvVRAVNiGMBaMj49nrCzoZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>保存点是事务中的点 <span class="token function">用于取消部分事务，当结束事务时</span> <span class="token punctuation">(</span>commit），会自动的删除该事务所定义的所有保存
意，当执行回退事务时，通过指定保存点可以回退到指定的点</pre></div></code-block><h4 id="8MnbPGEiRwyJLevx4qAGW5" class="wolai-block"><span class="inline-wrap">提交事物：</span></h4><code-block id="fNX4j567fxwagE9swiMpuA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>使用commit语句可以提交事务<span class="token punctuation">.</span><span class="token property-access">当执行了commit语句子后</span><span class="token punctuation">,</span>会确认事务的变化、结束事务、删除保存点、 释放
锁，数据生效。当使用commit语句结束事务子后，其它会话将可以查看到事务变化后的新数据</pre></div></code-block><h4 id="eWxVChkK1tvK8tjZo41iBf" class="wolai-block"><span class="inline-wrap">事物操作：</span></h4><code-block id="2CguvybfnZ6rJApQKhsoAs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>start transaction — 开始一个事务
savepoint 保存点名 一 设置保存点
rollback to 保存点名一 回退事务到保存点
rollback — 回退全部事务
commit — 提交事务，所有的操作生效，不能回退</pre></div></code-block><h4 id="ewxXbhJK2xHz7m7yrm3zZm" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="tZqEmm7DPLPLrE7fBDXwrY"><div class="marker"></div><span class="inline-wrap">如果不开始事务，默认情况下，dml 操作是自动提交的，不能回滚</span></li><li id="8KGFGJyvmu1hzN2Cz5Mi2Z"><div class="marker"></div><span class="inline-wrap">如果开始一个事务，你没有创建保存点． 你可以执行 rollback，默认就是回退到
你事务开始的状态</span></li><li id="34H1Nx8ZmdABJWRaowDckb"><div class="marker"></div><span class="inline-wrap">你也可以在这个事务中(还没有提交时)，创建多个保存点•比如：savepoint
aaa;执行 dml , savepoint bbb;</span></li><li id="p2z3PhSzmFB9Yjb3cr1G8q"><div class="marker"></div><span class="inline-wrap">回退到更早的保存点则无法会退更晚的保存点</span></li><li id="9fiZKU3AhRmUzaFrUzY12W"><div class="marker"></div><span class="inline-wrap">mysql 的事务机制需要 innodb 的存储引擎还可以使用，myisam 不好使</span></li><li id="eiahucncLP2SBq8Q9aNbnS"><div class="marker"></div><span class="inline-wrap">开始一个事务 start transaction，set autocommit=off:</span></li></ol><h3 id="hC8HYHJzrpvdaBCd2rR5vT" class="wolai-block"><span class="inline-wrap">19.10.2 事物隔离</span></h3><h4 id="9rz6wfQNirDLRdtQdGtWvF" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="s13PTgzpy2tyTiz3iSXgGe" class="wolai-block"><span class="inline-wrap">多个连接开启各自事务操作数据库中数据时，数据库系统要负责隔离操作，以保证各个连接在获取数据时的淮</span></h4><h4 id="2X93DymWna9VPsTGMiDSNn" class="wolai-block"><span class="inline-wrap">确性</span></h4><h4 id="fvM77Fo8BctRDzkv5PPTgE" class="wolai-block"><span class="inline-wrap">事物隔离级别：</span></h4><h4 id="c22fBB8DFoq7xPoUfmYx1q" class="wolai-block"><span class="inline-wrap">脏读：</span></h4><h4 id="xpkRXbmLHZkJt9sAvs6t7N" class="wolai-block"><span class="inline-wrap">当一个事务读取另一个事务尚 未提交 的修改时，产生脏读</span></h4><h4 id="fKZYehswtaDQKaBLeY9go3" class="wolai-block"><span class="inline-wrap">不可重复读：</span></h4><h4 id="rJfjKu9EwBQC3Zy6g368bt" class="wolai-block"><span class="inline-wrap">同一查询在同一事务中多次进行，由于其他 提交 事务所做的修改或删除，每次返回不同的结果集，此时发生不</span></h4><h4 id="t7WV1NJY1h7SdhBiLhrWSr" class="wolai-block"><span class="inline-wrap">可重复读</span></h4><h4 id="u4wda1paVYtp3siCEFS3eR" class="wolai-block"><span class="inline-wrap">幻读：</span></h4><h4 id="w5t7iRwoqgrsmxqRchLATw" class="wolai-block"><span class="inline-wrap">同一查询在同一事务中多次进行，由于其他 提交 事务所做的插入操作，每次返回不同的结果集，此时发生幻读</span></h4><h4 id="nCNoNX6PDk1FAgKSWr7qaE" class="wolai-block"><span class="inline-wrap">可串行化：</span></h4><h4 id="pDQuAa3MavWfoyG5z6iawe" class="wolai-block"><span class="inline-wrap">只有当其他事物提交改动时，返回不同结果集，且只允许一个事物进行操作</span></h4><h4 id="mcmiGziky5qMnWMe5eWvkK" class="wolai-block"><span class="inline-wrap">隔离操作指令：</span></h4><code-block id="gMi5GuiZwB1AKU9RU93hFb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>查看当前会话隔离级别——select @@tx isolation<span class="token punctuation">;</span>
查看系统当前隔离级别——select @@global<span class="token punctuation">.</span><span class="token property-access">tx</span> isolation<span class="token punctuation">;</span>
设置当前会话隔离级别——<span class="token keyword">set</span> session transaction isolation level repeatable read<span class="token punctuation">;</span>
设置系统当前隔离级别——<span class="token keyword">set</span> global transaction isolation level repeatable read<span class="token punctuation">;</span>
mysql 默认的事务隔离级别是repeatable read</pre></div></code-block><h4 id="vwFy63KC21xQBd6NCdKtme" class="wolai-block"><span class="inline-wrap">事物特性：</span></h4><ol class="wolai-block"><li id="b3gC6MByDHJecRWUu62Urt"><div class="marker"></div><span class="inline-wrap">原子性 (Atomicity)原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发
生</span></li><li id="uYiNb7erhRSJVnjxMMcBKv"><div class="marker"></div><span class="inline-wrap">一致性 (Consistency)事务必须使数据库从一个一致性状态变换到另外一个一致性状态</span></li><li id="h4y7CQQnZywq9SmPqTT2dP"><div class="marker"></div><span class="inline-wrap">隔离性 (Isolation)事务的隔离性是多个用户并发访问数据库时，数据库为每一个用户开启的事务，不能
被其他事务的操作数据所干扰，多个并发事务之间要相互隔离</span></li><li id="vMb56UYqNzXkdB84Ut54WF"><div class="marker"></div><span class="inline-wrap">持久性 (Durability)持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来郎
使数据库发生故障也不应该对其有任何影响</span></li></ol><h2 id="utLpVtaGo1fLZYMWQX7oCH" class="wolai-block"><span class="inline-wrap">19.11 表类型和存储引擎</span></h2><h4 id="48dGrFprDkCNY7MSkAdECB" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="rQLeBahJp37EvQRRoWp9yT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token function"><span class="token maybe-class-name">MySQL表类型由存储引擎</span></span><span class="token punctuation">(</span><span class="token maybe-class-name">Storage</span> <span class="token maybe-class-name">Engines</span><span class="token punctuation">)</span>决定，主要包括MyISAM<span class="token punctuation">,</span>innoDB、Memory等
<span class="token maybe-class-name">MysQL</span> 数据表主要支持六种类型，
分别是：<span class="token constant">CSV</span>、 <span class="token maybe-class-name">Memory、</span><span class="token constant">ARCHIVE</span>、<span class="token constant">MRG</span> <span class="token constant">MYISAM</span>、 <span class="token constant">MYISAM</span>、InnoBDB
<span class="token function">分为两类，一类是“事务安全型”</span><span class="token punctuation">(</span>transaction<span class="token operator">-</span>safe<span class="token punctuation">)</span>， <span class="token function">比如：InnoDB；其余都是“非事物安全型”</span><span class="token punctuation">(</span>non<span class="token operator">-</span>
transactionsafe<span class="token punctuation">)</span><span class="token punctuation">[</span>mysiam<span class="token punctuation">]</span> 和 memory<span class="token punctuation">]</span></pre></div></code-block><h4 id="29mVF42TLbfLWuCXrVHgLg" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="hYQ1FTQ8ZibFSS1vMJhC59"><div class="marker"></div><span class="inline-wrap">MyLSAM 不支持事物，也不支持外键，访问速度快，对事物完整性没有要求</span></li><li id="9D57FsKtJxW1iHav5VGK5R"><div class="marker"></div><span class="inline-wrap">InnoDB 存储引擎提供了具有提交、回滚和崩溃恢复能力的事务安全。但是比起 MyISAM 存储引擎，
InnoDB 写的处理效率差一些并且会占用更多的磁盘空间以保留数据和索引</span></li><li id="pqMehWPY2RW4VtAvX4dzgL"><div class="marker"></div><span class="inline-wrap">MEMORY 存储引擎使用存在内存中的内容来创建表。每个 MEMORY 表只实际对应一个磁盘文件。
MEMORY 类型的表访问非常得快，因为它的数据是放在内存中的，并且默认使用 HASH 索引。但是一旦
服务关闭，表中的数据就会丢失掉，表的结构还在</span></li></ol><h4 id="k84FJARgH8cdjRJzYFbskG" class="wolai-block"><span class="inline-wrap">引擎选择：</span></h4><ol class="wolai-block"><li id="4WbK6PcH2kD36kY8aeJso9"><div class="marker"></div><span class="inline-wrap">如果你的应用不需要事务，处理的只是基本的 CRUD 操作，那么 MyISAM 是不二选择，速度快</span></li><li id="7XYAL2v4sgggjMWqFnNHDD"><div class="marker"></div><span class="inline-wrap">如果需要支持事务，选择 InnoDB</span></li><li id="a29nRTSEELRM8uAyaEk5tk"><div class="marker"></div><span class="inline-wrap">Memory 存储引擎就是将数据存储在内存中，由于没有磁盘 1/0 的等待，速度极快，但由于是内存存储引
擎，所做的任何修改在服务器重启后都将消失</span></li></ol><h4 id="bRQ9KEnLrSKhwTEZAsMQta" class="wolai-block"><span class="inline-wrap">修改存储引擎：</span></h4><h2 id="tUCstreQUzVrUs5n4Wx4Nh" class="wolai-block"><span class="inline-wrap">19.12 视图</span></h2><h4 id="8KQqZ3sYxaPrF6FpRYFbj6" class="wolai-block"><span class="inline-wrap">ALTER TABLE </span><span class="inline-wrap"><code>表名</code></span><span class="inline-wrap"> ENGINE = 存储引擎;</span></h4><h4 id="t5QaApUKEWPkShWFCfqK31" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="feMvL87wq17dL9G3VeJw67" class="wolai-block"><span class="inline-wrap">视图是一个虛拟表，其内容由查询定义。同真实的表一样，视图包含列，其数据来自对应的真实表(基表）</span></h4><h4 id="9SEj92Ck1i334J7vsCLmWN" class="wolai-block"><span class="inline-wrap">视图操作：</span></h4><h4 id="6rVzzn9VWVciypwhdun1cp" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="wj6u7PohmzxupmMwCwu6oz"><div class="marker"></div><span class="inline-wrap">创建视图后，到数据库去看，对应视图只有一个视图结构文件(形式：视图名.frm)</span></li><li id="9ELRirTE1bK6Q8Lk5EkWxR"><div class="marker"></div><span class="inline-wrap">视图的数据变化会影响到基表，基表的数据变化也会影响到视圈[insert update delete]</span></li><li id="ezfjECSRUUi3trZ9XCeEKE"><div class="marker"></div><span class="inline-wrap">视图中可以再使用视图，数据仍然来自基表</span></li></ol><h4 id="r4EjfMLjK9PUysSWwXNAeq" class="wolai-block"><span class="inline-wrap">性质：</span></h4><h4 id="p2JGDyLCQ3HUdjUgKot9km" class="wolai-block"><span class="inline-wrap">1. 安全：一些数据表有着重要的信息。有些字段是保密的，不能让用户直接看到。这时就可以创建一个视</span></h4><h4 id="9NeesgQntqveCBEJYcFoyM" class="wolai-block"><span class="inline-wrap">图，在这张视图中只保留一部分字段。这样，用户就可以查询自己需要的字段，不能查看保密的字段</span></h4><h4 id="uAYMkHGJVQsxt9HhCMJQfu" class="wolai-block"><span class="inline-wrap">2. 性能：关系数据库的数据常常会分表存储，使用外键建立这些表的之间关系。这时，数据库查询通常会</span></h4><h4 id="pwTwKkUVPezawhYPnpCJvr" class="wolai-block"><span class="inline-wrap">用到连接 (JOIN)。这样做不但麻烦，效率相对也比较低。如果建立一个视图，将相关的表和字段组合在</span></h4><h4 id="fE5qvJFerjNA4WuVr8zRDh" class="wolai-block"><span class="inline-wrap">一起，就可以避免使用 JOIN 查询数据</span></h4><h4 id="utWvbw2nCzadxxjv26MZzR" class="wolai-block"><span class="inline-wrap">3. 灵活：如果系统中有一张 1 日的表，这张表由于设计的问题，即将被废弃。然而，很多应用都是基于这张</span></h4><h4 id="4kjxLsrWJUAESch7R5mEag" class="wolai-block"><span class="inline-wrap">表，不易修改。这时就可以建立一张视图，视图中的数据直接映射到新建的表。这样就可以少做很多改</span></h4><h4 id="kbr8aboNfAunWLw9y7AubT" class="wolai-block"><span class="inline-wrap">动，也达到了升级数据表的目的</span></h4><h4 id="j3qdR4EaBfHhh3bSfdzqR5" class="wolai-block"><span class="inline-wrap">CREATE VIEW 视图名 AS SELECT 语句</span></h4><h4 id="a6dqyucwLGgmn7nPF266Gf" class="wolai-block"><span class="inline-wrap">ALTER VIEW 视图名 AS SELECT 语句</span></h4><h4 id="1jLs3vwK5hcWn8zzcwrshi" class="wolai-block"><span class="inline-wrap">SHOW CREATE VIEW 视图名</span></h4><h4 id="31PCDtRLiY9EJwqqmD7N9y" class="wolai-block"><span class="inline-wrap">DROP VIEW 视图名 1 ,视图名 2</span></h4><h4 id="o62TZvhjMKr8wjFvF6sCf3" class="wolai-block"><span class="inline-wrap">多基表视图：</span></h4><h2 id="tpKWKvXrWq9Qmv3BLo3TXX" class="wolai-block"><span class="inline-wrap">19.13 用户管理</span></h2><h4 id="n9GHXsDpjhoKykiRydWtwC" class="wolai-block"><span class="inline-wrap">管理指令：</span></h4><code-block id="7soH1twJbMBiAhD4igWzXd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>创建用户：create user ‘用户名’ @ '允许登录位置’ identified by 密码
删除用户：drop user ‘用户名’ @ <span class="token string">'允许登录位置'</span>
修改密码：<span class="token constant">SET</span> <span class="token constant">PASSWORD</span> <span class="token constant">FOR</span> ‘用户名’ @ <span class="token string">'允许登陆位置'</span> <span class="token operator">=</span> <span class="token constant">PASSWORD</span><span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span></pre></div></code-block><h4 id="76XcTH3R6qKVbU57AqtQty" class="wolai-block"><span class="inline-wrap">授权：</span></h4><h4 id="1cTMf5QzAtqihomUy4TnD8" class="wolai-block"><span class="inline-wrap">权限管理：</span></h4><code-block id="tvVAtjsk25GSoJiEJfq4QQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token constant">CREATE</span> <span class="token constant">VIEW</span> emp_view02 <span class="token constant">AS</span>
<span class="token constant">SELECT</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>dname<span class="token punctuation">,</span>grade
<span class="token constant">FROM</span> emp<span class="token punctuation">,</span>dept<span class="token punctuation">,</span>salgrade
<span class="token constant">WHERE</span> emp<span class="token punctuation">.</span><span class="token property-access">deptno</span> <span class="token operator">=</span> dept<span class="token punctuation">.</span><span class="token property-access">deptno</span>
<span class="token constant">AND</span> <span class="token punctuation">(</span>sal <span class="token constant">BETWEEN</span> losal <span class="token constant">AND</span> hisal<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="7wczhXAdLSkaTTaVzmZ4DX" class="wolai-block"><span class="inline-wrap">注意事项和细节：</span></h4><ol class="wolai-block"><li id="rfFJYp8qXWQ5HG1zuXzoif"><div class="marker"></div><span class="inline-wrap">在创建用户的时候，如果不指定 Host，则为<span class="jill"></span>%，%<span class="jill"></span>表示表示所有 1P 都有连接权限 create user xxx;</span></li><li id="4VTet2kGqbca6sTqAWndDs"><div class="marker"></div><span class="inline-wrap">create user &#39;xoxx&#39;@&#39;192.168.1.%’ 表示 xxx 用户在 192.168.1.*的 ip 可以登
录 mysq</span></li><li id="7m9CX3XbnSUjUhDbis6Fqi"><div class="marker"></div><span class="inline-wrap">在删除用户的时候，如果 host 不是 %，需要明确指定“用户’@&#39;host 值‘</span></li></ol><h1 id="mPpgm1gcFQWqsiFavLbsvY" class="wolai-block"><span class="inline-wrap">20 JDBC 和连接池</span></h1><h4 id="3S4UxxkSb1uDukgKsqQT7m" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="pBQ1bsdyzPcPNihBJvyXCB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>是Java提供一套用于数据库操作的接口<span class="token constant">API</span>，Java程序员只需要面向这套接口编程。不同的数据库厂商，针对
接口提供品供不同实现</pre></div></code-block><h4 id="2tU9Y8DSGeycCEBi7QSN7U" class="wolai-block"><span class="inline-wrap">连接方式：</span></h4><code-block id="2CGjMSuT8uuxkN9cn5Aq3m" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcConn</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="jEd449kw2jvMaZANVVsUSo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方式 1</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connect01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">SQLException</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Driver</span> driver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建driver对象</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/hsp_db02"</span><span class="token punctuation">;</span>
<span class="token comment">//将 用户名和密码放入到Properties 对象</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//说明 user 和 password 是规定好，后面的值根据实际情况写</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">setProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 用户</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">setProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">,</span> <span class="token string">"hsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//密码</span>
<span class="token maybe-class-name">Connection</span> connect <span class="token operator">=</span> driver<span class="token punctuation">.</span><span class="token method function property-access">connect</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>connect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="hhrdjuNtp6Vo9ToYDTUZno" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方式 2</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connect02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">IllegalAccessException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">SQLException</span> <span class="token punctuation">{</span>
<span class="token comment">//使用反射加载Driver类 , 动态加载，更加的灵活，减少依赖性</span>
<span class="token maybe-class-name">Class</span><span class="token operator">&lt;</span><span class="token operator">?</span><span class="token operator">></span> aClass <span class="token operator">=</span> <span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Driver</span> driver <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Driver</span><span class="token punctuation">)</span> aClass<span class="token punctuation">.</span><span class="token method function property-access">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div id="boPLakMaqQ1s9DkCW5NrDm" class="wolai-block wolai-text"><div><span class="inline-wrap">String url = &quot;jdbc:mysql://localhost:3306/hsp_db02&quot;;
//将 用户名和密码放入到 Properties 对象
Properties properties = new Properties();
//说明 user 和 password 是规定好，后面的值根据实际情况写
properties.setProperty(&quot;user&quot;, &quot;root&quot;);// 用户
properties.setProperty(&quot;password&quot;, &quot;hsp&quot;); //密码</span></div></div><div id="n9L46vpmdCr8gtEHkif9ra" class="wolai-block wolai-text"><div><span class="inline-wrap">Connection connect = driver.connect(url, properties);
System.out.println(&quot;方式 2=&quot; + connect);</span></div></div><div id="gkMdLCFym4643cvACd1Yew" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="ohg6W8xUKAmNnf1LKaNDKS" class="wolai-block wolai-text"><div><span class="inline-wrap">//方式 3 使用 DriverManager 替代 driver 进行统一管理
@Test
public void connect03() throws IllegalAccessException, InstantiationException,
ClassNotFoundException, SQLException {</span></div></div><div id="1oxhNiduU4iDswEZTLxLFV" class="wolai-block wolai-text"><div><span class="inline-wrap">//使用反射加载 Driver
Class&lt;?&gt; aClass = Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
Driver driver = (Driver) aClass.newInstance();</span></div></div><div id="7BKbjuVAAhSUaH6d6L4wU9" class="wolai-block wolai-text"><div><span class="inline-wrap">//创建 url 和 user 和 password
String url = &quot;jdbc:mysql://localhost:3306/hsp_db02&quot;;
String user = &quot;root&quot;;
String password = &quot;hsp&quot;;</span></div></div><div id="8rFeqLYeKm8GrTqnznykgP" class="wolai-block wolai-text"><div><span class="inline-wrap">DriverManager.registerDriver(driver);//注册 Driver 驱动</span></div></div><div id="sdKoS199jPtj2cYj9XVuJ2" class="wolai-block wolai-text"><div><span class="inline-wrap">Connection connection = DriverManager.getConnection(url, user, password);
System.out.println(&quot;第三种方式=&quot; + connection);
}</span></div></div><div id="7xHCp3fpSfJskU7Y2MhLuN" class="wolai-block wolai-text"><div><span class="inline-wrap">//方式 4: 使用 Class.forName 自动完成注册驱动，简化代码
//这种方式获取连接是使用的最多，推荐使用
@Test
public void connect04() throws ClassNotFoundException, SQLException {
//使用反射加载了 Driver 类
//在加载 Driver 类时，完成注册
/*
源码: 1. 静态代码块，在类加载时，会执行一次.</span></div></div><ol class="wolai-block"><li id="dD2xbsjGzHGgDHnUsYbwP1"><div class="marker"></div><span class="inline-wrap">DriverManager.registerDriver(new Driver());</span></li><li id="5QNRBFUdZ1E8vRxxqAQyXz"><div class="marker"></div><span class="inline-wrap">因此注册 driver 的工作已经完成
static {
try {
DriverManager.registerDriver(new Driver());
} catch (SQLException var1) {
throw new RuntimeException(&quot;Can&#39;t register driver!&quot;);
}
}</span></li></ol><h2 id="4Vu3ZuMF1hY3XGD8hJqi74" class="wolai-block"><span class="inline-wrap">20.1 JDBC API ⭐</span></h2><h3 id="eKF4V9mnTtdUAyEYt3GFSP" class="wolai-block"><span class="inline-wrap">20.1.1 ResultSet</span></h3><h4 id="jMYm89YDZFCTRVTmYBfzqg" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="8FHiqwiV9FMziXCe3E6sfW" class="wolai-block"><span class="inline-wrap">1. 表示数据库结果集的数据表，通常通过执行查询数据库的语句生成</span></h4><ol class="wolai-block"><li id="pXDzeBNdXoNie4qM8UoXsr"><div class="marker"></div><span class="inline-wrap">Resultset 对象保特一个光标指向基当前的数据行，最初的光标位于第一行之前</span></li><li id="fZiNTUA7DACNw8upAb1GGM"><div class="marker"></div><span class="inline-wrap">next 方法将光标移动到下一行，并且由于在 ResultSet 对象中没有更多行时返回
false，因此可以在 while 循环中使用循环来遍历结果集</span></li></ol><h4 id="e1ZvSY8hjV2AiWSpWCbK78" class="wolai-block"><span class="inline-wrap">*/</span></h4><code-block id="3aJC9L9gzHg1ie3Gz6mmCt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="t1SkVE3g9QDV3smYU6NSp8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//创建url 和 user 和 password</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> <span class="token string">"jdbc:mysql://localhost:3306/hsp_db02"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> <span class="token string">"root"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> <span class="token string">"hsp"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">DriverManager</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="pecWvhcpQrvqn7vSHVWyJW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"第 4 种方式~ "</span> <span class="token operator">+</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="2HJy48LXfgnx93BnyU9Gvm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="a7fCMSP8irVX4XbkhZ882s" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方式5 , 在方式 4 的基础上改进，增加配置文件，让连接mysql更加灵活</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">connect05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">IOException</span><span class="token punctuation">,</span> <span class="token maybe-class-name">ClassNotFoundException</span><span class="token punctuation">,</span>
<span class="token maybe-class-name">SQLException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="vctqJxkB5LFcrPXbAscRYK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//通过Properties对象获取配置文件的信息</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取相关的值</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="kZz4EgaRw13mcy1g8mtZe3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//建议写上</span></pre></div></code-block><code-block id="r5Q6Bbm58e98v1ZqNPeEQE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">DriverManager</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="1sB4pfs7zqvtzXNbthf6WX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"方式5 "</span> <span class="token operator">+</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="998mtm9jpdy73iUHQ4yJpQ" class="wolai-block"><span class="inline-wrap">底层：</span></h4><h4 id="fQm6LSrjz7aCRYkmxvALmM" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="eAEgLuMDoorocf7kPFVhcS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResultSet_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="rPGTq8cFd75RnGhtFmSNrC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//通过Properties对象获取配置文件的信息</span></pre></div></code-block><code-block id="cNXr7vmAghsCkFUtjJuKgy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取相关的值</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="rpyCRbZ9hvFrLvs8pxVstc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 注册驱动</span>
<span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//建议写上</span></pre></div></code-block><code-block id="xxmZu1M4Uf9FJN3igDjKkK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">DriverManager</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="fWvMfyDuh84mEHN6HEE2vg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 得到Statement</span>
<span class="token maybe-class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. 组织SqL</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select id, name , sex, borndate from actor"</span><span class="token punctuation">;</span>
<span class="token comment">//执行给定的SQL语句，该语句返回单个 ResultSet对象</span>
<span class="token comment">/*
+----+-----------+-----+---------------------+
| id | name | sex | borndate |
+----+-----------+-----+---------------------+-------+
| 4 | 刘德华 | 男 | 1970-12-12 00:00:00 |
| 5 | jack | 男 | 1990-11-11 00:00:00 |</span></pre></div></code-block><h3 id="jJbXXkWUFPNBDiZzRPwiaj" class="wolai-block"><span class="inline-wrap">20.1.2 Statement</span></h3><h4 id="67w1i68Gx2K4zApPD8jMGz" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><ol class="wolai-block"><li id="baTNjctfXPjjUTcM5tZHjs"><div class="marker"></div><span class="inline-wrap">Statement 对象 用于执行静态 SQL 语句并返回其生成的结果的对象</span></li><li id="uB9LHVEvkcZ9UKcC1FX5nU"><div class="marker"></div><span class="inline-wrap">在连接建立后，需要对数据库进行访问，执行 命名或是 SQL 语</span></li><li id="oPz8qNZy56RfibxVnjerGE"><div class="marker"></div><span class="inline-wrap">Statement 对象执行 SQL 语句，存在 SQL 注入⻛险</span></li></ol><h4 id="nwxVwVfLYJ8Vr9LBVDZQy1" class="wolai-block"><span class="inline-wrap">例：</span></h4><h4 id="uFeWiiLhYyzmqLYwoettZK" class="wolai-block"><span class="inline-wrap">+----+-----------+-----+---------------------+-------+</span></h4><h4 id="w2SjrykyziNtqyVemVoMvZ" class="wolai-block"><span class="inline-wrap">*/</span></h4><h4 id="nfrWrVTrv3WbzcQxGNPuds" class="wolai-block"><span class="inline-wrap">/*</span></h4><code-block id="jLWxCEf5sX4JwLxk1ajGKa" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>老韩阅读debug 代码 resultSet 对象的结构</pre></div></code-block><h4 id="98TrRfw3GJZwJD7N6aeg28" class="wolai-block"><span class="inline-wrap">*/</span></h4><code-block id="2CgSiLNjP6wZPgANYNQv2h" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token method function property-access">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="72XV7MP5SnawaWwyfDPkzp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//5. 使用while取出数据</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 让光标向后移动，如果没有更多行，则返回false</span>
int id <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token method function property-access">getInt</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取该行的第 1 列</span>
<span class="token comment">//int id1 = resultSet.getInt("id"); 通过列名来获取值, 推荐</span>
<span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取该行的第 2 列</span>
<span class="token known-class-name class-name">String</span> sex <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span> <span class="token number">3</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">Date</span> date <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token method function property-access">getDate</span><span class="token punctuation">(</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="mkTspcL2wSNvV9jYdZ3PN5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="kFPv6qTu9yZZAWVQqK3qu3" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//6. 关闭连接</span>
resultSet<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="29gdK934xwqmqFZZUtTFrQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Statement_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="fcsCPfCjpPDdszSXaUDQDf" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">in</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="pJbpDNjz12ke35Wwd5yiS1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//让用户输入管理员名和密码</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span><span class="token string">"请输入管理员的名字: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//next(): 当接收到 空格或者 '就是表示结</span>
束
<span class="token known-class-name class-name">String</span> admin_name <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token method function property-access">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 老师说明，如果希望看到SQL注入，这里需</span>
要用nextLine
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span><span class="token string">"请输入管理员的密码: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> admin_pwd <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token method function property-access">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h3 id="5HEUfXANpd45CNFeQHvJV7" class="wolai-block"><span class="inline-wrap">20.1.3 PrepareStatement</span></h3><h4 id="hQxPEg7ZG2apCoi3EW1ADw" class="wolai-block"><span class="inline-wrap">基本介绍:</span></h4><ol class="wolai-block"><li id="43DK2EXrASgtEVdD36aYuL"><div class="marker"></div><span class="inline-wrap">PreparedStatement 执行的 SQL 语句中的参数用问号(?)来表示，调用 Preparedstatement 对象的
setxxx()方法来设置这些参数.setxxx()方法有两个参数，第一个参数是要设置的 SQL 语句中的参数的索引
（从 1 开始），第二个是设置的 SOL 语句中的参数的值</span></li><li id="wenF67Ycw3AFMZfV4U1oX9"><div class="marker"></div><span class="inline-wrap">调用 executeQuery()，返回 ResultSet 对象</span></li><li id="gDpy4sM1W34pHKp3iGPRun"><div class="marker"></div><span class="inline-wrap">调用 executeUpdate()，执行更新，包括增、删、修改</span></li></ol><code-block id="uyAj8xSuEa1QSeMWv6Necw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//通过Properties对象获取配置文件的信息</span></pre></div></code-block><code-block id="w2gSL71aF694EDvEU3H5Lz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取相关的值</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="o1T8ULMpoa3KHuyXKvYAoV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 注册驱动</span>
<span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//建议写上</span></pre></div></code-block><code-block id="1LjbgFRvMsh7HGdRAodnSQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">DriverManager</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="3rK8spN7uCUBCXgxxKLTH8" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 得到Statement</span>
<span class="token maybe-class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="q775zTKovoFAW3DBkgCtWo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 组织SqL</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select name , pwd from admin where name ='"</span>
<span class="token operator">+</span> admin_name <span class="token operator">+</span> <span class="token string">"' and pwd = '"</span> <span class="token operator">+</span> admin_pwd <span class="token operator">+</span> <span class="token string">"'"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token method function property-access">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果查询到一条记录，则说明该管理存在</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"恭喜， 登录成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"对不起，登录失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="3odh44JqbdzepCp3p9qQ5E" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//关闭连接</span>
resultSet<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
statement<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="x4RxLC1Zjb79BMQMF1yTMH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="gY4FdzYY94xmxowrJWAhZr" class="wolai-block"><span class="inline-wrap">DML：</span></h4><code-block id="2QrJp9efKdBYsQthbWtUtS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PreparedStatementDML_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="qRyxLXmobTxGQXspPukVc9" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//看 PreparedStatement类图</span></pre></div></code-block><code-block id="2bsjwdp5TDLCqVN3ay8jwt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">in</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="ireguY4cAA19bmCfhjuwG6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//让用户输入管理员名和密码</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span><span class="token string">"请输删除管理员的名字: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//next(): 当接收到 空格或者 '就是表示</span>
结束
<span class="token known-class-name class-name">String</span> admin_name <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token method function property-access">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 老师说明，如果希望看到SQL注入，这里需</span>
要用nextLine
<span class="token comment">// System.out.print("请输入管理员的新密码: ");</span>
<span class="token comment">// String admin_pwd = scanner.nextLine();</span></pre></div></code-block><code-block id="qSFzrCaTY1QHmqsuxbHhiY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//通过Properties对象获取配置文件的信息</span></pre></div></code-block><code-block id="b4qwkjXxi7Moqe6KFveTxp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取相关的值</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="8HTPUY2RzByAbsfPAHE7MR" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 注册驱动</span>
<span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//建议写上</span></pre></div></code-block><code-block id="rPbyKEqkS9qPz5sYYPBtRc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">DriverManager</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="dwDoopDJbcUW4FPZTED2Fb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 得到PreparedStatement</span>
<span class="token comment">//3.1 组织SqL , Sql 语句的? 就相当于占位符</span>
<span class="token comment">//添加记录</span>
<span class="token comment">//String sql = "insert into admin values(?, ?)";</span>
<span class="token comment">//String sql = "update admin set pwd =? where name = ?";</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from admin where name = ?"</span><span class="token punctuation">;</span>
<span class="token comment">//3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span>
<span class="token maybe-class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3.3 给? 赋值</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setString</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> admin_name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="tTjR794Dbigd18sQ1hJrwu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//preparedStatement.setString(2, admin_name);</span></pre></div></code-block><code-block id="wnvonEki4M2DFUNFbJhjqN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 执行 dml 语句使用 executeUpdate</span>
int rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>rows <span class="token operator">></span> <span class="token number">0</span><span class="token operator">?</span> <span class="token string">"执行成功"</span> <span class="token operator">:</span> <span class="token string">"执行失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="bsA2sPjVaaM3hyBSTofvQd" class="wolai-block"><span class="inline-wrap">查询：</span></h4><h4 id="dgFsqMMgHjy1rk41eLwevA" class="wolai-block"><span class="inline-wrap">//关闭连接</span></h4><code-block id="sw5Dpo3xUDmJKU3uaNN2bk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="rJimsJjre6zLCRif6XLCRt" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="pPMHnN4UUSofxc1pxQi2sn" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="3cuYhMwiC162Ei8RfxmCcC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PreparedStatement_</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="dnbzMPwneHz1jyTnUWEVga" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//看 PreparedStatement类图</span></pre></div></code-block><code-block id="hpVEuoUFyzbYa4SC2Rt4AD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">in</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="5h2wq9vjikpJYpJj3ejqzE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//让用户输入管理员名和密码</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span><span class="token string">"请输入管理员的名字: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//next(): 当接收到 空格或者 '就是表示结</span>
束
<span class="token known-class-name class-name">String</span> admin_name <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token method function property-access">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 老师说明，如果希望看到SQL注入，这里需</span>
要用nextLine
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">print</span><span class="token punctuation">(</span><span class="token string">"请输入管理员的密码: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> admin_pwd <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token method function property-access">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="1GWLy9gbahtSEa4mjGwiiq" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//通过Properties对象获取配置文件的信息</span></pre></div></code-block><code-block id="4H4s1ZcjThp6jaKoeYY1hn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取相关的值</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="gAjfXmLyzHiMdKFb3guATY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 注册驱动</span>
<span class="token maybe-class-name">Class</span><span class="token punctuation">.</span><span class="token method function property-access">forName</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//建议写上</span></pre></div></code-block><code-block id="gin317meGrRcKnyewUa9dy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">DriverManager</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="rxmtU72Jd3iT14fGsH1PUU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 得到PreparedStatement</span>
<span class="token comment">//3.1 组织SqL , Sql 语句的? 就相当于占位符</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select name , pwd from admin where name =? and pwd = ?"</span><span class="token punctuation">;</span>
<span class="token comment">//3.2 preparedStatement 对象实现了 PreparedStatement 接口的实现类的对象</span>
<span class="token maybe-class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3.3 给? 赋值</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setString</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> admin_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setString</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">,</span> admin_pwd<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="qfe9Npnqj1RsM54wFc7gq5" class="wolai-block"><span class="inline-wrap">20.2 JDBCUtils</span></h2><h4 id="wbe9EoGtkDHSry2t6v6Vj8" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="253wqd6gzAMseWf3fwhuvQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>可以将其封装<span class="token constant">JDBC</span>连接的工具类JDBCUtils</pre></div></code-block><h4 id="r9sGeQch8DAMbCKLuFwnXf" class="wolai-block"><span class="inline-wrap">封装：</span></h4><code-block id="u18ucidZVk6UoF797L7TNF" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 执行 select 语句使用 executeQuery</span>
<span class="token comment">// 如果执行的是 dml(update, insert ,delete) executeUpdate()</span>
<span class="token comment">// 这里执行 executeQuery ,不要在写 sql</span></pre></div></code-block><code-block id="fRFvKHbpyaRaKRsFDk22hx" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">ResultSet</span> resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果查询到一条记录，则说明该管理存在</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"恭喜， 登录成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"对不起，登录失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="7uVcjqiS2H5ew7TmUFNQQZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//关闭连接</span>
resultSet<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="jLF7RKmRva2mThzBnbyqMn" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils</span> <span class="token punctuation">{</span>
<span class="token comment">//定义相关的属性(4个), 因为只需要一份，因此，我们做出static</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token known-class-name class-name">String</span> user<span class="token punctuation">;</span> <span class="token comment">//用户名</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token known-class-name class-name">String</span> password<span class="token punctuation">;</span> <span class="token comment">//密码</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token known-class-name class-name">String</span> url<span class="token punctuation">;</span> <span class="token comment">//url</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token known-class-name class-name">String</span> driver<span class="token punctuation">;</span> <span class="token comment">//驱动名</span></pre></div></code-block><code-block id="cDxkddWh7nfCTywVwUDyTM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//在static代码块去初始化</span>
<span class="token keyword">static</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="2DdVzFhh8mBMvaRharoAMg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//读取相关的属性值</span>
user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//在实际开发中，我们可以这样处理</span>
<span class="token comment">//1. 将编译异常转成 运行异常</span>
<span class="token comment">//2. 调用者，可以选择捕获该异常，也可以选择默认处理该异常，比较方便.</span></pre></div></code-block><div id="tLx9LH7kRZJB1GKYwX57MR" class="wolai-block wolai-text"><div><span class="inline-wrap">throw new RuntimeException(e);</span></div></div><div id="kwQx2nunpjwF58GSY1dFVu" class="wolai-block wolai-text"><div><span class="inline-wrap">}
}</span></div></div><div id="2U3CaVhk9bHF1CxkHa4uog" class="wolai-block wolai-text"><div><span class="inline-wrap">//连接数据库, 返回 Connection
public static Connection getConnection() {</span></div></div><div id="gbWbKHDBTUyUXGvoQ2zAqP" class="wolai-block wolai-text"><div><span class="inline-wrap">try {
return DriverManager.getConnection(url, user, password);
} catch (SQLException e) {
//1. 将编译异常转成 运行异常
//2. 调用者，可以选择捕获该异常，也可以选择默认处理该异常，比较方便.
throw new RuntimeException(e);
}
}</span></div></div><div id="hFZiYENEndi8ti9MogBPsF" class="wolai-block wolai-text"><div><span class="inline-wrap">//关闭相关资源
/*</span></div></div><ol class="wolai-block"><li id="eGXtYUSsxAtvAhXtwXatta"><div class="marker"></div><span class="inline-wrap">ResultSet 结果集</span></li><li id="5oBBSoTqzwULK3KtkomjLa"><div class="marker"></div><span class="inline-wrap">Statement 或者 PreparedStatement</span></li><li id="oxqaY3t6PdyHvfMfPPpRND"><div class="marker"></div><span class="inline-wrap">Connection</span></li><li id="nh8y9gCh872kmvn2QXyTeN"><div class="marker"></div><span class="inline-wrap">如果需要关闭资源，就传入对象，否则传入 null
*/
public static void close(ResultSet set, Statement statement, Connection
connection) {</span></li></ol><div id="7ghPmyGEKQ3974dB1GUX3V" class="wolai-block wolai-text"><div><span class="inline-wrap">//判断是否为 null
try {
if (set != null) {
set.close();
}
if (statement != null) {
statement.close();
}
if (connection != null) {
connection.close();
}
} catch (SQLException e) {
//将编译异常转成运行异常抛出
throw new RuntimeException(e);
}
}
}</span></div></div><h4 id="hZuenFpobRW8YovJGMa7ib" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="fBaBs73JecZ8jFr3Dx4qvp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtils_Use</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="4Joh82jnGxxGtXY4UdbMBC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSelect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//1. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token comment">//2. 组织一个sql</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from actor where id = ?"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">ResultSet</span> set <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token comment">//3. 创建PreparedStatement 对象</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//com.mysql.jdbc.JDBC4Connection</span>
preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setInt</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//给?号赋值</span>
<span class="token comment">//执行, 得到结果集</span>
set <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//遍历该结果集</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int id <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> sex <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">Date</span> borndate <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getDate</span><span class="token punctuation">(</span><span class="token string">"borndate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> phone <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> borndate
<span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token comment">//关闭资源</span>
<span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="eMaoZaGPWXj4RtjFMi5p4k" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//insert , update, delete</span></pre></div></code-block><code-block id="u1GCbENEJJmSmKQet734ZT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token comment">//2. 组织一个sql</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update actor set name =? where id = ?"</span><span class="token punctuation">;</span>
<span class="token comment">// 测试 delete 和 insert ,自己玩.</span>
<span class="token maybe-class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span></pre></div></code-block><h2 id="c5m8oWHAy9HeAruH6gJvtN" class="wolai-block"><span class="inline-wrap">20.3 事务 ⭐</span></h2><h4 id="5aM1KDPdjTtGeaKokXEYav" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><ol class="wolai-block"><li id="utQB3D5UEZgLs9wvJyXZG1"><div class="marker"></div><span class="inline-wrap">JDBC 程序中当一个 Connection 对象创建时，默认情况下是自动提交事务：每次执行一个 SQL 语句时，
如果执行成功，就会向数据库自动提交，而不能回滚</span></li><li id="qpRwUUeQgVB2s7aJfDD8zB"><div class="marker"></div><span class="inline-wrap">JDBC 程序中为了让多个 SOL 语句作为一个整体执行，需要使用事务</span></li><li id="xhgrP5tsaf5HpYSp6pREKM"><div class="marker"></div><span class="inline-wrap">调用 Connection 的 setAutoCommit(false） 可以取消自动提交事务</span></li><li id="xyAuLQHYNgmpaeLzTuuZBt"><div class="marker"></div><span class="inline-wrap">在所有的 SQL 语句都成功执行后，调用 commit()：方法提交事务</span></li><li id="kGseH5FHVVZfAvu8dSSaHw"><div class="marker"></div><span class="inline-wrap">在其中某个操作失败或出现异常时，调用 rollback()：方法回滚事务</span></li></ol><h4 id="1FWGVs1S6NCjjhLxH53g1Z" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="kanwHix6rBFuPMwfsEcJFU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 创建PreparedStatement 对象</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="8mv1BVikD1y2ouixQ3u9tC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//给占位符赋值</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setString</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">"周星驰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setInt</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//执行</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token comment">//关闭资源</span>
<span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="6xA4jfJ56BUxtqdQcgSqP5" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">useTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="7x5ZGFR69P3VGMrdQaMNQb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//操作转账的业务</span>
<span class="token comment">//1. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token comment">//2. 组织一个sql</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"update account set balance = balance - 100 where id = 1"</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> sql2 <span class="token operator">=</span> <span class="token string">"update account set balance = balance + 100 where id = 2"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token comment">//3. 创建PreparedStatement 对象</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在默认情况下，connection是默认自</span>
动提交
<span class="token comment">//将 connection 设置为不自动提交</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//开启了事务</span>
preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行第 1 条sql</span></pre></div></code-block><h2 id="uBUSRwMtw8jtq9wG86XQxN" class="wolai-block"><span class="inline-wrap">20.4 批处理</span></h2><h4 id="krGhZEVv7vRNLM31uwLbzG" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><ol class="wolai-block"><li id="34kHUMXZKMWtRjHgpEaL1p"><div class="marker"></div><span class="inline-wrap">当需要成批插入或者更新记录时。可以采用 Java 的批量更新机制，这一机制允许多条语句一次性提交给
数据库批量处理</span></li><li id="9TXQsEXvqKrCdGxX7e3J1o"><div class="marker"></div><span class="inline-wrap">JDBC 的批量处理语句包括下面方法：
addBatch()：添加需要批量处理的 SQL 语句或参数
executeBatch()：执行批量处理语句；
clearBatch()：清空批处理包的语句</span></li><li id="xzXJpUsN6u28jTVDgf5F1S"><div class="marker"></div><span class="inline-wrap">JDBC 连接 MySQL 时，如果要使用批处理功能，请再 url 中加参数 ?rewrite BatchedStatements=true</span></li><li id="hZpDdLJ2s5FUSZPcACM3Fa"><div class="marker"></div><span class="inline-wrap">批处理往往和 PreparedStatement 一起搭配使用，可以既减少编译次数，又減少运行次数，效率大大提
高</span></li></ol><h4 id="9F7x5spkg6y666e5wBcehR" class="wolai-block"><span class="inline-wrap">底层：</span></h4><code-block id="6U1UErvC7vGVHq6P2xE5zm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>int i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span> <span class="token punctuation">;</span> <span class="token comment">//抛出异常</span>
preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql2<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 执行第 3 条sql</span></pre></div></code-block><code-block id="dfdXQ4gGuJyvnTQiJT98Tk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//这里提交事务</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="5gYsKzdtvPEh4F6X9q8gbv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//这里我们可以进行回滚，即撤销执行的SQL</span>
<span class="token comment">//默认回滚到事务开始的状态.</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"执行发生了异常，撤销执行的sql"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLException</span> throwables<span class="token punctuation">)</span> <span class="token punctuation">{</span>
throwables<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token comment">//关闭资源</span>
<span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="eYsrkCEWjb3FPYrQZpq4wp" class="wolai-block"><span class="inline-wrap">例：</span></h4><h4 id="vtwqi5MDsurMp6WwPiHQeh" class="wolai-block"><span class="inline-wrap">//使用批量方式添加数据</span></h4><code-block id="a2YS1Jxutpf7sPt75acLMd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">batch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="1Jsxnn5BjhsnLYmebGTPrP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"insert into admin2 values(null, ?, ?)"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"开始执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
long start <span class="token operator">=</span> <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//开始时间</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">50000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//5000执行</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setString</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token string">"jack"</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setString</span><span class="token punctuation">(</span> <span class="token number">2</span> <span class="token punctuation">,</span> <span class="token string">"666"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将sql 语句加入到批处理包中 -> 看源码</span>
<span class="token comment">/*
//1. //第一就创建 ArrayList - elementData => Object[]
//2. elementData => Object[] 就会存放我们预处理的sql语句
//3. 当elementData满后,就按照1.5扩容
//4. 当添加到指定的值后，就executeBatch
//5. 批量处理会减少我们发送sql语句的网络开销，而且减少编译次数，因此效率提高
public void addBatch() throws SQLException {
synchronized(this.checkClosed().getConnectionMutex()) {</span></pre></div></code-block><h2 id="jqT1mjXRdjQ1QNNF13ArCM" class="wolai-block"><span class="inline-wrap">20.5 连接池</span></h2><h4 id="9eMVELdscfwHZwh1bk23w1" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><ol class="wolai-block"><li id="w2bm6gHt7byW4LLEzeARTE"><div class="marker"></div><span class="inline-wrap">传统的 JDBC 数据库连接使用 DriverManager 来获取，每次向数据库建立连接的时候都要将 Connection
加载到内存中，
再验证!P 地址，用户名和密码(0.05s~1s 时间）。需要数据库连接的时候，就向数据库要求一个，频繁地
进行数据库连接操作将占用过多系统资源，容易造成服务器崩溃</span></li><li id="wBJtSEGBDPH1iUifzLjzoL"><div class="marker"></div><span class="inline-wrap">传统数据库连接，每一次数据库连接使用完后都得断开，如果程序出现异常而未能关闭，将导致数据库
内存泄漏，最终将导致重启数据库</span></li><li id="s6ZeTMeEh5enspevoaXZws"><div class="marker"></div><span class="inline-wrap">传统获取连接的方式，不能控制创建的连接数量，如连接过多，也可能导致内存泄漏，MySQL 崩溃</span></li><li id="cD9NSPv4fPfbSXGDznkc5u"><div class="marker"></div><span class="inline-wrap">解解決传统开发中的数据库连接问题，可以采用数据库连接池技术</span></li></ol><code-block id="gLQnyNYJC2ThRpVTUseLSi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">batchedArgs</span> <span class="token operator">==</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="7GoNBtFrkLmCEfZyumGQeL" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">batchedArgs</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="4HgrA8kvdbrTiPB5nbKzYY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">for</span><span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">parameterValues</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">checkAllParametersSet</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">parameterValues</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">parameterStreams</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="1HKGtGGw3JoN6r2x7MebRz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">batchedArgs</span><span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span>
<span class="token class-name">PreparedStatement<span class="token punctuation">.</span>BatchParams</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">parameterValues</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">parameterStreams</span><span class="token punctuation">,</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">isStream</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">streamLengths</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">isNull</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="mbUV1A93ZuWaJ7tF2XqkXz" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token operator">*</span><span class="token operator">/</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当有 1000 条记录时，在批量执行</span>
<span class="token keyword control-flow">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">1000</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//满 1000 条sql</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//清空一把</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">clearBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
long end <span class="token operator">=</span> <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"批量方式 耗时="</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//批量方式 耗时=108</span>
<span class="token comment">//关闭连接</span>
<span class="token maybe-class-name">JDBCUtils</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="nAoMcohwB6dA3uz55UcwGh" class="wolai-block"><span class="inline-wrap">连接池种类：</span></h4><ol class="wolai-block"><li id="hPFZ9RxKs9681DNNdXzozf"><div class="marker"></div><span class="inline-wrap">JDBC 的数据库连按池使用 javax.sql.DataSource 来表示，DataSource 只是一个接口，该接口通常由第
三方提供实现</span></li><li id="31RLBUaRDLwT11xEzN3rSe"><div class="marker"></div><span class="inline-wrap">C3PO 数据库连接池，速度相对较慢，稳定性不错 (hibernate, spring)</span></li><li id="p3UTavnb6QmmtaMhfrquja"><div class="marker"></div><span class="inline-wrap">DBCP 数据库连接池，速度相对 c3p0 较快，但不稳定</span></li><li id="i2Q2Vst2HuGY6HT3uVYsuy"><div class="marker"></div><span class="inline-wrap">Proxoo 数据库连接池，有监控连接池状态的功能，稳定性较 c3po 差一点</span></li><li id="u6fkZVX5aUvV1HrLvpWEH4"><div class="marker"></div><span class="inline-wrap">BoneCP 数据库连接池，速度快</span></li><li id="uBuYsb8ojDPhemScYCEDrJ"><div class="marker"></div><span class="inline-wrap">Druid(德鲁伊)是阿里提供的数据库连接池，集 DBCP、C3P0、Proxool 优点于一身的数据库连接池</span></li></ol><h4 id="5ZdMjXJrXd8MnQ46deswmK" class="wolai-block"><span class="inline-wrap">C3PO:</span></h4><code-block id="rvJmrXaWPxkwVguJh9i6z6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">C3P0_</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="dhsLYEHbTKMvf9EZE1PynA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//方式 1 ： 相关参数，在程序中指定user, url , password等</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testC3P0_01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="v3rGWdxed3sPFduAZsMswr" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 创建一个数据源对象</span>
<span class="token maybe-class-name">ComboPooledDataSource</span> comboPooledDataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ComboPooledDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 通过配置文件mysql.properties 获取相关连接的信息</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\mysql.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//读取相关的属性值</span>
<span class="token known-class-name class-name">String</span> user <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> password <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> url <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> driver <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token method function property-access">getProperty</span><span class="token punctuation">(</span><span class="token string">"driver"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7SL3JHuHVNfShbHMLQd2RD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//给数据源 comboPooledDataSource 设置相关的参数</span>
<span class="token comment">//注意：连接管理是由 comboPooledDataSource 来管理</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token method function property-access">setDriverClass</span><span class="token punctuation">(</span>driver<span class="token punctuation">)</span><span class="token punctuation">;</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token method function property-access">setJdbcUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
comboPooledDataSource<span class="token punctuation">.</span><span class="token method function property-access">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div id="beBv6pcGSbfL1Nvi935rrj" class="wolai-block wolai-text"><div><span class="inline-wrap">comboPooledDataSource.setPassword(password);</span></div></div><div id="gvGR7xcT51XaFtnDCGoMwo" class="wolai-block wolai-text"><div><span class="inline-wrap">//设置初始化连接数
comboPooledDataSource.setInitialPoolSize( 10 );
//最大连接数
comboPooledDataSource.setMaxPoolSize( 50 );
//测试连接池的效率, 测试对 mysql 5000 次操作
long start = System.currentTimeMillis();
for (int i = 0 ; i &lt; 5000 ; i++) {
Connection connection = comboPooledDataSource.getConnection(); //这个方法
就是从 DataSource 接口实现的
//System.out.println(&quot;连接 OK&quot;);
connection.close();
}
long end = System.currentTimeMillis();
//c3p0 5000 连接 mysql 耗时=391
System.out.println(&quot;c3p0 5000 连接 mysql 耗时=&quot; + (end - start));</span></div></div><div id="8A2V5vwGvhnHTNftvUoDYU" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="sTMzMMXNEL9ADpoTSYZhcg" class="wolai-block wolai-text"><div><span class="inline-wrap">//第二种方式 使用配置文件模板来完成</span></div></div><div id="cRuQn1u1nA4Tjz2BiFWZAB" class="wolai-block wolai-text"><div><span class="inline-wrap">//1. 将 c3p0 提供的 c3p0.config.xml 拷⻉到 src 目录下
//2. 该文件指定了连接数据库和连接池的相关参数
@Test
public void testC3P0_02() throws SQLException {</span></div></div><div id="8pro3b7nx8tJouDKa6YrLG" class="wolai-block wolai-text"><div><span class="inline-wrap">ComboPooledDataSource comboPooledDataSource = new
ComboPooledDataSource(&quot;hsp_edu&quot;);</span></div></div><div id="mLU94km3KZSyB8pEFRp5gU" class="wolai-block wolai-text"><div><span class="inline-wrap">//测试 5000 次连接 mysql
long start = System.currentTimeMillis();
System.out.println(&quot;开始执行....&quot;);
for (int i = 0 ; i &lt; 500000 ; i++) {
Connection connection = comboPooledDataSource.getConnection();
//System.out.println(&quot;连接 OK~&quot;);
connection.close();
}
long end = System.currentTimeMillis();
//c3p0 的第二种方式 耗时=413
System.out.println(&quot;c3p0 的第二种方式(500000) 耗时=&quot; + (end - start));//1917</span></div></div><div id="4zo1ntfekrkMFToMqSNYjJ" class="wolai-block wolai-text"><div><span class="inline-wrap">}
}</span></div></div><h4 id="7jcYHk6g5gLJtoVGbiexjk" class="wolai-block"><span class="inline-wrap">Druid：</span></h4><code-block id="voB9V7TK3yQqdpTiiXAcnw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Druid_</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="4P2pXFadEtjZbGTBwir5CZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDruid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">Exception</span> <span class="token punctuation">{</span>
<span class="token comment">//1. 加入 Druid jar包</span>
<span class="token comment">//2. 加入 配置文件 druid.properties , 将该文件拷⻉项目的src目录</span>
<span class="token comment">//3. 创建Properties对象, 读取配置文件</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\druid.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="31ncwHE1CJn3QL4AUaMTHS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 创建一个指定参数的数据库连接池, Druid连接池</span>
<span class="token maybe-class-name">DataSource</span> dataSource <span class="token operator">=</span>
<span class="token maybe-class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token method function property-access">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7Kx2T7B2yozp16P91swhyV" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>long start <span class="token operator">=</span> <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">500000</span> <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//System.out.println("连接成功!");</span>
connection<span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
long end <span class="token operator">=</span> <span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token method function property-access">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//druid连接池 操作 5000 耗时=412</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"druid连接池 操作 500000 耗时="</span> <span class="token operator">+</span> <span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//539</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="3noho36AJK48UQWAHLPLU2" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCUtilsByDruid</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="fUkBwQtvMWQcAK1vpmX3JC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token maybe-class-name">DataSource</span> ds<span class="token punctuation">;</span></pre></div></code-block><code-block id="cTngHd3n3pAuN1UvCdUogD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//在静态代码块完成 ds初始化</span>
<span class="token keyword">static</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
properties<span class="token punctuation">.</span><span class="token method function property-access">load</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">"src\\druid.properties"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ds <span class="token operator">=</span> <span class="token maybe-class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token method function property-access">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="jKoSduhaVfYxVrUMkL38c4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span></pre></div></code-block><code-block id="v4C3H9uhLbseE2XRoxVZHD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//编写getConnection方法</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token maybe-class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">SQLException</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">return</span> ds<span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="1r856UZ6FZia1rSWeUNhKr" class="wolai-block"><span class="inline-wrap">}</span></h4><div id="6QCwbDgjYZLcJiJLGYrZH5" class="wolai-block wolai-text"><div><span class="inline-wrap">//关闭连接, 老师再次强调： 在数据库连接池技术中，close 不是真的断掉连接
//而是把使用的 Connection 对象放回连接池
public static void close(ResultSet resultSet, Statement statement, Connection
connection) {</span></div></div><div id="4FDNFt4zMLpyCYhRqjkxx5" class="wolai-block wolai-text"><div><span class="inline-wrap">try {
if (resultSet != null) {
resultSet.close();
}
if (statement != null) {
statement.close();
}
if (connection != null) {
connection.close();
}
} catch (SQLException e) {
throw new RuntimeException(e);
}
}
}</span></div></div><div id="5QKUcRi7GGRer5EBmfLqCP" class="wolai-block wolai-text"><div><span class="inline-wrap">public class JDBCUtilsByDruid_USE {</span></div></div><div id="e9XRiedBuMmTiWA1ydCuoo" class="wolai-block wolai-text"><div><span class="inline-wrap">@Test
public void testSelect() {</span></div></div><div id="d7fjvX54cbGybypy6u4een" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(&quot;使用 druid 方式完成&quot;);
//1. 得到连接
Connection connection = null;
//2. 组织一个 sql
String sql = &quot;select * from actor where id &gt;= ?&quot;;
PreparedStatement preparedStatement = null;
ResultSet set = null;
//3. 创建 PreparedStatement 对象
try {
connection = JDBCUtilsByDruid.getConnection();
System.out.println(connection.getClass());//运行类型
com.alibaba.druid.pool.DruidPooledConnection
preparedStatement = connection.prepareStatement(sql);
preparedStatement.setInt( 1 , 1 );//给?号赋值
//执行, 得到结果集
set = preparedStatement.executeQuery();</span></div></div><div id="jL4coHx8xhE9fXjGjnEkkw" class="wolai-block wolai-text"><div><span class="inline-wrap">//遍历该结果集
while (set.next()) {
int id = set.getInt(&quot;id&quot;);
String name = set.getString(&quot;name&quot;);//getName()</span></div></div><h2 id="hiYwhf7fYUVaccwU6Fk9is" class="wolai-block"><span class="inline-wrap">20.6 Apache—DBUtils</span></h2><h4 id="5WmvCSrWoyQXWM7GTLRzBn" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><ol class="wolai-block"><li id="cBi4MbWz6GbQDqREGe1CpX"><div class="marker"></div><span class="inline-wrap">commons-dbutils 是 Apache 组织提供的一个开源 JDBC 工具类库，它是对 JDBC 的封装，
使用 dbutils 能极大简化 jdbc 编码的工作量</span></li></ol><h4 id="bg9ScuGo2sL5SPV13WPj9x" class="wolai-block"><span class="inline-wrap">DbUtils：</span></h4><ol class="wolai-block"><li id="mE6kZ297yQxCwp29DLZRLf"><div class="marker"></div><span class="inline-wrap">QueryRunner 类：该类封装了 SQL 的执行，是线程安全的，可以实现增、删、改、查、批处理</span></li><li id="vY6CrypEKLw7ZyGRg4h1im"><div class="marker"></div><span class="inline-wrap">使用 QueryRunner 类实现查询</span></li><li id="7r4UPBrKzrerDUXk2rkXNq"><div class="marker"></div><span class="inline-wrap">ResultSetHandler 接口：该接口用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式</span></li></ol><h4 id="xcHorcn9q2ty4V5VgvNLv9" class="wolai-block"><span class="inline-wrap">DbUtils API：</span></h4><code-block id="vsaLcWYR3wkRi6RqbwZFQH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">ArrayHandler：把结果集中的第一行数据转成对象数组</span>
<span class="token maybe-class-name">ArrayListHandler：把结果集中的每—行数据都转成一个数组，再存放到List中</span>
<span class="token maybe-class-name">BeanHandler：将结果集中的第一行数据封装到一个对应的JavaBean实例中</span>
<span class="token maybe-class-name">BeanListHandler：将结果集中的每一行数据都封装到一个对应的Java</span> <span class="token maybe-class-name">Bean实例中，存放到List中</span>
<span class="token maybe-class-name">ColumnListHandler：将结果集中某一列的数据存放到List中</span>
<span class="token maybe-class-name">ScalarHandle：将结果集中的单行单列的数据存放到List中</span>
<span class="token function"><span class="token maybe-class-name">KeyedHandler</span></span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span>：将结果集中的每行数据都封装到<span class="token known-class-name class-name">Map</span>里，再把这些map再存到一个map里，其
key为指定的key</pre></div></code-block><code-block id="526YVjzCFDJ1L2VPjUkRfh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> sex <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getSex()</span>
<span class="token known-class-name class-name">Date</span> borndate <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getDate</span><span class="token punctuation">(</span><span class="token string">"borndate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> phone <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>id <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> sex <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> borndate
<span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token comment">//关闭资源</span>
<span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="dheP3ugKwhVcxpfTW9nrsA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">MapHandler：将结果集中的第一行数据封装到一个</span><span class="token known-class-name class-name">Map</span>里，key是列名，value就是对</pre></div></code-block><h4 id="fBzAkJkm5rfrZ8PTGcMiev" class="wolai-block"><span class="inline-wrap">土方法：</span></h4><code-block id="j54h2PZTQ86tf2iWj8y9td" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//使用老师的土方法来解决ResultSet =封装=> Arraylist</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token maybe-class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Actor</span><span class="token operator">></span> <span class="token function">testSelectToArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="v7SbgpkttHFN5WLwkF4LC4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"使用 druid方式完成"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1. 得到连接</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token comment">//2. 组织一个sql</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select * from actor where id >= ?"</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">ResultSet</span> set <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Actor</span><span class="token operator">></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建ArrayList对象,存放actor对象</span>
<span class="token comment">//3. 创建PreparedStatement 对象</span>
<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span><span class="token method function property-access">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//运行类型</span>
com<span class="token punctuation">.</span><span class="token property-access">alibaba</span><span class="token punctuation">.</span><span class="token property-access">druid</span><span class="token punctuation">.</span><span class="token property-access">pool</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">DruidPooledConnection</span></span>
preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token method function property-access">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">setInt</span><span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//给?号赋值</span>
<span class="token comment">//执行, 得到结果集</span>
set <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token method function property-access">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="reFJLihcYC7xf2n1vbJoKo" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//遍历该结果集</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>set<span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
int id <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getInt</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> name <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getName()</span>
<span class="token known-class-name class-name">String</span> sex <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"sex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//getSex()</span>
<span class="token known-class-name class-name">Date</span> borndate <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getDate</span><span class="token punctuation">(</span><span class="token string">"borndate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> phone <span class="token operator">=</span> set<span class="token punctuation">.</span><span class="token method function property-access">getString</span><span class="token punctuation">(</span><span class="token string">"phone"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//把得到的resultset 的记录，封装到 Actor对象，放入到list集合</span>
list<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Actor</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> borndate<span class="token punctuation">,</span> phone<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="gA2qD5YKiRfjvtCvVUNmm9" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"list集合数据="</span> <span class="token operator">+</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span><span class="token punctuation">(</span><span class="token maybe-class-name">Actor</span> actor <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"id="</span> <span class="token operator">+</span> actor<span class="token punctuation">.</span><span class="token method function property-access">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\t"</span> <span class="token operator">+</span> actor<span class="token punctuation">.</span><span class="token method function property-access">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="5yRoM1A13WhUKQ3YuQm23c" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
e<span class="token punctuation">.</span><span class="token method function property-access">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">finally</span> <span class="token punctuation">{</span>
<span class="token comment">//关闭资源</span>
<span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span>set<span class="token punctuation">,</span> preparedStatement<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//因为ArrayList 和 connection 没有任何关联，所以该集合可以复用.</span>
<span class="token keyword control-flow">return</span> list<span class="token punctuation">;</span></pre></div></code-block><h4 id="fE5G8pX9RKuQUva77Eezrq" class="wolai-block"><span class="inline-wrap">例：</span></h4><h4 id="4fxrZ8PRSXj7tr1zxh32MD" class="wolai-block"><span class="inline-wrap">}</span></h4><code-block id="sQTw2dEB36E9qFqv2hFP3C" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DBUtils_USE</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="1i51movKwyWnjvGRmUyBmy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//使用apache-DBUtils 工具类 + druid 完成对表的crud操作</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryMany</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">SQLException</span> <span class="token punctuation">{</span> <span class="token comment">//返回结果是多行的情况</span></pre></div></code-block><code-block id="ukQVhqGJr2RZExGpf6aL17" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 得到 连接 (druid)</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 使用 DBUtils 类和接口 , 先引入DBUtils 相关的jar , 加入到本Project</span>
<span class="token comment">//3. 创建 QueryRunner</span>
<span class="token maybe-class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//4. 就可以执行相关的方法，返回ArrayList 结果集</span>
<span class="token comment">//String sql = "select * from actor where id >= ?";</span>
<span class="token comment">// 注意: sql 语句也可以查询部分列</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select id, name from actor where id >= ?"</span><span class="token punctuation">;</span>
<span class="token comment">// 老韩解读</span>
<span class="token comment">//(1) query 方法就是执行sql 语句，得到resultset ---封装到 --> ArrayList 集合中</span>
<span class="token comment">//(2) 返回集合</span>
<span class="token comment">//(3) connection: 连接</span>
<span class="token comment">//(4) sql : 执行的sql语句</span>
<span class="token comment">//(5) new BeanListHandler&lt;>(Actor.class): 在将resultset -> Actor 对象 -> 封装</span>
到 <span class="token maybe-class-name">ArrayList</span>
<span class="token comment">// 底层使用反射机制 去获取Actor 类的属性，然后进行封装</span>
<span class="token comment">//(6) 1 就是给 sql 语句中的? 赋值，可以有多个值，因为是可变参数Object... params</span>
<span class="token comment">//(7) 底层得到的resultset ,会在query 关闭, 关闭PreparedStatment</span>
<span class="token doc-comment comment">/**
* 分析 queryRunner.query方法:
* public &lt;T> T query(Connection conn, String sql, ResultSetHandler&lt;T> rsh,
Object... params) throws SQLException <span class="token punctuation">{</span>
* PreparedStatement stmt = null;//定义PreparedStatement
* ResultSet rs = null;//接收返回的 ResultSet
* Object result = null;//返回ArrayList
*
* try <span class="token punctuation">{</span>
* stmt = this.prepareStatement(conn, sql);//创建
PreparedStatement
* this.fillStatement(stmt, params);//对sql 进行? 赋值
* rs = this.wrap(stmt.executeQuery());//执行sql,返回resultset
* result = rsh.handle(rs);//返回的resultset -->
arrayList[result] [使用到反射，对传入class对象处理]
* <span class="token punctuation">}</span> catch (SQLException var33) <span class="token punctuation">{</span>
* this.rethrow(var33, sql, params);
* <span class="token punctuation">}</span> finally <span class="token punctuation">{</span>
* try <span class="token punctuation">{</span>
* this.close(rs);//关闭resultset</span></pre></div></code-block><ul class="wolai-block"><li id="rWdbQc4WNoSbG3YNhfbkue"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">} finally {</span></li><li id="t3VFHT9eikcTMkUJaJTixR"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">this.close((Statement)stmt);//关闭 preparedstatement 对象</span></li><li id="nDSBEfwn9DvpiCsKp7TQhe"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">}</span></li><li id="hLs5KDzcp5u8NtpFv8xMeH"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">}</span></li><li id="9u9kRzunyodyGUwxzPx79Z"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">return result;</span></li><li id="7XS7HfB8qeVNhiiLdEgVLn"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">}
*/
List</span><span class="inline-wrap"> list =
queryRunner.query(connection, sql, new BeanListHandler&lt;&gt;
(Actor.class), 1 );
System.out.println(&quot;输出集合的信息&quot;);
for (Actor actor : list) {
System.out.print(actor);
}</span></li></ul><h4 id="ncm9zMqsVUxwS1JkzByXWv" class="wolai-block"><span class="inline-wrap">//释放资源</span></h4><div id="ksbys6fsNgGJkSDyuT58vq" class="wolai-block wolai-text"><div><span class="inline-wrap">JDBCUtilsByDruid.close(null, null, connection);</span></div></div><div id="97UTz6G8RWQ5sCtwAHCBwt" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="nTpQMGMKWbauaRbuBX71ku" class="wolai-block wolai-text"><div><span class="inline-wrap">//演示 apache-dbutils + druid 完成 返回的结果是单行记录(单个对象)
@Test
public void testQuerySingle() throws SQLException {</span></div></div><div id="k9Gp2VWbuk1uBUzRM5sGNG" class="wolai-block wolai-text"><div><span class="inline-wrap">//1. 得到 连接 (druid)
Connection connection = JDBCUtilsByDruid.getConnection();
//2. 使用 DBUtils 类和接口 , 先引入 DBUtils 相关的 jar , 加入到本 Project
//3. 创建 QueryRunner
QueryRunner queryRunner = new QueryRunner();
//4. 就可以执行相关的方法，返回单个对象
String sql = &quot;select * from actor where id = ?&quot;;
// 老韩解读
// 因为我们返回的单行记录&lt;---&gt;单个对象 , 使用的 Hander 是 BeanHandler
Actor actor = queryRunner.query(connection, sql, new BeanHandler&lt;&gt;
(Actor.class), 10 );
System.out.println(actor);</span></div></div><div id="9Bup3hYFXqs22X1DEvmhqJ" class="wolai-block wolai-text"><div><span class="inline-wrap">// 释放资源
JDBCUtilsByDruid.close(null, null, connection);</span></div></div><div id="mLLBhJEmzx2DTrwnYzBeLT" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="v4ugRYybtJJifi5wGadZAc" class="wolai-block wolai-text"><div><span class="inline-wrap">//演示 apache-dbutils + druid 完成查询结果是单行单列-返回的就是 object
@Test
public void testScalar() throws SQLException {</span></div></div><div id="hw9HqMHX1Dv9zyqnaZdu8j" class="wolai-block wolai-text"><div><span class="inline-wrap">//1. 得到 连接 (druid)</span></div></div><h2 id="d9iqw7Uc6TzGFkB2udiHcz" class="wolai-block"><span class="inline-wrap">20.7 DAO—BasicDao</span></h2><code-block id="gEQuKfHoXSoSNTvLWyHgQS" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 使用 DBUtils 类和接口 , 先引入DBUtils 相关的jar , 加入到本Project</span>
<span class="token comment">//3. 创建 QueryRunner</span>
<span class="token maybe-class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="jTbZ9rc6ghyLaWQaugjqmt" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 就可以执行相关的方法，返回单行单列 , 返回的就是Object</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"select name from actor where id = ?"</span><span class="token punctuation">;</span>
<span class="token comment">//老师解读： 因为返回的是一个对象, 使用的handler 就是 ScalarHandler</span>
<span class="token known-class-name class-name">Object</span> obj <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token method function property-access">query</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ScalarHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">4</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="eoueGrM3vpYsnWXgQGbUCX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// 释放资源</span>
<span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="dhrQby7xzxV2wsuRJ1hkid" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//演示apache-dbutils + druid 完成 dml (update, insert ,delete)</span>
@<span class="token maybe-class-name">Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDML</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws <span class="token maybe-class-name">SQLException</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="oHymkfPhsyBBsgktEUABPj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 得到 连接 (druid)</span>
<span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 使用 DBUtils 类和接口 , 先引入DBUtils 相关的jar , 加入到本Project</span>
<span class="token comment">//3. 创建 QueryRunner</span>
<span class="token maybe-class-name">QueryRunner</span> queryRunner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="7NJthVXReKedQjJPVcY9aw" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//4. 这里组织sql 完成 update, insert delete</span>
<span class="token comment">//String sql = "update actor set name =? where id = ?";</span>
<span class="token comment">//String sql = "insert into actor values(null, ?, ?, ?, ?)";</span>
<span class="token known-class-name class-name">String</span> sql <span class="token operator">=</span> <span class="token string">"delete from actor where id = ?"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="kDeuHYQjdDRWvgq36QDT7i" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//老韩解读</span>
<span class="token comment">//(1) 执行dml 操作是 queryRunner.update()</span>
<span class="token comment">//(2) 返回的值是受影响的行数 (affected: 受影响)</span>
<span class="token comment">//int affectedRow = queryRunner.update(connection, sql, "林⻘霞", "女",</span>
<span class="token string">"1966-10-10"</span><span class="token punctuation">,</span> <span class="token string">"116"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
int affectedRow <span class="token operator">=</span> queryRunner<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>affectedRow <span class="token operator">></span> <span class="token number">0</span><span class="token operator">?</span> <span class="token string">"执行成功"</span> <span class="token operator">:</span> <span class="token string">"执行没有影响到表"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="6rSGxadX6Tm5quv4ZoZ8ph" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// 释放资源</span>
<span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="8oCCz5gmrmYYRJeQ6kwdnX" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><ol class="wolai-block"><li id="mAV8CaSwtEBFSd5r1YzhDq"><div class="marker"></div><span class="inline-wrap">data access object 效据访向对象</span></li><li id="3ZgtB4DNfSh31iih9SfRim"><div class="marker"></div><span class="inline-wrap">这样的通类，称为 BasicDao，是专⻔和数据库交互的，即完成对数据库的 crud 操作</span></li><li id="i8qGS1UzZ3ts2JYaeHv7xE"><div class="marker"></div><span class="inline-wrap">在 BaiscDao 的基础上，实现一张表 对应一个 Dao，更好的完成功能，比如 Customer 表
Customer.java 类(javabean)—CustomerDao.java</span></li></ol><h4 id="uxaBuuBK4EpnFLijtnGx4d" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="fUSLDqn2ButUJYvqdhTQjj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BasicDAO</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token comment">//泛型指定具体类型</span></pre></div></code-block><code-block id="6H11kXafhttoQDhUz2oudW" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">private</span> <span class="token maybe-class-name">QueryRunner</span> qr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryRunner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="uitphvpP548EcWDCwS5yEp" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//开发通用的dml方法, 针对任意的表</span>
<span class="token keyword">public</span> int <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span> sql<span class="token punctuation">,</span> <span class="token known-class-name class-name">Object</span><span class="token spread operator">...</span> parameters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="fmGycSENYy5Dxr87PxDdeh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="rGS9dX4VwzPQoAGkVwGp1c" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
connection <span class="token operator">=</span> <span class="token maybe-class-name">JDBCUtilsByDruid</span><span class="token punctuation">.</span><span class="token method function property-access">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
int update <span class="token operator">=</span> qr<span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span>connection<span class="token punctuation">,</span> sql<span class="token punctuation">,</span> parameters<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">return</span> update<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span><span class="token maybe-class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将编译异常->运行异常 ,抛出</span></pre></div></code-block><div id="mDbb6nb3sDADyeMxzPB4KT" class="wolai-block wolai-text"><div><span class="inline-wrap">} finally {
JDBCUtilsByDruid.close(null, null, connection);
}</span></div></div><div id="28cpo4cXUzHxGrWGPj4oUA" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="d2K9uDNu1be31YeCypfJ4y" class="wolai-block wolai-text"><div><span class="inline-wrap">//返回多个对象(即查询的结果是多行), 针对任意表</span></div></div><div id="vrexTAd9SYDvJTjFrWPDAY" class="wolai-block wolai-text"><div><span class="inline-wrap">/**</span></div></div><ul class="wolai-block"><li id="11WyXin6djpoz7Nb3dcQkn"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">@param sql sql 语句，可以有?</span></li><li id="wREQA4rTEXpwM6ysqmUJmt"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">@param clazz 传入一个类的 Class 对象 比如 Actor.class</span></li><li id="7JFJoLMbzkpmteThHj5UcS"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">@param parameters 传入? 的具体的值，可以是多个</span></li><li id="sQoMKZ3vcQ27K4VCpSrVBP"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">@return 根据 Actor.class 返回对应的 ArrayList 集合
*/
public List</span><span class="inline-wrap"> queryMulti(String sql, Class</span><span class="inline-wrap"> clazz, Object... parameters) {</span></li></ul><div id="dj4KdgXwiMhWE7GY9nXYkH" class="wolai-block wolai-text"><div><span class="inline-wrap">Connection connection = null;
try {
connection = JDBCUtilsByDruid.getConnection();
return qr.query(connection, sql, new BeanListHandler</span></div></div><div id="gyxsSFrWHGzhcF1FV7qZYp" class="wolai-block wolai-text"><div><span class="inline-wrap">(clazz),
parameters);</span></div></div><div id="oH7nNh7xZrpKqnEqhGqbDD" class="wolai-block wolai-text"><div><span class="inline-wrap">} catch (SQLException e) {
throw new RuntimeException(e); //将编译异常-&gt;运行异常 ,抛出
} finally {
JDBCUtilsByDruid.close(null, null, connection);
}</span></div></div><div id="1Qb2Yyog2n9q9puDzjfAFF" class="wolai-block wolai-text"><div><span class="inline-wrap">}</span></div></div><div id="sixQCF3Uxhrk8J9Xhz177h" class="wolai-block wolai-text"><div><span class="inline-wrap">//查询单行结果 的通用方法
public T querySingle(String sql, Class</span></div></div><div id="nHzkxeSwK7dYC8Gw5YwCpp" class="wolai-block wolai-text"><div><span class="inline-wrap"> clazz, Object... parameters) {</span></div></div><div id="4Xho5wbJpn7FTFn4FSzDYD" class="wolai-block wolai-text"><div><span class="inline-wrap">Connection connection = null;
try {
connection = JDBCUtilsByDruid.getConnection();
return qr.query(connection, sql, new BeanHandler</span></div></div><div id="2ZD8uLp2QjhC3Kc9HJ4imn" class="wolai-block wolai-text"><div><span class="inline-wrap">(clazz),
parameters);</span></div></div><div id="sQxUquM2xLYpXccbMtY7BY" class="wolai-block wolai-text"><div><span class="inline-wrap">} catch (SQLException e) {
throw new RuntimeException(e); //将编译异常-&gt;运行异常 ,抛出
} finally {
JDBCUtilsByDruid.close(null, null, connection);
}
}</span></div></div><div id="wbNSEkCB1UBrnXzkbZHkzC" class="wolai-block wolai-text"><div><span class="inline-wrap">//查询单行单列的方法,即返回单值的方法</span></div></div><div id="v6xL5YugSZ9JRR8gReo8dg" class="wolai-block wolai-text"><div><span class="inline-wrap">public Object queryScalar(String sql, Object... parameters) {</span></div></div><div id="gvSr8sHXDKxJhkMiDmEBuQ" class="wolai-block wolai-text"><div><span class="inline-wrap">Connection connection = null;
try {
connection = JDBCUtilsByDruid.getConnection();
return qr.query(connection, sql, new ScalarHandler(), parameters);</span></div></div><div id="cEFGREuogqHio6eqwag3dt" class="wolai-block wolai-text"><div><span class="inline-wrap">} catch (SQLException e) {
throw new RuntimeException(e); //将编译异常-&gt;运行异常 ,抛出
} finally {
JDBCUtilsByDruid.close(null, null, connection);
}
}
}</span></div></div><div id="33TjK3ry7VTb5Brwd34Vnb" class="wolai-block wolai-text"><div><span class="inline-wrap">public class TestDAO {</span></div></div><div id="a8gBP8SVvd1vL7K27TMuEZ" class="wolai-block wolai-text"><div><span class="inline-wrap">//测试 ActorDAO 对 actor 表 crud 操作
@Test
public void testActorDAO() {</span></div></div><div id="dVhoAqeswvcsroTou44Ykd" class="wolai-block wolai-text"><div><span class="inline-wrap">ActorDAO actorDAO = new ActorDAO();
//1. 查询
List</span></div></div><div id="3as4rkrn858s6NZMUycq1x" class="wolai-block wolai-text"><div><span class="inline-wrap"> actors = actorDAO.queryMulti(&quot;select * from actor where id &gt;=
?&quot;, Actor.class, 1 );
System.out.println(&quot;===查询结果===&quot;);
for (Actor actor : actors) {
System.out.println(actor);
}</span></div></div><div id="vBcLVYTgVYgVdqUK16S1mH" class="wolai-block wolai-text"><div><span class="inline-wrap">//2. 查询单行记录
Actor actor = actorDAO.querySingle(&quot;select * from actor where id = ?&quot;,
Actor.class, 6 );
System.out.println(&quot;====查询单行结果====&quot;);
System.out.println(actor);</span></div></div><div id="rECmeHx83Rjrrfa5qYz5VW" class="wolai-block wolai-text"><div><span class="inline-wrap">//3. 查询单行单列
Object o = actorDAO.queryScalar(&quot;select name from actor where id = ?&quot;, 6 );
System.out.println(&quot;====查询单行单列值===&quot;);
System.out.println(o);</span></div></div><div id="1hBgkvWhAcxVNzHB2TLvDb" class="wolai-block wolai-text"><div><span class="inline-wrap">//4. dml 操作 insert ,update, delete
int update = actorDAO.update(&quot;insert into actor values(null, ?, ?, ?, ?)&quot;,
&quot;张无忌&quot;, &quot;男&quot;, &quot;2000-11-11&quot;, &quot;999&quot;);</span></div></div><div id="r97yPFuW32zidxUyXh2fsT" class="wolai-block wolai-text"><div><span class="inline-wrap">System.out.println(update &gt; 0? &quot;执行成功&quot; : &quot;执行没有影响表&quot;);
}
}</span></div></div><h1 id="cj4LGhSd6UXYdorvpPp3vo" class="wolai-block"><span class="inline-wrap">21 正则表达式</span></h1><h4 id="dQjzkpvYRm6xYxYj16u3jS" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="ueZPzhqgSc4WAbRbDRXaQo" class="wolai-block"><span class="inline-wrap">用某种模式去匹配字符串的一个公式</span></h4><h4 id="7R3iTv9o5xXKF24ikGkxyT" class="wolai-block"><span class="inline-wrap">底层实现： ⭐</span></h4><code-block id="6YseHs3CoD9r24mAwgb8M6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegTheory</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="k6wjEqzt3cofMV1SDVz167" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token known-class-name class-name">String</span> content <span class="token operator">=</span> "<span class="token number">1998</span>年 <span class="token number">12</span> 月 <span class="token number">8</span> 日，第二代Java平台的企业版<span class="token constant">J2EE</span>发布。 <span class="token number">1999</span> 年 <span class="token number">6</span> 月，Sun公
司发布了" <span class="token operator">+</span>
"第二代Java平台（简称为Java2）的 <span class="token number">3</span> 个版本：<span class="token constant">J2ME</span>（Java2 <span class="token maybe-class-name">Micro</span> <span class="token maybe-class-name">Edition，Java2</span>
平台的微型" <span class="token operator">+</span>
"版），应用于移动、无线及有限资源的环境；<span class="token constant">J2SE</span>（Java <span class="token number">2</span> <span class="token maybe-class-name">Standard</span> <span class="token maybe-class-name">Edition，</span>
<span class="token maybe-class-name">Java</span> <span class="token number">2</span>平台的" <span class="token operator">+</span>
"标准版），应用于桌面环境；<span class="token constant">J2EE</span>（Java <span class="token number">2</span><span class="token maybe-class-name">Enterprise</span> <span class="token maybe-class-name">Edition，Java</span> <span class="token number">2</span>平台的企
业版），应" <span class="token operator">+</span>
"用 <span class="token number">3443</span> 于基于Java的应用服务器。Java <span class="token number">2</span>平台的发布，是Java发展过程中最重要的一
个" <span class="token operator">+</span>
<span class="token string">"里程碑，标志着Java的应用开始普及9889 "</span><span class="token punctuation">;</span>
<span class="token comment">//目标：匹配所有四个数字</span>
<span class="token comment">//说明</span>
<span class="token comment">//1. \\d 表示一个任意的数字</span>
<span class="token known-class-name class-name">String</span> regStr <span class="token operator">=</span> <span class="token string">"(\\d\\d)(\\d\\d)"</span><span class="token punctuation">;</span>
<span class="token comment">//2. 创建模式对象[即正则表达式对象]</span>
<span class="token maybe-class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token maybe-class-name">Pattern</span><span class="token punctuation">.</span><span class="token method function property-access">compile</span><span class="token punctuation">(</span>regStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3. 创建匹配器</span>
<span class="token comment">//说明：创建匹配器matcher， 按照 正则表达式的规则 去匹配 content字符串</span>
<span class="token maybe-class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token method function property-access">matcher</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><h4 id="8mczeRiJcFWiXiueqPotkP" class="wolai-block"><span class="inline-wrap">//4.开始匹配</span></h4><h4 id="sLmf1PY5VT6iBBMvT6STQU" class="wolai-block"><span class="inline-wrap">/**</span></h4><h4 id="e1djMenSc1wFd1KzGEsj5M" class="wolai-block"><span class="inline-wrap">*</span></h4><ul class="wolai-block"><li id="ejmiP5RecQtfUvsp92Dnwr"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">matcher.find() 完成的任务 （考虑分组）</span></li><li id="d9zkQS27BYbapGHCdzEAdr"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">什么是分组，比如 (\d\d)(\d\d) ,正则表达式中有() 表示分组,第 1 个()表示第 1 组,第 2 个
()表示第 2 组...</span></li><li id="1c19sZ6MnNEixTy4x2Nw9C"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><ol class="wolai-block"><li id="9msfjio74ziVDvRK7gXvA4"><div class="marker"></div><span class="inline-wrap">根据指定的规则 ,定位满足规则的子字符串(比如(19)(98))</span></li></ol></li><li id="kzCCgu2aLRyncuxuQHuajz"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><ol class="wolai-block"><li id="nqay6mBxNotkBNm9rzXz9X"><div class="marker"></div><span class="inline-wrap">找到后，将 子字符串的开始的索引记录到 matcher 对象的属性 int[] groups;</span></li></ol></li><li id="9bNdvqZeagcLxa1MoTjh4m"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">2.1 groups[0] = 0 , 把该子字符串的结束的索引<span class="jill"></span>+1 的值记录到 groups[1] = 4</span></li><li id="ayhVjBD75Bvso4wXNPdreo"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">2.2 记录 1 组()匹配到的字符串 groups[2] = 0 groups[3] = 2</span></li><li id="o8ADcm1aPX43oVGqbv9ERS"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">2.3 记录 2 组()匹配到的字符串 groups[4] = 2 groups[5] = 4</span></li><li id="6KfRZw8mXxUzwFSLq9x6WH"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">2.4.如果有更多的分组.....</span></li><li id="pFieN5u4kQf1a33G2ESsCB"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><ol class="wolai-block"><li id="op91QQHbko2G9d6KysiH8b"><div class="marker"></div><span class="inline-wrap">同时记录 oldLast 的值为 子字符串的结束的 索引<span class="jill"></span>+1 的值即 35, 即下次执行 find 时，就从
35 开始匹配</span></li></ol></li><li id="9PQd2aE4JZvCDQe9cXfWt9"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">matcher.group(0) 分析</span></li><li id="axVb3qxZ3yc2XNGWwaykLr"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">源码:</span></li><li id="7ZYg1s9Y19xdE9VsWXC8K4"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">public String group(int group) {</span></li><li id="hX7N4w2jy8sMMhZfFdq6EG"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">if (first &lt; 0)</span></li><li id="e3k85GCUjko6GmcYgKsewu"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">throw new IllegalStateException(&quot;No match found&quot;);</span></li><li id="wfaJErdowKSwdYF3z2BeuF"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">if (group &lt; 0 || group &gt; groupCount())</span></li><li id="kkGfFbfMJj16A5xdGcAZb5"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">throw new IndexOutOfBoundsException(&quot;No group &quot; + group);</span></li><li id="fikqjoxpkoJ8x3aZk6TFgz"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">if ((groups[group</span><span class="inline-wrap"><i>2] == -1) || (groups[group</i></span><span class="inline-wrap">2+1] == -1))</span></li><li id="cYgYcdbSqoQfjBNHzHcDym"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">return null;</span></li><li id="qge3iuCPw6qP8cVrxV2mEc"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">return getSubSequence(groups[group * 2], groups[group * 2 +
1]).toString();</span></li><li id="uRhYh9t35XSFx6ohmZ85em"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">}</span></li><li id="bJcqBqpYDyAkYU9s9HX8hW"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><ol class="wolai-block"><li id="6LQSrMrwMXpTwHyXLK3Rr1"><div class="marker"></div><span class="inline-wrap">根据 groups[0]=31 和 groups[1]=35 的记录的位置，从 content 开始截取子字符串返
回</span></li></ol></li><li id="mdt7jdMiUL2mVSxonkyQzZ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">就是 [31,35) 包含 31 但是不包含索引为 35 的位置</span></li><li id="1F84t5g1wPCnPQgd18xoZf"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">如果再次指向 find 方法.仍然安上面分析来执行
*/
while (matcher.find()) {
//小结
//1. 如果正则表达式有() 即分组
//2. 取出匹配的字符串规则如下
//3. group(0) 表示匹配到的子字符串
//4. group(1) 表示匹配到的子字符串的第 1 组字串
//5. group(2) 表示匹配到的子字符串的第 2 组字串
//6. ... 但是分组的数不能越界.
System.out.println(&quot;找到: &quot; + matcher.group( 0 ));
System.out.println(&quot;第 1 组()匹配到的值=&quot; + matcher.group( 1 ));
System.out.println(&quot;第 2 组()匹配到的值=&quot; + matcher.group( 2 ));</span></li></ul><h4 id="21Qzm1vb32xCqfXK27VqAC" class="wolai-block"><span class="inline-wrap">}</span></h4><h2 id="mMpe2w5r8aHYxJBWmTwEBh" class="wolai-block"><span class="inline-wrap">21.1 基本语法</span></h2><h4 id="jjeNYPqBfiYRH5yW8B4nBf" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><h4 id="ncYQdVNxz5sJg72se1NP4X" class="wolai-block"><span class="inline-wrap">如果要想灵活的运用正则表达式，必须了解其中各种元字符的功能，元字符从功能上大致分为：</span></h4><h4 id="nzfCj2JR4BBjFHbm4tHPT3" class="wolai-block"><span class="inline-wrap">1. 限定符</span></h4><h4 id="qT1pviAg1J3BzM2ee9bAkA" class="wolai-block"><span class="inline-wrap">2. 选择匹配符</span></h4><h4 id="ifzHYixEo4WtVC6gokpCs5" class="wolai-block"><span class="inline-wrap">3. 分组组合和反向引用符</span></h4><h4 id="fjLbtnyQCqLCuamV816zvy" class="wolai-block"><span class="inline-wrap">4. 特殊字符</span></h4><h4 id="tBXJixSRDFGZZ33RRbk9fY" class="wolai-block"><span class="inline-wrap">5. 字符匹配符</span></h4><h4 id="ehrsrEeSryEabW9uhoG6UU" class="wolai-block"><span class="inline-wrap">6. 定位符</span></h4><h4 id="rGPcAUkS3P4dSx8h7Wx5Ni" class="wolai-block"><span class="inline-wrap">转义符 //</span></h4><h4 id="cXU43huebZQuxHYjMFeiRn" class="wolai-block"><span class="inline-wrap">需要用到转义符号的字符有以下：. *+()$/[]^{}</span></h4><h4 id="2sDAkYcCssEWJa6vVwyWfX" class="wolai-block"><span class="inline-wrap">字符匹配符：</span></h4><h4 id="6JYyH68hQrdx3Yg6fEFVbj" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="aJa1EFXEBVUxtwnhq4FYFJ" class="wolai-block"><span class="inline-wrap">}</span></h4><h4 id="nbuVHu7nC7m7j9LhbCN5iM" class="wolai-block"><span class="inline-wrap">选择匹配符：</span></h4><h4 id="6snuHQSuagPyens8wp94NB" class="wolai-block"><span class="inline-wrap">限定符：</span></h4><h4 id="tcrHDvq6Vg7Li68GCqr5kh" class="wolai-block"><span class="inline-wrap">定位符：</span></h4><h2 id="4c1crsPz9GmPrb6eiiT4Qy" class="wolai-block"><span class="inline-wrap">21.2 分组、捕获、反向引用</span></h2><h4 id="hw1CVswS5oZfQQR9LWJHYb" class="wolai-block"><span class="inline-wrap">分组：</span></h4><h4 id="jNLU1C7WZKDYj1ERJhaH8t" class="wolai-block"><span class="inline-wrap">我们可以用圆括号组成个比较复杂的匹配模式，那么一个圆括号的部分我们可以看作是一个子表达式/一个分</span></h4><h4 id="1iNEiSH4JN5NquBPhZqqdw" class="wolai-block"><span class="inline-wrap">台品</span></h4><h4 id="jZry94CQf6LQPWCLn6SmnU" class="wolai-block"><span class="inline-wrap">捕获：</span></h4><h4 id="ow8pRpC5CNjdjFGntppkNL" class="wolai-block"><span class="inline-wrap">把正则表达式中子表达式/分组匹配的内容，保存到内存中以数字编号或显式命名的组里，方便后面引用，从</span></h4><h4 id="t3TXKc7v7tp9NUSsoWnox8" class="wolai-block"><span class="inline-wrap">左向右，以分组的左括号为标志，第一个出现的分组的组号为 1 ，第二个为 2 ，以此类推。组 O 代表的是整个正</span></h4><h4 id="81nzd4pEqV4aZnjpqtE6sM" class="wolai-block"><span class="inline-wrap">则式</span></h4><h4 id="hvSyfys2tURM1pdVsi2q9i" class="wolai-block"><span class="inline-wrap">反向引用：</span></h4><h4 id="ro6Mf7fbLQQWAeHMrWz4wG" class="wolai-block"><span class="inline-wrap">圆括号的内容被捕获后，可以在这个括号后被使用，从而写出-一个比较实用的匹配模式，这个我们称为反向</span></h4><h4 id="mAaNNSjG5aYMbtdwbQaaiZ" class="wolai-block"><span class="inline-wrap">引用，这种引用既可以是在正则表达式内部，也可以是在正则表达式外部，内部反向引用 11 分组号，外部反</span></h4><h4 id="pw3nkv4b3QYWkq9pzQfxBA" class="wolai-block"><span class="inline-wrap">向引用 ＄分组号</span></h4><h2 id="j5KnWBpea9y9xSshmQMYYg" class="wolai-block"><span class="inline-wrap">21.3 常用类</span></h2><code-block id="xvUJYRijnTvHX5Vx9Bf9R4" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RegExp13</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> content <span class="token operator">=</span> <span class="token string">"我....我要....学学学学....编程java!"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="krpZb6iBCxEHF9wJqh7kmu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//1. 去掉所有的.</span></pre></div></code-block><code-block id="gBdoHmrKPHqF3Jwjgjf1jT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token maybe-class-name">Pattern</span><span class="token punctuation">.</span><span class="token method function property-access">compile</span><span class="token punctuation">(</span><span class="token string">"\\."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token method function property-access">matcher</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
content <span class="token operator">=</span> matcher<span class="token punctuation">.</span><span class="token method function property-access">replaceAll</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="vPhi7FmpgsHugzTh7PSqvg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">// System.out.println("content=" + content);</span></pre></div></code-block><code-block id="87KSd9ezzSoGrsKJwRAtMQ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//2. 去掉重复的字 我我要学学学学编程java!</span>
<span class="token comment">// 思路</span>
<span class="token comment">//(1) 使用 (.)\\1+</span>
<span class="token comment">//(2) 使用 反向引用$1 来替换匹配到的内容</span>
<span class="token comment">// 注意：因为正则表达式变化，所以需要重置 matcher</span>
<span class="token comment">// pattern = Pattern.compile("(.)\\1+");//分组的捕获内容记录到$1</span>
<span class="token comment">// matcher = pattern.matcher(content);</span>
<span class="token comment">// while (matcher.find()) {</span>
<span class="token comment">// System.out.println("找到=" + matcher.group(0));</span>
<span class="token comment">// }</span>
<span class="token comment">//</span>
<span class="token comment">// //使用 反向引用$1 来替换匹配到的内容</span>
<span class="token comment">// content = matcher.replaceAll("$1");</span>
<span class="token comment">// System.out.println("content=" + content);</span></pre></div></code-block><code-block id="aqGDMK9mVceN4YzWZQsEvb" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//3. 使用一条语句 去掉重复的字 我我要学学学学编程java!</span>
content <span class="token operator">=</span> <span class="token maybe-class-name">Pattern</span><span class="token punctuation">.</span><span class="token method function property-access">compile</span><span class="token punctuation">(</span><span class="token string">"(.)\\1+"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">matcher</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">replaceAll</span><span class="token punctuation">(</span><span class="token string">"$1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="t2ARm3LiZB5iygnE4Wx3tM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"content="</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h3 id="6Lzs3Hf4husfchBNzdthsU" class="wolai-block"><span class="inline-wrap">21.3.1 Pattern</span></h3><h4 id="3X1pSh8MJJ6JZ9NWJbDhwj" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="9cWjKyEtG7xG43E87mR7XJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>pattern 对象是一个正则表达式对象。Pattern 类没有公共构造方法。要创建一个 <span class="token maybe-class-name">Pattern</span> 对象，调用其公共
静态方法，它返回一个 <span class="token maybe-class-name">Pattern</span> 对象。该方法接受一个正则表达式作为它的第个参数</pre></div></code-block><h4 id="nDcuRmrSRiVDupw3nSBLQK" class="wolai-block"><span class="inline-wrap">例：</span></h4><h3 id="gGXU1SsHzGJPNamMVyhWyD" class="wolai-block"><span class="inline-wrap">21.3.2 Matcher</span></h3><h4 id="7VnQgS7ekrmHksTXA7YHt9" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="axNv2cw5KjPMxemNP6FuhN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Matcher</span> 对象是对输入字符串进行解释和匹配的引擎。与Pattern 类一样，Matcher 也没有公共构造方法。你
需要调用 <span class="token maybe-class-name">Pattern</span> 对象的matcher 方法来获得一个 <span class="token maybe-class-name">Matcher</span> 对象</pre></div></code-block><code-block id="vM8qNTUkpnKuxvrPqwfzBP" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PatternMethod</span> <span class="token punctuation">{</span></pre></div></code-block><code-block id="oX3oLhJQSu94zbkDZr1dMC" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> content <span class="token operator">=</span> <span class="token string">"hello abc hello, 韩顺平教育"</span><span class="token punctuation">;</span>
<span class="token comment">//String regStr = "hello";</span>
<span class="token known-class-name class-name">String</span> regStr <span class="token operator">=</span> <span class="token string">"hello.*"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="1nA68Syne5BRKxAFnMHmsH" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>boolean matches <span class="token operator">=</span> <span class="token maybe-class-name">Pattern</span><span class="token punctuation">.</span><span class="token method function property-access">matches</span><span class="token punctuation">(</span>regStr<span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"整体匹配= "</span> <span class="token operator">+</span> matches<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h4 id="6R3PeCY1Cmp81E6UUsLu8K" class="wolai-block"><span class="inline-wrap">例：</span></h4><code-block id="cWz76XkQqC5mcrP4XPEAEB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MatcherMethod</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token parameter"><span class="token known-class-name class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token known-class-name class-name">String</span> content <span class="token operator">=</span> "hello edu jack hspedutom hello smith hello hspedu
hspedu"<span class="token punctuation">;</span>
<span class="token known-class-name class-name">String</span> regStr <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="vgBfZBVN2FmnPcLmamtxVD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">Pattern</span> pattern <span class="token operator">=</span> <span class="token maybe-class-name">Pattern</span><span class="token punctuation">.</span><span class="token method function property-access">compile</span><span class="token punctuation">(</span>regStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">Matcher</span> matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token method function property-access">matcher</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"================="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token method function property-access">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"找到: "</span> <span class="token operator">+</span> content<span class="token punctuation">.</span><span class="token method function property-access">substring</span><span class="token punctuation">(</span>matcher<span class="token punctuation">.</span><span class="token method function property-access">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
matcher<span class="token punctuation">.</span><span class="token method function property-access">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><code-block id="h686SyZa37LumcSuXNARn9" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//整体匹配方法，常用于，去校验某个字符串是否满足某个规则</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"整体匹配="</span> <span class="token operator">+</span> matcher<span class="token punctuation">.</span><span class="token method function property-access">matches</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="4GC4hH8oPNdi41aeZ27bMB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token comment">//完成如果content 有 hspedu 替换成 韩顺平教育</span>
regStr <span class="token operator">=</span> <span class="token string">"hspedu"</span><span class="token punctuation">;</span>
pattern <span class="token operator">=</span> <span class="token maybe-class-name">Pattern</span><span class="token punctuation">.</span><span class="token method function property-access">compile</span><span class="token punctuation">(</span>regStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
matcher <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token method function property-access">matcher</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//注意：返回的字符串才是替换后的字符串 原来的 content 不变化</span>
<span class="token known-class-name class-name">String</span> newContent <span class="token operator">=</span> matcher<span class="token punctuation">.</span><span class="token method function property-access">replaceAll</span><span class="token punctuation">(</span><span class="token string">"韩顺平教育"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"newContent="</span> <span class="token operator">+</span> newContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token maybe-class-name">System</span><span class="token punctuation">.</span><span class="token property-access">out</span><span class="token punctuation">.</span><span class="token method function property-access">println</span><span class="token punctuation">(</span><span class="token string">"content="</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><code-block id="2SqtMrfLPsDL1aXmrvDyZU" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><h3 id="6VH6wzdGgYAXCeuDz8EaWd" class="wolai-block"><span class="inline-wrap">21.3.3 PatternSyntaxException</span></h3><h4 id="gjR6Zx1gVSkhd8Ls72QbFW" class="wolai-block"><span class="inline-wrap">基本介绍：</span></h4><code-block id="jQ1srBxveS82pykcH5PF3g" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">PatternSyntaxException是一个非强制异常类，他表示一个正则表达式模式中的语法错误</span></pre></div></code-block></article><footer></footer></body></html>